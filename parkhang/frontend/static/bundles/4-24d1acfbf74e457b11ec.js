(window.webpackJsonpparkhang=window.webpackJsonpparkhang||[]).push([[4],{1007:function(e,t,n){e.exports={fontSize:"FontSize---fontSize"}},1009:function(e,t,n){e.exports={highlight:"SearchStyle---highlight",searchListItem:"SearchStyle---searchListItem"}},1010:function(e,t,n){e.exports={placeholder:"Placeholder---placeholder",example:"Placeholder---example"}},1022:function(e,t,n){e.exports={shareContainer:"Sharebutton---shareContainer",shareButton:"Sharebutton---shareButton",facebookButton:"Sharebutton---facebookButton",whatsappButton:"Sharebutton---whatsappButton"}},1023:function(e,t,n){e.exports={voteBtn:"Vote---voteBtn",number:"Vote---number",voteContainer:"Vote---voteContainer"}},1025:function(e,t,n){e.exports={heading:"AnnotationControlsHeading---heading",title:"AnnotationControlsHeading---title",button:"AnnotationControlsHeading---button"}},1026:function(e,t,n){e.exports={"green-tint":"#88af8e","blue-tint":"#024279","active-button":"#00746b",mainTint:"#024279",activeButton:"#00746b",button:"AddButton---button"}},1027:function(e,t,n){e.exports={"green-tint":"#88af8e","blue-tint":"#024279","active-button":"#00746b",mainTint:"#024279",activeButton:"#00746b",editorContainer:"NoteEditor---editorContainer",textEditor:"NoteEditor---textEditor"}},1028:function(e,t,n){e.exports={question:"QuestionView---question",threadLink:"QuestionView---threadLink"}},1029:function(e,t,n){e.exports={name:"AnswerView---name",answer:"AnswerView---answer"}},1030:function(e,t,n){e.exports={"green-tint":"#88af8e","blue-tint":"#024279","active-button":"#00746b",mainTint:"#024279",activeButton:"#00746b",editorContainer:"QuestionEditor---editorContainer",textEditor:"QuestionEditor---textEditor"}},1031:function(e,t,n){e.exports={loading:"QuestionsLoading---loading"}},1032:function(e,t,n){e.exports={"green-tint":"#88af8e","blue-tint":"#024279","active-button":"#00746b",mainTint:"#024279",activeButton:"#00746b",note:"Note---note",header:"Note---header",info:"Note---info",content:"Note---content",delete:"Note---delete"}},1033:function(e,t,n){e.exports={"green-tint":"#88af8e","blue-tint":"#024279","active-button":"#00746b",mainTint:"#024279",activeButton:"#00746b",header:"AnnotationControlsHeader---header",Anotation_closeBtn:"AnnotationControlsHeader---Anotation_closeBtn",edit:"AnnotationControlsHeader---edit"}},1036:function(e,t,n){e.exports={highlight:"SearchStyle---highlight",searchListItem:"SearchStyle---searchListItem"}},1037:function(e,t,n){e.exports={TableContent:"TableOfContent---TableContent"}},1039:function(e,t,n){e.exports={voteBtn:"embedingVote---voteBtn"}},1082:function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"HomePage",(function(){return ls})),n.d(r,"Editors",(function(){return cs})),n.d(r,"Vote",(function(){return ss})),n.d(r,"NotFound",(function(){return us}));var o=n(0),i=n.n(o),a=(n(856),n(826)),l=n.n(a),c=n(69),s=n(916),u=n.n(s),f=n(90),d=n(42),p=n(272),h=n.n(p),m=n(840),y=n.n(m),g=n(917),b=n.n(g),v=n(918),w=n.n(v),O={ADD:"+",DELETE:"×"},x=function(e){var t={};return t.backgroundColor=e.backgroundColor||"",t.color=e.color||"#fff",i.a.createElement("div",{className:w.a.accessory,title:e.title,onClick:e.onClick,style:t},O[e.type])},S=n(174),E=n(803),T=function(e){var t=e.children,n=e.tooltipName,r=e.format,o=void 0===r?null:r,a=e.className,l=void 0===a?"":a,c=e.shortcut,s=void 0===c?"":c,u=e.on,f=void 0!==u&&u;return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{"data-tip":!0,"data-for":n,className:l,style:{width:"100%"}},f?t:i.a.createElement(E.a,{placement:"top",followCursor:!0,title:o?i.a.createElement(S.a,{id:o}):i.a.createElement("span",null,n," [".concat(s,"]"))},t)))};function j(e){return(j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function I(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function A(e,t){return(A=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function P(e){return(P=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var k,C=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&A(e,t)}(n,i.a.Component);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=P(e);if(t){var o=P(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===j(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}(n);function n(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),t.apply(this,arguments)}return function(e,t,n){t&&I(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"render",value:function(){var e=this.props.color||"#ffffff",t=this.props.backgroundColor||y.a.mainTint,n=this.props.fontSize||"14px",r=this.props.noBezel?[b.a.buttonNoBezel]:[b.a.button],o=this.props.tooltipTitle||"";this.props.isActive&&r.push(b.a.active);var a=h.a.apply(void 0,r),l=this.props.shortcut||"",c={fontSize:n,color:e,backgroundColor:t};return this.props.align&&(c.textAlign=this.props.align),i.a.createElement(T,{tooltipName:o,shortcut:l,on:this.props.disabled},i.a.createElement("button",{style:c,className:a,onClick:this.props.onClick,disabled:this.props.disabled},this.props.icon&&i.a.createElement("div",{className:b.a.icon},this.props.icon),this.props.title&&i.a.createElement("span",{className:b.a.title},this.props.title),this.props.accessoryType&&i.a.createElement(x,{type:this.props.accessoryType})))}}]),n}();function R(){return(R=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var _=function(e){return i.a.createElement("svg",R({width:24,height:24},e),k||(k=i.a.createElement("path",{d:"M9 2C5.146 2 2 5.146 2 9s3.146 7 7 7a6.959 6.959 0 004.574-1.719l.426.426V16l6 6 2-2-6-6h-1.293l-.426-.426A6.959 6.959 0 0016 9c0-3.854-3.146-7-7-7zm0 2c2.773 0 5 2.227 5 5s-2.227 5-5 5-5-2.227-5-5 2.227-5 5-5z"})))};function B(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var W=Object(d.c)((function(e){var t=i.a.createRef(),n=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return B(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?B(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(Object(o.useTransition)(),2),r=(n[0],n[1]),a=function(n){if(n.preventDefault(),t.current instanceof HTMLInputElement){var o=t.current.value;r((function(){e.searchChanged(o)}))}};return console.log(e.textListWidth),i.a.createElement("div",{className:u.a.textsSearchContainer,style:{maxWidth:e.textListWidth}},i.a.createElement("div",{className:u.a.textsSearch},i.a.createElement("form",{onSubmit:a},i.a.createElement("input",{onChange:function(t){r((function(){""!==t.target.value?e.searchChanged(t.target.value):e.searchChanged(null)}))},style:{outline:"none",width:150},type:"text",id:"textSearchInput",placeholder:e.intl.formatMessage({id:"leftbar.search"}),ref:t}),i.a.createElement(C,{backgroundColor:"#35BF5C",onClick:a,noBezel:!0,icon:i.a.createElement(_,null)}))))})),N=n(2),L=n(7),D=(Object(c.connect)((function(e){return{searchTerm:L.C(e),searchValue:e.ui.searchValue,textListWidth:L.eb(e)}}),(function(e){return{searchChanged:function(t){e(Object(N.bc)(t))}}}))(W),n(838)),H=n(828),z=(n(847),n(837)),M=(n(12),n(280)),q=n(861),V=n.n(q),F=n(827),U=n.n(F),Q=n(849),J=n.n(Q);function $(e){return($="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function K(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function G(e,t){return(G=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Y(e){return(Y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Z=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&G(e,t)}(n,o.Component);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Y(e);if(t){var o=Y(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===$(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}(n);function n(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),t.call(this,e)}return function(e,t,n){t&&K(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"render",value:function(){var e=this,t=this.props.string,n=t,r=this.props.stringClass||"";if(this.props.searchTerm){var i=this.props.searchTerm,a=(new U.a).splitGraphemes(t),l=t.indexOf(i),c=l+i.length,s=0,u="";if(l>-1)for(var f=0;f<a.length;f++){var d=a[f];s>=l&&s<c&&(u+=d),s+=d.length}u.length>0&&(n=J()(t,u,(function(t,n){return o.createElement("span",{className:e.props.highlightClass,key:"highlight-".concat(n)},t)})))}return o.createElement("span",{className:r},n)}}]),n}();function X(e){return(X="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ee(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function te(e,t){return(te=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function ne(e){return(ne=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var re=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&te(e,t)}(n,o.Component);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ne(e);if(t){var o=ne(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===X(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}(n);function n(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),t.call(this,e)}return function(e,t,n){t&&ee(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"render",value:function(){var e=this.props.count;return this.props.extra&&(e+="+"),o.createElement("span",{className:V.a.searchTotal},e)}}]),n}(),oe=n(933),ie=n.n(oe);function ae(e){var t;return t=e.loading?i.a.createElement("span",null,i.a.createElement(S.a,{id:"leftbar.loading"})):i.a.createElement("span",null,i.a.createElement(S.a,{id:"leftbar.loadMore"})),i.a.createElement("div",{className:ie.a.container},t)}function le(e){return(le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ce(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function se(e,t){return(se=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function ue(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function fe(e){return(fe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var de=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&se(e,t)}(n,i.a.Component);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=fe(e);if(t){var o=fe(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===le(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ue(e)}(this,n)}}(n);function n(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(r=t.call(this,e)).cache=new H.b({fixedWidth:!0,defaultHeight:60,minHeight:60}),r.rowRenderer=r.rowRenderer.bind(ue(r)),r}return function(e,t,n){t&&ce(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"componentDidUpdate",value:function(e){this.cache.clearAll(),this.list&&this.list.forceUpdateGrid()}},{key:"componentDidMount",value:function(){}},{key:"rowRenderer",value:function(e){var t=this,n=e.key,r=e.index,o=e.parent,a=e.style,l=this.props.selectedText,c=l?l.id:-1,s=this.props.selectedSearchResult,u=this.props.texts,f=this.props.onSelectedText,d=this.props.onSelectedSearchResult,p=this.props.searchTerm,m=this.props.searchResults,y=V.a.textListRow,g=u[r];g.id===c&&(y=h()(y,V.a.selectedRow));var b=Object(M.a)(g.name),v=i.a.createElement("span",{className:V.a.textName},b),w=[],O=null,x=!1,S=!1;p.length>0&&(v=i.a.createElement(Z,{string:b,stringClass:V.a.textName,highlightClass:V.a.highlight,searchTerm:p}),m.hasOwnProperty(g.id)&&(w=m[g.id].results,x=m[g.id].extra,S=m[g.id].loading,O=i.a.createElement(re,{count:m[g.id].total,extra:x})));var E=this.cache,T=[];return w.length>0&&(T=w.map((function(e){var t=s&&s.textId===g.id&&s.start===e[0]?V.a.selectedSearchResult:V.a.searchResult;return i.a.createElement("div",{key:g.id+"_"+e[0],onClick:function(){d(g,e[0],p.length,l)},className:t},i.a.createElement(Z,{string:e[1],highlightClass:V.a.highlight,searchTerm:p}))}))),null!==m?i.a.createElement(H.a,{columnIndex:0,key:n,parent:o,rowIndex:r,cache:E},i.a.createElement("div",{key:"listkeys-".concat(n),style:a,className:y},p&&i.a.createElement("div",{className:V.a.textNameRow,onClick:function(){f(u[r])}},v," ",O),w.length>0&&i.a.createElement("div",{className:V.a.searchResults},T),x&&i.a.createElement("div",{className:V.a.loadMore,onClick:function(){t.props.onSearchText(g,p)}},i.a.createElement(ae,{loading:S})))):null}},{key:"findRowHeight",value:function(e){return e.searchTerm?null:40}},{key:"render",value:function(){var e=this,t=this.props.texts.length;return i.a.createElement("div",{className:V.a.textList},this.props.texts&&this.props.texts.length>0?i.a.createElement(D.a,null,(function(n){var r=n.height,o=n.width;return i.a.createElement(z.a,{ref:function(t){return e.list=t},height:r,rowCount:t,rowHeight:e.findRowHeight(e.props)||e.cache.rowHeight,rowRenderer:e.rowRenderer,width:o,overscanRowCount:1,deferredMeasurementCache:e.cache})})):this.props.searching?i.a.createElement("div",{className:V.a.textListLoader},i.a.createElement(l.a,{loaded:!this.props.searching,scale:.5}),i.a.createElement("p",{className:V.a.searching},"Searching…")):i.a.createElement("ul",{className:"textList"}))}}]),n}(),pe=n(85),he=(Object(c.connect)((function(e){var t=L.C(e),n=L.A(e,t),r=L.G(e),o=!1,i=e.data.texts;return t.length>0&&(null===n?(o=!0,i=[]):i=i.filter((function(e){return n.hasOwnProperty(e.id)}))),{texts:i,selectedText:Object(L.J)(e),searchTerm:t,searchResults:n,selectedSearchResult:r,searching:o}}),(function(e){return{onSelectedText:function(t){e(N.Rc(t))},onSelectedSearchResult:function(t,n,r,o){o&&o.id===t.id?e(N.Qc(t.id,n,r)):e(Object(pe.batchActions)([N.Qc(t.id,n,r),N.Rc(t)]))},onSearchText:function(t,n){e(N.Lc(t.id,n))}}}))(de),n(934)),me=n.n(he),ye=(Object(c.connect)((function(e){return{textListIsVisible:Object(L.db)(e)}}),(function(e){return{tabClicked:function(){e(Object(N.gc)(!0))}}}))((function(e){var t=[me.a.tab];return e.textListIsVisible?t.push(me.a.hideTab):t.push(me.a.showTab),i.a.createElement("div",{className:h.a.apply(void 0,t),onClick:e.tabClicked},"Text List")})),n.p,n(841)),ge=n.n(ye),be=n(935),ve=n.n(be),we=n(945),Oe=n.n(we),xe=n(946),Se=n.n(xe),Ee=n(947),Te=n.n(Ee),je=n(948),Ie=n.n(je),Ae=(n(936),n(807)),Pe=n(1091),ke=n(1092),Ce=n(1093),Re=(n(937),n(1065)),_e=Object(c.connect)((function(e){return{Textdata:L.fb(e),selectedText:L.J(e)}}),(function(e){return{}}))((function(e){var t=e.Textdata,n=e.selectedText;if(!n)return i.a.createElement("div",null,"no selected Text available");var r=t.detail.find((function(e){return e.text===n.id}));return r?i.a.createElement(i.a.Fragment,null,i.a.createElement(Ae.a,{variant:"h4",component:"div",mb:3},i.a.createElement(S.a,{id:"Resource.About"})),i.a.createElement(Pe.a,{TransitionProps:{unmountOnExit:!0}},i.a.createElement(ke.a,{sx:{fontWeight:"bold"},expandIcon:i.a.createElement(Re.a,null)},i.a.createElement(S.a,{id:"text.title"})),i.a.createElement(Ce.a,null,r.title)),i.a.createElement(Pe.a,{TransitionProps:{unmountOnExit:!0}},i.a.createElement(ke.a,{expandIcon:i.a.createElement(Re.a,null)},i.a.createElement(S.a,{id:"text.description"})),i.a.createElement(Ce.a,null,r.description))):i.a.createElement("div",null,"No about info")})),Be=(n(938),n(940)),We=n.n(Be),Ne=n(942),Le=n.n(Ne),De=n(943),He=n.n(De),ze=n(813),Me=n(1094),qe=n(1066),Ve=n(1067),Fe=Object(c.connect)((function(e){var t=L.w(e);return{alignmentData:L.i(e),selectedMedia:t,showPageImages:L.Bb(e)}}),(function(e){return{changedShowPageImages:function(t){e(N.dc(t))},changeMediaSelection:function(t){return e(N.Hc(t))},onSelectedSearchResult:function(t,n,r){e(N.Qc(t,n,r))}}}))((function(e){var t=function(t){e.changeMediaSelection(t)};return i.a.createElement(i.a.Fragment,null,i.a.createElement(Ae.a,{variant:"h6",gutterBottom:!0,component:"div"},"Media"),i.a.createElement(ze.a,{sx:{width:"100%",maxWidth:360,bgcolor:"background.paper"}},i.a.createElement(Me.a,{selected:e.showPageImages,onClick:function(){return e.changedShowPageImages(!e.showPageImages)}},i.a.createElement(qe.a,null,i.a.createElement(We.a,null)),i.a.createElement(Ve.a,{primary:"Image"})),i.a.createElement(Me.a,{selected:e.selectedMedia.isVideoVisible,onClick:function(){return t("VIDEO")}},i.a.createElement(qe.a,null,i.a.createElement(Le.a,null)),i.a.createElement(Ve.a,{primary:"Video"})),i.a.createElement(Me.a,{selected:e.selectedMedia.isAudioVisible,onClick:function(){return t("AUDIO")}},i.a.createElement(qe.a,null,i.a.createElement(He.a,null)),i.a.createElement(Ve.a,{primary:"Audio"}))))})),Ue=(n(944),n(808));function Qe(e){var t=e.topicId;return Object(o.useEffect)((function(){window.DiscourseEmbed={discourseUrl:"https://lopenling.org/",topicId:t||null,discourseEmbedUrl:!t&&'{{url absolute="true"}}'};var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src=window.DiscourseEmbed.discourseUrl+"javascripts/embed.js",(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(e)}),[t]),i.a.createElement("div",null,i.a.createElement("div",{id:"discourse-comments"}))}function Je(e){var t=e.category,n=void 0===t?"":t,r=e.perPage,o=void 0===r?5:r;return i.a.useEffect((function(){for(var e=document.querySelectorAll("#topics"),t=0;t<e.length;t++){var n=e[t],r=n.getAttribute("url");if(console.log(r),r&&0!==r.length){var o="de-"+Math.random().toString(36).substr(2,9),i=["discourse_embed_id="+o];n.removeAttribute("discourse-url");for(var a=0;a<n.attributes.length;a++){var l=n.attributes[a];i.push(l.name.replace("-","_")+"="+l.value)}var c=document.createElement("iframe");c.src=r+"/embed/topics?"+i.join("&"),c.id=o,c.frameBorder=0,c.scrolling="no",c.width="100%",n.appendChild(c)}else console.error("Error, `discourse-url` was not found")}}),[]),i.a.createElement("div",{id:"topics",url:"https://lopenling.org/",style:{maxHeight:"70vh",overflow:"scroll"},"per-page":o,category:n,template:"complete",status:"open","allow-create":"true"})}window.addEventListener("message",(function(e){if(e&&e.data&&"discourse-resize"===e.data.type&&e.data.embedId){var t=document.getElementById(e.data.embedId);t&&(t.height=e.data.height+"px")}}),!1);var $e={About:_e,Resources:Fe,Dictionary:function(){return i.a.createElement(i.a.Fragment,null,i.a.createElement(Ae.a,{variant:"h6",gutterBottom:!0,component:"div"},"Dictionary"),i.a.createElement(Ue.a,{p:2},i.a.createElement("input",{type:"text",placeholder:"search Terms"})))},Discussion:function(){return i.a.createElement(i.a.Fragment,null,"       ",i.a.createElement(Ae.a,{variant:"h6",gutterBottom:!0,component:"div"},"Discussions"),i.a.createElement(Je,{category:"55",perPage:"5"}))}},Ke=n(833),Ge=n(1085),Ye=n(1095),Ze=n(748),Xe=["children","value","index"];function et(){return(et=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function tt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var nt=function(){var e=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return tt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?tt(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(Object(Ke.a)("selectedResources",0),2),t=e[0],n=e[1],r=Object(Ze.a)();return i.a.createElement(Ue.a,{sx:{width:"100%",marginTop:1,display:"flex",flexDirection:"column",bgcolor:"background.default",height:"100%",maxWidth:"250px",zIndex:10,position:"relative",borderRight:"light"===r.palette.mode?"2px solid lightgray":"2px solid #d3d3d3"}},i.a.createElement(Ue.a,{sx:{borderBottom:1,borderColor:"divider",display:"flex"},className:ve.a.optionlist},i.a.createElement(Ge.a,{value:t,style:{flex:1},onChange:function(e,t){n(t)},"aria-label":"basic tabs example"},i.a.createElement(Ye.a,et({style:{minWidth:0,flex:1},icon:i.a.createElement(Oe.a,null)},rt(0))),i.a.createElement(Ye.a,et({style:{minWidth:0,flex:1},icon:i.a.createElement(Se.a,null)},rt(1))),i.a.createElement(Ye.a,et({style:{minWidth:0,flex:1},icon:i.a.createElement(Te.a,null)},rt(2))),i.a.createElement(Ye.a,et({style:{minWidth:0,flex:1},icon:i.a.createElement(Ie.a,null)},rt(3))))),i.a.createElement(i.a.Fragment,null,i.a.createElement(ot,{value:t,index:0},i.a.createElement($e.About,null)),i.a.createElement(ot,{value:t,index:1},i.a.createElement($e.Resources,null)),i.a.createElement(ot,{value:t,index:2},i.a.createElement($e.Dictionary,null)),i.a.createElement(ot,{value:t,index:3},i.a.createElement($e.Discussion,null))))};function rt(e){return{id:"simple-tab-".concat(e),"aria-controls":"simple-tabpanel-".concat(e)}}function ot(e){var t=e.children,n=e.value,r=e.index,o=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,Xe);return i.a.createElement("div",et({role:"tabpanel",hidden:n!==r,id:"simple-tabpanel-".concat(r),"aria-labelledby":"simple-tab-".concat(r)},o,{style:{paddingInline:5}}),n===r&&i.a.createElement(Ue.a,{pt:2},t))}var it=n(866),at=n(951),lt=n.n(at),ct=n(228),st=n.n(ct),ut=n(184),ft=n.n(ut),dt=n(851),pt=n.n(dt),ht=(n(952),n(953),n(810),n(1068)),mt=n(814);n(955),n(954),n(816),n(867);var yt=n(815),gt=n(956),bt=n(62),vt=function(e){var t=Object(bt.a)(),n=i.a.useRef(null);return i.a.createElement(yt.a,{in:e.open},i.a.createElement(gt.a,{profile:"top_progress",src:["https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3"],isDark:"dark"===t.palette.mode,onLoad:function(e){console.log(e)},speedPanel:"bottom",ref:n,onPlay:function(e){console.log(e)}}))},wt=n(958),Ot=n.n(wt);function xt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function St(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xt(Object(n),!0).forEach((function(t){Et(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Et(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Tt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return jt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?jt(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function jt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function It(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").split(":");return 60*+e[0]*60+60*+e[1]+ +e[2]}var At=function(e){var t,n,r,a=e.alignmentData.text,l=null==e||null===(t=e.videoData)||void 0===t||null===(n=t.source)||void 0===n?void 0:n.text,c=(null==e||null===(r=e.videoData)||void 0===r?void 0:r.alignment)||[],s=Tt(Object(o.useState)({}),2),u=s[0],f=s[1],d=[],p=[],h=e.syncIdOnClick,m=Tt(Object(o.useState)({played:0,duration:0,playing:!0}),2),y=m[0],g=m[1];ft()(c)||(d=c.map((function(e){return[parseInt(e.source_segment.start),parseInt(e.source_segment.end)]}))),Object(o.useEffect)((function(){if(a===e.selectedText.id){var t=h;if(p=d.find((function(e){var n=Tt(e,2),r=n[0],o=n[1];return t>r&&t<o}))){var n=c.find((function(e){var t;return e.source_segment.start===(null===(t=p[0])||void 0===t?void 0:t.toString())}));ft()(n)||w(n.target_segment.start)}}}),[h]);var b=Object(o.useCallback)((function(){var t=u;if(a===e.selectedText.id)for(var n=t.start;n<t.end;n++){var r=document.getElementById("s_".concat(n));r&&(r.style.fontWeight="bold")}}),[u.start]);Object(o.useEffect)((function(){var t=setTimeout((function(){return b()}),800),n=u;return u.start&&e.changeScrollToId({id:n.start||null,from:"video"}),function(){clearTimeout(t);for(var e=n.start;e<n.end;e++){var r=document.getElementById("s_".concat(e));r&&(r.style.fontWeight="normal")}}}),[u.start]);var v=Object(o.useRef)(),w=function(e){var t=function(e,t){var n=It(t)/e;return parseFloat(n)}(y.duration,e);v.current.seekTo(parseFloat(t))};return 0===c.length||l!==e.selectedText.id?i.a.createElement("div",null):i.a.createElement(yt.a,{in:e.open},i.a.createElement(Ot.a,{url:"https://www.youtube.com/watch?v=2MMM_ggekfE",style:{maxWidth:"100%"},ref:v,controls:!0,onDuration:function(e){return g(St(St({},y),{},{duration:e}))},light:!0,playing:!0,onPlay:function(){return g(St(St({},y),{},{playing:!0}))},onPause:function(){return g(St(St({},y),{},{playing:!1}))},onProgress:function(e){var t=e.playedSeconds,n=c.find((function(e){return It(e.target_segment.start)<t&&It(e.target_segment.end)>t}));if(!ft()(n)){var r=n.source_segment;b(),f(St({},r))}},onError:function(){return console.log("error in media sec")}}))};n(977);var Pt=n(852),kt=n.n(Pt),Ct=n(843),Rt=n.n(Ct),_t=n(811);function Bt(){return(Bt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Wt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Nt(e){return i.a.createElement(kt.a,{handle:"#draggable-dialog-title",bounds:"parent"},i.a.createElement(_t.a,e))}n(981);var Lt=Object(c.connect)((function(e){var t=L.z(e),n=L.T(e),r=L.s(e),o=L.mb(e),i=L.w(e),a=L.J(e);return{scrollToId:t,syncIdOnClick:n,imageData:r,videoData:o,selectedMedia:i,selectedText:a,isImagePortrait:L.xb(e),alignmentData:L.i(e),witness:L.N(e,a.id),witnesses:L.gb(e,a.id),ImageVersion:L.F(e),selectedImage:L.E(e),imageScrollId:L.t(e),imageAlignmentById:L.r(e)}}),(function(e){return{toggleImage:function(t){return e(N.dc(t))},onSelectedSearchResult:function(t,n,r,o){o&&o.id===t.id?e(N.Qc(t.id,n,r)):e(batchActions([N.Qc(t.id,n,r),N.Rc(t)]))},changeMediaSelection:function(t){return e(N.Hc(t))},changeIsImagePortrait:function(t){return e(N.Vc(t))},changeImageVersion:function(t){return e(N.Nc(t))},changeSelectedImage:function(t){return e(N.Mc(t))},changeSelectedRange:function(t){e(N.Rb(t))},changeScrollToId:function(t){return e(N.Qb(t))}}}))((function(e){var t=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Wt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Wt(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(i.a.useState(!0),2),n=t[0],r=t[1];return e.selectedMedia.isImageVisible?null:i.a.createElement(Nt,{sx:{position:"absolute",zIndex:1,right:0}},i.a.createElement("div",{className:"Resizable-media-div"},i.a.createElement("div",{style:{cursor:"move",paddingInline:20,paddingTop:10,display:"flex",justifyContent:"space-between",alignItems:"center"},id:"draggable-dialog-title"},i.a.createElement("h3",null,e.selectedMedia.isVideoVisible&&"VIDEO"),i.a.createElement("h3",null,e.selectedMedia.isAudioVisible&&"AUDIO"),i.a.createElement("div",{className:"buttons-hide-close"},i.a.createElement(mt.a,{onClick:function(){r((function(e){return!e}))},disableRipple:!0},n?"-":"+"),i.a.createElement(mt.a,{onClick:function(){e.changeMediaSelection(null)},disableRipple:!0},i.a.createElement(Rt.a,null)))),i.a.createElement(i.a.Fragment,null,e.selectedMedia.isVideoVisible&&i.a.createElement(At,Bt({},e,{open:n,setOpen:r})),e.selectedMedia.isAudioVisible&&i.a.createElement(vt,{open:n,setOpen:r}))))}));function Dt(e){return(Dt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ht(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function zt(e,t){return(zt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Mt(e){return(Mt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var qt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&zt(e,t)}(n,i.a.Component);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Mt(e);if(t){var o=Mt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Dt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}(n);function n(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(r=t.call(this,e)).state={hasError:!1},r}return function(e,t,n){t&&Ht(e.prototype,t),n&&Ht(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"componentDidCatch",value:function(e,t){console.log(e,t)}},{key:"render",value:function(){return this.state.hasError?i.a.createElement("h1",null,"Something went wrong."):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0}}}]),n}(),Vt=(n(984),n(854)),Ft=n.n(Vt),Ut=n(880),Qt=n.n(Ut),Jt=n(278),$t=n.n(Jt),Kt=n(834),Gt=n.n(Kt),Yt=n(881),Zt=n.n(Yt),Xt=n(882),en=n.n(Xt),tn=n(81),nn=Object(o.memo)(Object(d.c)((function(e){var t=[],n="",r="",o=[];return e.witnesses&&(t=e.witnesses.map((function(e){return e})),e.activeWitness&&(r=e.witnesses.findIndex((function(t){return t.id===e.activeWitness.id}))),t.sort((function(e,t){return e.isWorking?-1:t.isWorking?1:e.isBase?-1:t.isBase?1:0})),t=t.sort((function(e,t){return e.id-t.id}))),ft()(t)&&!e.activeWitness?null:i.a.createElement(ht.a,{onChange:function(n){ft()(t)||e.onSelectedWitness(t[n.target.value])},className:en.a.selectVersion,value:r,label:"Version2",classes:{root:en.a.selectEmpty,select:en.a.selectOptions}},t.map((function(t,r){var a;return t.id===(null===(a=e.activeWitness)||void 0===a?void 0:a.id)&&o.push(en.a.selected),n=t.source.name,t.isWorking&&(n="en"===e.intl.locale?"User"===e.user.name?"Working":"My Edition":"མཉམ་འབྲེལ་པར་མ།"),i.a.createElement("option",{key:"versionSelect2-".concat(r),value:r,className:en.a.selectOptions},n)})))}))),rn=n(836),on=n(885),an=n.n(on),ln=n(1069),cn=n(1096),sn=n(802),un=n(804);function fn(e){return function(e){if(Array.isArray(e))return hn(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||pn(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function dn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||pn(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pn(e,t){if(e){if("string"==typeof e)return hn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?hn(e,t):void 0}}function hn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var mn,yn=i.a.memo((function(e){var t=Object(o.useRef)(e.texts),n=dn(Object(o.useState)(t.current),2),r=n[0],a=n[1],l=dn(Object(o.useState)(null),2),c=l[0],s=l[1],u=e.onSelectedText,f=e.selectedText,d=dn(Object(o.useState)(!1),2),p=d[0],m=d[1],y=null==f?void 0:f.name,g=e.selectedText1;Object(o.useEffect)((function(){var e=[];""===c&&a(fn(t.current)),null!==c&&""!==c&&(e=t.current.filter((function(e){return e.name.includes(c)})),a(fn(e)))}),[c]);var b=Object(o.useRef)(new rn.c({fixedHeight:!0,defaultHeight:40})),v=[an.a.textlist],w=i.a.useCallback((function(e){var t=e.key,n=e.index,o=e.style,a=e.parent,l=r[n];return i.a.createElement(rn.b,{key:"optionvalues-".concat(t),cache:b.current,parent:a,columnIndex:0,rowIndex:n},i.a.createElement("div",{style:o,onClick:function(){m(!1),u(l)}},i.a.createElement(Ue.a,{sx:{overflow:"hidden",textOverflow:"ellipsis",width:"13rem",paddingLeft:2,fontSize:{lg:12,md:11,sm:10,xs:10},color:"text.primary"},component:"div"},i.a.createElement(Ae.a,{noWrap:!0},Object(M.a)(l.name)))))}),[r]);return i.a.createElement(ln.a,{onClickAway:function(){return m(!1)}},i.a.createElement("div",{style:{position:"relative",marginLeft:10}},i.a.createElement(cn.a,{onClick:function(){m((function(e){return!e})),!1===p&&v.push(an.a.open)},component:"div",variant:"outlined",sx:{overflow:"hidden",textOverflow:"ellipsis",width:"10rem",height:"100%",color:"text.primary"},disabled:null===g},i.a.createElement(Ae.a,{noWrap:!0},y||"select Text here")),i.a.createElement(sn.a,{in:p},i.a.createElement(Ue.a,{className:h()(v),sx:{position:"absolute",bgcolor:"heading.main",zIndex:1}},i.a.createElement(un.a,{onChange:function(e){var t=e.target.value;s(t)},id:"standard-basic",label:"filter",variant:"standard",style:{width:"100%"}}),i.a.createElement(rn.a,null,(function(e){var t=e.width,n=e.height;return i.a.createElement(rn.d,{width:t,height:n,rowHeight:40,deferredMeasurementCache:b.current,rowCount:r.length,rowRenderer:w})}))))))})),gn=Object(c.connect)((function(e){var t=L.C(e),n=L.A(e,t),r=L.G(e),o=!1,i=e.data.texts;return t.length>0&&(null===n?(o=!0,i=[]):i=i.filter((function(e){return n.hasOwnProperty(e.id)}))),{texts:i,selectedText1:Object(L.J)(e),selectedText:Object(L.K)(e),searchTerm:t,searchResults:n,selectedSearchResult:r,searching:o}}),(function(e){return{onSelectedText:function(t){e(N.Sc(t))}}}))(yn);function bn(){return(bn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var vn=function(e){return i.a.createElement("svg",bn({viewBox:"0 0 512 512"},e),mn||(mn=i.a.createElement("path",{d:"M507.73 109.1c-2.24-9.03-13.54-12.09-20.12-5.51l-74.36 74.36-67.88-11.31-11.31-67.88 74.36-74.36c6.62-6.62 3.43-17.9-5.66-20.16-47.38-11.74-99.55.91-136.58 37.93-39.64 39.64-50.55 97.1-34.05 147.2L18.74 402.76c-24.99 24.99-24.99 65.51 0 90.5 24.99 24.99 65.51 24.99 90.5 0l213.21-213.21c50.12 16.71 107.47 5.68 147.37-34.22 37.07-37.07 49.7-89.32 37.91-136.73zM64 472c-13.25 0-24-10.75-24-24 0-13.26 10.75-24 24-24s24 10.74 24 24c0 13.25-10.75 24-24 24z"})))},wn=n(1007),On=n.n(wn),xn=function(e){var t=new Array(34).fill().map((function(e,t){var n=14+t;return i.a.createElement("option",{value:n,key:n},n)}));return i.a.createElement("div",{className:On.a.fontSize},i.a.createElement("label",{htmlFor:"fontSize"},"Font Size"),i.a.createElement("select",{value:e.fontSize,onChange:function(t){var n=event.target,r=Number(n.value);e.onChange(r)}},t))},Sn=n(887),En=n.n(Sn),Tn=n(812),jn=n(1070),In=n(1097);function An(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Pn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Pn(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Pn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var kn=function(e){var t=An(Object(o.useState)(!1),2),n=t[0],r=t[1],a=An(Object(Ke.a)("WindowTwoFont","Tibetan"),2),l=a[0],c=a[1];return Object(o.useEffect)((function(){document.body.style.setProperty("--tibetan-fonts2",l)}),[]),i.a.createElement(ln.a,{onClickAway:function(){return r(!1)}},i.a.createElement(Ue.a,{position:"relative"},i.a.createElement(mt.a,{onClick:function(){r((function(e){return!e}))},size:"small",variant:"text"},i.a.createElement(vn,{height:20,width:20,fill:"currentColor"})),i.a.createElement(sn.a,{in:n},i.a.createElement(Tn.a,{dense:!0,sx:{position:"absolute",right:0,zIndex:2,top:40,bgcolor:"heading.main"}},i.a.createElement(xn,{fontSize:e.textFontSize,onChange:e.onChangedFontSize}),i.a.createElement(jn.a,null),i.a.createElement(Cn,{selectFont:function(e){c(e),document.body.style.setProperty("--tibetan-fonts2","".concat(e));var t=document.getElementById("updateList2"),n=1,o=setInterval((function(){t.click(),n++,console.log("ran"),n>4&&clearInterval(o)}),800);r(!1)},selectedfont:l}),i.a.createElement(In.a,{onClick:function(){return e.onExport()}},"Export Document",e.exportingWitness&&i.a.createElement(En.a,null))))))},Cn=function(e){var t=e.selectFont,n=e.selectedfont,r=f.c||[];return i.a.createElement(Ue.a,{textAlign:"center"},i.a.createElement("span",null,"Font:")," ",i.a.createElement("select",{onChange:function(e){return t(e.target.value)},value:n},r.map((function(e,t){return i.a.createElement("option",{key:t+"-fontselect",value:e},e)}))))},Rn=n(844),_n=n.n(Rn),Bn=function(e){var t=e.handleWindowSearch;return i.a.createElement(mt.a,{size:"small",variant:"text",onClick:t},i.a.createElement(_n.a,null))},Wn=n(889),Nn=n.n(Wn),Ln=n(888),Dn=n.n(Ln),Hn=function(e){return i.a.createElement(i.a.Fragment,{key:"right"},i.a.createElement(mt.a,{onClick:function(){e.changeShowTableContent(!e.showTableContent)}},e.showTableContent?i.a.createElement(Dn.a,null):i.a.createElement(Nn.a,null)))},zn=n(798),Mn=n(1098),qn=n(890),Vn=n.n(qn),Fn=function(e){var t=e.isSecondWindowOpen,n=Object(o.useCallback)((function(){var e=document.getElementById("updateList2");e&&e.click()}),[t]);return Object(o.useEffect)((function(){var e=setTimeout((function(){n()}),500);return function(){return clearTimeout(e)}}),[t]),i.a.createElement(mt.a,{variant:"text",size:"small",onClick:n},i.a.createElement(Vn.a,null))};function Un(e){return(Un="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Qn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Jn(e,t){return(Jn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function $n(e){return($n=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Kn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Jn(e,t)}(n,o.Component);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=$n(e);if(t){var o=$n(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Un(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}(n);function n(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),t.call(this,e)}return function(e,t,n){t&&Qn(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"render",value:function(){var e=this,t=this.props.string,n=t,r=this.props.stringClass||"";if(this.props.searchTerm){var i=this.props.searchTerm,a=(new U.a).splitGraphemes(t),l=t.indexOf(i),c=l+i.length,s=0,u="";if(l>-1)for(var f=0;f<a.length;f++){var d=a[f];s>=l&&s<c&&(u+=d),s+=d.length}u.length>0&&(n=J()(t,u,(function(t,n){return o.createElement("span",{className:e.props.highlightClass,key:"highlight-".concat(n)},t)})))}return o.createElement("span",{className:r},n)}}]),n}(),Gn=n(1009),Yn=n.n(Gn),Zn=function(e){var t=e.handleListItemClick,n=e.searchValue,r=e.results,a=(e.selectedText,Object(o.useRef)()),l=Object(o.useRef)(new rn.c({fixedWidth:!0,defaultHeight:100})),c=function(e){var o=e.key,a=e.index,c=e.parent,s=e.style,u=r[a];return i.a.createElement(rn.b,{key:"listkeys2-".concat(o),cache:l.current,parent:c,columnIndex:0,rowIndex:a},i.a.createElement("div",{style:s},r.length>0&&i.a.createElement("div",{className:Yn.a.searchListItem,onClick:function(){return t(u[0])}},i.a.createElement(Kn,{string:u[1],highlightClass:Yn.a.highlight,searchTerm:n}))))};return r?i.a.createElement(i.a.Fragment,null,i.a.createElement(rn.a,null,(function(e){var t=e.height,n=e.width;return i.a.createElement(rn.d,{ref:a,height:t,rowCount:null==r?void 0:r.length,rowHeight:l.current.rowHeight,deferredMeasurementCache:l.current,rowRenderer:c,width:n,overscanRowCount:1})}))):null};function Xn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return er(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?er(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function er(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function tr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function nr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tr(Object(n),!0).forEach((function(t){rr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function rr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var or=Object(c.connect)((function(e){var t,n=L.lb(e),r=L.K(e),o=[];if(r){o=L.hb(e,r.id);var i=L.O(e,r.id);t=i?L.ob(e,i):L.sb(e,r.id)}var a=L.cb(e),l=Object(L.R)(e),c=L.D(e);return{witnesses:o,selectedText:r,selectedWitness:t,textListIsVisible:Object(L.db)(e),accountOverlayVisible:Object(L.e)(e),textFontSize:a,user:n,searchValue:c,showTableContent:l,searchResults:L.B(e,c)}}),null,(function(e,t,n){var r=t.dispatch,o=e.selectedText;return nr(nr(nr({},n),e),{},{navigationButtonClicked:function(){t.dispatch(N.gc(!e.textListIsVisible))},onSelectedWitness:function(e){r(N.Uc(null==o?void 0:o.id,null==e?void 0:e.id))},onChangedFontSize:function(e){r(N.fc(e))},changeShowTableContent:function(e){r(N.Zc(e))},searchChanged:function(e){r(N.cc(e))},changeSelectSyncId:function(e){r(N.Vb(e))}})}))((function(e){var t=Xn(Object(o.useState)(""),2),n=t[0],r=t[1],a=Xn(Object(o.useState)(!1),2),l=a[0],c=a[1],s=Xn(Object(o.useState)(!1),2),u=s[0],f=s[1],d=Object(o.useRef)(),p=Object(o.useRef)(),h=i.a.useRef(Gt()((function(t){e.searchChanged(t)}),1e3)).current,m=Object(o.useCallback)((function(e){e.preventDefault(),h(n),f(!0)}),[n]),y=Object(o.useCallback)((function(){c(!l)}),[l]);Object(o.useEffect)((function(){!0===l&&d.current.focus(),!1===l&&h(null)}),[l]);var g=$t()(e.searchResults)&&e.searchResults.hasOwnProperty(e.selectedText.id),b=g?e.searchResults[e.selectedText.id].results:[];return i.a.createElement(zn.a,{direction:"column",ref:p,spacing:1,sx:{paddingInline:{md:1,xs:0},paddingBlock:{md:1,xs:0},borderTop:{md:0,xs:"1px solid gray"},bgcolor:"heading.main",color:"text.primary"}},i.a.createElement(zn.a,{direction:"row",spacing:1,justifyContent:"space-between"},i.a.createElement(Ue.a,{sx:{display:"flex",gap:{md:2,sx:0},flexDirection:{md:"row",xs:"column"}}},i.a.createElement(gn,null),i.a.createElement(nn,{witnesses:e.witnesses,activeWitness:e.selectedWitness,onSelectedWitness:e.onSelectedWitness,user:e.user})),i.a.createElement(Mn.a,{size:"small","aria-label":"small button group",sx:{position:"relative",display:"flex",alignItems:"center",justifyContent:"center",height:"fit-content",width:"fit-content",border:function(e){return"1px solid ".concat(e.palette.divider)},borderRadius:1,bgcolor:"background.paper",color:"text.secondary","& svg":{m:1},"& hr":{mx:.5}},className:Zt.a.button_group_menu},i.a.createElement(Fn,{isSecondWindowOpen:e.isSecondWindowOpen}),i.a.createElement(Bn,{handleWindowSearch:y}),i.a.createElement(kn,{textFontSize:e.textFontSize,onChangedFontSize:e.onChangedFontSize,onExport:e.onExport}),i.a.createElement(Hn,{changeShowTableContent:e.changeShowTableContent,showTableContent:e.showTableContent}))),i.a.createElement(yt.a,{in:l,mountOnEnter:!0,unmountOnExit:!0},i.a.createElement("form",{onSubmit:m},i.a.createElement(zn.a,{direction:"row",spacing:2,position:"relative"},i.a.createElement(un.a,{hiddenLabel:!0,id:"filled-hidden-label-small",inputProps:{style:{height:25,padding:"0 14px"}},style:{height:25,flex:1},fullWidth:!0,inputRef:d,value:n,onChange:function(e){return r(e.target.value)}}),i.a.createElement(cn.a,{variant:"outlined",size:"small",onClick:m,style:{height:25}},"Search"),e.searchResults&&u&&i.a.createElement(Ue.a,{sx:function(e,t,n){return t in e?Object.defineProperty(e,t,{value:3,enumerable:!0,configurable:!0,writable:!0}):e[t]=3,e}({position:"absolute",top:35,right:0,zIndex:1,bgcolor:"heading.main",width:350,height:350,boxShadow:3,overflowX:"hidden"},"boxShadow")},0===b.length&&i.a.createElement("p",null,"no such word present"),g&&b.length>0&&i.a.createElement(Zn,{handleListItemClick:function(t){e.changeSelectSyncId(t)},searchValue:e.searchValue,results:b,selectedText:e.selectedText}),i.a.createElement(mt.a,{"aria-label":"closeButton",onClick:function(){f(!1),h(null),r("")},size:"small",sx:{right:15,top:0,position:"absolute"}},i.a.createElement(Rt.a,{fontSize:"inherit"})))))))})),ir=n(148),ar=n(54);function lr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var cr=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.annotatedText=t,this.splitter=n,this._texts=null,this._textsId=null,this._textsFinalPositions=[]}return function(e,t,n){t&&lr(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1})}(e,[{key:"texts",get:function(){if(!this.annotatedText)return[];if(!this._texts||this._textsId!==this.annotatedText.getUniqueId()){this._textsFinalPositions=[];var e=this.annotatedText.segmentedText,t=e.getText(),n=this.splitter(t).filter((function(e){return 0!==e}));if(0===n.length)return this._textsFinalPositions.push(t.length),[e];n[n.length-1]+1<t.length&&n.push(t.length-1);for(var r=e.segments,o=0,i=[],a=0;a<n.length;a++){var l,c=n[a],s=e.indexOfSegmentAtPosition(c-1);l=a==n.length-1?r.slice(o):r.slice(o,s+1);var u=new ir.a(l);if(i.push(u),o=s+1,s>=0){var f=r[s];this._textsFinalPositions.push(f.end)}}this._texts=i.filter((function(e){return e.segments.length>0})),this._textsId=this.annotatedText.getUniqueId()}return this._texts||[]}},{key:"getTextsFinalPositions",value:function(){return this.texts,this._textsFinalPositions}},{key:"getTextIndexOfPosition",value:function(e){for(var t=this.getTextsFinalPositions(),n=0,r=null,o=0;o<t.length;o++){var i=t[o];if(e>=n&&e<=i){r=o;break}n=i}return null===r&&(console.warn("no index for position %d",e),r=t.length-1),r}}]),e}(),sr=n(284),ur=n(891),fr=n.n(ur),dr=n(1072),pr=n(11),hr=n(796),mr=n(53),yr=n(1099);function gr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var br=Object(pr.a)("div")((function(e){var t=e.theme;return gr({position:"relative",borderRadius:t.shape.borderRadius,backgroundColor:Object(hr.a)(t.palette.common.white,.15),"&:hover":{backgroundColor:Object(hr.a)(t.palette.common.white,.25)},marginLeft:0,width:"100%"},t.breakpoints.up("sm"),{marginLeft:t.spacing(1),width:"auto"})})),vr=Object(pr.a)("div")((function(e){return{padding:e.theme.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"}})),wr=Object(pr.a)(mr.c)((function(e){var t=e.theme;return{color:"inherit","& .MuiInputBase-input":gr({padding:t.spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(t.spacing(4),")"),transition:t.transitions.create("width"),width:"100%"},t.breakpoints.up("sm"),{width:"0",cursor:"pointer","&:focus":{width:"20ch"}})}})),Or=function(){var e=[{Id:1,Title:"chapter 1",segment_id:0},{Id:2,Title:"chapter 2",segment_id:400}];return e.length,i.a.createElement(Ue.a,{sx:{bgcolor:"heading.main",color:"text.primary",width:"100%",height:"100%",paddingInline:2}},i.a.createElement(yr.a,{sx:{justifyContent:"space-between",paddingLeft:"0 !important",margin:0}},i.a.createElement(Ae.a,{textTransform:"uppercase",component:"h6"},"Table Of Content"),i.a.createElement(br,null,i.a.createElement(vr,null,i.a.createElement(_n.a,null)),i.a.createElement(wr,{placeholder:"Search…",inputProps:{"aria-label":"search"}}))),i.a.createElement(Ue.a,null,e.map((function(e,t){return i.a.createElement(Ue.a,{key:"TableContent-"+t,sx:{cursor:"pointer",width:"fit-content","&:hover":{fontWeight:"bold"}}},e.Title)}))))},xr=n(1010),Sr=n.n(xr),Er=n(1011),Tr=n.n(Er),jr=i.a.memo((function(){return i.a.createElement("div",{className:Sr.a.placeholder},i.a.createElement(Tr.a,{color:"inherit"}))})),Ir=n(892),Ar=n.n(Ir),Pr=n(82),kr=n.n(Pr),Cr=n(893),Rr=n.n(Cr),_r=n(43),Br=n(24),Wr=n(1071);function Nr(e){return(Nr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Lr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Dr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Dr(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Dr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Hr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function zr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Hr(Object(n),!0).forEach((function(t){Mr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Hr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Mr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function qr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Vr(e,t){return(Vr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Fr(e){return(Fr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ur(e){return"s2_"+e.start}var Qr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Vr(e,t)}(n,i.a.Component);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Fr(e);if(t){var o=Fr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Nr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}(n);function n(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(r=t.call(this,e)).state={segmentedText:e.segmentedText},r.textAlignmentById=r.props.textAlignmentById,r._renderedSegments=null,r._renderedHtml=null,r}return function(e,t,n){t&&qr(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.setState((function(t,n){return zr(zr({},t),{},{segmentedText:e.segmentedText})}))}},{key:"selectedElement",value:function(e){var t=[],n=[],r=document.getSelection();if(null!=e&&e.id.includes("s2_")&&this.props.condition){var o=parseInt(e.id.replace("s2_",""));this.props.changeSyncIdOnClick(o),this.props.changeScrollToId({id:"ua",from:"ua"});var i=parseInt(e.id.replace("s2_","")),a=this.textAlignmentById.find((function(e){return i>=e.TStart&&i<e.TEnd}));if(a){for(var l=a.start;l<a.end;l++)t.push(l);for(var c=a.TStart;c<a.TEnd;c++)n.push(c);this.props.changeSelectedRange({source:t,target:n})}}r&&"Range"===r.type||(this.props.selectedSegmentId(e.id),e.id||this.props.changeSelectedRange({source:[],target:[]}))}},{key:"generateHtml",value:function(e,t){var n=t.segmentedText.segments,r='<p class="'+Rr.a.textLine+'">';if(0===n.length)return{__html:r};for(var o=n[n.length-1].end+1,i=Rr.a.highlight,a=Rr.a.activeHighlight,l=null,c=0;c<n.length;c++){var s,u=n[c],f="",d=[];if(u.start===o)break;var p=null;if(0===u.length||(p=Ur(u)),null!==(s=e.selectedTargetRange)&&void 0!==s&&s.includes(u.start)&&e.condition){var m="light"===e.theme.palette.mode?Rr.a.selectedRangelight:Rr.a.selectedRangeDark;d.push(m)}d.length>0&&(f='class="'+h.a.apply(void 0,d)+'"');var y=u.text;if(e.searchStringPositions){var g=u.start,b=g;y="";var v=i;e.selectedSearchResult&&e.selectedSearchResult.start<=b&&e.selectedSearchResult.start+e.selectedSearchResult.length>b&&(v=a);for(var w=0;w<u.text.length;w++){var O=u.text.charAt(w);if(b=g+w,l){var x=Lr(l,2);0===w&&(y+='<span class="'+v+'">'),b===(x[0],x[1])?(y+=O+"</span>",l=null):w===u.text.length-1?y+=O+"</span>":y+=O}else if(b in e.searchStringPositions){var S=Lr(e.searchStringPositions[b],2),E=S[0],T=S[1];y+='<span class="'+v+'">'+O,w!==u.text.length-1&&b!==T||(y+="</span>"),b<T&&(l=[E,T])}else y+=O}}r+="<span id="+p+" key="+p+" "+f+">"+y+"</span>"}return this._renderedSegments=n,{__html:r+="</p>"}}},{key:"shouldComponentUpdate",value:function(e,t){var n=this.generateHtml(e,t);return this.props.fontSize!==e.fontSize||(!this._renderedHtml||n.__html!==this._renderedHtml.__html)&&this._renderedHtml!==n&&(this._renderedHtml=n,!0)}},{key:"componentDidUpdate",value:function(){this.textAlignmentById=this.props.textAlignmentById}},{key:"render",value:function(){var e=this,t=[Rr.a.text];0===this.props.row&&t.push(Rr.a.textFirstRow);var n=this._renderedHtml?this._renderedHtml:this.generateHtml(this.props,this.state);return this._renderedHtml||(this._renderedHtml=n),i.a.createElement("div",{className:Rr.a.textContainer},i.a.createElement("div",{className:h.a.apply(void 0,t),dangerouslySetInnerHTML:n,onClick:function(t){return e.selectedElement(t.target)},style:{fontSize:this.props.fontSize,fontFamily:"var(--tibetan-fonts2)"}}))}}]),n}(),Jr=Object(Wr.a)(Qr),$r=n(894),Kr=n.n($r);function Gr(e){return(Gr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Yr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Zr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Yr(Object(n),!0).forEach((function(t){Xr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Yr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Xr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function eo(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return to(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?to(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function to(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function no(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ro(e,t){return(ro=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function oo(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function io(e){return(io=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ao={},lo=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ro(e,t)}(n,o.PureComponent);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=io(e);if(t){var o=io(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Gr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return oo(e)}(this,n)}}(n);function n(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(r=t.call(this,e)).textAlignmentById=[],r.changeScrollToId=e.changeScrollToId,r.condition=e.condition,r.list=null,r.splitText=null,r.cache=new H.b({fixedWidth:!0}),r.rowRenderer=r.rowRenderer.bind(oo(r)),r.activeSelection=null,r.selectedNodes=null,r._mouseDown=!1,r._activeWitness=null,r._didSetInitialScrollPosition=!1,r._modifyingSelection=!1,r.imageHeight=null,r.imageWidth=null,r.calculatedImageHeight=null,r.selectedWindow=r.props.selectedWindow,r.scrollEvent=r.scrollEvent.bind(oo(r)),r.scrollTop=0,r}return function(e,t,n){t&&no(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"scrollEvent",value:function(e){if(1===this.selectedWindow)return null;if(2===this.selectedWindow){var t=[];this.textAlignmentById.map((function(e){var n=document.getElementById("s2_"+e.TStart);n&&n.getBoundingClientRect().top>90&&t.push({id:e.id,start:e.start,TStart:e.TStart,end:e.end,TEnd:e.TEnd})})),ft()(t)||2===this.selectedWindow&&this.debouncedScroll(t)}}},{key:"selectedListRow",value:function(e){var t=null;return e.activeAnnotation&&(t=e.splitText.getTextIndexOfPosition(e.activeAnnotation.start)),t}},{key:"handleSelection",value:function(e){this._modifyingSelection?(e.stopPropagation(),this._modifyingSelection=!1):(this.activeSelection=document.getSelection(),this._mouseDown||this.mouseUp())}},{key:"mouseDown",value:function(){this._mouseDown=!0}},{key:"mouseUp",value:function(){this._mouseDown=!1,this.activeSelection&&(this.activeSelection=null)}},{key:"getNodeSegmentSpan",value:function(e){for(var t=e,n=null,r=/^(i|s|ds)_/;!n&&t.parentNode;)t instanceof Element&&r.test(t.id)&&(n=t),t=t.parentNode;return n}},{key:"updateList",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(this.props.showImages&&!this.calculatedImageHeight&&this.imageHeight&&this.imageWidth&&(this.calculatedImageHeight=this.calculateImageHeight()),this.list){var n=this.list;if(e)if(null!==t)if(Array.isArray(t)){if(Array.isArray(t))for(var r=0;r<t.length;r++){var o=t[r];this.cache.clear(o)}}else this.cache.clear(t);else this.cache.clearAll(),n.measureAllRows(),n.recomputeRowHeights(0);n.forceUpdateGrid()}}},{key:"processProps",value:function(e){var t=this,n=!1;(!this.props.selectedWitness||e.selectedWitness&&e.selectedWitness.id!==this.props.selectedWitness.id)&&(n=!0,this._didSetInitialScrollPosition=!1),!e.selectedSearchResult||this.props.selectedSearchResult&&e.selectedSearchResult.start===this.props.selectedSearchResult.start&&e.selectedSearchResult.textId===this.props.selectedSearchResult.textId||(console.log("resetting scroll position from search result"),this._didSetInitialScrollPosition=!1);var r=this.getControlsMeasurements(e);if(r&&(this.selectedTextIndex=r.selectedTextIndex,this.firstSelectedSegment=r.firstSelectedSegment,this.splitTextRect=r.splitTextRect,this.selectedElementId=r.selectedElementId,this.selectedElementIds=r.selectedElementIds),e.textListVisible!==this.textListVisible||e.editMenuVisible!==this.editMenuVisible)setTimeout((function(){t.textListVisible=e.textListVisible,t.editMenuVisible=e.editMenuVisible,t.updateList(!0)}),500);else if(n)this.updateList(!0);else if(this.pageBreaksChanged(this.props,e)){var o=null,i=this.selectedListRow(this.props),a=this.selectedListRow(e);if(i&&a){o=[];for(var l=i>a?a:i,c=this.props.splitText.texts.length;l<c;l++)o.push(l)}this.updateList(!0,o)}else if(this.lineBreaksChanges(this.props,e)){var s=this.selectedListRow(e);s||(s=this.selectedListRow(this.props));var u=this.props.splitText.texts,f=[];if(null!==s){for(var d=s,p=u.length;d<p;d++)f.push(d);this.updateList(!0,f)}}else this.props.fontSize!==e.fontSize?this.updateList(!0):this.props.activeAnnotation&&e.activeAnnotation&&this.annotationsInSameLocation(this.props.activeAnnotation,e.activeAnnotation)?this.updateList(!0,this.selectedListRow(e)):this.updateList(this.shouldResetListCache(this.props,e))}},{key:"pageBreaksChanged",value:function(e,t){var n=e.splitText.getTextsFinalPositions(),r=t.splitText.getTextsFinalPositions();return n.length!==r.length||JSON.stringify(n)!==JSON.stringify(r)}},{key:"lineBreaksChanges",value:function(e,t){var n=e.activeAnnotation,r=t.activeAnnotation,o=!1;return n&&n.isType(ANNOTATION_TYPES.lineBreak)&&t.activeAnnotations&&!t.activeAnnotations.hasOwnProperty(n.uniqueId)&&(o=!0),r&&r.isType(ANNOTATION_TYPES.lineBreak)&&e.activeAnnotations&&!e.activeAnnotations.hasOwnProperty(r.uniqueId)&&(o=!0),o}},{key:"shouldResetListCache",value:function(e,t){var n=!1;return(e.showImages!==t.showImages||this.pageBreaksChanged(e,t))&&(n=!0),n}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.processProps(e)}},{key:"componentDidMount",value:function(){var e=this;this.resizeHandler=Ar()((function(){e.calculatedImageHeight=null,e.updateList()}),500).bind(this),window.addEventListener("resize",this.resizeHandler),this.debouncedScroll=Gt()((function(t){e.changeScrollToId({id:t[0].TStart,from:2})}),1e3),this.selectionHandler=Gt()((function(t){e.handleSelection(t)}),200).bind(this),document.addEventListener("selectionchange",this.selectionHandler),document.addEventListener("mousedown",this.mouseDown.bind(this),!0),document.addEventListener("mouseup",this.mouseUp.bind(this),!0),this.processProps(this.props),this.componentDidUpdate(),this.splitText.style.scrollBehavior="smooth",this.timer=setTimeout((function(){e.resizeHandler()}),2e3)}},{key:"scrollToIndex",value:function(e){var t=this.list;setTimeout((function(){t.scrollToRow(e),setTimeout((function(){t.scrollToPosition(t.props.scrollTop-300)}),0)}),100)}},{key:"componentDidUpdate",value:function(e,t){var n,r,o=this,i=this.props.scrollToId;this.targetId2=this.props.syncIdOnClick,this.selectedWindow=this.props.selectedWindow;var a=this.props.syncIdOnSearch||null,l=(this.list,this.props.searchResults),c=this.props.textAlignment;if(this.condition=this.props.condition,((null==e?void 0:e.searchResults)!==(null===(n=this.props)||void 0===n?void 0:n.searchResults)||(null==e?void 0:e.syncIdOnSearch)!==(null===(r=this.props)||void 0===r?void 0:r.syncIdOnSearch))&&l&&a){var s=this.props.splitText.getTextIndexOfPosition(a);this.scrollToIndex(s)}if(1===this.selectedWindow&&1===i.from&&this.condition&&null!==i.id&&(this.textAlignmentById=this.props.textAlignmentById||[],c)){var u=this.textAlignmentById.find((function(e){return e.start===i.id})),f=null==u?void 0:u.TStart;if(null!==f){var d=this.props.splitText.getTextIndexOfPosition(f);this.scrollToIndex(d)}}if(this.targetId2&&null===i.from&&1===this.selectedWindow&&null===i.id&&this.condition){var p,h=c.alignment.find((function(e){return o.targetId2>=e.source_segment.start&&o.targetId2<e.source_segment.end})),m=null==h||null===(p=h.target_segment)||void 0===p?void 0:p.start,y=this.props.splitText.getTextIndexOfPosition(m);this.scrollToIndex(y)}}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousedown",this),document.removeEventListener("mouseup",this),window.removeEventListener("resize",this.resizeHandler),document.removeEventListener("selectionchange",this.selectionHandler),clearTimeout(this.timer)}},{key:"getSelectedTextIndex",value:function(){var e=0,t=null;if(this.props.activeAnnotation)t=eo(this.props.splitText.annotatedText.getPositionOfAnnotation(this.props.activeAnnotation),1)[0];else if(this.props.selectedSearchResult){var n=this.props.splitText.annotatedText.segmentAtOriginalPosition(this.props.selectedSearchResult.start);n instanceof _r.a?t=n.start:"number"==typeof n&&(t=n)}return t&&(e=this.props.splitText.getTextIndexOfPosition(t)),e}},{key:"getControlsMeasurements",value:function(e){if(!this.splitText)return null;var t=this.splitText,n=null,r=null,o=null,i=null,a=null,l=[],c=0;if(e.activeAnnotation){var s=e.activeAnnotation;if(null===(c=eo(e.splitText.annotatedText.getPositionOfAnnotation(s),1)[0]))return console.warn("No startPos in getControlsMeasurements"),null;s.type===ANNOTATION_TYPES.pageBreak&&(c-=1),s.type===ANNOTATION_TYPES.lineBreak&&(c-=1);var u=c+s.length;s.length>0&&(u-=1),n=e.splitText.getTextIndexOfPosition(u),i=t.getBoundingClientRect()}var f=[];if(e.selectedAnnotatedSegments&&e.selectedAnnotatedSegments.length>0){f=e.selectedAnnotatedSegments;for(var d=0;d<f.length;d++){var p=f[d];if(null===r&&p instanceof _r.a){r=p;break}}r&&(0===r.length&&e.activeAnnotation&&e.activeAnnotation.isInsertion?(o=idForInsertion(r),a=idForInsertion):(o=idForSegment(r),a=idForSegment))}else if(e.activeAnnotation)if(e.activeAnnotation.isDeletion){var h=new _r.a(c,"");o=idForDeletedSegment(h),a=idForDeletedSegment,f=[r=h]}else if(e.activeAnnotation.isInsertion){var m=eo(e.splitText.annotatedText.getPositionOfAnnotation(e.activeAnnotation),1)[0];if(m){var y=new _r.a(m,"");o=idForInsertion(y),a=idForInsertion,f=[r=y]}}else if(e.activeAnnotation.type===ANNOTATION_TYPES.pageBreak){var g=new _r.a(c+1,""),b=new _r.a(c,"");r=g,f=[g],l=[o=idForPageBreak(b)]}else if(e.activeAnnotation.type===ANNOTATION_TYPES.lineBreak){var v=new _r.a(c+1,""),w=new _r.a(c,"");r=v,f=[v],l=[o=idForLineBreak(w)]}if(a)for(var O=0;O<f.length;O++){var x=f[O];if(x instanceof _r.a){var S=a(x);l.push(S)}}return null!=n&&r&&o&&i?{selectedTextIndex:n,firstSelectedSegment:r,selectedElementId:o,splitTextRect:i,selectedElementIds:l}:null}},{key:"render",value:function(){var e=this,t=this.props,n=this.rowRenderer,r=this.cache,i=t.selectedWitness?t.selectedWitness.id:0;return o.createElement("div",{className:Kr.a.splitText,ref:function(t){return e.splitText=t},key:i,style:{cursor:"pointer"}},o.createElement("button",{id:"updateList2",style:{display:"none"},onClick:function(){return e.updateList(!0)}}),o.createElement(D.a,{disableWidth:!0},(function(i){var a=i.height;return o.createElement(rn.d,{ref:function(t){return e.list=t},height:a,rowCount:t.splitText.texts.length,rowHeight:r.rowHeight,rowRenderer:n,width:1,overscanRowCount:1,deferredMeasurementCache:r,onScroll:e.scrollEvent,scrollToAlignment:"start",containerStyle:{width:"100%",maxWidth:"100%"},style:{width:"100%",paddingTop:30,paddingInline:50}})})))}},{key:"getStringPositions",value:function(e,t,n){var r=this.props.splitText.annotatedText.getUniqueId();if(ao.hasOwnProperty(r)||(ao=Xr({},r,{})),ao[r].hasOwnProperty(t)||(ao[r]=Xr({},t,{})),ao[r][t].hasOwnProperty(n))return ao[r][t][n];for(var o=new U.a,i=e.getText(),a=e.segments[0].start,l=[],c=i.indexOf(t);-1!==c;)l.push(c),c=i.indexOf(t,c+1);var s={};if(l.length>0)for(var u=o.splitGraphemes(i),f=0,d=null,p=0;p<u.length;p++){var h=u[p],m=f+(h.length-1);null!==d?m>=d+(t.length-1)&&(s[d+a]=[d+a,m+a],d=null):-1!==l.indexOf(f)?t.length===h.length?s[f+a]=[f+a,m+a]:t.length>h.length&&(d=f):d=null,f+=h.length}return ao[r][t][n]=s,s}},{key:"rowRenderer",value:function(e){var t=e.key,n=e.index,r=e.parent,i=e.style,a=this.props,l=this.cache,c={},s=this.props.searchValue;s&&s.length>0&&a.splitText&&(c=this.getStringPositions(a.splitText.texts[n],s,n));var u=Zr(Zr({},i),{},{height:i.height+10});return o.createElement(H.a,{columnIndex:0,key:t,parent:r,rowIndex:n,cache:l},o.createElement("div",{key:t,style:u,ref:this.splitTextRef,id:"index2_".concat(n),className:Kr.a.splitTextRow},o.createElement("div",{className:Kr.a.splitTextRowContent},o.createElement(Jr,{segmentedText:a.splitText.texts[n],row:n,selectedSegmentId:a.selectedSegmentId,searchStringPositions:c,textAlignmentById:a.textAlignmentById,fontSize:a.fontSize,isPanelLinked:this.props.isPanelLinked,selectedSourceRange:a.selectedSourceRange,selectedTargetRange:a.selectedTargetRange,changeSelectedRange:a.changeSelectedRange,changeSyncIdOnClick:this.props.changeSyncIdOnClick,changeScrollToId:this.props.changeScrollToId,condition:this.condition}))))}}]),n}(),co=n(139),so=n.n(co),uo=n(140);function fo(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function po(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ho(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?po(Object(n),!0).forEach((function(t){mo(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):po(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function mo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var yo,go,bo,vo,wo={},Oo={},xo=function(e,t){var n=L.ob(e,t);if(!n)return console.warn("no witness"),null;var r=n.text,o=L.sb(e,r.id),i=L.o(e,r.id);if(!o||!i)return null;var a=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return fo(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?fo(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(function(e,t,n){if(Oo.hasOwnProperty(t.id))return[Oo[t.id].appliedAnnotations,Oo[t.id].allAnnotations];t.text;var r=L.m(e,n.id),o=So(e,t.id,n.id),i=null,a={};if(t.id!==n.id){i=L.y(e,t.id);var l={};for(var c in r)if(r.hasOwnProperty(c)){var s=r[c];s.creator_witness!==t.id||i.hasOwnProperty(s.unique_id)?s.creator_witness===t.id&&(a[s.unique_id]=s):l[s.unique_id]=s}o=ho(ho({},Eo(e,l)),o),r=l}var u=Eo(e,r);return a=Eo(e,a),Object.keys(a).length>0&&(u=ho(ho({},u),a)),u=ho(ho({},o),u),u=so()(u,(function(e,n){return!(t&&e.type===Br.a.lineBreak&&e.creatorWitness.id!==t.id)})),L.ub(e,t.id)&&L.vb(e,t.id)&&(Oo[t.id]={appliedAnnotations:o,allAnnotations:u}),[o,u]}(e,n,o),2),l=a[0],c=(a[1],function(e){return To[e.id]||(To[e.id]=Object(uo.a)(e.content||"")),To[e.id]}(o));return new ar.g(c,Object.values(l),(function(e){return Object(uo.a)(e).segments}),o,n)},So=function(e,t,n){if(!L.vb(e,t))return{};var r=L.f(e,t);if(!r)return{};var o={};for(var i in r)if(r.hasOwnProperty(i)){var a=L.k(e,n,i);a&&(o[a.unique_id]=a)}return Eo(e,o)},Eo=function(e,t){var n={};for(var r in t)if(t.hasOwnProperty(r)){var o=t[r],i=L.b(e,o);i&&(n[r]=i)}return n},To={};function jo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Io(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?jo(Object(n),!0).forEach((function(t){Ao(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ao(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Po(e,t){if(e){if("string"==typeof e)return ko(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ko(e,t):void 0}}function ko(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Co(e){return[e.start,e.length].join("-")}var Ro,_o,Bo=Object(c.connect)((function(e){var t,n,r,o={},i=L.cb(e),a=L.K(e),l={};if(a){r=L.sb(e,a.id)||{};var c=L.O(e,a.id);c&&(o=L.ob(e,c)),ft()(o)&&ft()(r),o=r}n=function(e,t){var n=null;return t&&(n=xo(e,t))&&(wo[t]=n),n}(e,null===(t=o)||void 0===t?void 0:t.id);var s=e.data2.loadingWitnesses;n&&(l=function(e,t){if(e===yo&&t===go&&e.version===vo)return bo;for(var n={},r={},o=function(o){var i=t[o],a=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||Po(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(e.getPositionOfAnnotation(i),2),l=a[0],c=a[1];if(null==l)return"continue";if(0===c){if(i.isInsertion){var s=Co(i),u=r[s];if(u)return u.map((function(e){return n[e].push(i)})),"continue";l=INSERTION_KEY+l}i.isDeletion&&i.length>0&&(l=DELETION_KEY+l),i.type===ANNOTATION_TYPES.pageBreak&&(l=PAGE_BREAK_KEY+l),i.type===ANNOTATION_TYPES.lineBreak&&(l=LINE_BREAK_KEY+l),void 0===n[l]&&(n[l]=[]),-1===n[l].indexOf(i)&&n[l].push(i)}else{for(var f=[],d=l;d<l+c;d++)void 0===n[d]&&(n[d]=[]),-1===n[d].indexOf(i)&&n[d].push(i),f.push(d);if(i.isInsertion){var p=Co(i);r[p]=f}}},i=0;i<t.length;i++)o(i);return yo=e,go=t,bo=n,vo=e.version,n}(n,Object.values([])));var u=L.yb(e),f=L.z(e),d=L.T(e),p=L.Z(e),h=L.P(e),m=L.D(e),y=L.zb(e),g=L.p(e);return{text:a,textFontSize:i,annotatedText:n,selectedWitness:o,loading:s,annotationPositions:l,imageData:Object(L.s)(e),selectedImage:Object(L.E)(e),isImagePortrait:Object(L.xb)(e),scrollToId:f,syncIdOnClick:d,textAlignment:p,textAlignmentById:L.ab(e),selectedWindow:h,selectedSourceRange:Object(L.H)(e),selectedTargetRange:Object(L.I)(e),showTableContent:L.R(e),searchResults:Object(L.B)(e,m),searchValue:m,syncIdOnSearch:L.V(e),condition:g&&u&&y}}),null,(function(e,t,n){var r=e.annotatedText,o=e.annotationPositions,i=t.dispatch,a=function(e){return-1!==e.indexOf("ds2_")},l=function(e){return-1!==e.indexOf("i2_")},c=function(e){return l(e)?e.substr(2):a(e)?e.substr(3):e.substr(2)};return Io(Io(Io({},n),e),{},{onChangedFontSize:function(e){i(N.ec(e))},didSelectSegmentIds:function(t){if(0!==t.length){var n,i=[],s=[],u=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Po(e))){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw i}}}}(t);try{for(u.s();!(n=u.n()).done;){var f=n.value;if(!a(f)&&!l(f)){var d=c(f),p=r.segmentedText.segmentAtPosition(d);s.push(p);var h=o[p.start];h&&(i=i.concat(h))}}}catch(e){u.e(e)}finally{u.f()}i=Ft()(i,(function(e,t){return e.toString()==t.toString()}));var m=Qt()(i,r.annotations,(function(e,t){return e.toString()==t.toString()})),y=getSegmentsRange(s,m,i,e.annotatedText);if(y){var g=r.getBaseAnnotation(y.start,y.length);if(y.annotation)y.annotation;else if(m.length>0){var b=r.segmentedText.segmentsInRange(y.start,y.length).reduce((function(e,t){return e+t.text}),"");e.selectedWitness||console.log("no stateProps.selectedWitness: %o",e.selectedWitness),new Annotation(WORKING_VERSION_ANNOTATION_ID,getTextWorkingWitness(e.text),g.start,g.length,b,ANNOTATION_TYPES.variant,e.selectedWitness,e.user)}}else console.warn("No range for selected segment ids: %o",t)}},changeScrollToId:function(e){return i(N.Qb(e))},changeSyncIdOnClick:function(e){i(N.Tb(e))},changeSelectedWindow:function(e){i(N.Sb(e))},changeSelectedRange:function(e){i(N.Rb(e))},changeShowTableContent:function(e){i(N.Zc(e))},selectedSegmentId:function(t){var n=c(t),r=n;if(l(t)?r=INSERTION_KEY+n:a(t)?r=DELETION_KEY+n:function(e){return-1!==e.indexOf("p2_")}(t)?r=PAGE_BREAK_KEY+n:function(e){return-1!==e.indexOf("l2_")}(t)&&(r=LINE_BREAK_KEY+n),o[r],e.activeAnnotation&&e.activeAnnotation){var s=N.ac(null);i(s)}}})}))((function(e){var t=Object(o.useRef)(),n={name:""};function r(){n.name&&e.changeSelectedWindow(2)}e.text&&(n=e.text),Object(o.useEffect)((function(){var e=t.current;return e.addEventListener("mouseenter",r),function(){e.removeEventListener("mouseenter",r)}}),[]);var a,c=null,s=null,u=e.selectedWindow;e.annotatedText&&e.text&&!e.loading?(a=e.paginated?positionSplitter(e.pageBreaks):Object(sr.a)(800,/^།[\s]+(?!།[\s]+)/,2,5),s=new cr(e.annotatedText,a),c=i.a.createElement(lo,{splitText:s,limitWidth:!1,selectedSegmentId:e.selectedSegmentId,annotationPositions:e.annotationPositions,selectedAnnotatedSegments:null==e?void 0:e.selectedAnnotatedSegments,selectedWitness:e.selectedWitness,key:12,fontSize:e.textFontSize,scrollToId:e.scrollToId,syncIdOnClick:e.syncIdOnClick,textAlignment:e.textAlignment,textAlignmentById:e.textAlignmentById,isPanelLinked:e.isPanelLinked,changeScrollToId:e.changeScrollToId,changeSyncIdOnClick:e.changeSyncIdOnClick,selectedWindow:u,selectedSourceRange:e.selectedSourceRange,selectedTargetRange:e.selectedTargetRange,changeSelectedRange:e.changeSelectedRange,searchResults:e.searchResults,searchValue:e.searchValue,selectedText:e.text,syncIdOnSearch:e.syncIdOnSearch,condition:e.condition})):c=i.a.createElement("div",{key:Math.random()},i.a.createElement(jr,null));var f=[c];return pt.a.ThirdWindowHeight,i.a.createElement(Ue.a,{ref:t,className:fr.a.textDetail,sx:{height:"100%",flex:1,bgcolor:"navbar.main",color:"texts.main"}},i.a.createElement(or,null),i.a.createElement(jn.a,null),i.a.createElement(l.a,{loaded:!e.loading,zIndex:5}),i.a.createElement(Ue.a,{style:{display:"flex",height:"100%",width:"100%",position:"relative"}},i.a.createElement(Ue.a,{className:h()(fr.a.textContainer,st.a.flex)},e.loading?i.a.createElement("div",null):f),i.a.createElement(dr.a,{direction:"left",in:e.showTableContent,container:t.current,unmountOnExit:!0,mountOnEnter:!0},i.a.createElement(Ue.a,{sx:{position:"absolute",height:"100%",minWidth:"50%",right:0}},i.a.createElement(Or,null)))))})),Wo=i.a.memo(Bo),No=n(1012),Lo=n.n(No),Do=n(116),Ho=n(117),zo=n(895),Mo=n.n(zo),qo=n(896),Vo=n.n(qo);function Fo(){return(Fo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var Uo=function(e){return i.a.createElement("svg",Fo({viewBox:"0 0 24 24"},e),Ro||(Ro=i.a.createElement("path",{d:"M0 0h24v24H0z",fill:"none"})),_o||(_o=i.a.createElement("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})))},Qo=n(1073),Jo=n(1074),$o=n(1075),Ko=n(1076),Go=n(1022),Yo=n.n(Go),Zo=function(e){var t=e.content;return i.a.createElement("div",{className:Yo.a.shareContainer},i.a.createElement("div",{className:Yo.a.shareButton},i.a.createElement(S.a,{id:"annotation.share"})),i.a.createElement(Qo.a,{className:Yo.a.facebookButton,id:"sharebutton",url:"https://parkhang.lopenling.org".concat(window.location.pathname),quote:t,hashtag:"#openPecha"},i.a.createElement(Jo.a,{size:16,round:!0})),i.a.createElement($o.a,{className:Yo.a.whatsappButton,onClick:function(){return console.log("https://parkhang.lopenling.org".concat(window.location.pathname))},title:"Parkhang",url:"https://parkhang.lopenling.org".concat(window.location.pathname)},i.a.createElement(Ko.a,{size:16,round:!0})))},Xo=n(1024),ei=n.n(Xo),ti=n(1023),ni=n.n(ti);function ri(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var oi,ii=function(e){e.data;var t=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ri(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ri(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(i.a.useState(20),2),n=t[0],r=t[1];return i.a.createElement("div",{className:ni.a.voteContainer,onClick:function(){return r((function(e){return e+1}))}},i.a.createElement("button",{"aria-label":"vote",className:ni.a.voteBtn},i.a.createElement(ei.a,{color:"inherit"})),i.a.createElement("span",{className:ni.a.number},n))},ai=function(e){var t=i.a.createElement("p",null,"<",i.a.createElement(S.a,{id:"annotation.delete"}),">"),n=e.annotationData.content;""!==n.trim()&&(n.length>250&&(n=n.substr(0,250)+"…"),t=i.a.createElement("p",null,n));var r=[Vo.a.annotationDetail];e.isActive&&r.push(Vo.a.active);var o=h.a.apply(void 0,r);return i.a.createElement("div",{className:o,onClick:e.selectAnnotationHandler},i.a.createElement("div",{className:Vo.a.annotationHeader},e.isActive&&i.a.createElement("div",{className:Vo.a.activeIcon},i.a.createElement(Uo,{style:{fill:y.a.activeButton},width:15,height:15})),i.a.createElement("h3",null,e.annotationData.name),e.isLoggedIn&&e.isActive&&i.a.createElement("button",{style:{display:"none"},className:Vo.a.edit,onClick:e.editAnnotationHandler,id:"editBtn"})),!e.isWorkingSection&&t,e.isActive&&i.a.createElement("div",{className:Vo.a.contentOptions},i.a.createElement(ii,{data:e.annotationData}),i.a.createElement(Zo,{content:e.annotationData.content})))};function li(){return(li=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var ci=function(e){return i.a.createElement("svg",li({viewBox:"0 0 512 512"},e),oi||(oi=i.a.createElement("path",{d:"M497.9 142.1l-46.1 46.1c-4.7 4.7-12.3 4.7-17 0l-111-111c-4.7-4.7-4.7-12.3 0-17l46.1-46.1c18.7-18.7 49.1-18.7 67.9 0l60.1 60.1c18.8 18.7 18.8 49.1 0 67.9zM284.2 99.8L21.6 362.4.4 483.9c-2.9 16.4 11.4 30.6 27.8 27.8l121.5-21.3 262.6-262.6c4.7-4.7 4.7-12.3 0-17l-111-111c-4.8-4.7-12.4-4.7-17.1 0zM124.1 339.9c-5.5-5.5-5.5-14.3 0-19.8l154-154c5.5-5.5 14.3-5.5 19.8 0s5.5 14.3 0 19.8l-154 154c-5.5 5.5-14.3 5.5-19.8 0zM88 424h48v36.3l-64.5 11.3-31.1-31.1L51.7 376H88v48z"})))},si=function(e){var t=e.annotationData.content,n=[Vo.a.annotationDetail],r=null;e.isActive&&n.push(Vo.a.active);var o=h.a.apply(void 0,n);return i.a.createElement("div",{className:o},i.a.createElement("h3",null,e.annotationData.name),i.a.createElement("div",{className:Vo.a.editing},i.a.createElement("textarea",{defaultValue:t,autoFocus:!0,onInput:function(e){r.style.height="5px",r.style.height=r.scrollHeight+"px"},ref:function(e){return r=e}}),i.a.createElement("div",{className:Vo.a.actionButtons},i.a.createElement("div",{className:Vo.a.save,onClick:function(){r&&e.saveAnnotationHandler(r.value)}},i.a.createElement(ci,{height:"12px",width:"12px",style:{fill:"#fff",marginRight:10}}),i.a.createElement(S.a,{id:"annotation.save"})))))},ui=n(831),fi=n.n(ui),di=(n(75),n(1025)),pi=n.n(di),hi=n(1026),mi=n.n(hi),yi=function(e){return i.a.createElement("div",{className:mi.a.button,title:e.title,onClick:e.onClick},"+")};function gi(e){return(gi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function bi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function vi(e,t){return(vi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function wi(e){return(wi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Oi=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&vi(e,t)}(n,i.a.Component);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=wi(e);if(t){var o=wi(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===gi(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}(n);function n(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),t.apply(this,arguments)}return function(e,t,n){t&&bi(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"render",value:function(){var e=null;if(this.props.buttonOnClick){var t=this.props.buttonTitleId?this.props.intl.formatMessage({id:this.props.buttonTitleId}):"";e=i.a.createElement(yi,{title:t,onClick:this.props.buttonOnClick})}return i.a.createElement("h3",{className:pi.a.heading},i.a.createElement("span",{className:pi.a.title},i.a.createElement(S.a,{id:this.props.titleId})),e&&i.a.createElement("div",{className:pi.a.button},e))}}]),n}(),xi=(Object(d.c)(Oi),n(1027)),Si=n.n(xi),Ei=n(835),Ti=n.n(Ei);function ji(e){return(ji="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ii(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ai(e,t){return(Ai=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Pi(e){return(Pi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ki=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ai(e,t)}(n,i.a.Component);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Pi(e);if(t){var o=Pi(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===ji(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}(n);function n(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(r=t.call(this,e)).state={content:e.note.content},r}return function(e,t,n){t&&Ii(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"save",value:function(){var e=this.textarea?this.textarea.value:"";this.props.saveNote(this.props.note,e)}},{key:"cancel",value:function(){this.props.cancel()}},{key:"handleChange",value:function(e){var t=e.target instanceof HTMLTextAreaElement?e.target.value:"";this.setState((function(e,n){return{content:t}}))}},{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:Si.a.editorContainer},i.a.createElement("textarea",{className:Si.a.textEditor,ref:function(t){return e.textarea=t},value:this.state.content,onChange:this.handleChange.bind(this)}),i.a.createElement("div",{className:Ti.a.buttonContainer},i.a.createElement("div",{className:Ti.a.save,onClick:this.save.bind(this)},i.a.createElement(S.a,{id:"annotation.save"})),i.a.createElement("div",{className:Ti.a.cancel,onClick:this.cancel.bind(this)},i.a.createElement(S.a,{id:"annotation.cancel"}))))}}]),n}(),Ci=n(1028),Ri=n.n(Ci),_i=(n(227),n(1029)),Bi=n.n(_i),Wi=(n(171),n(273));function Ni(e){return(Ni="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Li(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Di(e,t){return(Di=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Hi(e){return(Hi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var zi=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Di(e,t)}(n,i.a.Component);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Hi(e);if(t){var o=Hi(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Ni(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}(n);function n(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),t.apply(this,arguments)}return function(e,t,n){t&&Li(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"render",value:function(){return i.a.createElement("div",{className:Bi.a.answer},i.a.createElement("p",{className:fi.a.text,dangerouslySetInnerHTML:{__html:this.props.answer.content}}),i.a.createElement("p",{className:fi.a.subTitle},i.a.createElement(S.a,{id:"question.answeredBy"})," ",this.props.answer.name,","," ",i.a.createElement(Wi.FormattedDate,{value:this.props.answer.created})))}}]),n}(),Mi=n(900),qi=n.n(Mi);function Vi(e){return(Vi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Fi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ui(e,t){return(Ui=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Qi(e){return(Qi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ji=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ui(e,t)}(n,i.a.Component);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Qi(e);if(t){var o=Qi(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Vi(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}(n);function n(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),t.apply(this,arguments)}return function(e,t,n){t&&Fi(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"delete",value:function(){this.props.delete&&this.props.delete()}},{key:"render",value:function(){for(var e=this.props.question.topicId||null,t=f.g+e,n=[],r=this.props.question.answers,o=0;o<r.length;o++){var a=r[o];n.push(i.a.createElement(zi,{answer:a,key:"answer_"+a.created}))}var l=this.props.question.name.length>0?this.props.question.name:this.props.question.username;return i.a.createElement(Ue.a,{className:h()(Ri.a.question,fi.a.padding),sx:{boxShadow:2}},i.a.createElement("p",{className:fi.a.text,dangerouslySetInnerHTML:{__html:this.props.question.content}}),i.a.createElement("div",{style:{display:"flex",alignItems:"center"}},i.a.createElement("span",{className:h()(Ri.a.threadLink,fi.a.text)},i.a.createElement("a",{href:t,target:"_blank"},i.a.createElement(S.a,{id:"question.viewThread"}))),this.props.delete&&i.a.createElement("div",{className:Ri.a.delete,onClick:this.delete.bind(this)},i.a.createElement(mt.a,{"aria-label":"delete",size:"small"},i.a.createElement(qi.a,{fontSize:"inherit"})))),i.a.createElement("p",{className:fi.a.subTitle},l,i.a.createElement(Wi.FormattedDate,{value:this.props.question.created})),i.a.createElement(Qe,{topicId:e}))}}]),n}(),$i=n(1030),Ki=n.n($i);function Gi(e){return(Gi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Yi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Zi(e,t){return(Zi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Xi(e){return(Xi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ea=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Zi(e,t)}(n,i.a.Component);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Xi(e);if(t){var o=Xi(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Gi(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}(n);function n(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(r=t.call(this,e)).state={content:e.question.content},r}return function(e,t,n){t&&Yi(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"save",value:function(){var e=this.textarea?this.textarea.value:"",t=this.props.defaultTitle+"[# ".concat(Date.now().toString().slice(-5,-1)," ]");this.props.saveQuestion(this.props.question,t,e)}},{key:"cancel",value:function(){this.props.cancel()}},{key:"handleChange",value:function(e){var t=e.target instanceof HTMLTextAreaElement?e.target.value:"";this.setState((function(e,n){return{content:t}}))}},{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:Ki.a.editorContainer},i.a.createElement("div",null,this.props.questionQuote),i.a.createElement("textarea",{className:Ki.a.textEditor,ref:function(t){return e.textarea=t},value:this.state.content,onChange:this.handleChange.bind(this)}),i.a.createElement("div",{className:Ti.a.buttonContainer},i.a.createElement("div",{className:Ti.a.save,onClick:this.save.bind(this)},i.a.createElement(S.a,{id:"annotation.save"})),i.a.createElement("div",{className:Ti.a.cancel,onClick:this.cancel.bind(this)},i.a.createElement(S.a,{id:"annotation.cancel"}))))}}]),n}(),ta=n(1031),na=n.n(ta);function ra(e){return(ra="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function oa(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ia(e,t){return(ia=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function aa(e){return(aa=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var la=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ia(e,t)}(n,i.a.Component);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=aa(e);if(t){var o=aa(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===ra(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}(n);function n(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),t.apply(this,arguments)}return function(e,t,n){t&&oa(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"render",value:function(){return i.a.createElement("div",{className:h()(na.a.loading,fi.a.text)},i.a.createElement(l.a,{loaded:!1,scale:.25,position:"relative",top:"50%",left:"50%",lines:9,width:8,length:8,radius:14}),"Loading questions...")}}]),n}(),ca=n(1032),sa=n.n(ca);function ua(e){return(ua="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fa(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function da(e,t){return(da=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function pa(e){return(pa=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ha,ma,ya,ga=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&da(e,t)}(n,i.a.Component);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=pa(e);if(t){var o=pa(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===ua(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}(n);function n(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),t.apply(this,arguments)}return function(e,t,n){t&&fa(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"delete",value:function(){this.props.delete&&this.props.delete(this.props.note)}},{key:"edit",value:function(){this.props.edit&&this.props.edit(this.props.note)}},{key:"render",value:function(){return i.a.createElement(Ue.a,{className:sa.a.note,sx:{boxShadow:2}},i.a.createElement("p",null,"Note:"),i.a.createElement("div",{className:sa.a.header},i.a.createElement("h4",{className:sa.a.info},this.props.note.creatorUser.name),this.props.delete&&i.a.createElement("div",{className:sa.a.delete,onClick:this.delete.bind(this)},i.a.createElement(mt.a,{"aria-label":"delete",size:"small"},i.a.createElement(qi.a,{fontSize:"inherit"})))),i.a.createElement("div",{className:sa.a.content,onClick:this.edit.bind(this)},this.props.note.content))}}]),n}();function ba(){return(ba=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var va,wa,Oa=function(e){return i.a.createElement("svg",ba({viewBox:"0 0 30 40",fill:"currentColor"},e),ha||(ha=i.a.createElement("path",{d:"M3 0h24v15H3z"})),ma||(ma=i.a.createElement("path",{stroke:"currentColor",strokeWidth:3,d:"M0 20h8M11 20h8M22 20h8"})),ya||(ya=i.a.createElement("path",{d:"M3 25h24v15H3z"})))},xa=n(1033),Sa=n.n(xa);function Ea(){return(Ea=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var Ta,ja,Ia=function(e){return i.a.createElement("svg",Ea({viewBox:"0 0 24 24"},e),va||(va=i.a.createElement("path",{d:"M3 18h12v-2H3v2zM3 6v2h18V6H3zm0 7h18v-2H3v2z"})),wa||(wa=i.a.createElement("path",{fill:"none",d:"M0 0h24v24H0V0z"})))};function Aa(){return(Aa=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var Pa=function(e){return i.a.createElement("svg",Aa({viewBox:"0 0 24 24",fill:"currentColor"},e),Ta||(Ta=i.a.createElement("path",{d:"M0 0h24v24H0z",fill:"none"})),ja||(ja=i.a.createElement("path",{d:"M21 6h-2v9H6v2c0 .55.45 1 1 1h11l4 4V7c0-.55-.45-1-1-1zm-4 6V3c0-.55-.45-1-1-1H3c-.55 0-1 .45-1 1v14l4-4h10c.55 0 1-.45 1-1z"})))};function ka(e){return(ka="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ca(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ra(e,t){return(Ra=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function _a(e){return(_a=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ba=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ra(e,t)}(n,i.a.Component);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_a(e);if(t){var o=_a(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===ka(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}(n);function n(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),t.call(this)}return function(e,t,n){t&&Ca(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"componentDidMount",value:function(){var e=this;this.keyHandler=function(t){var n,r,o,i,a=window.event?event:t,l=a.ctrlKey;l&&67!=a.keyCode&&t.preventDefault(),l&&69==a.keyCode&&e.props.editAnnotationHandler(),l&&81==a.keyCode&&(null===(n=e.props)||void 0===n||n.addQuestion()),l&&76==a.keyCode&&(null===(r=e.props)||void 0===r||r.addLineBreak()),l&&78==a.keyCode&&(null===(o=e.props)||void 0===o||o.addNote()),l&&80==a.keyCode&&(null===(i=e.props)||void 0===i||i.addPageBreak())},document.addEventListener("keydown",this.keyHandler,{once:!1})}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.keyHandler)}},{key:"render",value:function(){var e=null!=this.props.addPageBreak,t=null!=this.props.addLineBreak;return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:Sa.a.header},i.a.createElement(C,{noBezel:!0,icon:i.a.createElement(Ia,{width:15,height:15,style:{fill:"#fff"}}),backgroundColor:"transparent",onClick:this.props.addNote,disabled:!this.props.addNote,align:"center",tooltipTitle:"Note",shortcut:"n"}),i.a.createElement(C,{noBezel:!0,icon:i.a.createElement(Pa,{width:15,height:15,style:{fill:"#fff"}}),onClick:this.props.addQuestion,disabled:!this.props.addQuestion,align:"left",backgroundColor:"transparent",tooltipTitle:"Question",shortcut:"q"}),i.a.createElement(C,{noBezel:!0,color:"#fff",fontSize:"".concat(15,"px"),icon:"¶",onClick:this.props.addLineBreak,disabled:!t,align:"left",backgroundColor:"transparent",tooltipTitle:"LineBreak",shortcut:"l"}),i.a.createElement(C,{noBezel:!0,icon:i.a.createElement(Oa,{width:15,height:15,style:{fill:"#fff"}}),onClick:this.props.addPageBreak,disabled:!e,align:"left",backgroundColor:"transparent",tooltipTitle:"PageBreak",shortcut:"p"}),i.a.createElement(C,{onClick:this.props.editAnnotationHandler,backgroundColor:"transparent",noBezel:!0,icon:i.a.createElement(ci,{width:15,height:15,style:{fill:"#fff"}}),tooltipTitle:"Edit",shortcut:"e"})))}}]),n}();function Wa(e){return(Wa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Na(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function La(e,t){return(La=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Da(e){return(Da=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ha=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&La(e,t)}(n,o.Component);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Da(e);if(t){var o=Da(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Wa(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}(n);function n(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(r=t.call(this,e)).controls=null,r.arrow=null,r.arrowDs=null,r}return function(e,t,n){t&&Na(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"componentDidMount",value:function(){this.updatePosition()}},{key:"componentDidUpdate",value:function(){setTimeout(this.updatePosition.bind(this),0)}},{key:"updatePosition",value:function(){var e=this.getMeasurements();if(this.props.inline&&this.controls&&this.arrow&&e){var t=this.controls,n=t.offsetHeight,r=t.offsetWidth,o=this.arrow,i=e.bottomGap,a=i<0||i>n,l=e.top,c=e.viewPortWidth||0,s=e.left,u=s+e.width;if(o.style.display="none",this.props.selectedElementIds)for(var f=0,d=0,p=0;p<this.props.selectedElementIds.length;p++){var h=this.props.selectedElementIds[p],m=document.getElementById(h);if(m){var y=m.offsetLeft,g=y+m.offsetWidth;y<f?(d=g,m.offsetTop,m.offsetHeight,s=y,u=g):g>d&&(d=g),y<s&&(s=y),g>u&&(u=g),f=y}}var b=u-s,v=3,w=!1,O=0;if(!a&&i<n&&(w=!0),w)o.className=fi.a.arrowLeft,v=s-r-o.offsetWidth<0?4:2;else{var x=r/2-b/2;s-x<0&&(O=Math.abs(s-x)),u+x>c&&(O=c-(u+x))}if(3===v){var S=0,E=0;this.arrow&&(this.arrow.className=fi.a.arrowTop,(E=r/2-this.arrow.offsetWidth/2-O)<0&&(E=0),this.arrow.style.left=E+"px",S=this.arrow.offsetHeight,this.arrow.style.top=0-S+"px"),t.style.top=l-e.height-10+"px",t.style.left=e.left+"px"}else if(w){o.className=fi.a.arrowRight;var T=o.offsetHeight,j=e.top+e.height/2-T/2;e.top+e.height+i-j<n&&(j=e.top+e.height+i-n),2===v?(o.style.left=r-2+"px",t.style.left=s-r-o.offsetWidth+"px"):(o.className=fi.a.arrowLeft,o.style.left=-o.offsetWidth+"px",t.style.left=s+b+o.offsetWidth+"px"),o.style.top=e.top-j+e.height/2-T/2+"px",t.style.top=j+"px"}else console.log("last"),t.style.top=l+"px"}}},{key:"getMeasurements",value:function(){if(!this.props.selectedElementIds)return null;var e=this.props.selectedElementIds[this.props.selectedElementIds.length-1],t=document.getElementById(e),n=this.props.selectedElementIds[0],r=document.getElementById(n),o=this.props.splitTextRect,i=0;if(this.props.list&&this.props.list.Grid.state.scrollTop,this.props.pechaImageClass&&(i=document.getElementsByClassName(this.props.pechaImageClass)[0].offsetHeight),!r)return console.warn("no valid element found in getMeasurements, elementId: %s",this.props.selectedElementId),{top:0,textTop:0,rowTop:0,left:0,width:1,height:1,topGap:0,bottomGap:0,viewPortWidth:1};var a=r.offsetTop+i,l=r.offsetTop,c=r.offsetLeft,s=r.offsetWidth,u=r.offsetHeight,f=a,d=null,p=0,h=0;if(r&&o){var m=r.getBoundingClientRect();p=o.height-m.top}if(t&&o){var y=t.getBoundingClientRect();h=o.height+o.top-y.bottom,d=o.width}return{top:a,textTop:l,rowTop:f,left:c,width:s,height:u,topGap:p,bottomGap:h,viewPortWidth:d}}},{key:"render",value:function(){var e,t=this,n=this.props,r=[],i=[],a=null,l=null,c=n.user.isLoggedIn,s=!1;n.activeAnnotation&&(n.activeAnnotation.isType(Br.a.pageBreak)||n.activeAnnotation.isType(Br.a.lineBreak))&&(s=!0),n.annotationsData?(n.annotationsData.map((function(e){var a=!1,l=!1;if(e.isTemporary?(a=!0,l=!0):n.temporaryAnnotation||e.annotation.uniqueId!=n.activeAnnotation.uniqueId||(l=!0),a){var s=o.createElement(si,{annotationData:e,key:e.annotation.uniqueId,isActive:l,saveAnnotationHandler:function(t){n.saveAnnotation(e.annotation,t)},cancelAnnotationHandler:function(){n.cancelEditAnnotation(e.annotation)},isLoggedIn:c,selectAnnotationHandler:function(){},editAnnotationHandler:function(){}});i.push(s)}else{var u=o.createElement(ai,{isWorkingSection:!1,fontSize:n.fontSize,annotationData:e,key:e.annotation.uniqueId,isActive:l,selectAnnotationHandler:function(){c&&!a&&n.didSelectAnnotation(e.annotation)},editAnnotationHandler:function(){c&&!a&&(t.annotation=e.annotation,n.editAnnotation(e.annotation))},isLoggedIn:c});r.push(u)}}),this),n.user.isLoggedIn||(a=o.createElement("div",{className:fi.a.anonymousMessage,style:{position:"relative",width:"fit-content",border:"1px solid gray",paddingInline:10}},o.createElement(S.a,{id:"annotations.loginMessage",values:{loginLink:o.createElement(o.Fragment,null,o.createElement(S.a,{id:"annotations.loginLink"}))}})))):l=o.createElement("div",{className:fi.a.nothingSelected},"Nothing Selected");var u=null,f=!this.props.selectedWitness.isWorking,d=null,p=!this.props.selectedWitness.isWorking;if(c&&!this.props.selectedWitness.isWorking){var m=[],g=[];this.props.availableAnnotations&&(m=this.props.availableAnnotations.filter((function(e){return e.type===Br.a.pageBreak&&e.creatorWitness.id===t.props.selectedWitness.id})),g=this.props.availableAnnotations.filter((function(e){return e.type===Br.a.lineBreak&&e.creatorWitness.id===t.props.selectedWitness.id}))),m.length>0&&(u=o.createElement("div",{className:fi.a.breakButtons},o.createElement(C,{title:"Page Break",accessoryType:"DELETE",icon:o.createElement(Oa,{width:20,height:20}),onClick:function(){t.props.deleteAnnotation(m[0])},isActive:!0,backgroundColor:y.a.activeButton})),f=!1),g.length>0&&(d=o.createElement("div",{className:fi.a.breakButtons},o.createElement(C,{title:"Line Break",accessoryType:"DELETE",icon:"¶",onClick:function(){t.props.deleteAnnotation(g[0])},isActive:!0,backgroundColor:y.a.activeButton})),p=!1),f||(p=!1),p||(f=!1)}var b=null,v={};n.temporaryNotes&&n.temporaryNotes.length>0&&(b=n.temporaryNotes.map((function(e){var t="NOTE_"+e.uniqueId;return e.basedOn&&(v[e.basedOn.uniqueId]=e.uniqueId),o.createElement(ki,{note:e,key:t,saveNote:n.saveAnnotation,cancel:function(){return n.cancelEditAnnotation(e)}})})));var w=null;n.notes&&n.notes.length>0&&(w=n.notes.filter((function(e){return!v.hasOwnProperty(e.uniqueId)})).map((function(e){var n="NOTE_"+e.uniqueId;return o.createElement(ga,{note:e,key:n,delete:t.props.deleteAnnotation,edit:t.props.editNote})})));var O=null,x={};n.temporaryQuestions&&n.temporaryQuestions.length>0&&n.questionQuote&&(O=n.temporaryQuestions.map((function(e){x[e.uniqueId]=e.uniqueId;var t="QUESTION_"+e.uniqueId;return o.createElement(ea,{question:e,questionQuote:n.questionQuote,defaultTitle:n.selectedWitness.text.name,key:t,saveQuestion:n.saveQuestion,cancel:function(){return n.cancelEditAnnotation(e)}})})));var E=[],T=!1;if(n.questions&&n.questions.length>0){for(var j=[],I=0;I<n.questions.length;I++){var A=n.questions[I];!x.hasOwnProperty(A.uniqueId)&&n.questionsData.hasOwnProperty(A.uniqueId)&&(n.questionsData[A.uniqueId].loading&&(T=!0),j=j.concat(n.questionsData[A.uniqueId].questions))}E=j.map((function(e,n){return e.annotationUniqueId,o.createElement(Ji,{question:e,key:"question_"+e.annotationUniqueId,delete:function(){return t.props.deleteAnnotation(t.props.questions[n])}})}))}var P=null;E.length>0&&(P=o.createElement("h3",{className:fi.a.sectionHeading},"Questions"));var k=null;T&&(k=o.createElement(la,null));var R=0===(null===(e=n.questions)||void 0===e?void 0:e.length)&&0===n.temporaryQuestions.length,_=[fi.a.annotationControls];n.inline&&_.push(fi.a.inline);var B=!0;(a||s)&&(B=!1);var W=kr.a.createPortal(o.createElement("div",{className:fi.a.annotationContent},a,l,!s&&r,u,d,b,w,P,O,k,E),document.getElementById("annotation-portal"));return o.createElement("div",{className:h.a.apply(void 0,_),ref:function(e){return t.controls=e}},B&&o.createElement(Ba,{addPageBreak:f?n.addPageBreak:null,addLineBreak:p?n.addLineBreak:null,addNote:c&&!b?function(){return n.addNote()}:null,addQuestion:R?n.addQuestion:null,closeAnnotation:n.closeAnnotation,editAnnotationHandler:function(){var e=document.getElementById("editBtn");null==e||e.click()},userLoggedIn:c}),!s&&i,W,o.createElement("div",{className:fi.a.arrow,ref:function(e){return t.arrow=e}}))}}]),n}(),za=n(901),Ma=n.n(za);function qa(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Va(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qa(Object(n),!0).forEach((function(t){Fa(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qa(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Fa(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ua(e){return function(e){if(Array.isArray(e))return $a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Ja(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Qa(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||Ja(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ja(e,t){if(e){if("string"==typeof e)return $a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?$a(e,t):void 0}}function $a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ka=function(e,t,n,r){var o=[],i=t.filter((function(e){return e.isWorking||e.isBase})).map((function(e){return e.name}));if(e){for(var a={},l=function(t){var n=e[t],r=n.content+n.start;n.isTemporary?(a[-3]={name:n.getSourceName(),content:n.content,id:n.uniqueId,isTemporary:!0,annotation:n},i=i.filter((function(e){return e!==n.getSourceName()})),r=-3):a[r]?(a[r].name+=" "+Object(M.a)(n.getSourceName()),i=i.filter((function(e){return e!==n.getSourceName()}))):(a[r]={name:Object(M.a)(n.getSourceName()),content:n.content,id:n.uniqueId,userCreated:n.userCreated,annotation:n},i=i.filter((function(e){return e!==n.getSourceName()}))),!n.userCreated&&n.creatorWitness.isWorking?a[r].isWorking=!0:a[r].isWorking=!1},c=0;c<e.length;c++)l(c);i.unshift(n);var s=i;"བྱང་ཆུབ་སེམས་དཔའི་སྤྱོད་པ་ལ་འཇུག་པ་བཞུགས་སོ།"!==(null==r?void 0:r.name)&&(s=i.filter((function(e){return"Dominant"!==e}))),o=Object.keys(a).reduce((function(e,t){var n=a[t];return n.isWorking&&(n.name=s.reduce((function(e,t){return e+" "+Object(M.a)(t,";")}),"")),e.push(n),e}),[])}return o},Ga=Object(c.connect)((function(e,t){var n=L.lb(e),r=L.J(e),o=t.activeAnnotation,a=t.inline,l=L.L(e);if(l||r&&(l=L.rb(e,r.id)),!o||!l)return{annotationsData:null,activeAnnotation:null,baseAnnotation:null,availableAnnotations:null,user:n,temporaryAnnotation:null,inline:null,firstSelectedSegment:null,splitTextRect:null,selectedWitness:null};var c=function(e,t,n,r,o,i){var a=L.W(e,r.id,o,i,t);return a.length>0?a[0]:null}(e,Br.a.variant,0,l,o.start,o.length),s=function(e,t,n,r){var o=[];n&&t.naturalId===n.naturalId||o.push(t),n&&o.push(n);var i=Qa(e.getPositionOfAnnotation(t),2),a=i[0],l=i[1];if(!a)return o;var c=a+l,s=[];if(t.isInsertion){var u=r["i"+a];u&&(s=s.concat(u));var f=r[String(a)];f&&(s=s.concat(f))}else{var d=r[String(a)],p=r[String(c)];d&&(s=d),p&&(s=s.concat(p))}for(var h=0;h<s.length;h++){var m=s[h];m.start===t.start&&m.length===t.length?n&&m.naturalId===n.naturalId||o.push(m):e.activeWitness.isWorking||m.type!==Br.a.pageBreak&&m.type!==Br.a.lineBreak||o.push(m)}return Ft()(o,(function(e,t){return e.id===t.id}))}(t.annotatedText,o,c,t.annotationPositions),u=s.filter((function(e){return e.type===Br.a.variant})),f=L.S(e),d=L.kb(e,"annotation.workingEdition","Working"),p=Ka(u,f,d,r),h=null;if(o.id==ar.a)h=o;else{var m=Qa(t.annotatedText.getPositionOfAnnotation(o),2),y=m[0],g=m[1];if(null===y||null===g)p=null;else{h=t.annotatedText.getBaseAnnotation(y,g);var b=Ka([h],f,d);p=[].concat(Ua(b),Ua(p))}}p&&p.sort((function(e,t){return e.isTemporary?-1:t.isTemporary?1:e.userCreated?-1:t.userCreated?1:e.annotation.id&&t.annotation.id?e.annotation.id-t.annotation.id:1}));var v=s.filter((function(e){return e.type===Br.a.note})),w=L.W(e,l.id,o.start,o.length,Br.a.note),O=s.filter((function(e){return e.type===Br.a.question})),x={};if(O.length>0)for(var S=0;S<O.length;S++){var E=O[S];x[E.uniqueId]={};var T=L.Ab(e,E);x[E.uniqueId].loading=T;var j=L.x(e,E.uniqueId);x[E.uniqueId].questions=j}var I=L.W(e,l.id,o.start,o.length,Br.a.question),A=null;if(I.length>0){var P=I[0],k=Qa(t.annotatedText.getPositionOfAnnotation(P),2),C=k[0],R=k[1];if(C){R||(R=C+1);var _=Qa(t.annotatedText.segmentedText.extractTextAroundPosition(C,R,["།"," "]),3),B=_[0],W=_[1],N=_[2],D=document.location.href;A=i.a.createElement("blockquote",null,B,i.a.createElement("a",{href:D},W),N)}}var H=Object(L.bb)(e);return{annotationsData:p,activeAnnotation:o,baseAnnotation:h,availableAnnotations:s,user:n,temporaryAnnotation:c,inline:a,firstSelectedSegment:t.firstSelectedSegment,splitTextRect:t.splitTextRect,selectedWitness:l,notes:v,temporaryNotes:w,questions:O,temporaryQuestions:I,questionsData:x,questionQuote:A,fontSize:H}}),null,(function(e,t,n){var r=t.dispatch;if(e.questions.length>0)for(var o=0;o<e.questions.length;o++){var i=e.questions[o],a=!0;e.questionsData.hasOwnProperty(i.uniqueId)&&(e.questionsData[i.uniqueId].questions.length>0||e.questionsData[i.uniqueId].loading)&&(a=!1),a&&r(new N.pc(i))}var l=function(t){var o=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(){var i=n.activeAnnotation,a=new Br.c(null,i.witness,i.end+1,0,null,t,e.selectedWitness,e.user),l=L.d(e.selectedWitness),c=[];c.push(N.ic(a)),c.push(N.Jb(a.uniqueId,l)),o?c.push(N.ac(a)):c.push(N.ac(null)),r(Object(pe.batchActions)(c))}},c=function(t,n){if(t.isTemporary){var o=e.selectedWitness,i=L.d(o),a=new Br.c(t.id,t.witness,t.start,t.length,n,t.type,t.creatorWitness,e.user,t.uniqueId,t.basedOn);a.isSaved=t.isSaved;var l=[],c=null;c=a.isSaved?N.cd:N.ic,l.push(c(a)),l.push(N.Kc(t)),l.push(N.Jb(a.uniqueId,i)),a.type===Br.a.variant&&l.push(N.ac(a)),r(Object(pe.batchActions)(l))}else console.warn("Tried to save a non-temporary annotation: %o",t)};return Va(Va(Va({},e),n),{},{closeAnnotation:function(){if(e.activeAnnotation){var t=N.ac(null);r(t)}},didSelectAnnotation:function(t){var n;n=t.id==ar.a?e.baseAnnotation:Mo()(e.availableAnnotations,(function(e){return e.uniqueId==t.uniqueId}))||null;var o=[],i=e.selectedWitness,a=L.d(i);t.uniqueId!=e.activeAnnotation.uniqueId&&(i.isWorking?(t.id!=ar.a&&o.push(N.Jb(n.uniqueId,a)),e.activeAnnotation.id!=ar.a&&o.push(N.Ic(e.activeAnnotation.uniqueId,a))):e.activeAnnotation.creatorWitness.id===i.id?(o.push(N.Jc(e.activeAnnotation.uniqueId,a)),n.id!==ar.a&&o.push(N.Jb(n.uniqueId,a))):(n.creatorWitness.id===i.id?o.push(N.Kb(n.uniqueId,a)):n.id!==ar.a&&o.push(N.Jb(n.uniqueId,a)),e.activeAnnotation.id!==ar.a&&o.push(N.Ic(e.activeAnnotation.uniqueId,a))),o.push(N.ac(n)),r(Object(pe.batchActions)(o)))},editAnnotation:function(t){var n=t.isWorkingAnnotation||t.userCreated||t.id===ar.a?null:t,o=new Br.b(n,t.witness,t.start,t.length,t.content,t.type,e.selectedWitness,e.user);t.userCreated&&(o.uniqueId=t.uniqueId,o.isSaved=t.isSaved),r(N.Ib(o,!0))},saveAnnotation:c,cancelEditAnnotation:function(e){if(e.isTemporary){var t=N.Kc(e);r(t)}else console.warn("Tried to call cancelEditAnnotation on a non-temporary annotation: %o",e)},deleteAnnotation:function(t){var n=e.selectedWitness,o=L.d(n),i=[];i=t.userCreated?[N.kc(t,n),N.Ic(t.uniqueId,o)]:[N.Jc(t.uniqueId,o)],e.activeAnnotation.uniqueId===t.uniqueId&&i.push(N.ac(null)),r(Object(pe.batchActions)(i))},addNote:function(){var t=n.activeAnnotation,o=new Br.b(null,t.witness,t.start,t.length,"",Br.a.note,e.selectedWitness,e.user);r(N.Ib(o,!0))},editNote:function(t){var n=new Br.b(t,t.witness,t.start,t.length,t.content,Br.a.note,e.selectedWitness,e.user);r(N.Ib(n,!0))},addPageBreak:l(Br.a.pageBreak),addLineBreak:l(Br.a.lineBreak),addQuestion:function(){var t=n.activeAnnotation,o=new Br.b(null,t.witness,t.start,t.length,"",Br.a.question,e.selectedWitness,e.user);r(N.Ib(o,!0))},saveQuestion:function(t,o,i){var a=Qa(n.annotatedText.getPositionOfAnnotation(t),2),l=(a[0],a[1],Ma.a.renderToStaticMarkup(e.questionQuote)+i);c(t,i);var s=N.jc(t,o,l);r(s)}})}))(Ha);function Ya(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Za=Object(o.memo)(Object(d.c)((function(e){var t=[],n="",r="",o=[];return e.witnesses&&e.activeWitness&&(r=e.witnesses.findIndex((function(t){return t.id===e.activeWitness.id})),(t=e.witnesses.map((function(e){return e}))).sort((function(e,t){return e.isWorking?-1:t.isWorking?1:e.isBase?-1:t.isBase?1:0})),t=t.sort((function(e,t){return e.id-t.id}))),0===t.length?null:i.a.createElement(ht.a,{onChange:function(n){ft()(t)||e.onSelectedWitness(t[n.target.value])},className:en.a.selectVersion,value:r,label:"Version",classes:{root:en.a.selectEmpty,select:en.a.selectOptions}},t.map((function(t,r){var a;return t.id===e.activeWitness.id&&o.push(en.a.selected),n=t.source.name,t.isWorking&&(n="en"===e.intl.locale?"User"===(null===(a=e.user)||void 0===a?void 0:a.name)?"Working":"My Edition":"མཉམ་འབྲེལ་པར་མ།"),i.a.createElement("option",{key:"versionSelect-".concat(r),value:r,className:en.a.selectOptions},n)})))})));function Xa(e){return function(e){if(Array.isArray(e))return nl(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||tl(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function el(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||tl(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tl(e,t){if(e){if("string"==typeof e)return nl(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?nl(e,t):void 0}}function nl(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var rl=i.a.memo((function(e){var t=Object(o.useRef)(e.texts),n=el(Object(o.useState)(t.current),2),r=n[0],a=n[1],l=el(Object(o.useState)(null),2),c=l[0],s=l[1],u=e.onSelectedText,f=e.selectedText,d=el(Object(o.useState)(!1),2),p=d[0],m=d[1],y=null==f?void 0:f.name,g=Object(o.useRef)(new rn.c({fixedHeight:!0,defaultHeight:40})),b=[an.a.textlist];Object(o.useEffect)((function(){var e=[];""===c&&a(Xa(t.current)),null!==c&&""!==c&&(e=t.current.filter((function(e){return e.name.includes(c)})),a(Xa(e)))}),[c]);var v=i.a.useCallback((function(e){var t=e.key,n=e.index,o=e.style,a=e.parent,l=r[n];return i.a.createElement(rn.b,{key:"optionvalues-".concat(t),cache:g.current,parent:a,columnIndex:0,rowIndex:n},i.a.createElement("div",{style:o,onClick:function(){m(!1),u(l)}},i.a.createElement(Ue.a,{sx:{overflow:"hidden",textOverflow:"ellipsis",width:"13rem",paddingLeft:2,fontSize:{lg:12,md:11,sm:10,xs:10},color:"text.primary"},component:"div"},i.a.createElement(Ae.a,{noWrap:!0},Object(M.a)(l.name)))))}),[r]);return i.a.createElement(ln.a,{onClickAway:function(){return m(!1)}},i.a.createElement("div",{style:{position:"relative",marginLeft:10}},i.a.createElement(cn.a,{onClick:function(){m((function(e){return!e})),!1===p&&b.push(an.a.open)},component:"div",variant:"outlined",sx:{textOverflow:"ellipsis",width:"10rem",height:"100%",color:"text.primary"}},i.a.createElement(Ae.a,{noWrap:!0},y||"select Text here")),i.a.createElement(sn.a,{in:p},i.a.createElement(Ue.a,{className:h()(b),sx:{position:"absolute",bgcolor:"heading.main",zIndex:1}},i.a.createElement(un.a,{onChange:function(e){var t=e.target.value;s(t)},id:"standard-basic",label:"Search",variant:"standard",style:{width:"100%"}}),i.a.createElement(rn.a,null,(function(e){var t=e.width,n=e.height;return i.a.createElement(rn.d,{width:t,height:n,rowHeight:30,deferredMeasurementCache:g.current,rowCount:r.length,rowRenderer:v})}))))))})),ol=Object(c.connect)((function(e){return{texts:L.ib(e),selectedText:L.J(e)}}),(function(e){return{onSelectedText:function(t){e(N.Rc(t))}}}))(rl),il=i.a.memo(ol),al=function(e){var t=e.isSecondWindowOpen,n=Object(o.useCallback)((function(){var e=document.getElementById("updateList");e&&e.click()}),[t]);return Object(o.useEffect)((function(){var e=setTimeout((function(){n()}),500);return function(){return clearTimeout(e)}}),[t]),i.a.createElement(mt.a,{variant:"text",size:"small",disableRipple:!0,onClick:n},i.a.createElement(Vn.a,null))},ll=function(e){var t=e.handleWindowSearch;return i.a.createElement(mt.a,{size:"small",variant:"text",onClick:t},i.a.createElement(_n.a,null))};function cl(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return sl(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?sl(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function sl(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ul=function(e){var t=cl(Object(o.useState)(!1),2),n=t[0],r=t[1],a=cl(Object(Ke.a)("WindowOneFont","Tibetan"),2),l=a[0],c=a[1];return Object(o.useEffect)((function(){document.body.style.setProperty("--tibetan-fonts",l)}),[]),i.a.createElement(ln.a,{onClickAway:function(){return r(!1)}},i.a.createElement(Ue.a,{position:"relative"},i.a.createElement(mt.a,{onClick:function(){r((function(e){return!e}))},size:"small",variant:"text"},i.a.createElement(vn,{height:20,width:20,fill:"currentColor"})),i.a.createElement(sn.a,{in:n},i.a.createElement(Tn.a,{dense:!0,sx:{position:"absolute",right:0,zIndex:2,top:40,bgcolor:"heading.main"}},i.a.createElement(xn,{fontSize:e.textFontSize,onChange:e.onChangedFontSize}),i.a.createElement(jn.a,null),i.a.createElement(fl,{selectFont:function(e){c(e),document.body.style.setProperty("--tibetan-fonts","".concat(e));var t=document.getElementById("updateList");setTimeout((function(){t.click()}),800),r(!1)},selectedfont:l}),i.a.createElement(In.a,{onClick:function(){return e.onExport()}},i.a.createElement(Ae.a,{variant:"subtitle2"},"Export Document"))))))},fl=function(e){var t=e.selectFont,n=e.selectedfont,r=f.c||[];return i.a.createElement(Ue.a,{textAlign:"center"},i.a.createElement("span",null,"Font:")," ",i.a.createElement("select",{onChange:function(e){return t(e.target.value)},value:n},r.map((function(e,t){return i.a.createElement("option",{key:t+"-fontselect",value:e},e)}))))},dl=function(e){var t=e.changeShowTableContent,n=e.showTableContent;return i.a.createElement(i.a.Fragment,null,i.a.createElement(mt.a,{onClick:function(){t(!n)}},n?i.a.createElement(Dn.a,null):i.a.createElement(Nn.a,null)))};function pl(e){return(pl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function hl(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ml(e,t){return(ml=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function yl(e){return(yl=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var gl=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ml(e,t)}(n,o.Component);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=yl(e);if(t){var o=yl(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===pl(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}(n);function n(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),t.call(this,e)}return function(e,t,n){t&&hl(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"render",value:function(){var e=this,t=this.props.string,n=t,r=this.props.stringClass||"";if(this.props.searchTerm){var i=this.props.searchTerm,a=(new U.a).splitGraphemes(t),l=t.indexOf(i),c=l+i.length,s=0,u="";if(l>-1)for(var f=0;f<a.length;f++){var d=a[f];s>=l&&s<c&&(u+=d),s+=d.length}u.length>0&&(n=J()(t,u,(function(t,n){return o.createElement("span",{className:e.props.highlightClass,key:"highlight-".concat(n)},t)})))}return o.createElement("span",{className:r},n)}}]),n}(),bl=n(1036),vl=n.n(bl),wl=function(e){var t=e.handleListItemClick,n=e.searchValue,r=e.results,a=(e.selectedText,Object(o.useRef)()),l=Object(o.useRef)(new rn.c({fixedWidth:!0,defaultHeight:100})),c=function(e){var o=e.key,a=e.index,c=e.parent,s=e.style,u=r[a];return i.a.createElement(rn.b,{key:"listkeys2-".concat(o),cache:l.current,parent:c,columnIndex:0,rowIndex:a},i.a.createElement("div",{style:s},r.length>0&&i.a.createElement("div",{className:vl.a.searchListItem,onClick:function(){return t(u[0])}},i.a.createElement(gl,{string:u[1],highlightClass:vl.a.highlight,searchTerm:n}))))};return r?i.a.createElement(i.a.Fragment,null,i.a.createElement(rn.a,null,(function(e){var t=e.height,n=e.width;return i.a.createElement(rn.d,{ref:a,height:t,rowCount:null==r?void 0:r.length,rowHeight:l.current.rowHeight,deferredMeasurementCache:l.current,rowRenderer:c,width:n,overscanRowCount:1})}))):null};function Ol(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xl(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Sl(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Sl(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Sl(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var El=i.a.memo((function(e){var t,n=xl(Object(o.useState)(""),2),r=n[0],a=n[1],l=xl(Object(o.useState)(!1),2),c=l[0],s=l[1],u=xl(Object(o.useState)(!1),2),f=u[0],d=u[1],p=Object(o.useRef)(),h=Object(o.useRef)(),m=i.a.useRef(Gt()((function(t){e.searchChanged(t)}),1e3)).current,y=Object(o.useCallback)((function(e){e.preventDefault(),m(r),d(!0)}),[r]),g=Object(o.useCallback)((function(){!1===c&&m(null),s(!c)}),[c]);Object(o.useEffect)((function(){!0===c&&h.current.focus(),!1===c&&m(null)}),[c]);var b=Object(o.useCallback)((function(){d(!1),m(null),a("")}),[]),v=Object(o.useMemo)((function(){return $t()(e.searchResults)&&e.searchResults.hasOwnProperty(e.selectedText.id)}),[e.searchResults,e.selectedText]),w=v?e.searchResults[e.selectedText.id].results:[];return i.a.createElement(zn.a,{ref:p,direction:"column",spacing:1,sx:{paddingInline:{md:1,xs:0},paddingBlock:{md:1,xs:0},bgcolor:"heading.main",color:"text.primary"}},i.a.createElement(zn.a,{direction:"row",spacing:1,justifyContent:"space-between"},i.a.createElement(Ue.a,{sx:{display:"flex",gap:{md:2,sx:0},flexDirection:{md:"row",xs:"column"}}},i.a.createElement(il,null),i.a.createElement(Za,{witnesses:e.witnesses,activeWitness:e.selectedWitness,onSelectedWitness:e.onSelectedWitness,user:e.user})),i.a.createElement(Mn.a,{size:"small",sx:{position:"relative",display:"flex",height:"fit-content",alignItems:"center",justifyContent:"center",width:"fit-content",border:function(e){return"1px solid ".concat(e.palette.divider)},borderRadius:1,bgcolor:"background.paper",color:"text.secondary","& svg":{m:1},"& hr":{mx:.5}},className:Zt.a.button_group_menu},i.a.createElement(al,{isSecondWindowOpen:e.isSecondWindowOpen}),i.a.createElement(jn.a,{orientation:"vertical",variant:"middle",flexItem:!0}),i.a.createElement(ll,{handleWindowSearch:g}),i.a.createElement(ul,{textFontSize:e.textFontSize,onChangedFontSize:e.onChangedFontSize,onExport:e.onExport}),i.a.createElement(dl,{changeShowTableContent:e.changeShowTableContent,showTableContent:e.showTableContent}))),i.a.createElement(yt.a,{in:c,mountOnEnter:!0,unmountOnExit:!0},i.a.createElement("form",{onSubmit:y},i.a.createElement(zn.a,{direction:"row",spacing:2,position:"relative"},i.a.createElement(un.a,{hiddenLabel:!0,id:"filled-hidden-label-small",inputProps:{style:{height:25,padding:"0 14px"}},style:{height:25,flex:1},fullWidth:!0,inputRef:h,value:r,onChange:function(e){return a(e.target.value)}}),i.a.createElement(cn.a,{variant:"outlined",size:"small",onClick:y,style:{height:25}},"Search"),e.searchResults&&f&&i.a.createElement(Ue.a,{sx:(t={position:"absolute",top:35,right:0,zIndex:1,bgcolor:"heading.main",height:350,width:350,boxShadow:3,overflowX:"hidden"},Ol(t,"boxShadow",3),Ol(t,"display",0===w.length?"none":"block"),t)},v&&w.length>0&&i.a.createElement(wl,{handleListItemClick:function(t){e.changeSelectSyncId(t)},searchValue:e.searchValue,results:w,selectedText:e.selectedText}),i.a.createElement(mt.a,{"aria-label":"closeButton",onClick:b,size:"small",sx:{right:15,top:0,position:"absolute"}},i.a.createElement(Rt.a,{fontSize:"inherit"})))))))}));function Tl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function jl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Tl(Object(n),!0).forEach((function(t){Il(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Tl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Il(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Al=Object(c.connect)((function(e){var t,n,r=L.J(e),o=L.K(e),i=[],a=!1;if(r){i=L.gb(e,r.id);var l=L.N(e,r.id);l?(t=L.nb(e,l),a=L.q(e,l)):t=L.rb(e,r.id)}if(o){var c=L.O(e,o.id);n=c?L.ob(e,c):L.sb(e,o.id)}var s=L.bb(e),u=L.C(e);return{witnesses:i,selectedText:r,selectedText2:o,selectedWitness:t,selectedWitness2:n,textFontSize:s,exportingWitness:a,searchValue:u,showTableContent:L.Q(e),searchResults:L.A(e,u)}}),null,(function(e,t,n){var r,o=t.dispatch,i=e.selectedText;return jl(jl(jl({},n),e),{},(Il(r={navigationButtonClicked:function(){t.dispatch(N.gc(!e.textListIsVisible))},onSelectedWitness:function(e){o(N.Tc(null==i?void 0:i.id,null==e?void 0:e.id))},onChangedFontSize:function(e){o(N.ec(e))},onChangeWindowOpen:function(e,t){o(N.ad(e,t))},onExport:function(){o(N.lc(e.selectedWitness.id,"docx"))}},"navigationButtonClicked",(function(){o(N.gc(!e.textListIsVisible))})),Il(r,"changeIsAnnotating",(function(e){if(o(N.Ob(e)),!1===e){var t=N.ac(null);o(t),o(N.ac(null))}})),Il(r,"searchChanged",(function(e){o(N.bc(e))})),Il(r,"changeShowTableContent",(function(e){o(N.Yc(e))})),Il(r,"changeSelectSyncId",(function(e){o(N.Ub(e))})),r))}))(El),Pl=n(1037),kl=n.n(Pl),Cl=Object(c.connect)((function(e){var t=L.w(e),n=L.i(e);return{alignmentData:n,selectedMedia:t,text:L.X(e,n.target)}}),(function(e){return{changeMediaSelection:function(t){return e(N.Hc(t))},onChangeWindowOpen:function(t){e(N.ad(t))},onSelectedSearchResult:function(t,n,r){e(N.Qc(t,n,r))},selectSecondWindowText:function(t){e(N.Sc(t))}}}))((function(e){var t=e.alignmentData,n=(e.text,e.selectSecondWindowText),r=(t.target,(null==t?void 0:t.alignments.text)||[]);return i.a.createElement(Ue.a,null,i.a.createElement(Ae.a,{variant:"h6",gutterBottom:!0,component:"div"},"Commentary"),r.length>0&&r.map((function(e,t){return i.a.createElement("ul",{style:{paddingLeft:18},key:"commentary-".concat(t)},i.a.createElement("li",{style:{cursor:"pointer"},onClick:function(){n({id:2,name:"བྱང་ཆུབ་སེམས་དཔའི་སྤྱོད་པ་ལ་འཇུག་པ་བཞུགས་པའི་འགྲེལ་པ།"})}},e.target))})))}));function Rl(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var _l=Object(pr.a)("div")((function(e){var t=e.theme;return Rl({position:"relative",borderRadius:t.shape.borderRadius,backgroundColor:Object(hr.a)(t.palette.common.white,.15),"&:hover":{backgroundColor:Object(hr.a)(t.palette.common.white,.25)},marginLeft:0,width:"100%"},t.breakpoints.up("sm"),{marginLeft:t.spacing(1),width:"auto"})})),Bl=Object(pr.a)("div")((function(e){return{padding:e.theme.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"}})),Wl=Object(pr.a)(mr.c)((function(e){var t=e.theme;return{color:"inherit","& .MuiInputBase-input":Rl({padding:t.spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(t.spacing(4),")"),transition:t.transitions.create("width"),width:"100%"},t.breakpoints.up("sm"),{width:"0",cursor:"pointer","&:focus":{width:"20ch"}})}})),Nl=i.a.memo((function(){var e=[{Id:1,Title:"chapter 1",segment_id:0},{Id:2,Title:"chapter 2",segment_id:400}];return e.length,i.a.createElement(Ue.a,{className:kl.a.TableContent,sx:{bgcolor:"heading.main",color:"text.primary",width:"100%",height:"100%",paddingInline:2}},i.a.createElement(yr.a,{sx:{justifyContent:"space-between",paddingLeft:"0 !important",margin:0}},i.a.createElement(Ae.a,{textTransform:"uppercase",component:"h6"},"Table Of Content"),i.a.createElement(_l,null,i.a.createElement(Bl,null,i.a.createElement(_n.a,null)),i.a.createElement(Wl,{placeholder:"Search…",inputProps:{"aria-label":"search"}}))),i.a.createElement(Cl,null),i.a.createElement(Ue.a,null,e.map((function(e,t){return i.a.createElement(Ue.a,{key:"TableContent-"+t,sx:{cursor:"pointer",width:"fit-content","&:hover":{fontWeight:"bold"}}},e.Title)}))))})),Ll=n(1038),Dl=function(e){var t=e.children;return i.a.createElement(Ll.MapInteractionCSS,null,t)};function Hl(e){return(Hl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function zl(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Ml(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ml(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ml(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ql(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Vl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ql(Object(n),!0).forEach((function(t){Fl(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ql(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Fl(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ul(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ql(e,t){return(Ql=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Jl(e){return(Jl=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $l(e){return"s_"+e.start}function Kl(e){return"ds_"+e.start}function Gl(e){return"i_"+e.start}function Yl(e){return"p_"+(e.end+1)}function Zl(e){return"l_"+(e.end+1)}var Xl=String.fromCharCode(182),ec=Ma.a.renderToStaticMarkup(i.a.createElement(Oa,null)),tc=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ql(e,t)}(n,i.a.Component);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Jl(e);if(t){var o=Jl(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Hl(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}(n);function n(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(r=t.call(this,e)).textAlignmentById=[],r.state={segmentedText:e.segmentedText},r.textAlignmentById=r.props.textAlignmentById,r._renderedSegments=null,r._renderedHtml=null,r.rangeSelect=[],r.theme=e.theme,r}return function(e,t,n){t&&Ul(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.setState((function(t,n){return Vl(Vl({},t),{},{segmentedText:e.segmentedText})}))}},{key:"annotationsForSegment",value:function(e){var t=[],n=this.props.annotationPositions[String(e.start)];n&&(t=n);var r=this.props.annotationPositions[ar.c+e.start]||[],o=this.props.annotationPositions[ar.b+e.start]||[],i=this.props.annotationPositions[ar.e+(e.end+1)]||[],a=this.props.annotationPositions[ar.d+(e.end+1)]||[];return t.concat(r,o,i,a)}},{key:"segmentsContainSegment",value:function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(r.start===t.start&&r.text===t.text)return!0}return!1}},{key:"selectedElement",value:function(e){if("DIV"!==e.tagName){var t=[],n=[],r=document.getSelection(),o=parseInt(e.id.replace("s_",""));if(this.props.changeSyncIdOnClick(o),null!=e&&e.id.includes("s_")&&this.props.condition){this.props.changeScrollToId({id:null,from:null});var i=parseInt(e.id.replace("s_","")),a=Mo()(this.textAlignmentById,(function(e){return i>=e.start&&i<e.end}));if(a){for(var l=a.start;l<a.end;l++)t.push(l);for(var c=a.TStart;c<a.TEnd;c++)n.push(c);this.props.changeSelectedRange({source:t,target:n})}}r&&"Range"===r.type||(this.props.selectedSegmentId(e.id),e.id||this.props.changeSelectedRange({source:[],target:[]}))}else this.props.selectedSegmentId("")}},{key:"generateHtml",value:function(e,t){var n=t.segmentedText.segments,r=Rr.a.textLine,o='<p class="'+r+'">';if(0===n.length)return{__html:o};var i=Rr.a.insertion,a=n[n.length-1].end+1;if(e.annotationPositions[ar.c+a]){var l=new _r.a(a,"");n.push(l)}if(e.annotationPositions[ar.e+a]){var c=new _r.a(a,"");n.push(c)}if(e.annotationPositions[ar.d+a]){var s=new _r.a(a,"");n.push(s)}for(var u=e.activeAnnotations||{},f=Rr.a.highlight,d=Rr.a.activeHighlight,p=null,m={},y=0;y<n.length;y++){var g=n[y],b="",v=[],w=this.annotationsForSegment(g),O=null,x=!1,S=!1,E=!1,T=!1,j=null;if(w){for(var I=[],A=[],P=[],k=[],C=0,R=w.length;C<R;C++){var _=w[C];if(_.isInsertion)if(_.uniqueId in u)I.push(_);else{var B=_.start;m.hasOwnProperty(B)||(A.push(_),m[B]=_)}else _.isDeletion?_.uniqueId in u&&k.push(_):_.type!==Br.a.pageBreak||e.activeWitness.isWorking?_.type!==Br.a.lineBreak||e.activeWitness.isWorking?P.push(_):T=_:j=_}if(0===I.length&&A.length>0){var W=A[0],N=Gl(g),L=i;e.activeAnnotation&&e.activeAnnotation.isInsertion&&e.activeAnnotation.start===W.start&&(L+=" "+Rr.a.selectedAnnotation),o+="<span id="+N+" key="+N+' class="'+L+'">'+W.content+"</span>"}if(k.length>0){var D=k[0];O=e.getBaseAnnotation(D).content,e.activeAnnotation&&e.activeAnnotation.isDeletion&&e.activeAnnotation.start===D.start&&e.activeAnnotation.length===D.length&&0===g.length&&(x=!0)}j&&e.activeAnnotation&&e.activeAnnotation.uniqueId===j.uniqueId&&(S=!0),T&&e.activeAnnotation&&e.activeAnnotation.uniqueId===T.uniqueId&&(E=!0),(P.length>0||I.length>0)&&(P.some((function(e){return"V"===e.type}))?v.push(Rr.a.V_annotation):P.some((function(e){return"P"===e.type}))?v.push(Rr.a.P_annotation):v.push(Rr.a.Q_annotation))}if(g.start===a)break;var H=null;if(0===g.length?(H=Kl(g),v.push(Rr.a.removedByAnnotation),O&&(g=new _r.a(g.start,O))):H=$l(g),(this.segmentsContainSegment(e.selectedAnnotatedSegments,g)||x)&&v.push(Rr.a.selectedAnnotation),e.selectedSourceRange.includes(g.start)&&e.condition){var z="light"===e.theme.palette.mode?Rr.a.selectedRangelight:Rr.a.selectedRangeDark;v.push(z)}v.length>0&&(b='class="'+h.a.apply(void 0,v)+'"');var M=g.text;if(e.searchStringPositions){var q=g.start,V=q;M="";var F=f;e.selectedSearchResult&&e.selectedSearchResult.start<=V&&e.selectedSearchResult.start+e.selectedSearchResult.length>V&&(F=d);for(var U=0;U<g.text.length;U++){var Q=g.text.charAt(U);if(V=q+U,p){var J=zl(p,2);0===U&&(M+='<span class="'+F+'">'),V===(J[0],J[1])?(M+=Q+"</span>",p=null):U===g.text.length-1?M+=Q+"</span>":M+=Q}else if(V in e.searchStringPositions){var $=zl(e.searchStringPositions[V],2),K=$[0],G=$[1];M+='<span class="'+F+'">'+Q,U!==g.text.length-1&&V!==G||(M+="</span>"),V<G&&(p=[K,G])}else M+=Q}}if(o+="<span id="+H+" key="+H+" "+b+">"+M+"</span>",j){var Y=[Rr.a.pageBreak];S&&Y.push(Rr.a.selectedAnnotation);var Z=' class="'+Y.join(" ")+'" ';o+="<span id="+Yl(g)+" key="+Yl(g)+Z+">"+ec+"</span>"}if(T){var X=[Rr.a.lineBreak];E&&X.push(Rr.a.selectedAnnotation);var ee=' class="'+X.join(" ")+'" ';o+="<span id="+Zl(g)+" key="+Zl(g)+ee+">"+Xl+"</span>",o+='</p><p class="'+r+'">'}}return this._renderedSegments=n,{__html:o+="</p>"}}},{key:"shouldComponentUpdate",value:function(e,t){var n=this.generateHtml(e,t);return this.props.fontSize!==e.fontSize||(!this._renderedHtml||n.__html!==this._renderedHtml.__html)&&(this._renderedHtml=n,!0)}},{key:"componentDidUpdate",value:function(){this.textAlignmentById=this.props.textAlignmentById}},{key:"render",value:function(){var e=this,t=[Rr.a.text];0===this.props.row&&t.push(Rr.a.textFirstRow);var n=this._renderedHtml?this._renderedHtml:this.generateHtml(this.props,this.state);return this._renderedHtml||(this._renderedHtml=n),i.a.createElement("div",{className:Rr.a.textContainer},i.a.createElement("div",{className:h.a.apply(void 0,t),id:"text1",dangerouslySetInnerHTML:n,style:{fontSize:this.props.fontSize,fontFamily:"var(--tibetan-fonts)"},onClick:function(t){e.selectedElement(t.target)}}))}}]),n}(),nc=Object(Wr.a)(tc);function rc(e){return(rc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function oc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ic(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?oc(Object(n),!0).forEach((function(t){ac(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ac(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function lc(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return cc(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?cc(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function cc(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function sc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function uc(e,t){return(uc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function fc(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function dc(e){return(dc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}parseInt(fi.a.inlineWidth);var pc={},hc=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&uc(e,t)}(n,o.PureComponent);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=dc(e);if(t){var o=dc(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===rc(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return fc(e)}(this,n)}}(n);function n(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(r=t.call(this,e)).textAlignmentById=[],r.list=null,r.splitText=null,r.cache=new H.b({fixedWidth:!0}),r.imageAlignmentById=r.props.imageAlignmentById,r.changeImageScrollId=r.props.changeImageScrollId,r.splitTextRef=o.createRef(null),r.rowRenderer=r.rowRenderer.bind(fc(r)),r.textListVisible=e.textListVisible,r.editMenuVisible=e.editMenuVisible,r.isPanelLinked=e.isPanelLinked,r.activeSelection=null,r.selectedNodes=null,r._mouseDown=!1,r._activeWitness=null,r._didSetInitialScrollPosition=!1,r._modifyingSelection=!1,r.imageHeight=null,r.imageWidth=null,r.calculatedImageHeight=null,r.processProps(e),r.changeScrollToId=e.changeScrollToId,r.changeSyncIdOnClick=e.changeSyncIdOnClick,r.closeAnnotation=e.closeAnnotation,r.scrollJump=e.scrollJump,r.textAlignmentById=[],r.scrollEvent=r.scrollEvent.bind(fc(r)),r.selectedWindow=e.selectedWindow,r.changeImageScrollId=e.changeImageScrollId,r.imageData=e.imageData,r.condition=e.condition,r}return function(e,t,n){t&&sc(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"scrollEvent",value:function(e){if(2===this.selectedWindow)return null;if(1===this.selectedWindow){var t=[];this.textAlignmentById.map((function(e){var n=document.getElementById("s_"+e.start);n&&n.getBoundingClientRect().top>102&&t.push({id:e.id,start:e.start,target:e.TStart})})),ft()(t)&&ft()([])||1===this.selectedWindow&&this.debouncedScroll(t)}}},{key:"updateList",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(this.props.showImages&&!this.calculatedImageHeight&&this.imageHeight&&this.imageWidth&&(this.calculatedImageHeight=this.calculateImageHeight()),this.list){var n=this.list;if(e)if(null!==t)if(Array.isArray(t)){if(Array.isArray(t))for(var r=0;r<t.length;r++){var o=t[r];this.cache.clear(o)}}else this.cache.clear(t);else this.cache.clearAll(),n.measureAllRows(),n.recomputeRowHeights(0);n.forceUpdateGrid()}}},{key:"mouseDown",value:function(){this._mouseDown=!0}},{key:"mouseUp",value:function(){if(this._mouseDown=!1,this.activeSelection){var e=this.processSelection(this.activeSelection);e||(e=[]),this.props.didSelectSegmentIds(e),this.activeSelection=null}}},{key:"handleSelection",value:function(e){this._modifyingSelection?(e.stopPropagation(),this._modifyingSelection=!1):(this.activeSelection=document.getSelection(),this._mouseDown||this.mouseUp())}},{key:"processSelection",value:function(e){if(0===e.rangeCount||e.isCollapsed||"Caret"===e.type)return this.selectedNodes=null,null;var t=e.getRangeAt(0),n=t.startContainer,r=this.getNodeSegmentSpan(n);if(!r||!r.parentNode)return null;var o=this.getRangeNodes(t,r.parentNode);if(o.length>0){var i=o[0];t.startOffset===i.textContent.length&&o.shift()}var a=t.endContainer,l=this.getNodeSegmentSpan(a);if(!l||!l.parentNode)return null;l&&r.parentNode!==l.parentNode?o=o.concat(this.getRangeNodes(t,l.parentNode)):0===t.endOffset&&o.pop(),this.selectedNodes=o;var c=[];return o.reduce((function(e,t){return t instanceof Element&&e.push(t.id),e}),c),c}},{key:"getNodeSegmentSpan",value:function(e){for(var t=e,n=null,r=/^(i|s|ds)_/;!n&&t.parentNode;)t instanceof Element&&r.test(t.id)&&(n=t),t=t.parentNode;return n}},{key:"getRangeNodes",value:function(e,t){for(var n=[],r=0,o=t.childNodes.length;r<o;r++){var i=t.childNodes[r];e.intersectsNode(i)&&n.push(i)}return n}},{key:"getControlsMeasurements",value:function(e){if(!this.splitText)return null;var t=this.splitText,n=null,r=null,o=null,i=null,a=null,l=[],c=0;if(e.activeAnnotation){var s=e.activeAnnotation;if(null===(c=lc(e.splitText.annotatedText.getPositionOfAnnotation(s),1)[0]))return console.warn("No startPos in getControlsMeasurements"),null;s.type===Br.a.pageBreak&&(c-=1),s.type===Br.a.lineBreak&&(c-=1),s.length,s.length,n=e.splitText.getTextIndexOfPosition(c),i=t.getBoundingClientRect()}var u=[];if(e.selectedAnnotatedSegments&&e.selectedAnnotatedSegments.length>0){u=e.selectedAnnotatedSegments;for(var f=0;f<u.length;f++){var d=u[f];if(null===r&&d instanceof _r.a){r=d;break}}r&&(0===r.length&&e.activeAnnotation&&e.activeAnnotation.isInsertion?(o=Gl(r),a=Gl):(o=$l(r),a=$l))}else if(e.activeAnnotation)if(e.activeAnnotation.isDeletion){var p=new _r.a(c,"");o=Kl(p),a=Kl,u=[r=p]}else if(e.activeAnnotation.isInsertion){var h=lc(e.splitText.annotatedText.getPositionOfAnnotation(e.activeAnnotation),1)[0];if(h){var m=new _r.a(h,"");o=Gl(m),a=Gl,u=[r=m]}}else if(e.activeAnnotation.type===Br.a.pageBreak){var y=new _r.a(c+1,"");r=y,u=[y],l=[o=Yl(new _r.a(c,""))]}else if(e.activeAnnotation.type===Br.a.lineBreak){var g=new _r.a(c+1,"");r=g,u=[g],l=[o=Zl(new _r.a(c,""))]}if(a)for(var b=0;b<u.length;b++){var v=u[b];if(v instanceof _r.a){var w=a(v);l.push(w)}}return null!=n&&r&&o&&i?{selectedTextIndex:n,firstSelectedSegment:r,selectedElementId:o,splitTextRect:i,selectedElementIds:l}:null}},{key:"shouldResetListCache",value:function(e,t){var n=!1;return(e.showImages!==t.showImages||this.pageBreaksChanged(e,t))&&(n=!0),n}},{key:"pageBreaksChanged",value:function(e,t){var n=e.splitText.getTextsFinalPositions(),r=t.splitText.getTextsFinalPositions();return n.length!==r.length||JSON.stringify(n)!==JSON.stringify(r)}},{key:"lineBreaksChanges",value:function(e,t){var n=e.activeAnnotation,r=t.activeAnnotation,o=!1;return n&&n.isType(Br.a.lineBreak)&&t.activeAnnotations&&!t.activeAnnotations.hasOwnProperty(n.uniqueId)&&(o=!0),r&&r.isType(Br.a.lineBreak)&&e.activeAnnotations&&!e.activeAnnotations.hasOwnProperty(r.uniqueId)&&(o=!0),o}},{key:"selectedListRow",value:function(e){var t=null;return e.activeAnnotation&&(t=e.splitText.getTextIndexOfPosition(e.activeAnnotation.start)),t}},{key:"processProps",value:function(e){var t=this,n=!1;(!this.props.selectedWitness||e.selectedWitness&&e.selectedWitness.id!==this.props.selectedWitness.id)&&(n=!0,this._didSetInitialScrollPosition=!1),!e.selectedSearchResult||this.props.selectedSearchResult&&e.selectedSearchResult.start===this.props.selectedSearchResult.start&&e.selectedSearchResult.textId===this.props.selectedSearchResult.textId||(console.log("resetting scroll position from search result"),this._didSetInitialScrollPosition=!1),this._filteredSelectedAnnotatedSegments=e.selectedAnnotatedSegments.reduce((function(e,t){return t instanceof _r.a&&e.push(t),e}),[]);var r=this.getControlsMeasurements(e);if(r&&(this.selectedTextIndex=r.selectedTextIndex,this.firstSelectedSegment=r.firstSelectedSegment,this.splitTextRect=r.splitTextRect,this.selectedElementId=r.selectedElementId,this.selectedElementIds=r.selectedElementIds),e.textListVisible!==this.textListVisible||e.editMenuVisible!==this.editMenuVisible)setTimeout((function(){t.textListVisible=e.textListVisible,t.editMenuVisible=e.editMenuVisible,t.updateList(!0)}),500);else if(n)this.updateList(!0);else if(this.pageBreaksChanged(this.props,e)){var o=null,i=this.selectedListRow(this.props),a=this.selectedListRow(e);if(i&&a){o=[];for(var l=i>a?a:i,c=this.props.splitText.texts.length;l<c;l++)o.push(l)}this.updateList(!0,o)}else if(this.lineBreaksChanges(this.props,e)){var s=this.selectedListRow(e);s||(s=this.selectedListRow(this.props));var u=this.props.splitText.texts,f=[];if(null!==s){for(var d=s,p=u.length;d<p;d++)f.push(d);this.updateList(!0,f)}}else this.props.fontSize!==e.fontSize?this.updateList(!0):this.props.activeAnnotation&&e.activeAnnotation&&this.annotationsInSameLocation(this.props.activeAnnotation,e.activeAnnotation)?this.updateList(!0,this.selectedListRow(e)):this.updateList(this.shouldResetListCache(this.props,e))}},{key:"annotationsInSameLocation",value:function(e,t){return e.start===t.start&&e.length===t.length}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.processProps(e)}},{key:"scrollToIndex",value:function(e){var t=this.list;console.log("scrolling to index"),setTimeout((function(){t.scrollToRow(e),setTimeout((function(){t.scrollToPosition(t.props.scrollTop-300)}),0)}),100)}},{key:"componentDidMount",value:function(){var e=this;this.resizeHandler=Ar()((function(){e.calculatedImageHeight=null,e.updateList()}),600).bind(this),this.debouncedScroll=Gt()((function(t){var n;t.length&&e.changeScrollToId({id:null===(n=t[0])||void 0===n?void 0:n.start,from:1})}),1e3),window.addEventListener("resize",this.resizeHandler),this.selectionHandler=Gt()((function(t){e.handleSelection(t)}),200).bind(this),document.addEventListener("selectionchange",this.selectionHandler),document.addEventListener("mousedown",this.mouseDown.bind(this),!0),document.addEventListener("mouseup",this.mouseUp.bind(this),!0),this.processProps(this.props),this.timer=setTimeout((function(){e.resizeHandler()}),2e3),this.splitText.style.scrollBehavior="smooth",this.componentDidUpdate()}},{key:"componentDidUpdate",value:function(e){var t,n,r=this;this.imageData=this.props.imageData,this.imageData!==(null==e?void 0:e.imageData)&&(this.calculatedImageHeight=null,this.updateList(!0));var o=this.props.textAlignment;this.imageAlignmentById=this.props.imageAlignmentById,this.SearchSyncId=this.props.syncIdOnSearch||null,this.condition=this.props.condition;var i=this.props.scrollToId,a=this.list;if(((null==e?void 0:e.searchResults)!==(null===(t=this.props)||void 0===t?void 0:t.searchResults)||(null==e?void 0:e.syncIdOnSearch)!==(null===(n=this.props)||void 0===n?void 0:n.syncIdOnSearch))&&this.props.searchResults&&this.SearchSyncId){var l=this.props.splitText.getTextIndexOfPosition(this.SearchSyncId);this.scrollToIndex(l)}if(this.textAlignmentById=this.props.textAlignmentById,this.selectedWindow=this.props.selectedWindow,this.targetId=this.props.syncIdOnClick,this.selectedNodes&&this.selectedNodes.length>0){var c=this.selectedNodes,s=this.props.selectedAnnotatedSegments;setTimeout((function(){var e=document.createRange(),t=c[0],n=c[c.length-1],o=s[s.length-1];if(o instanceof _r.a){var i=document.getElementById($l(o));i&&(n=i)}if(t instanceof Element&&n instanceof Element&&(t=document.getElementById(t.id),n=document.getElementById(n.id),t&&n)){e.setStart(t,0),e.setEnd(n,n.childNodes.length);var a=document.getSelection();a&&(r._modifyingSelection=!0,a.removeAllRanges(),a.addRange(e),r.selectedNodes=null)}}),0)}if(!this._didSetInitialScrollPosition&&this.list){var u=this.list;if(this.props.activeAnnotation||this.props.selectedSearchResult){var f=this.getSelectedTextIndex();setTimeout((function(){u.scrollToRow(f),setTimeout((function(){u.scrollToPosition(u.props.scrollTop-300)}),0)}),100)}this._didSetInitialScrollPosition=!0}if("video"==i.from&&i.id){var d=i.id,p=this.props.splitText.getTextIndexOfPosition(d);setTimeout((function(){a.scrollToRow(p),setTimeout((function(){a.scrollToPosition(a.props.scrollTop-300)}),0)}),100)}if(2===this.selectedWindow&&2==i.from&&this.condition&&null!==i.id&&(this.textAlignmentById=this.props.textAlignmentById||[],o)){var h=this.textAlignmentById.find((function(e){return e.TStart===i.id})),m=null==h?void 0:h.start;if(null!==m){var y=this.props.splitText.getTextIndexOfPosition(m);this.scrollToIndex(y)}}if(this.targetId&&"ua"===i.from&&2===this.selectedWindow&&"ua"===i.id&&this.condition){var g,b=o.alignment.find((function(e){return r.targetId>=e.target_segment.start&&r.targetId<e.target_segment.end})),v=null==b||null===(g=b.source_segment)||void 0===g?void 0:g.start,w=this.props.splitText.getTextIndexOfPosition(v);this.scrollToIndex(w)}}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousedown",this),document.removeEventListener("mouseup",this),window.removeEventListener("resize",this.resizeHandler),document.removeEventListener("selectionchange",this.selectionHandler),clearTimeout(this.timer)}},{key:"calculateImageHeight",value:function(){var e=null;if(this.imageHeight&&this.imageWidth){var t=this.imageWidth/this.imageHeight,n=Kr.a.pechaImage,r=document.getElementsByClassName(n);r.length>0&&(e=r[0].offsetWidth/t)}return e}},{key:"getSelectedTextIndex",value:function(){var e=0,t=null;if(this.props.activeAnnotation)t=lc(this.props.splitText.annotatedText.getPositionOfAnnotation(this.props.activeAnnotation),1)[0];else if(this.props.selectedSearchResult){var n=this.props.splitText.annotatedText.segmentAtOriginalPosition(this.props.selectedSearchResult.start);n instanceof _r.a?t=n.start:"number"==typeof n&&(t=n)}return t&&(e=this.props.splitText.getTextIndexOfPosition(t)),e}},{key:"getBaseAnnotation",value:function(e){var t=lc(this.props.splitText.annotatedText.getPositionOfAnnotation(e),1)[0];return null===t&&(t=0),this.props.splitText.annotatedText.getBaseAnnotation(t,e.content.length)}},{key:"render",value:function(){var e=this,t=this.props,n=this.rowRenderer,r=this.cache,i=t.selectedWitness?t.selectedWitness.id:0;return o.createElement("div",{className:Kr.a.splitText,ref:function(t){return e.splitText=t},key:i},o.createElement("button",{id:"updateList",style:{display:"none"},onClick:function(){return e.updateList()}}),o.createElement(D.a,{disableWidth:!0},(function(i){var a=i.height;return o.createElement(z.a,{width:1,ref:function(t){return e.list=t},height:a,rowCount:t.splitText.texts.length,rowHeight:r.rowHeight,rowRenderer:n,overscanRowCount:3,deferredMeasurementCache:r,onScroll:e.scrollEvent,scrollToAlignment:"start",containerStyle:{width:"100%",maxWidth:"100%"},style:{width:"100%",paddingTop:30,paddingInline:50}})})))}},{key:"getImageUrl",value:function(e){if(!this.props.selectedWitness||!this.props.selectedWitness.properties)return"";var t=this.props.selectedWitness.properties,n=t.bdrcimg_pre,r=t.bdrcimg_number,o=t.bdrcimg_suffix;return"//iiif.bdrc.io/"+n+(Number(r)+e)+"."+o+"/full/full/0/default.jpg"}},{key:"getStringPositions",value:function(e,t,n){var r=this.props.splitText.annotatedText.getUniqueId();if(pc.hasOwnProperty(r)||(pc=ac({},r,{})),pc[r].hasOwnProperty(t)||(pc[r]=ac({},t,{})),pc[r][t].hasOwnProperty(n))return pc[r][t][n];for(var o=new U.a,i=e.getText(),a=e.segments[0],l=null==a?void 0:a.start,c=[],s=i.indexOf(t);-1!==s;)c.push(s),s=i.indexOf(t,s+1);var u={};if(c.length>0)for(var f=o.splitGraphemes(i),d=0,p=null,h=0;h<f.length;h++){var m=f[h],y=d+(m.length-1);null!==p?y>=p+(t.length-1)&&(u[p+l]=[p+l,y+l],p=null):-1!==c.indexOf(d)?t.length===m.length?u[d+l]=[d+l,y+l]:t.length>m.length&&(p=d):p=null,d+=m.length}return pc[r][t][n]=u,u}},{key:"rowRenderer",value:function(e){var t=e.key,n=e.index,r=e.parent,i=e.style,a=this.props,l=this.cache,c=this,s=a.showImages?Kr.a.pechaImage:null,u="";a.selectedWitness&&a.selectedWitness.properties&&a.selectedWitness.properties.hasOwnProperty("bdrcimg_pre")&&(u=this.getImageUrl(n));var f={},d=this.props.searchValue;d&&d.length>0&&a.splitText&&(f=this.getStringPositions(a.splitText.texts[n],d,n)),i.height;var p={};a.showImages&&s&&this.calculatedImageHeight&&(p.height=this.calculatedImageHeight+"px");var h=ic(ic({},i),{},{height:i.height+10,cursor:this.props.isAnnotating?"text":"pointer"});return o.createElement(H.a,{columnIndex:0,key:t,parent:r,rowIndex:n,cache:l},o.createElement("div",{key:t,style:h,className:Kr.a.splitTextRow,ref:this.splitTextRef,id:"index_".concat(n)},o.createElement("div",{className:Kr.a.splitTextRowContent},a.showImages&&o.createElement("div",{className:s,style:p},o.createElement(Dl,null,o.createElement("img",{alt:"Text related Image",className:Kr.a.image,src:u,width:"100%",height:"100%",loading:"lazy",decoding:"async",onLoad:function(e){e.target&&null===c.imageWidth&&(c.imageWidth=e.target.naturalWidth,c.imageHeight=e.target.naturalHeight,c.calculatedImageHeight=null,window.setTimeout(c.updateList.bind(c),0))}}))),o.createElement(nc,{segmentedText:a.splitText.texts[n],annotations:a.annotations,activeAnnotations:a.activeAnnotations,activeAnnotation:a.activeAnnotation,row:n,selectedSegmentId:a.selectedSegmentId,annotationPositions:a.annotationPositions,selectedAnnotatedSegments:this._filteredSelectedAnnotatedSegments,getBaseAnnotation:this.getBaseAnnotation.bind(this),activeWitness:this.props.selectedWitness,searchValue:d,selectedSearchResult:this.props.selectedSearchResult,searchStringPositions:f,fontSize:a.fontSize,changeSyncIdOnClick:this.props.changeSyncIdOnClick,changeScrollToId:this.props.changeScrollToId,textAlignmentById:this.props.textAlignmentById,selectedSourceRange:this.props.selectedSourceRange,selectedTargetRange:this.props.selectedTargetRange,changeSelectedRange:this.props.changeSelectedRange,condition:this.condition})),this.props.isAnnotating&&this.selectedTextIndex===n&&this.props.activeAnnotation&&o.createElement(Ga,{annotationPositions:a.annotationPositions,annotatedText:a.splitText.annotatedText,activeAnnotation:a.activeAnnotation,inline:!0,firstSelectedSegment:this.firstSelectedSegment,splitTextRect:this.splitTextRect,selectedElementId:this.selectedElementId,pechaImageClass:s,splitText:a.splitText,selectedElementIds:this.selectedElementIds,list:this.list})))}}]),n}();function mc(e){return(mc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function yc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function gc(e,t){return(gc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function bc(e){return(bc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var vc,wc,Oc,xc,Sc=0,Ec=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&gc(e,t)}(n,i.a.Component);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=bc(e);if(t){var o=bc(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===mc(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}(n);function n(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(e=t.call(this)).key=Sc++,e.ref=i.a.createRef(),e.selectedWindow=null,e}return function(e,t,n){t&&yc(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"mouseEnter",value:function(){2===this.selectedWindow&&this.props.text.name&&this.props.changeSelectedWindow(1)}},{key:"componentDidMount",value:function(){this.ref.current.addEventListener("mouseenter",this.mouseEnter.bind(this))}},{key:"componentDidUpdate",value:function(){this.selectedWindow=this.props.selectedWindow}},{key:"render",value:function(){this.props.text&&this.props.text;var e,t=null,n=null;this.props.annotatedText&&this.props.text&&!this.props.loading?(e=this.props.paginated?function(e){var t=function(e){return function(e){if(Array.isArray(e))return Ya(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Ya(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ya(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(e);return 0===t[0]&&t.shift(),function(e){return t}}(this.props.pageBreaks):Object(sr.a)(1e3,/^།[\s]+(?!།[\s]+)/,2,5),n=new cr(this.props.annotatedText,e),t=i.a.createElement(hc,{splitText:n,annotations:this.props.annotations,activeAnnotations:this.props.activeAnnotations,activeAnnotation:this.props.activeAnnotation,limitWidth:!1,didSelectSegmentIds:this.props.didSelectSegmentIds,selectedSegmentId:this.props.selectedSegmentId,annotationPositions:this.props.annotationPositions,selectedAnnotatedSegments:this.props.selectedAnnotatedSegments,syncIdOnClick:this.props.syncIdOnClick,textListVisible:this.props.textListVisible,showImages:this.props.pageImagesVisible,imagesBaseUrl:this.props.imagesBaseUrl,selectedWitness:this.props.selectedWitness,selectedWitness2:this.props.selectedWitness2,key:this.key,selectedSearchResult:this.props.selectedSearchResult,searchValue:this.props.searchValue,fontSize:this.props.fontSize,isSecondWindowOpen:this.props.isSecondWindowOpen,changeScrollToId:this.props.changeScrollToId,changeSyncIdOnClick:this.props.changeSyncIdOnClick,imageData:this.props.imageData,isPanelLinked:this.props.isPanelLinked,selectedImage:this.props.selectedImage,changeSelectedImage:this.props.changeSelectedImage,isAnnotating:this.props.isAnnotating,closeAnnotation:this.props.closeAnnotation,textAlignment:this.props.textAlignment,textAlignmentById:this.props.textAlignmentById,isPanelVisible:this.props.isPanelVisible,scrollToId:this.props.scrollToId,selectedWindow:this.selectedWindow,selectedSourceRange:this.props.selectedSourceRange,selectedTargetRange:this.props.selectedTargetRange,changeSelectedRange:this.props.changeSelectedRange,searchResults:this.props.searchResults,showTableContent:this.props.showTableContent,selectedText:this.props.text,syncIdOnSearch:this.props.syncIdOnSearch,imageAlignmentById:this.props.imageAlignmentById,changeImageScrollId:this.props.changeImageScrollId,imageScrollId:this.props.imageScrollId,condition:this.props.condition})):t=i.a.createElement("div",{key:this.key},i.a.createElement(jr,null));var r=[t];return i.a.createElement(Ue.a,{sx:{height:"100%",flex:1,bgcolor:"navbar.main",color:"texts.main"},className:h()(fr.a.textDetail,st.a.flex,st.a.flexColumn),key:this.key,ref:this.ref},i.a.createElement(Al,null),i.a.createElement(jn.a,null),i.a.createElement(l.a,{loaded:!this.props.loading,zIndex:5}),i.a.createElement(Ue.a,{style:{display:"flex",height:"100%",width:"100%"}},i.a.createElement(Ue.a,{className:h()(fr.a.textContainer,st.a.flex)},this.props.loading?i.a.createElement("div",null):r),i.a.createElement(dr.a,{direction:"left",in:this.props.showTableContent,container:this.ref.current,unmountOnExit:!0,mountOnEnter:!0},i.a.createElement(Ue.a,{sx:{position:"absolute",height:"100%",minWidth:"50%",right:0}},i.a.createElement(Nl,null)))))}}]),n}(),Tc=n(60);function jc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ic(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?jc(Object(n),!0).forEach((function(t){Ac(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ac(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Pc(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||kc(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function kc(e,t){if(e){if("string"==typeof e)return Cc(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Cc(e,t):void 0}}function Cc(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Rc(e){return[e.start,e.length].join("-")}var _c=null,Bc=Object(c.connect)((function(e){var t=Object(L.lb)(e),n=e.data.loadingWitnesses||e.data.loadingAnnotations,r=Object(L.db)(e),o=L.ab(e);if(n)return{text:null,witnesses:null,baseWitness:null,annotations:null,loading:n,paginated:null,pageImagesVisible:!0,annotatedText:null,selectedAnnotatedSegments:null,annotationPositions:null,activeAnnotations:null,activeAnnotation:null,user:t,textListVisible:r,fontSize:f.a,textAlignmentById:o,imageAlignmentById:Object(L.r)(e)};var i,a,l=Object(L.J)(e),c={};l&&(i=Object(L.rb)(e,l.id),a=Object(L.n)(e,l.id));var s,u=Object(L.G)(e),d={},p=[],h=null,m=Object(L.h)(e),y=[],g={},b=[],v="",w=Object(L.C)(e),O=!1,x=!1,S=Object(L.bb)(e);if(i&&l&&e.data.witnessAnnotationsById.hasOwnProperty(i.id)){c=Object(L.gb)(e,l.id);var E=Object(L.N)(e,l.id);E&&(s=Object(L.nb)(e,E)),s||(s=i,E=i.id),s.id!==i.id&&(O=!0,x=Object(L.Bb)(e)),h=Tc.d(e,s.id);var T=Pc(Tc.c(e,s,i),2);if(g=T[0],p=T[1],h&&(d=function(e,t){if(e===vc&&t===wc&&e.version===xc)return Oc;for(var n={},r={},o=function(o){var i=t[o],a=Pc(e.getPositionOfAnnotation(i),2),l=a[0],c=a[1];if(null==l)return"continue";if(0===c){if(i.isInsertion){var s=Rc(i),u=r[s];if(u)return u.map((function(e){return n[e].push(i)})),"continue";l=ar.c+l}i.isDeletion&&i.length>0&&(l=ar.b+l),i.type===Br.a.pageBreak&&(l=ar.e+l),i.type===Br.a.lineBreak&&(l=ar.d+l),void 0===n[l]&&(n[l]=[]),-1===n[l].indexOf(i)&&n[l].push(i)}else{for(var f=[],d=l;d<l+c;d++)void 0===n[d]&&(n[d]=[]),-1===n[d].indexOf(i)&&n[d].push(i),f.push(d);if(i.isInsertion){var p=Rc(i);r[p]=f}}},i=0;i<t.length;i++)o(i);return vc=e,wc=t,Oc=n,xc=e.version,n}(h,Object.values(p))),m&&h&&(_c&&_c.id===s.id||(m=h.getAnnotation(m.start,m.length)),m&&(y=h.segmentsForAnnotation(m))),s&&a&&h){var j=h.getAnnotationsOfType(Br.a.pageBreak)||{},I=null;s.id!==a.id&&(I=Object(L.m)(e,i.id,Br.a.pageBreak,a.id));for(var A=0,P=(b=function(e,t){var n=[];if(Lo()(e,(function(e){return n.push(e.start)})),n=n.sort((function(e,t){return e-t})),!t)return n;var r=[];if(Lo()(t,(function(e){return r.push(e.start)})),r=r.sort((function(e,t){return e-t})),0===n.length)return r;if(n.length/r.length<.9)for(var o=n[n.length-1],i=0,a=r.length;i<a;i++){var l=r[i];l>o&&n.push(l)}return console.log(n),n}(j,I)).length;A<P;A++){var k=b[A],C=h.segmentAtOriginalPosition(k);C instanceof _r.a?b[A]=C.start:C instanceof Number&&(b[A]=C)}O&&(v="/static/images/texts/"+l.name+"/"+s.source.name+"/")}}_c=s;var R=L.z(e),_=L.yb(e),B=L.Z(e),W=L.T(e),N=L.P(e),D=(L.M(e),L.w(e)),H=Object(L.s)(e),z=L.zb(e),M=L.p(e);return{text:l,witnesses:c,workingWitness:i,baseWitness:a,annotations:p,loading:n,paginated:O,pageImagesVisible:x,annotatedText:h,selectedAnnotatedSegments:y,annotationPositions:d,activeAnnotations:Ic({},g),activeAnnotation:m,pageBreaks:b,imagesBaseUrl:v,user:t,textListVisible:r,selectedWitness:s,selectedSearchResult:u,searchValue:w,fontSize:S,isSecondWindowOpen:z,imageData:H,selectedImage:Object(L.E)(e),isImagePortrait:Object(L.xb)(e),isAnnotating:L.wb(e),textAlignment:B,textAlignmentById:o,scrollToId:R,syncIdOnClick:W,selectedWindow:N,selectedSourceRange:Object(L.H)(e),selectedTargetRange:Object(L.I)(e),searchResults:Object(L.A)(e,w),showTableContent:Object(L.Q)(e),syncIdOnSearch:L.U(e),imageAlignmentById:Object(L.r)(e),imageScrollId:Object(L.t)(e),selectedMedia:D,condition:M&&_&&z}}),null,(function(e,t,n){var r=t.dispatch,o=e.annotatedText,i=e.annotationPositions,a=function(e,t,n){var a=i[e],l=[],c=[],s=[];a&&(l=a.filter((function(e){return e.type===Br.a.variant})),c=a.filter((function(e){return e.type===Br.a.pageBreak})),s=a.filter((function(e){return e.type===Br.a.lineBreak})));var u=Qt()(l.concat(c,s),o.annotations,(function(e,t){return e.toString()==t.toString()})),f=null;if(u.length>0)f=u[0];else if(l&&l.length>0){var d=function(e){for(var t=null,n=0;n<e.length;n++){var r=e[n];t?r.length>t.length&&(t=r):t=r}return t}(l),p=Pc(o.getPositionOfAnnotation(d),2),h=p[0],m=p[1];d&&d.isInsertion&&(m=0),f=o.getBaseAnnotation(h,m)}else f=o.getBaseAnnotation(t,n);r(Object(N.ac)(f))},l=function(e){return-1!==e.indexOf("i_")},c=function(e){return-1!==e.indexOf("ds_")},s=function(e){return-1!==e.indexOf("p_")},u=function(e){return-1!==e.indexOf("l_")},f=function(e){return l(e)?e.substr(2):c(e)?e.substr(3):e.substr(2)};return Ic(Ic(Ic({},e),n),{},{didSelectSegmentIds:function(t){if(0!==t.length){var n,a=[],s=[],u=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=kc(e))){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw i}}}}(t);try{for(u.s();!(n=u.n()).done;){var d=n.value;if(!c(d)&&!l(d)){var p=f(d),h=o.segmentedText.segmentAtPosition(p);s.push(h);var m=i[h.start];m&&(a=a.concat(m))}}}catch(e){u.e(e)}finally{u.f()}a=Ft()(a,(function(e,t){return e.toString()==t.toString()}));var y=Qt()(a,o.annotations,(function(e,t){return e.toString()==t.toString()})),g=function(e,t,n,r){if(0===e.length)return null;for(var o=e[0],i=e[e.length-1],a=o.start,l=i.end,c=null,s=null,u=0;u<n.length;u++){var f,d,p=n[u],h=null,m=Pc(r.getPositionOfAnnotation(p),2);f=m[0],d=m[1],-1!==t.indexOf(p)?(f&&f<a&&(a=f,c=p),(h=f+d-1)&&h>l&&(l=h,s=h)):(h=f+d-1)>l&&(l=h)}var y=null;return c&&s&&c===s&&(y=c),{start:a,length:l-a+1,annotation:y}}(s,y,a,e.annotatedText);if(g){var b=o.getBaseAnnotation(g.start,g.length),v=null;if(g.annotation)v=g.annotation;else if(y.length>0){var w=o.segmentedText.segmentsInRange(g.start,g.length).reduce((function(e,t){return e+t.text}),"");e.selectedWitness||console.log("no stateProps.selectedWitness: %o",e.selectedWitness),v=new Br.c(ar.f,function(e){var t=new Do.b(ar.f,Do.a),n=new Ho.a(e.id,e.name);return new tn.a(ar.f,n,t,"",!1)}(e.text),b.start,b.length,w,Br.a.variant,e.selectedWitness,e.user)}else v=b;r(Object(N.ac)(v))}else console.warn("No range for selected segment ids: %o",t)}},selectedSegmentId:function(t){var n=f(t),d=n;if(l(t)?d=ar.c+n:c(t)?d=ar.b+n:s(t)?d=ar.e+n:u(t)&&(d=ar.d+n),i[d],""===t){if(e.activeAnnotation){var p=N.ac(null);r(p)}}else if(l(t)||c(t)||s(t)||u(t))a(d,n,0);else{var h=Number(f(t)),m=o.segmentedText.segmentAtPosition(h);m&&a(m.start,m.start,m.length)}},changeScrollToId:function(e){return r(N.Qb(e))},changeSyncIdOnClick:function(e){return r(N.Tb(e))},changeSelectedImage:function(e){r(N.Mc(e))},changeSelectedWindow:function(e){r(N.Sb(e))},changeSelectedRange:function(e){r(N.Rb(e))},changeShowTableContent:function(e){r(N.Yc(e))},closeAnnotation:function(){var e=N.ac(null);r(e)},changeImageScrollId:function(e){r(N.Nb(e))}})}))(Ec),Wc=i.a.memo(Bc);function Nc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Lc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Nc(Object(n),!0).forEach((function(t){Dc(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Nc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Dc(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Hc(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var zc=Object(c.connect)((function(e){var t=L.zb(e),n=L.w(e);return{selectedText:L.J(e),isSecondWindowOpen:t,Media:n}}),null,(function(e,t,n){return t.dispatch,Lc(Lc({},n),e)}))((function(e){var t=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Hc(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Hc(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(Object(o.useState)(!0),2),n=t[0],r=t[1],a=Object(o.useRef)(null),l=function(e){var t=a.current.clientWidth,n=a.current.clientHeight;r(t>n)};return Object(o.useEffect)((function(){return l(),window.addEventListener("resize",l),function(){return window.removeEventListener("resize",l)}}),[]),i.a.createElement(Ue.a,{ref:a,sx:{display:"flex",flexDirection:"column",width:"100%",height:e.bodyHeight,position:"relative"}},i.a.createElement(it.a,{split:n?"vertical":"horizontal",size:e.isSecondWindowOpen&&e.selectedText?"50%":"50vw",style:!e.isSecondWindowOpen&&{marginLeft:"10%",marginTop:10},resizerStyle:{display:e.isSecondWindowOpen?"block":"none"},onDragFinished:function(e){e>0&&window.dispatchEvent(new Event("resize"))}},i.a.createElement(qt,null,i.a.createElement(Wc,null)),i.a.createElement(qt,null,e.isSecondWindowOpen&&e.selectedText&&i.a.createElement(Wo,null))),e.Media.isPanelVisible&&i.a.createElement(qt,null,i.a.createElement(Lt,null)))})),Mc=n(1088),qc=n(1089),Vc=n(1101),Fc=n(1087),Uc=n(1086),Qc=n(1077),Jc=n(1078),$c=n(1079),Kc=n(1080);function Gc(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Yc=Object(c.connect)((function(e){var t,n,r=L.J(e),o=L.K(e);if(r){L.gb(e,r.id);var i=L.N(e,r.id);t=i?L.nb(e,i):L.rb(e,r.id)}if(o){L.hb(e,o.id);var a=L.O(e,o.id);n=a?L.ob(e,a):L.sb(e,o.id)}return-1===!e.user.userId&&(user=e.user),{selectedText:r,selectedWitness:t,selectedText2:o,selectedWitness2:n,title:L.kb(e,"header.title"),page:e.page,isAnnotating:L.wb(e),isSecondWindowOpen:L.zb(e),theme:L.jb(e),isPanelLinked:L.yb(e),textListIsVisible:L.db(e)}}),(function(e){return{onChangedTextWidth:function(t){e(N.hc(t))},onChangedTextListVisible:function(t){e(N.gc(t))},changeIsAnnotating:function(t){if(e(N.Ob(t)),!1===t){var n=N.ac(null);e(n),e(N.ac(null))}},onChangeWindowOpen:function(t,n){e(N.ad(t,n))},onChangePanelLink:function(t){e(N.Pb(t))}}}))((function(e){var t,n=[lt.a.listContainer],r=(f.f,f.e,function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Gc(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Gc(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(Object(o.useState)(!1),2)),a=r[0],l=r[1];f.b,e.textListWidth,e.textListIsVisible?n.push(lt.a.showListContainer):n.push(lt.a.hideListContainer),t="calc(100vh - "+ge.a.headerHeight+")";var c=function(e,t){"clickaway"!==t&&l(!1)},s=[{icon:i.a.createElement(Qc.a,{htmlColor:e.isAnnotating?"#ff7961":void 0}),name:"Annotate",condition:e.isAnnotating,function:function(){return e.changeIsAnnotating(!e.isAnnotating)}},{icon:i.a.createElement(Jc.a,{htmlColor:e.isPanelLinked?"#ff7961":void 0}),name:"Link Panel",condition:e.isPanelLinked,function:function(){return e.onChangePanelLink(!e.isPanelLinked)}},{icon:i.a.createElement($c.a,null),name:"Share",function:function(){var t,n=e.selectedText,r=e.selectedText2,o=e.selectedWitness,i=e.selectedWitness2;t=r&&i?window.location.origin+"/texts/".concat(n.id,"/witnesses/").concat(null==o?void 0:o.id,"/texts2/").concat(r.id,"/witnesses2/").concat(i.id):window.location.origin+"/texts/".concat(n.id,"/witnesses/").concat(null==o?void 0:o.id),navigator.clipboard.writeText(t).then().catch((function(e){return console.log(e.message)})).finally((function(){return l(!0)}))}},{icon:i.a.createElement(Kc.a,{htmlColor:e.isSecondWindowOpen?"#ff7961":void 0}),name:"Split Window",condition:e.isSecondWindowOpen,function:function(){return e.onChangeWindowOpen(!e.isSecondWindowOpen,140)}}];return Object(o.useEffect)((function(){var e=setTimeout((function(){window.dispatchEvent(new Event("resize"))}),1e3);return function(){return clearTimeout(e)}}),[e.textListIsVisible]),i.a.createElement("div",{className:h()(lt.a.interface,st.a.flex)},i.a.createElement(nt,null),i.a.createElement(zc,{bodyHeight:t}),i.a.createElement(Mc.a,{ariaLabel:"SpeedDial basic",sx:{position:"absolute",bottom:60,right:16},icon:i.a.createElement(qc.a,null)},s.map((function(e){return i.a.createElement(Vc.a,{key:e.name,icon:e.icon,tooltipTitle:e.name,onClick:e.function,open:e.condition})}))),i.a.createElement(Fc.a,{open:a,autoHideDuration:6e3,onClose:c},i.a.createElement(Uc.a,{onClose:c,severity:"success",sx:{width:"100%"}},"The Url Copied to Clipboard !")))})),Zc=n(389),Xc=n(1084),es=n(1090);function ts(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ns(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ts(Object(n),!0).forEach((function(t){rs(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ts(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function rs(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function os(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n(1039);var is=[{annotationId:"234241weq",annotationContent:"sad",voteCount:20},{annotationId:"12312weq",annotationContent:"happy",voteCount:40}],as=Object(c.connect)((function(e){return console.log(e),{user:"hi"}}))((function(e){var t=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return os(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?os(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(i.a.useState(is),2),n=t[0],r=t[1];return i.a.createElement(Ue.a,{sx:{display:"flex",flexDirection:"column",gap:2,marginTop:2}},n.map((function(e,t){return i.a.createElement(Ue.a,{sx:{display:"flex",alignItems:"center"},key:e.annotationId},i.a.createElement(Xc.a,{badgeContent:e.voteCount,color:"primary"},i.a.createElement(es.a,{label:e.annotationContent,onClick:function(){return function(e){var t=n.map((function(t){return t.annotationId===e?ns(ns({},t),{},{voteCount:t.voteCount+1}):t}));r(t)}(e.annotationId)}})))})))})),ls=function(){return i.a.createElement(Zc.a,null)},cs=function(){return i.a.createElement(Yc,null)},ss=function(){return i.a.createElement(as,null)},us=function(){return i.a.createElement("h3",null,"404")},fs=["page","direction"];function ds(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}t.default=Object(c.connect)((function(e){var t=e.page;return e.direction,{page:t,isLoading:!ds(e,fs).data.loadedInitialData}}))((function(e){var t=e.page,n=(e.isLoading,r[t]);return i.a.createElement(n,null)}))},831:function(e,t,n){e.exports={"green-tint":"#88af8e","blue-tint":"#024279","active-button":"#00746b",mainTint:"#024279",activeButton:"#00746b",inlineWidth:"280px",annotationControls:"AnnotationControls---annotationControls",annotationContent:"AnnotationControls---annotationContent",subTitle:"AnnotationControls---subTitle",title:"AnnotationControls---title",sectionHeading:"AnnotationControls---sectionHeading",text:"AnnotationControls---text",padding:"AnnotationControls---padding",arrowTop:"AnnotationControls---arrowTop",arrowLeft:"AnnotationControls---arrowLeft",arrowRight:"AnnotationControls---arrowRight",inline:"AnnotationControls---inline",arrow:"AnnotationControls---arrow",arrowDs:"AnnotationControls---arrowDs",nothingSelected:"AnnotationControls---nothingSelected",anonymousMessage:"AnnotationControls---anonymousMessage",noNotes:"AnnotationControls---noNotes",breakButtons:"AnnotationControls---breakButtons"}},833:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(0);function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function a(e,t){var n=o(Object(r.useState)((function(){return function(e,t){return JSON.parse(localStorage.getItem(e))||t}(e,t)})),2),i=n[0],a=n[1];return Object(r.useEffect)((function(){localStorage.setItem(e,JSON.stringify(i))}),[i]),[i,a]}},835:function(e,t,n){e.exports={"green-tint":"#88af8e","blue-tint":"#024279","active-button":"#00746b",mainTint:"#024279",activeButton:"#00746b",save:"Button---save",cancel:"Button---cancel",buttonContainer:"Button---buttonContainer"}},840:function(e,t,n){e.exports={"green-tint":"#88af8e","blue-tint":"#024279","active-button":"#00746b",mainTint:"#024279",activeButton:"#00746b"}},841:function(e,t,n){e.exports={"green-tint":"#88af8e","blue-tint":"#024279","active-button":"#00746b","header-height":"40px",mainTint:"#024279",activeButton:"#00746b",headerHeight:"40px",header:"Header---header",logo:"Header---logo",navigationButton:"Header---navigationButton",loginButton:"Header---loginButton",ButtonText:"Header---ButtonText",buttonLink:"Header---buttonLink",controls:"Header---controls"}},851:function(e,t,n){e.exports={"green-tint":"#88af8e","blue-tint":"#024279","active-button":"#00746b","ThirdWindow-Height":"300px","header-Height":"35px",mainTint:"#024279",activeButton:"#00746b",ThirdWindowHeight:"250px",ThirdWindow:"Image---ThirdWindow",ThirdWindowPortrait:"Image---ThirdWindowPortrait",header:"Image---header",listOfImages:"Image---listOfImages",ImageStyle:"Image---ImageStyle",imageSection:"Image---imageSection"}},861:function(e,t,n){e.exports={"green-tint":"#88af8e","blue-tint":"#024279","active-button":"#00746b",mainTint:"#024279",activeButton:"#00746b",textList:"TextList---textList",textListRow:"TextList---textListRow",selectedRow:"TextList---selectedRow",textNameRow:"TextList---textNameRow",textName:"TextList---textName",highlight:"TextList---highlight",searchResults:"TextList---searchResults",searchResult:"TextList---searchResult",selectedSearchResult:"TextList---selectedSearchResult",searchTotal:"TextList---searchTotal",textListLoader:"TextList---textListLoader",searching:"TextList---searching",loadMore:"TextList---loadMore"}},881:function(e,t,n){e.exports={"green-tint":"#88af8e","blue-tint":"#024279","active-button":"#00746b",mainTint:"#024279",activeButton:"#00746b",button_group_menu:"TextDetailHeading---button_group_menu"}},882:function(e,t,n){e.exports={"green-tint":"#88af8e","blue-tint":"#024279","active-button":"#00746b",mainTint:"#024279",activeButton:"#00746b",selectVersion:"SelectVersion---selectVersion",selectEmpty:"SelectVersion---selectEmpty",selectOptions:"SelectVersion---selectOptions","styled-select":"SelectVersion---styled-select"}},885:function(e,t,n){e.exports={textlist:"TextList---textlist",open:"TextList---open"}},891:function(e,t,n){e.exports={"green-tint":"#88af8e","blue-tint":"#024279","active-button":"#00746b",mainTint:"#024279",activeButton:"#00746b",textDetail:"TextDetail---textDetail",textContainer:"TextDetail---textContainer",tableContent:"TextDetail---tableContent"}},893:function(e,t,n){e.exports={"green-tint":"#88af8e","blue-tint":"#024279","active-button":"#00746b",mainTint:"#024279",activeButton:"#00746b",paddingSide:"20px",maxWidth:"600px",text:"Text---text",syncIdClass:"Text---syncIdClass",textFirstRow:"Text---textFirstRow",textLine:"Text---textLine",textline:"Text---textline",limitWidth:"Text---limitWidth",textContainer:"Text---textContainer",V_annotation:"Text---V_annotation",Q_annotation:"Text---Q_annotation",P_annotation:"Text---P_annotation",selectedAnnotation:"Text---selectedAnnotation",removedByAnnotation:"Text---removedByAnnotation",insertion:"Text---insertion",highlight:"Text---highlight",activeHighlight:"Text---activeHighlight",lineBreak:"Text---lineBreak",pageBreak:"Text---pageBreak",selectedRangelight:"Text---selectedRangelight",selectedRangeDark:"Text---selectedRangeDark",selectedImage:"Text---selectedImage"}},894:function(e,t,n){e.exports={"green-tint":"#88af8e","blue-tint":"#024279","active-button":"#00746b",mainTint:"#024279",activeButton:"#00746b",inlineWidth:"280px",annotationControls:"SplitText---annotationControls",annotationContent:"SplitText---annotationContent",subTitle:"SplitText---subTitle",title:"SplitText---title",sectionHeading:"SplitText---sectionHeading",text:"SplitText---text",padding:"SplitText---padding",arrowTop:"SplitText---arrowTop",arrowLeft:"SplitText---arrowLeft",arrowRight:"SplitText---arrowRight",inline:"SplitText---inline",arrow:"SplitText---arrow",arrowDs:"SplitText---arrowDs",nothingSelected:"SplitText---nothingSelected",anonymousMessage:"SplitText---anonymousMessage",noNotes:"SplitText---noNotes",breakButtons:"SplitText---breakButtons",splitText:"SplitText---splitText",splitTextRowContent:"SplitText---splitTextRowContent",splitTextRow:"SplitText---splitTextRow",pechaImage:"SplitText---pechaImage",image:"SplitText---image",controlsPlaceholder:"SplitText---controlsPlaceholder",hide:"SplitText---hide",pageNumber:"SplitText---pageNumber","image-loading":"SplitText---image-loading"}},896:function(e,t,n){e.exports={"green-tint":"#88af8e","blue-tint":"#024279","active-button":"#00746b",mainTint:"#024279",activeButton:"#00746b",annotationDetail:"AnnotationDetail---annotationDetail",active:"AnnotationDetail---active",annotationHeader:"AnnotationDetail---annotationHeader",activeIcon:"AnnotationDetail---activeIcon",editing:"AnnotationDetail---editing",contentOptions:"AnnotationDetail---contentOptions",actionButtons:"AnnotationDetail---actionButtons",edit:"AnnotationDetail---edit",editImage:"AnnotationDetail---editImage",save:"AnnotationDetail---save",cancel:"AnnotationDetail---cancel"}},909:function(e,t,n){var r={".":832,"./":832,"./index":832,"./index.js":832};function o(e){var t=i(e);return n(t)}function i(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}o.keys=function(){return Object.keys(r)},o.resolve=i,e.exports=o,o.id=909},916:function(e,t,n){e.exports={textsSearchContainer:"TextsSearch---textsSearchContainer",textsSearch:"TextsSearch---textsSearch",minify:"TextsSearch---minify"}},917:function(e,t,n){e.exports={button:"Button---button",buttonNoBezel:"Button---buttonNoBezel",active:"Button---active",leftAlign:"Button---leftAlign",title:"Button---title",icon:"Button---icon"}},918:function(e,t,n){e.exports={"green-tint":"#88af8e","blue-tint":"#024279","active-button":"#00746b",mainTint:"#024279",activeButton:"#00746b",accessory:"Accessory---accessory"}},933:function(e,t,n){e.exports={container:"LoadMore---container"}},934:function(e,t,n){e.exports={tab:"TextListTab---tab",showTab:"TextListTab---showTab",hideTab:"TextListTab---hideTab"}},935:function(e,t,n){e.exports={"green-tint":"#88af8e","blue-tint":"#024279","active-button":"#00746b",mainTint:"#024279",activeButton:"#00746b",Resources:"Sidebar---Resources",ResourceDetail:"Sidebar---ResourceDetail",optionlist:"Sidebar---optionlist","css-heg063-MuiTabs-flexContainer":"Sidebar---css-heg063-MuiTabs-flexContainer"}},936:function(e,t,n){},938:function(e,t,n){},944:function(e,t,n){e.exports={Dictionary:"ResourceOption---Dictionary"}},951:function(e,t,n){e.exports={container:"EditorContainer---container",interface:"EditorContainer---interface",listContainer:"EditorContainer---listContainer",showListContainer:"EditorContainer---showListContainer",hideListContainer:"EditorContainer---hideListContainer"}},977:function(e,t,n){e.exports={"green-tint":"#88af8e","blue-tint":"#024279","active-button":"#00746b",mainTint:"#024279",activeButton:"#00746b",MediaOption:"MediaOptions---MediaOption",header:"MediaOptions---header",closeBtn:"MediaOptions---closeBtn"}},984:function(e,t,n){e.exports={Resizer:"resizerStyle---Resizer",horizontal:"resizerStyle---horizontal",vertical:"resizerStyle---vertical",disabled:"resizerStyle---disabled"}}}]);