(window.webpackJsonpparkhang=window.webpackJsonpparkhang||[]).push([[4],{1002:function(e,t,n){e.exports={voteBtn:"embedingVote---voteBtn"}},1087:function(e,t,n){"use strict";n.r(t);var r={},o=(n.r(r),n.d(r,"HomePage",(function(){return Jl})),n.d(r,"Editors",(function(){return Xl})),n.d(r,"Vote",(function(){return Zl})),n.d(r,"NotFound",(function(){return ec})),n(2)),i=n.n(o),a=(n(786),n(721)),l=n.n(a),c=(a=n(98),n(860)),s=n.n(c),u=n(68),f=(c=n(28),n(1106)),d=n(739),p=n.n(d),h=n(1055);function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}d=Object(c.c)((function(e){function t(t){var r;t.preventDefault(),n.current instanceof HTMLInputElement&&(r=n.current.value,a((function(){e.searchChanged(r)})))}var n=i.a.createRef(),r=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||function(e,t){var n;if(e)return"string"==typeof e?m(e,t):"Map"===(n="Object"===(n=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?m(e,t):void 0}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(Object(o.useTransition)(),2),a=(r[0],r[1]);return i.a.createElement(h.a,{sx:{bgcolor:"inherit"},className:s.a.textsSearchContainer},i.a.createElement("div",{className:s.a.textsSearch},i.a.createElement("form",{onSubmit:t},i.a.createElement("input",{style:{outline:"none",maxWidth:196},type:"text",id:"textSearchInput",placeholder:e.intl.formatMessage({id:"leftbar.search"}),ref:n}),i.a.createElement(f.a,{onClick:t,variant:"outlined",size:"small",sx:{minWidth:2}},i.a.createElement(p.a,null)))))}));var y=n(0),b=n(5),g=Object(a.connect)((function(e){return{searchTerm:b.A(e),searchValue:e.ui.searchValue,textListWidth:b.Z(e)}}),(function(e){return{searchChanged:function(t){e(Object(y.Sb)(t))}}}))(d),v=(d=n(238),n.n(d)),w=n(752),x=n(726),O=(n(767),n(750)),E=(n(3),["ི","ུ","ེ","ོ"]),S=["ཀ","ག"];function T(e,t){t=1<arguments.length&&void 0!==t?t:null;var n,r=e.slice(-1),o="";return 3840<=(n=r).codePointAt(0)&&n.codePointAt(0)<=4095?"ང"===r?o+=e+"༌།":-1!==S.indexOf(r)||-1!==E.indexOf(r)&&-1!==S.indexOf(e.charAt(e.length-2))?o+=e:o+=e+"།":(o=e,t&&(o+=t)),o}d=n(793);var j=n.n(d),I=(d=n(724),n.n(d)),A=(d=n(769),n.n(d));function P(e){return(P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function k(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function C(e,t){return(C=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function R(e){return(R=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var _=function(e){var t=r;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&C(t,e);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=R(e);n=t?(n=R(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),r=this;if(n&&("object"===P(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==r)return r;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(r);function r(e){if(this instanceof r)return n.call(this,e);throw new TypeError("Cannot call a class as a function")}return t=r,(e=[{key:"render",value:function(){var e=this,t=this.props.string,n=t,r=this.props.stringClass||"";if(this.props.searchTerm){var i=this.props.searchTerm,a=(new I.a).splitGraphemes(t),l=t.indexOf(i),c=l+i.length,s=0,u="";if(-1<l)for(var f=0;f<a.length;f++){var d=a[f];l<=s&&s<c&&(u+=d),s+=d.length}0<u.length&&(n=A()(t,u,(function(t,n){return o.createElement("span",{className:e.props.highlightClass,key:"highlight-".concat(n)},t)})))}return o.createElement("span",{className:r},n)}}])&&k(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),r}(o.Component);function B(e){return(B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function N(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function W(e,t){return(W=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function L(e){return(L=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var D=function(e){var t=r;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&W(t,e);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=L(e);n=t?(n=L(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),r=this;if(n&&("object"===B(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==r)return r;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(r);function r(e){if(this instanceof r)return n.call(this,e);throw new TypeError("Cannot call a class as a function")}return t=r,(e=[{key:"render",value:function(){var e=this.props.count;return this.props.extra&&(e+="+"),o.createElement("span",{className:j.a.searchTotal},e)}}])&&N(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),r}(o.Component),H=n(146),M=(d=n(878),n.n(d));function z(e){return e=e.loading?i.a.createElement("span",null,i.a.createElement(H.a,{id:"leftbar.loading"})):i.a.createElement("span",null,i.a.createElement(H.a,{id:"leftbar.loadMore"})),i.a.createElement("div",{className:M.a.container},e)}var q=n(700);function V(e){return(V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function F(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function U(e,t){return(U=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Q(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function G(e){return(G=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}d=function(e){var t=r;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&U(t,e);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=G(e);n=t?(n=G(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),r=this;if(n&&("object"===V(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return Q(r)}}(r);function r(e){if(this instanceof r)return(e=n.call(this,e)).cache=new x.b({fixedWidth:!0,defaultHeight:60,minHeight:60}),e.rowRenderer=e.rowRenderer.bind(Q(e)),e;throw new TypeError("Cannot call a class as a function")}return t=r,(e=[{key:"componentDidUpdate",value:function(e){this.cache.clearAll(),this.list&&this.list.forceUpdateGrid()}},{key:"rowRenderer",value:function(e){var t=this,n=e.key,r=e.index,i=e.parent,a=(e=e.style,this.props.selectedText),l=a?a.id:-1,c=this.props.selectedSearchResult,s=this.props.texts,u=this.props.onSelectedText,f=this.props.onSelectedSearchResult,d=this.props.searchTerm,p=this.props.searchResults,h=j.a.textListRow,m=s[r],y=(l=(m.id===l&&(h=v()(h,j.a.selectedRow)),T(m.name)),o.createElement("span",{className:j.a.textName},l)),b=[],g=null,w=!1,O=!1;0<d.length&&(y=o.createElement(_,{string:l,stringClass:j.a.textName,highlightClass:j.a.highlight,searchTerm:d}),p.hasOwnProperty(m.id)&&(b=p[m.id].results,w=p[m.id].extra,O=p[m.id].loading,g=o.createElement(D,{count:p[m.id].total,extra:w}))),l=this.cache,p=[];return 0<b.length&&(p=b.map((function(e){var t=c&&c.textId===m.id&&c.start===e[0],n=t?j.a.selectedSearchResult:j.a.searchResult;return t&&console.log("got selected result: %o",e),o.createElement(q.a,{key:m.id+"_"+e[0],onClick:function(){f(m,e[0],d.length,a)},sx:{bgcolor:"inherit",color:"inherit"},className:n},o.createElement(_,{string:e[1],highlightClass:j.a.highlight,searchTerm:d}))}))),o.createElement(x.a,{columnIndex:0,key:n,parent:i,rowIndex:r,cache:l},o.createElement("div",{key:n,style:e,className:h},o.createElement("div",{className:j.a.textNameRow,onClick:function(){u(s[r])}},y," ",g),0<b.length&&o.createElement("div",{className:j.a.searchResults},p),w&&o.createElement("div",{className:j.a.loadMore,onClick:function(){t.props.onSearchText(m,d)}},o.createElement(z,{loading:O}))))}},{key:"render",value:function(){var e=this,t=this.props.texts.length;return o.createElement("div",{className:j.a.textList},this.props.texts&&0<this.props.texts.length?o.createElement(w.a,null,(function(n){var r=n.height;n=n.width;return o.createElement(O.a,{ref:function(t){return e.list=t},height:r,rowCount:t,rowHeight:e.cache.rowHeight,rowRenderer:e.rowRenderer,width:n,overscanRowCount:3,deferredMeasurementCache:e.cache})})):this.props.searching?o.createElement("div",{className:j.a.textListLoader},o.createElement(l.a,{loaded:!this.props.searching,scale:.5}),o.createElement("p",{className:j.a.searching},"Searching…")):o.createElement("ul",{className:"textList"}))}}])&&F(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),r}(o.Component);var $=n(83),K=Object(a.connect)((function(e){var t=b.A(e),n=b.y(e,t),r=b.C(e),o=!1,i=e.data.texts;return{texts:i=0<t.length?null===n?(o=!0,[]):i.filter((function(e){return n.hasOwnProperty(e.id)})):i,selectedText:Object(b.G)(e),searchTerm:t,searchResults:n,selectedSearchResult:r,searching:o}}),(function(e){return{onSelectedText:function(t){e(y.Ic(t))},onSelectedSearchResult:function(t,n,r,o){o&&o.id===t.id?e(y.Gc(t.id,n,r)):e(Object($.batchActions)([y.Gc(t.id,n,r),y.Ic(t)]))},onSearchText:function(t,n){e(y.Bc(t.id,n))}}}))(d),Y=(d=n(879),n.n(d)),J=(d=(Object(a.connect)((function(e){return{textListIsVisible:Object(b.Y)(e)}}),(function(e){return{tabClicked:function(){e(Object(y.Xb)(!0))}}}))((function(e){var t=[Y.a.tab];return e.textListIsVisible?t.push(Y.a.hideTab):t.push(Y.a.showTab),i.a.createElement("div",{className:v.a.apply(void 0,t),onClick:e.tabClicked},"Text List")})),n(242),n(756)),n.n(d)),X=(d=n(880),n.n(d)),Z=(d=n(890),n.n(d)),ee=(d=n(891),n.n(d)),te=(d=n(892),n.n(d)),ne=(d=n(893),n.n(d)),re=(n(881),n(1107)),oe=n(1108),ie=n(1111),ae=n(1112),le=(n(882),n(1063)),ce=(d=Object(a.connect)((function(e){return{Textdata:b.ab(e),selectedText:b.G(e)}}),(function(e){return{}}))((function(e){var t=e.Textdata,n=e.selectedText;return n?(e=t.detail.find((function(e){return e.text===n.id})))?i.a.createElement(i.a.Fragment,null,i.a.createElement(re.a,{variant:"h4",component:"div",mb:3},i.a.createElement(H.a,{id:"Resource.About"})),i.a.createElement(oe.a,{TransitionProps:{unmountOnExit:!0}},i.a.createElement(ie.a,{sx:{fontWeight:"bold"},expandIcon:i.a.createElement(le.a,null)},i.a.createElement(H.a,{id:"text.title"})),i.a.createElement(ae.a,null,e.title)),i.a.createElement(oe.a,{TransitionProps:{unmountOnExit:!0}},i.a.createElement(ie.a,{expandIcon:i.a.createElement(le.a,null)},i.a.createElement(H.a,{id:"text.description"})),i.a.createElement(ae.a,null,e.description))):i.a.createElement("div",null,"No about info"):i.a.createElement("div",null,"no selected Text available")})),n(883),n(885)),se=n.n(ce),ue=(ce=n(887),n.n(ce)),fe=(ce=n(888),n.n(ce)),de=n(1113),pe=n(1114),he=n(1064),me=n(1065);function ye(e){var t=e.topicId;return Object(o.useEffect)((function(){var e;t&&(window.DiscourseEmbed={discourseUrl:"https://lopenling.org/",topicId:t},(e=document.createElement("script")).type="text/javascript",e.async=!0,e.src=function(e){var t=window.DiscourseEmbed||{};if(e=document.getElementById("discourse-comments-".concat(e))){var n=function(e){return e.replace(/^https?(\:\/\/)?/,"")},r=document.createElement("iframe"),o=(["discourseUrl","discourseEmbedUrl","discourseUserName","discourseReferrerPolicy"].forEach((function(e){window[e]&&(t[e]=t[e]||window[e])})),{}),i=(t.discourseEmbedUrl&&(t.discourseEmbedUrl.startsWith("/")&&console.error("discourseEmbedUrl must be a full URL, not a relative path"),o.embed_url=encodeURIComponent(t.discourseEmbedUrl)),t.discourseUserName&&(o.discourse_username=t.discourseUserName),t.topicId&&(o.topic_id=t.topicId),t.discourseUrl+"embed/comments"),a=Object.keys(o);if(0<a.length){i+="?";for(var l=0;l<a.length;l++){0<l&&(i+="&");var c=a[l];i+=c+"="+o[c]}}r.src=i,r.id="discourse-embed-frame",r.width="100%",r.frameBorder="0",r.scrolling="no",r.referrerPolicy=t.discourseReferrerPolicy||"no-referrer-when-downgrade",e.appendChild(r),window.addEventListener("message",(function(e){e&&n(t.discourseUrl).includes(n(e.origin))&&e.data&&("discourse-resize"===e.data.type&&e.data.height&&(r.height=e.data.height+"px"),"discourse-scroll"===e.data.type&&e.data.top&&(e=function(e){var t=0;if(e.offsetParent)for(;t+=e.offsetTop,e.offsetParent;)e=e.offsetParent;else e.y&&(t+=e.y);return t}(r)+e.data.top,window.scrollTo(0,e)))}),!1)}}(t),(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(e))}),[]),t?i.a.createElement("div",{id:"discourse-comments-".concat(t)}):i.a.createElement("div",null,"Topic unavailable")}function be(e){var t=void 0===(t=e.category)?"":t;e=void 0===(e=e.perPage)?5:e;return i.a.useEffect((function(){for(var e=document.querySelectorAll("#topics"),t=0;t<e.length;t++){var n=e[t],r=n.getAttribute("url");if(r&&0!==r.length){var o="de-"+Math.random().toString(36).substr(2,9),i=["discourse_embed_id="+o];n.removeAttribute("discourse-url");for(var a=0;a<n.attributes.length;a++){var l=n.attributes[a];i.push(l.name.replace("-","_")+"="+l.value)}var c=document.createElement("iframe");c.src=r+"/embed/topics?"+i.join("&"),c.id=o,c.frameBorder=0,c.scrolling="no",c.width="100%",n.appendChild(c)}else console.error("Error, `discourse-url` was not found")}}),[]),i.a.createElement("div",{id:"topics",url:"https://lopenling.org/",style:{maxHeight:"70vh",overflow:"scroll"},"per-page":e,category:t,template:"complete",status:"open","allow-create":"true"})}ce=Object(a.connect)((function(e){var t=b.t(e);return{alignmentData:b.i(e),selectedMedia:t,showPageImages:b.wb(e)}}),(function(e){return{changedShowPageImages:function(t){e(y.Ub(t))},changeMediaSelection:function(t){return e(y.xc(t))},onSelectedSearchResult:function(t,n,r){e(y.Gc(t,n,r))}}}))((function(e){function t(t){e.changeMediaSelection(t)}return i.a.createElement(i.a.Fragment,null,i.a.createElement(re.a,{variant:"h6",gutterBottom:!0,component:"div"},"Media"),i.a.createElement(de.a,{sx:{width:"100%",maxWidth:360,bgcolor:"background.paper"}},i.a.createElement(pe.a,{selected:e.showPageImages,onClick:function(){return e.changedShowPageImages(!e.showPageImages)}},i.a.createElement(he.a,null,i.a.createElement(se.a,null)),i.a.createElement(me.a,{primary:"Image"})),i.a.createElement(pe.a,{selected:e.selectedMedia.isVideoVisible,onClick:function(){return t("VIDEO")}},i.a.createElement(he.a,null,i.a.createElement(ue.a,null)),i.a.createElement(me.a,{primary:"Video"})),i.a.createElement(pe.a,{selected:e.selectedMedia.isAudioVisible,onClick:function(){return t("AUDIO")}},i.a.createElement(he.a,null,i.a.createElement(fe.a,null)),i.a.createElement(me.a,{primary:"Audio"}))))})),n(889),window.addEventListener("message",(function(e){var t;e&&e.data&&"discourse-resize"===e.data.type&&e.data.embedId&&(t=document.getElementById(e.data.embedId))&&(t.height=e.data.height+"px")}),!1);var ge={About:d,Resources:ce,FullTextSearch:function(){return i.a.createElement(i.a.Fragment,null,i.a.createElement(g,null),i.a.createElement(K,null))},Discussion:function(){return i.a.createElement(i.a.Fragment,null,"       ",i.a.createElement(re.a,{variant:"h6",gutterBottom:!0,component:"div"},"Discussions"),i.a.createElement(be,{category:"55",perPage:"5"}))}},ve=n(742),we=n(1091),xe=n(1115),Oe=n(686),Ee=(d=n(772),n.n(d)),Se=(ce=n(743),n.n(ce)),Te=["children","value","index"];function je(){return(je=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Ie(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||function(e,t){var n;if(e)return"string"==typeof e?Ae(e,t):"Map"===(n="Object"===(n=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ae(e,t):void 0}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ae(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Pe=Object(a.connect)((function(e){return{isSecondWindowOpen:b.ub(e)}}))((function(e){var t=(l=Ie(Object(ve.a)("selectedResources",0),2))[0],n=l[1],r=(l=Ie(Object(o.useState)(!1),2))[0],a=l[1],l=(i.a.useEffect((function(){var t=setTimeout((function(){e.isSecondWindowOpen&&window.dispatchEvent(new Event("resize"))}),1e3);return function(){return clearTimeout(t)}}),[r]),Object(Oe.a)());return i.a.createElement(q.a,{sx:{width:r?"100%":"45px",bgcolor:"background.default",position:e.isSecondWindowOpen?"relative":"absolute",borderRight:"light"===l.palette.mode?"2px solid lightgray":"2px solid #d3d3d3"},className:X.a.sidebar},i.a.createElement(q.a,{className:X.a.sidebar_header},i.a.createElement(re.a,{className:X.a.menu_title,sx:r?{width:"fit-content",opacity:1}:{width:"0",opacity:0}},"Menu"),i.a.createElement("div",{onClick:function(){a((function(e){return!e}))},style:{cursor:"pointer",zIndex:1}},r?i.a.createElement(Se.a,null):i.a.createElement(Ee.a,null))),i.a.createElement(q.a,{sx:{borderBottom:1,display:"flex"},className:X.a.optionlist},i.a.createElement(we.a,{value:t,sx:{flex:1},onChange:function(e,t){n(t)},orientation:r?"horizontal":"vertical","aria-label":"basic tabs example"},i.a.createElement(xe.a,je({style:{minWidth:0,flex:1},onClick:function(){return a(!0)},icon:i.a.createElement(Z.a,null)},ke(0))),i.a.createElement(xe.a,je({style:{minWidth:0,flex:1},icon:i.a.createElement(ee.a,null),onClick:function(){return a(!0)}},ke(1))),i.a.createElement(xe.a,je({style:{minWidth:0,flex:1},icon:i.a.createElement(te.a,null),onClick:function(){return a(!0)}},ke(2))),i.a.createElement(xe.a,je({style:{minWidth:0,flex:1},icon:i.a.createElement(ne.a,null),onClick:function(){return a(!0)}},ke(3))))),r&&i.a.createElement(i.a.Fragment,null,i.a.createElement(Ce,{value:t,index:0},i.a.createElement(ge.About,null)),i.a.createElement(Ce,{value:t,index:1},i.a.createElement(ge.Resources,null)),i.a.createElement(Ce,{value:t,index:2},i.a.createElement(ge.FullTextSearch,null)),i.a.createElement(Ce,{value:t,index:3},i.a.createElement(ge.Discussion,null))))}));function ke(e){return{id:"simple-tab-".concat(e),"aria-controls":"simple-tabpanel-".concat(e)}}function Ce(e){var t=e.children,n=e.value,r=e.index;e=function(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],0<=t.indexOf(n)||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(e),i=0;i<o.length;i++)n=o[i],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}(e,Te);return i.a.createElement("div",je({role:"tabpanel",hidden:n!==r,id:"simple-tabpanel-".concat(r),"aria-labelledby":"simple-tab-".concat(r)},e,{style:{flex:1,display:n==r?"flex":"none",flexDirection:"column"}}),n===r&&i.a.createElement("div",{className:X.a.listContainer},t))}d=n(894);var Re=n.n(d),_e=(ce=n(192),n.n(ce)),Be=(d=n(895),n.n(d)),Ne=n(1109),We=(ce=n(734),n.n(ce)),Le=(d=n(906),n.n(d)),De=n(1110),He=(ce=n(925),n.n(ce)),Me=n(1100),ze=(d=n(926),n.n(d)),qe=(ce=n(927),n.n(ce));function Ve(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Fe="2MMM_ggekfE";function Ue(e){var t=[He.a.time_stamp];return e.active&&t.push(He.a.active_stamp),i.a.createElement(q.a,{className:v()(t),onClick:function(){e.jumpToTime(e.startTime),e.setActive()}},e.active===e.index&&i.a.createElement("div",{className:He.a.dot}),i.a.createElement(q.a,{className:He.a.image},i.a.createElement("img",{src:e.img,alt:"timestamp image"})),i.a.createElement(q.a,{className:He.a.chapter_info},i.a.createElement(q.a,{className:He.a.topic},i.a.createElement("div",null,e.topic),e.active&&i.a.createElement(Me.a,{target:"_blank",href:"https://youtu.be/".concat(Fe,"?t=").concat(function(){var e=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:"").split(":");return 60*+e[0]*60+60*+e[1]+ +e[2]}(e.startTime))},i.a.createElement(qe.a,null))),i.a.createElement(q.a,{className:He.a.startTime},e.startTime)))}var Qe=Object(a.connect)((function(e){var t=b.hb(e);return{isPanelLinked:b.sb(e),videoData:t.alignment,mediaInterval:b.u(e)}}),(function(e){return{changeMediaInterval:function(t){e(y.Dc(t))},changeScrollToId:function(t){return e(y.Jb(t))}}}))((function(e){var t=e.videoData.indexOf(e.mediaInterval),n=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||function(e,t){var n;if(e)return"string"==typeof e?Ve(e,t):"Map"===(n="Object"===(n=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ve(e,t):void 0}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(Object(o.useState)(0),2),r=n[0],a=n[1];return i.a.useEffect((function(){a(t=-1===t?0:t)}),[t]),i.a.useEffect((function(){e.changeMediaInterval(e.videoData[r]),e.isPanelLinked&&e.changeScrollToId({id:e.mediaInterval.source_segment.start||null,from:"video"})}),[r]),i.a.createElement(oe.a,{sx:{border:"#eee 1px solid",maxHeight:"80vh"}},i.a.createElement(ie.a,{expandIcon:i.a.createElement(ze.a,null),"aria-controls":"video-chapter-content",id:"chapter-accordion"},i.a.createElement(re.a,null,"Chapters")),i.a.createElement(ae.a,{sx:{position:"relative",overflow:"scroll",maxHeight:"250px"}},e.videoData.map((function(t,n){return i.a.createElement(q.a,{key:t.source_segment.start},i.a.createElement(Ue,{img:"//img.youtube.com/vi/"+Fe+"/0.jpg",topic:"first chapter of chojuk asdfa sdfasdfasdf asfdas dfasdfasdd dfsdfsd sdfs s",startTime:t.target_segment.start,active:r===n,setActive:function(){return a(n)},jumpToTime:e.jumpToTime}))}))))}));function Ge(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function $e(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ge(Object(n),!0).forEach((function(t){var r,o;r=e,o=n[t=t],t in r?Object.defineProperty(r,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[t]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ge(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ke(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||function(e,t){var n;if(e)return"string"==typeof e?Ye(e,t):"Map"===(n="Object"===(n=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ye(e,t):void 0}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ye(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Je=Object(a.connect)((function(e){var t=b.x(e),n=b.Q(e),r=b.hb(e),o=b.t(e),i=b.G(e),a=b.i(e),l=b.K(e,i.id);return{isPanelLinked:b.sb(e),scrollToId:t,syncIdOnClick:n,videoData:r,selectedMedia:o,selectedText:i,alignmentData:a,witness:l,mediaInterval:b.u(e)}}),(function(e){return{toggleImage:function(t){return e(y.Ub(t))},onSelectedSearchResult:function(t,n,r,o){o&&o.id===t.id?e(y.Gc(t.id,n,r)):e(batchActions([y.Gc(t.id,n,r),y.Ic(t)]))},changeMediaSelection:function(t){return e(y.xc(t))},changeMediaInterval:function(t){e(y.Dc(t))},changeSelectedRange:function(t){e(y.Kb(t))}}}))((function(e){var t,n=e.alignmentData.text,r=e.syncIdOnClick,a=Object(o.useRef)(),l=(null==e||null==(s=e.videoData)?void 0:s.alignment)||[],c=[],s=Ke(Object(o.useState)({played:0,duration:0,playing:!0}),2),u=s[0],f=s[1],d=(We()(l)||(c=l.map((function(e){return[parseInt(e.source_segment.start),parseInt(e.source_segment.end)]}))),Object(o.useEffect)((function(){var o,i;n===e.selectedText.id&&e.isPanelLinked&&(o=r,(t=c.find((function(e){var t=(e=Ke(e,2))[0];e=e[1];return t<o&&o<e})))&&(i=l.find((function(e){return e.source_segment.start===(null==(e=t[0])?void 0:e.toString())})),We()(i)||(d(i.target_segment.start),e.changeMediaInterval(i))))}),[r]),function(e){a.current.seekTo(Xe(e),"seconds")});return 0===l.length||e.videoData.source.witness!==parseInt(e.witness)?i.a.createElement("div",null):i.a.createElement(De.a,{in:e.open},i.a.createElement(Le.a,{url:"https://www.youtube.com/watch?v=2MMM_ggekfE",style:{maxWidth:"100%",objectFit:"contain"},width:"400px",height:"250px",ref:a,controls:!0,onDuration:function(e){return f($e($e({},u),{},{duration:e}))},playing:!0,onPlay:function(){return f($e($e({},u),{},{playing:!0}))},onPause:function(){return f($e($e({},u),{},{playing:!1}))},onError:function(){return console.log("error in media sec")},onSeek:function(e){return console.log("onSeek",e)},onProgress:function(t){var n=t.playedSeconds;t=l.find((function(e){return Xe(e.target_segment.start)<n&&Xe(e.target_segment.end)>n}));We()(t)||e.changeMediaInterval(t)}}),i.a.createElement(Qe,{jumpToTime:d}))}));function Xe(e){return 60*+(e=(0<arguments.length&&void 0!==e?e:"").split(":"))[0]*60+60*+e[1]+ +e[2]}var Ze=n(928),et=n(717);function tt(e){var t=Object(et.a)(),n=i.a.useRef(null);return i.a.createElement(De.a,{in:e.open},i.a.createElement(Ze.a,{profile:"top_progress",src:["https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3"],isDark:"dark"===t.palette.mode,onLoad:function(e){console.log(e)},speedPanel:"bottom",ref:n,onPlay:function(e){console.log(e)}}))}var nt=n(1116);function rt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ot(e){return i.a.createElement(Be.a,{handle:"#draggable-dialog-title",bounds:"parent"},i.a.createElement(Ne.a,e))}var it=Object(a.connect)((function(e){return{selectedMedia:b.t(e)}}),(function(e){return{changeMediaSelection:function(t){return e(y.xc(t))}}}))((function(e){var t=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||function(e,t){var n;if(e)return"string"==typeof e?rt(e,t):"Map"===(n="Object"===(n=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?rt(e,t):void 0}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(i.a.useState(!1),2),n=t[0],r=t[1];return i.a.createElement(ot,{sx:{position:"absolute",zIndex:1,right:0,maxWidth:"400px"}},i.a.createElement("div",{className:"Resizable-media-div"},i.a.createElement("div",{style:{cursor:"move",paddingInline:20,paddingTop:10,display:"flex",justifyContent:"space-between",alignItems:"center"},id:"draggable-dialog-title"},i.a.createElement("h3",null,e.selectedMedia.isVideoVisible&&"VIDEO"),i.a.createElement("h3",null,e.selectedMedia.isAudioVisible&&"AUDIO"),i.a.createElement("div",{className:"buttons-hide-close"},i.a.createElement(nt.a,{onClick:function(){r((function(e){return!e}))},disableRipple:!0},n?"+":"-"),i.a.createElement(nt.a,{onClick:function(){e.changeMediaSelection(null)},disableRipple:!0},i.a.createElement(Se.a,null)))),i.a.createElement(i.a.Fragment,null,e.selectedMedia.isVideoVisible&&i.a.createElement(Je,{open:!n,setOpen:r}),e.selectedMedia.isAudioVisible&&i.a.createElement(tt,{open:!n,setOpen:r}))))}));function at(e){return(at="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function lt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ct(e,t){return(ct=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function st(e){return(st=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ut=function(e){var t=o;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ct(t,e);var n,r=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=st(e);n=t?(n=st(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),r=this;if(n&&("object"===at(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==r)return r;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(o);function o(e){if(this instanceof o)return(e=r.call(this,e)).state={hasError:!1},e;throw new TypeError("Cannot call a class as a function")}return t=o,e=[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0}}}],(n=[{key:"componentDidCatch",value:function(e,t){console.log(e,t)}},{key:"render",value:function(){return this.state.hasError?i.a.createElement("h1",null,"Something went wrong."):this.props.children}}])&&lt(t.prototype,n),e&&lt(t,e),Object.defineProperty(t,"prototype",{writable:!1}),o}(i.a.Component),ft=n(930),dt=(d=(n(933),n(775)),n.n(d)),pt=(ce=n(810),n.n(ce)),ht=(d=n(334),n.n(d)),mt=(ce=n(744),n.n(ce)),yt=(d=n(811),n.n(d)),bt=(ce=n(812),n.n(ce)),gt=n(60),vt=n(1066),wt=Object(o.memo)(Object(c.c)((function(e){var t=[],n="",r="",o=[];return e.witnesses&&(t=e.witnesses.map((function(e){return e})),e.activeWitness&&(r=e.witnesses.findIndex((function(t){return t.id===e.activeWitness.id}))),t.sort((function(e,t){return e.isWorking?-1:t.isWorking?1:e.isBase?-1:t.isBase?1:0})),t=t.sort((function(e,t){return e.id-t.id}))),We()(t)&&!e.activeWitness?null:i.a.createElement(vt.a,{onChange:function(n){We()(t)||e.onSelectedWitness(t[n.target.value])},className:bt.a.selectVersion,value:r,label:"Version2",classes:{root:bt.a.selectEmpty,select:bt.a.selectOptions}},t.map((function(t,r){var a;return t.id===(null==(a=e.activeWitness)?void 0:a.id)&&o.push(bt.a.selected),n=t.source.name,t.isWorking&&(n="en"===e.intl.locale?"User"===e.user.name?"Working":"My Edition":"མཉམ་འབྲེལ་པར་མ།"),i.a.createElement("option",{key:"versionSelect2-".concat(r),value:r,className:bt.a.selectOptions},n)})))}))),xt=n(748),Ot=(d=n(818),n.n(d)),Et=n(1069),St=n(1070),Tt=n(1090);function jt(e){return function(e){if(Array.isArray(e))return Pt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||At(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function It(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||At(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function At(e,t){var n;if(e)return"string"==typeof e?Pt(e,t):"Map"===(n="Object"===(n=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Pt(e,t):void 0}function Pt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}ce=i.a.memo((function(e){var t=Object(o.useRef)(e.texts),n=(s=It(Object(o.useState)(t.current),2))[0],r=s[1],a=(s=It(Object(o.useState)(null),2))[0],l=s[1],c=e.onSelectedText,s=e.selectedText,u=(p=It(Object(o.useState)(!1),2))[0],d=p[1],p=null==s?void 0:s.name,h=(s=e.selectedText1,Object(o.useEffect)((function(){var e;""===a&&r(jt(t.current)),null!==a&&""!==a&&(e=t.current.filter((function(e){return e.name.includes(a)})),r(jt(e)))}),[a]),Object(o.useRef)(new xt.c({fixedHeight:!0,defaultHeight:40}))),m=[Ot.a.textlist],y=i.a.useCallback((function(e){var t=e.key,r=e.index,o=e.style,a=(e=e.parent,n[r]);return i.a.createElement(xt.b,{key:"optionvalues-".concat(t),cache:h.current,parent:e,columnIndex:0,rowIndex:r},i.a.createElement("div",{style:o,onClick:function(){d(!1),c(a)}},i.a.createElement(q.a,{sx:{overflow:"hidden",textOverflow:"ellipsis",width:"13rem",paddingLeft:2,fontSize:{lg:12,md:11,sm:10,xs:10},color:"text.primary"},component:"div"},i.a.createElement(re.a,{noWrap:!0},T(a.name)))))}),[n]);return i.a.createElement(Et.a,{onClickAway:function(){return d(!1)}},i.a.createElement("div",{style:{position:"relative",marginLeft:10}},i.a.createElement(f.a,{onClick:function(){d((function(e){return!e})),!1===u&&m.push(Ot.a.open)},component:"div",variant:"outlined",sx:{overflow:"hidden",textOverflow:"ellipsis",width:"10rem",height:"100%",color:"text.primary"},disabled:null===s},i.a.createElement(re.a,{noWrap:!0},p||"select Text here")),i.a.createElement(St.a,{in:u},i.a.createElement(q.a,{className:v()(m),sx:{position:"absolute",bgcolor:"heading.main",zIndex:1}},i.a.createElement(Tt.a,{onChange:function(e){e=e.target.value,l(e)},id:"standard-basic",label:"filter",variant:"standard",style:{width:"100%"}}),i.a.createElement(xt.a,null,(function(e){var t=e.width;e=e.height;return i.a.createElement(xt.d,{width:t,height:e,rowHeight:40,deferredMeasurementCache:h.current,rowCount:n.length,rowRenderer:y})}))))))}));var kt,Ct=Object(a.connect)((function(e){var t=b.A(e),n=b.y(e,t),r=b.C(e),o=!1,i=e.data.texts;return{texts:i=0<t.length?null===n?(o=!0,[]):i.filter((function(e){return n.hasOwnProperty(e.id)})):i,selectedText1:Object(b.G)(e),selectedText:Object(b.H)(e),searchTerm:t,searchResults:n,selectedSearchResult:r,searching:o}}),(function(e){return{onSelectedText:function(t){e(y.Jc(t))}}}))(ce);function Rt(){return(Rt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function _t(e){return i.a.createElement("svg",Rt({viewBox:"0 0 512 512"},e),kt=kt||i.a.createElement("path",{d:"M507.73 109.1c-2.24-9.03-13.54-12.09-20.12-5.51l-74.36 74.36-67.88-11.31-11.31-67.88 74.36-74.36c6.62-6.62 3.43-17.9-5.66-20.16-47.38-11.74-99.55.91-136.58 37.93-39.64 39.64-50.55 97.1-34.05 147.2L18.74 402.76c-24.99 24.99-24.99 65.51 0 90.5 24.99 24.99 65.51 24.99 90.5 0l213.21-213.21c50.12 16.71 107.47 5.68 147.37-34.22 37.07-37.07 49.7-89.32 37.91-136.73zM64 472c-13.25 0-24-10.75-24-24 0-13.26 10.75-24 24-24s24 10.74 24 24c0 13.25-10.75 24-24 24z"}))}function Bt(e){var t=new Array(34).fill().map((function(e,t){return t=14+t,i.a.createElement("option",{value:t,key:t},t)}));return i.a.createElement("div",{className:Nt.a.fontSize},i.a.createElement("label",{htmlFor:"fontSize"},"Font Size"),i.a.createElement("select",{value:e.fontSize,onChange:function(t){var n=event.target;n=Number(n.value);e.onChange(n)}},t))}d=n(959);var Nt=n.n(d),Wt=(ce=n(821),n.n(ce)),Lt=n(1117),Dt=n(1073),Ht=n(1118);function Mt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||function(e,t){var n;if(e)return"string"==typeof e?zt(e,t):"Map"===(n="Object"===(n=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?zt(e,t):void 0}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function zt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function qt(e){var t=Mt(Object(o.useState)(!1),2),n=t[0],r=t[1],a=(t=Mt(Object(ve.a)("WindowTwoFont","Tibetan"),2))[0],l=t[1];return Object(o.useEffect)((function(){document.body.style.setProperty("--tibetan-fonts2",a)}),[]),i.a.createElement(Et.a,{onClickAway:function(){return r(!1)}},i.a.createElement(q.a,{position:"relative"},i.a.createElement(nt.a,{onClick:function(){r((function(e){return!e}))},size:"small",variant:"text"},i.a.createElement(_t,{height:20,width:20,fill:"currentColor"})),i.a.createElement(St.a,{in:n},i.a.createElement(Lt.a,{dense:!0,sx:{position:"absolute",right:0,zIndex:2,top:40,bgcolor:"heading.main"}},i.a.createElement(Bt,{fontSize:e.textFontSize,onChange:e.onChangedFontSize}),i.a.createElement(Dt.a,null),i.a.createElement(Vt,{selectFont:function(e){l(e),document.body.style.setProperty("--tibetan-fonts2","".concat(e)),setTimeout((function(){window.dispatchEvent(new Event("resize"))}),1e3),r(!1)},selectedfont:a}),i.a.createElement(Ht.a,{onClick:function(){return e.onExport()}},"Export Document",e.exportingWitness&&i.a.createElement(Wt.a,null))))))}var Vt=function(e){var t=e.selectFont,n=(e=e.selectedfont,u.c||[]);return i.a.createElement(q.a,{textAlign:"center"},i.a.createElement("span",null,"Font:")," ",i.a.createElement("select",{onChange:function(e){return t(e.target.value)},value:e},n.map((function(e,t){return i.a.createElement("option",{key:t+"-fontselect",value:e},e)}))))};function Ft(e){return e=e.handleWindowSearch,i.a.createElement(nt.a,{size:"small",variant:"text",onClick:e},i.a.createElement(p.a,null))}d=n(822);var Ut=n.n(d);function Qt(e){return i.a.createElement(i.a.Fragment,{key:"right"},i.a.createElement(nt.a,{onClick:function(){e.changeShowTableContent(!e.showTableContent)}},e.showTableContent?i.a.createElement(Ut.a,null):i.a.createElement(Ee.a,null)))}var Gt=n(1074),$t=n(1119);function Kt(e){return(Kt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Yt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Jt(e,t){return(Jt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Xt(e){return(Xt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Zt=function(e){var t=r;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Jt(t,e);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Xt(e);n=t?(n=Xt(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),r=this;if(n&&("object"===Kt(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==r)return r;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(r);function r(e){if(this instanceof r)return n.call(this,e);throw new TypeError("Cannot call a class as a function")}return t=r,(e=[{key:"render",value:function(){var e=this,t=this.props.string,n=t,r=this.props.stringClass||"";if(this.props.searchTerm){var i=this.props.searchTerm,a=(new I.a).splitGraphemes(t),l=t.indexOf(i),c=l+i.length,s=0,u="";if(-1<l)for(var f=0;f<a.length;f++){var d=a[f];l<=s&&s<c&&(u+=d),s+=d.length}0<u.length&&(n=A()(t,u,(function(t,n){return o.createElement("span",{className:e.props.highlightClass,key:"highlight-".concat(n)},t)})))}return o.createElement("span",{className:r},n)}}])&&Yt(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),r}(o.Component),en=(ce=n(961),n.n(ce));function tn(e){function t(e){var t=e.key,o=e.index,c=e.parent,u=(e=e.style,a[o]);return i.a.createElement(xt.b,{key:"listkeys2-".concat(t),cache:s.current,parent:c,columnIndex:0,rowIndex:o},i.a.createElement("div",{style:e},0<a.length&&i.a.createElement("div",{className:en.a.searchListItem,onClick:function(){return n(l,u[0],r.length,l)}},i.a.createElement(Zt,{string:u[1],highlightClass:en.a.highlight,searchTerm:r}))))}var n=e.onSelectedSearchResult,r=e.searchValue,a=e.results,l=e.selectedText,c=Object(o.useRef)(),s=Object(o.useRef)(new xt.c({fixedWidth:!0,defaultHeight:100}));return a?i.a.createElement(i.a.Fragment,null,i.a.createElement(xt.a,null,(function(e){var n=e.height;e=e.width;return i.a.createElement(xt.d,{ref:c,height:n,rowCount:null==a?void 0:a.length,rowHeight:s.current.rowHeight,deferredMeasurementCache:s.current,rowRenderer:t,width:e,overscanRowCount:1})}))):null}function nn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||function(e,t){var n;if(e)return"string"==typeof e?rn(e,t):"Map"===(n="Object"===(n=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?rn(e,t):void 0}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function rn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function on(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function an(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?on(Object(n),!0).forEach((function(t){var r,o;r=e,o=n[t=t],t in r?Object.defineProperty(r,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[t]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):on(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ln=Object(a.connect)((function(e){var t,n=b.gb(e),r=b.H(e),o=[],i=(r&&(o=b.cb(e,r.id),t=(t=b.L(e,r.id))?b.jb(e,t):b.nb(e,r.id)),b.X(e)),a=Object(b.O)(e),l=b.B(e);return{witnesses:o,selectedText:r,selectedWitness:t,textListIsVisible:Object(b.Y)(e),accountOverlayVisible:Object(b.e)(e),textFontSize:i,user:n,searchValue:l,showTableContent:a,searchResults:b.z(e,l)}}),null,(function(e,t,n){var r=t.dispatch,o=e.selectedText;return an(an(an({},n),e),{},{navigationButtonClicked:function(){t.dispatch(y.Xb(!e.textListIsVisible))},onSelectedWitness:function(e){r(y.Lc(null==o?void 0:o.id,null==e?void 0:e.id))},onChangedFontSize:function(e){r(y.Wb(e))},changeShowTableContent:function(e){r(y.Pc(e))},searchChanged:function(e){r(y.Tb(e))},changeSelectSyncId:function(e){},onSelectedSearchResult:function(e,t,n,o){o&&o.id===e.id?r(y.Hc(e.id,t,n)):r(batchActions([y.Hc(e.id,t,n),y.Jc(e)]))}})}))((function(e){var t=(u=nn(Object(o.useState)(""),2))[0],n=u[1],r=(u=nn(Object(o.useState)(!1),2))[0],a=u[1],l=(u=nn(Object(o.useState)(!1),2))[0],c=u[1],s=Object(o.useRef)(),u=Object(o.useRef)(),d=i.a.useRef(mt()((function(t){e.searchChanged(t)}),1e3)).current,p=Object(o.useCallback)((function(e){e.preventDefault(),d(t),c(!0)}),[t]),h=Object(o.useCallback)((function(){a(!r)}),[r]),m=(Object(o.useEffect)((function(){!0===r&&s.current.focus(),!1===r&&d(null)}),[r]),ht()(e.searchResults)&&e.searchResults.hasOwnProperty(e.selectedText.id)),y=m?e.searchResults[e.selectedText.id].results:[];return i.a.createElement(Gt.a,{direction:"column",ref:u,spacing:1,sx:{paddingInline:{md:1,xs:0},paddingBlock:{md:1,xs:0},borderTop:{md:0,xs:"1px solid gray"},bgcolor:"heading.main",color:"text.primary"}},i.a.createElement(Gt.a,{direction:"row",spacing:1,justifyContent:"space-between"},i.a.createElement(q.a,{sx:{display:"flex",gap:{md:2,sx:0},flexDirection:{md:"row",xs:"column"}}},i.a.createElement(Ct,null),i.a.createElement(wt,{witnesses:e.witnesses,activeWitness:e.selectedWitness,onSelectedWitness:e.onSelectedWitness,user:e.user})),i.a.createElement($t.a,{size:"small","aria-label":"small button group",sx:{position:"relative",display:"flex",alignItems:"center",justifyContent:"center",height:"fit-content",width:"fit-content",border:function(e){return"1px solid ".concat(e.palette.divider)},borderRadius:1,bgcolor:"background.paper",color:"text.secondary","& svg":{m:1},"& hr":{mx:.5}},className:yt.a.button_group_menu},i.a.createElement(Ft,{handleWindowSearch:h}),i.a.createElement(qt,{textFontSize:e.textFontSize,onChangedFontSize:e.onChangedFontSize,onExport:e.onExport}),i.a.createElement(Qt,{changeShowTableContent:e.changeShowTableContent,showTableContent:e.showTableContent}))),i.a.createElement(De.a,{in:r,mountOnEnter:!0,unmountOnExit:!0},i.a.createElement("form",{onSubmit:p},i.a.createElement(Gt.a,{direction:"row",spacing:2,position:"relative"},i.a.createElement(Tt.a,{hiddenLabel:!0,id:"filled-hidden-label-small",inputProps:{style:{height:25,padding:"0 14px"}},style:{height:25,flex:1},fullWidth:!0,inputRef:s,value:t,onChange:function(e){return n(e.target.value)}}),i.a.createElement(f.a,{variant:"outlined",size:"small",onClick:p,style:{height:25}},"Search"),e.searchResults&&l&&i.a.createElement(q.a,{sx:((u="boxShadow")in(p={position:"absolute",top:35,right:0,zIndex:1,bgcolor:"heading.main",width:350,height:350,boxShadow:h=3,overflowX:"hidden"})?Object.defineProperty(p,u,{value:h,enumerable:!0,configurable:!0,writable:!0}):p[u]=h,p)},0===y.length&&i.a.createElement("p",null,"no such word present"),m&&0<y.length&&i.a.createElement(tn,{onSelectedSearchResult:e.onSelectedSearchResult,searchValue:e.searchValue,results:y,selectedText:e.selectedText}),i.a.createElement(nt.a,{"aria-label":"closeButton",onClick:function(){c(!1),d(null),n("")},size:"small",sx:{right:15,top:0,position:"absolute"}},i.a.createElement(Se.a,{fontSize:"inherit"})))))))})),cn=n(121),sn=n(70);function un(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var fn=function(){function e(t,n){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.annotatedText=t,this.splitter=n,this._texts=null,this._textsId=null,this._textsFinalPositions=[]}var t,n;return t=e,(n=[{key:"texts",get:function(){if(!this.annotatedText)return[];if(!this._texts||this._textsId!==this.annotatedText.getUniqueId()){this._textsFinalPositions=[];var e=this.annotatedText.segmentedText,t=e.getText(),n=this.splitter(t).filter((function(e){return 0!==e}));if(0===n.length)return this._textsFinalPositions.push(t.length),[e];n[n.length-1]+1<t.length&&n.push(t.length-1);for(var r=e.segments,o=0,i=[],a=0;a<n.length;a++){var l=n[a],c=(l=e.indexOfSegmentAtPosition(l-1),void 0);c=a==n.length-1?r.slice(o):r.slice(o,l+1),c=new cn.a(c);i.push(c),o=l+1,0<=l&&(c=r[l],this._textsFinalPositions.push(c.end))}this._texts=i.filter((function(e){return 0<e.segments.length})),this._textsId=this.annotatedText.getUniqueId()}return this._texts||[]}},{key:"getTextsFinalPositions",value:function(){return this.texts,this._textsFinalPositions}},{key:"getTextIndexOfPosition",value:function(e){for(var t=this.getTextsFinalPositions(),n=0,r=null,o=0;o<t.length;o++){var i=t[o];if(n<=e&&e<=i){r=o;break}n=i}return null===r&&(console.warn("no index for position %d",e),r=t.length-1),r}}])&&un(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),dn=n(243),pn=(d=n(823),n.n(d)),hn=n(1076),mn=(ce=n(150),n(699)),yn=(d=n(781),n(1120));function bn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var gn=Object(ce.a)("div")((function(e){return bn({position:"relative",borderRadius:(e=e.theme).shape.borderRadius,backgroundColor:Object(mn.a)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object(mn.a)(e.palette.common.white,.25)},marginLeft:0,width:"100%"},e.breakpoints.up("sm"),{marginLeft:e.spacing(1),width:"auto"})})),vn=Object(ce.a)("div")((function(e){return{padding:e.theme.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"}})),wn=Object(ce.a)(d.c)((function(e){return{color:"inherit","& .MuiInputBase-input":bn({padding:(e=e.theme).spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(e.spacing(4),")"),transition:e.transitions.create("width"),width:"100%"},e.breakpoints.up("sm"),{width:"0",cursor:"pointer","&:focus":{width:"20ch"}})}}));function xn(){return i.a.createElement(q.a,{sx:{bgcolor:"heading.main",color:"text.primary",width:"100%",height:"100%",paddingInline:2}},i.a.createElement(yn.a,{sx:{justifyContent:"space-between",paddingLeft:"0 !important",margin:0}},i.a.createElement(re.a,{textTransform:"uppercase",component:"h6"},"Table Of Content"),i.a.createElement(gn,null,i.a.createElement(vn,null,i.a.createElement(p.a,null)),i.a.createElement(wn,{placeholder:"Search…",inputProps:{"aria-label":"search"}}))),i.a.createElement(q.a,null,[{Id:1,Title:"chapter 1",segment_id:0},{Id:2,Title:"chapter 2",segment_id:400}].map((function(e,t){return i.a.createElement(q.a,{key:"TableContent-"+t,sx:{cursor:"pointer",width:"fit-content","&:hover":{fontWeight:"bold"}}},e.Title)}))))}var On=n(824),En=n.n(On),Sn=(On=n(189),n.n(On)),Tn=(On=n(825),n.n(On)),jn=n(51),In=n(24);On=n(1075);function An(e){return(An="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Pn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||function(e,t){var n;if(e)return"string"==typeof e?kn(e,t):"Map"===(n="Object"===(n=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?kn(e,t):void 0}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function kn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Cn(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function Rn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Cn(Object(n),!0).forEach((function(t){var r,o;r=e,o=n[t=t],t in r?Object.defineProperty(r,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[t]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Cn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Bn(e,t){return(Bn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Nn(e){return(Nn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Wn=function(e){var t=r;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Bn(t,e);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Nn(e);n=t?(n=Nn(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),r=this;if(n&&("object"===An(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==r)return r;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(r);function r(e){var t;if(this instanceof r)return(t=n.call(this,e)).state={segmentedText:e.segmentedText},t.textAlignmentById=t.props.textAlignmentById,t._renderedSegments=null,t._renderedHtml=null,t;throw new TypeError("Cannot call a class as a function")}return t=r,(e=[{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.setState((function(t,n){return Rn(Rn({},t),{},{segmentedText:e.segmentedText})}))}},{key:"selectedElement",value:function(e){var t=[],n=[],r=document.getSelection();if(null!=e&&e.id.includes("s2_")&&this.props.condition){var o=parseInt(e.id.replace("s2_","")),i=(this.props.changeSyncIdOnClick(o),this.props.changeScrollToId({id:"ua",from:"ua"}),parseInt(e.id.replace("s2_",""))),a=this.textAlignmentById.find((function(e){return i>=e.TStart&&i<e.TEnd}));if(a){for(var l=a.start;l<a.end;l++)t.push(l);for(var c=a.TStart;c<a.TEnd;c++)n.push(c);this.props.changeSelectedRange({source:t,target:n})}}r&&"Range"===r.type||(this.props.selectedSegmentId(e.id),e.id||this.props.changeSelectedRange({source:[],target:[]}))}},{key:"generateHtml",value:function(e,t){var n=t.segmentedText.segments,r='<p class="'+Tn.a.textLine+'">';if(0===n.length)return{__html:r};for(var o=n[n.length-1].end+1,i=Tn.a.highlight,a=Tn.a.activeHighlight,l=null,c=0;c<n.length;c++){var s=n[c],u="",f=[];if(s.start===o)break;var d,p=null,h=(0!==s.length&&(p="s2_"+s.start),null!=(d=e.selectedTargetRange)&&d.includes(s.start)&&e.condition&&(d="light"===e.theme.palette.mode?Tn.a.selectedRangelight:Tn.a.selectedRangeDark,f.push(d)),0<f.length&&(u='class="'+v.a.apply(void 0,f)+'"'),s.text);if(e.searchStringPositions){var m=s.start,y=m,b=(h="",i);e.selectedSearchResult&&e.selectedSearchResult.start<=y&&e.selectedSearchResult.start+e.selectedSearchResult.length>y&&(b=a);for(var g=0;g<s.text.length;g++){var w,x,O,E=s.text.charAt(g);y=m+g;l?((w=Pn(l,2))[0],0===g&&(h+='<span class="'+b+'">'),y===w[1]?(h+=E+"</span>",l=null):g===s.text.length-1?h+=E+"</span>":h+=E):y in e.searchStringPositions?(x=(w=Pn(e.searchStringPositions[y],2))[0],O=w[1],h+='<span class="'+b+'">'+E,g!==s.text.length-1&&y!==O||(h+="</span>"),y<O&&(l=[x,O])):h+=E}}r+="<span id="+p+" key="+p+" "+u+">"+h+"</span>"}return this._renderedSegments=n,{__html:r+="</p>"}}},{key:"shouldComponentUpdate",value:function(e,t){return t=this.generateHtml(e,t),this.props.fontSize!==e.fontSize||(!this._renderedHtml||t.__html!==this._renderedHtml.__html)&&this._renderedHtml!==t&&(this._renderedHtml=t,!0)}},{key:"componentDidUpdate",value:function(){this.textAlignmentById=this.props.textAlignmentById}},{key:"render",value:function(){var e=this,t=[Tn.a.text],n=(0===this.props.row&&t.push(Tn.a.textFirstRow),this._renderedHtml||this.generateHtml(this.props,this.state));return this._renderedHtml||(this._renderedHtml=n),i.a.createElement("div",{className:Tn.a.textContainer},i.a.createElement("div",{className:v.a.apply(void 0,t),dangerouslySetInnerHTML:n,onClick:function(t){return e.selectedElement(t.target)},style:{fontSize:this.props.fontSize,fontFamily:"var(--tibetan-fonts2)"}}))}}])&&_n(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),r}(i.a.Component),Ln=Object(On.a)(Wn),Dn=(Wn=n(826),n.n(Wn));function Hn(e){return(Hn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Mn(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function zn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Mn(Object(n),!0).forEach((function(t){qn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Mn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function qn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Vn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||function(e,t){var n;if(e)return"string"==typeof e?Fn(e,t):"Map"===(n="Object"===(n=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Fn(e,t):void 0}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Fn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Un(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Qn(e,t){return(Qn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Gn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $n(e){return($n=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Kn={},Yn=function(e){var t=r;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Qn(t,e);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=$n(e);n=t?(n=$n(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),r=this;if(n&&("object"===Hn(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return Gn(r)}}(r);function r(e){var t;if(this instanceof r)return(t=n.call(this,e)).textAlignmentById=[],t.changeScrollToId=e.changeScrollToId,t.condition=e.condition,t.list=null,t.splitText=null,t.cache=new x.b({fixedWidth:!0}),t.rowRenderer=t.rowRenderer.bind(Gn(t)),t.activeSelection=null,t.selectedNodes=null,t._mouseDown=!1,t._activeWitness=null,t._didSetInitialScrollPosition=!1,t._modifyingSelection=!1,t.imageHeight=null,t.imageWidth=null,t.calculatedImageHeight=null,t.selectedWindow=t.props.selectedWindow,t.scrollEvent=t.scrollEvent.bind(Gn(t)),t.scrollTop=0,t;throw new TypeError("Cannot call a class as a function")}return t=r,(e=[{key:"scrollEvent",value:function(e){if(1===this.selectedWindow)return null;var t;2===this.selectedWindow&&(t=[],this.textAlignmentById.map((function(e){var n=document.getElementById("s2_"+e.TStart);n&&90<n.getBoundingClientRect().top&&t.push({id:e.id,start:e.start,TStart:e.TStart,end:e.end,TEnd:e.TEnd})})),We()(t)||2===this.selectedWindow&&this.debouncedScroll(t))}},{key:"selectedListRow",value:function(e){var t=null;return e.activeAnnotation?e.splitText.getTextIndexOfPosition(e.activeAnnotation.start):t}},{key:"handleSelection",value:function(e){this._modifyingSelection?(e.stopPropagation(),this._modifyingSelection=!1):(this.activeSelection=document.getSelection(),this._mouseDown||this.mouseUp())}},{key:"mouseDown",value:function(){this._mouseDown=!0}},{key:"mouseUp",value:function(){this._mouseDown=!1,this.activeSelection&&(this.activeSelection=null)}},{key:"getNodeSegmentSpan",value:function(e){for(var t=e,n=null,r=/^(i|s|ds)_/;!n&&t.parentNode;)t instanceof Element&&r.test(t.id)&&(n=t),t=t.parentNode;return n}},{key:"updateList",value:function(){var e=!(0<arguments.length&&void 0!==arguments[0])||arguments[0],t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;if(this.props.showImages&&!this.calculatedImageHeight&&this.imageHeight&&this.imageWidth&&(this.calculatedImageHeight=this.calculateImageHeight()),this.list){var n=this.list;if(e)if(null!==t)if(Array.isArray(t)){if(Array.isArray(t))for(var r=0;r<t.length;r++){var o=t[r];this.cache.clear(o)}}else this.cache.clear(t);else this.cache.clearAll(),n.measureAllRows(),n.recomputeRowHeights(0);n.forceUpdateGrid()}}},{key:"processProps",value:function(e){var t=this,n=!1;if((o=((!this.props.selectedWitness||e.selectedWitness&&e.selectedWitness.id!==this.props.selectedWitness.id)&&(this._didSetInitialScrollPosition=!(n=!0)),!e.selectedSearchResult||this.props.selectedSearchResult&&e.selectedSearchResult.start===this.props.selectedSearchResult.start&&e.selectedSearchResult.textId===this.props.selectedSearchResult.textId||(console.log("resetting scroll position from search result"),this._didSetInitialScrollPosition=!1),this.getControlsMeasurements(e)))&&(this.selectedTextIndex=o.selectedTextIndex,this.firstSelectedSegment=o.firstSelectedSegment,this.splitTextRect=o.splitTextRect,this.selectedElementId=o.selectedElementId,this.selectedElementIds=o.selectedElementIds),e.textListVisible!==this.textListVisible||e.editMenuVisible!==this.editMenuVisible)setTimeout((function(){t.textListVisible=e.textListVisible,t.editMenuVisible=e.editMenuVisible,t.updateList(!0)}),500);else if(n)this.updateList(!0);else if(this.pageBreaksChanged(this.props,e)){var r=null,o=this.selectedListRow(this.props);n=this.selectedListRow(e);if(o&&n){r=[];for(var i=n<o?n:o,a=this.props.splitText.texts.length;i<a;i++)r.push(i)}this.updateList(!0,r)}else if(this.lineBreaksChanges(this.props,e)){n=(n=this.selectedListRow(e))||this.selectedListRow(this.props),o=this.props.splitText.texts;var l=[];if(null!==n){for(var c=n,s=o.length;c<s;c++)l.push(c);this.updateList(!0,l)}}else this.props.fontSize!==e.fontSize?this.updateList(!0):this.props.activeAnnotation&&e.activeAnnotation&&this.annotationsInSameLocation(this.props.activeAnnotation,e.activeAnnotation)?this.updateList(!0,this.selectedListRow(e)):this.updateList(this.shouldResetListCache(this.props,e))}},{key:"pageBreaksChanged",value:function(e,t){return e=e.splitText.getTextsFinalPositions(),t=t.splitText.getTextsFinalPositions(),e.length!==t.length||JSON.stringify(e)!==JSON.stringify(t)}},{key:"lineBreaksChanges",value:function(e,t){var n=e.activeAnnotation,r=t.activeAnnotation,o=!1;return n&&n.isType(ANNOTATION_TYPES.lineBreak)&&t.activeAnnotations&&!t.activeAnnotations.hasOwnProperty(n.uniqueId)&&(o=!0),!(!(r&&r.isType(ANNOTATION_TYPES.lineBreak)&&e.activeAnnotations)||e.activeAnnotations.hasOwnProperty(r.uniqueId))||o}},{key:"shouldResetListCache",value:function(e,t){var n=!1;return!(e.showImages===t.showImages&&!this.pageBreaksChanged(e,t))||n}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.processProps(e)}},{key:"componentDidMount",value:function(){var e=this;this.resizeHandler=En()((function(){e.calculatedImageHeight=null,e.updateList()}),500).bind(this),window.addEventListener("resize",this.resizeHandler),this.debouncedScroll=mt()((function(t){e.changeScrollToId({id:t[0].TStart,from:2})}),1e3),this.selectionHandler=mt()((function(t){e.handleSelection(t)}),200).bind(this),document.addEventListener("selectionchange",this.selectionHandler),document.addEventListener("mousedown",this.mouseDown.bind(this),!0),document.addEventListener("mouseup",this.mouseUp.bind(this),!0),this.processProps(this.props),this.componentDidUpdate(),this.splitText.style.scrollBehavior="smooth",this.timer=setTimeout((function(){e.resizeHandler()}),2e3)}},{key:"scrollToIndex",value:function(e){var t=this.list;setTimeout((function(){t.scrollToRow(e),setTimeout((function(){t.scrollToPosition(t.props.scrollTop-300)}),0)}),100)}},{key:"componentDidUpdate",value:function(e,t){var n,r,o,i=this,a=this.props.scrollToId,l=(this.targetId2=this.props.syncIdOnClick,this.selectedWindow=this.props.selectedWindow,this.list,this.props.searchResults,this.props.textAlignment);this.condition=this.props.condition,!this._didSetInitialScrollPosition&&this.list&&(n=this.list,(this.props.activeAnnotation||this.props.selectedSearchResult)&&(r=this.getSelectedTextIndex(),setTimeout((function(){n.scrollToRow(r),setTimeout((function(){n.scrollToPosition(n.props.scrollTop-300)}),0)}),100)),this._didSetInitialScrollPosition=!0),1===this.selectedWindow&&1===a.from&&this.condition&&null!==a.id&&(this.textAlignmentById=this.props.textAlignmentById||[],l&&null!==(o=null==(o=this.textAlignmentById.find((function(e){return e.start===a.id})))?void 0:o.TStart)&&(o=this.props.splitText.getTextIndexOfPosition(o),this.scrollToIndex(o))),this.targetId2&&null===a.from&&1===this.selectedWindow&&null===a.id&&this.condition&&(o=null==(o=l.alignment.find((function(e){return i.targetId2>=e.source_segment.start&&i.targetId2<e.source_segment.end})))||null==(l=o.target_segment)?void 0:l.start,l=this.props.splitText.getTextIndexOfPosition(o),this.scrollToIndex(l))}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousedown",this),document.removeEventListener("mouseup",this),window.removeEventListener("resize",this.resizeHandler),document.removeEventListener("selectionchange",this.selectionHandler),clearTimeout(this.timer)}},{key:"getSelectedTextIndex",value:function(){var e,t=0,n=null;return this.props.activeAnnotation?n=Vn(this.props.splitText.annotatedText.getPositionOfAnnotation(this.props.activeAnnotation),1)[0]:this.props.selectedSearchResult&&((e=this.props.splitText.annotatedText.segmentAtOriginalPosition(this.props.selectedSearchResult.start))instanceof jn.a?n=e.start:"number"==typeof e&&(n=e)),n?this.props.splitText.getTextIndexOfPosition(n):t}},{key:"getControlsMeasurements",value:function(e){if(!this.splitText)return null;var t=this.splitText,n=null,r=null,o=null,i=null,a=null,l=[],c=0;if(e.activeAnnotation){var s=e.activeAnnotation;if(null===(c=Vn(e.splitText.annotatedText.getPositionOfAnnotation(s),1)[0]))return console.warn("No startPos in getControlsMeasurements"),null;s.type===ANNOTATION_TYPES.pageBreak&&--c,s.type===ANNOTATION_TYPES.lineBreak&&--c;var u=c+s.length;0<s.length&&--u,n=e.splitText.getTextIndexOfPosition(u),i=t.getBoundingClientRect()}var f=[];if(e.selectedAnnotatedSegments&&0<e.selectedAnnotatedSegments.length){f=e.selectedAnnotatedSegments;for(var d=0;d<f.length;d++){var p=f[d];if(null===r&&p instanceof jn.a){r=p;break}}r&&(a=0===r.length&&e.activeAnnotation&&e.activeAnnotation.isInsertion?(o=idForInsertion(r),idForInsertion):(o=idForSegment(r),idForSegment))}else e.activeAnnotation&&(e.activeAnnotation.isDeletion?(s=new jn.a(c,""),o=idForDeletedSegment(s),a=idForDeletedSegment,f=[r=s]):e.activeAnnotation.isInsertion?(u=Vn(e.splitText.annotatedText.getPositionOfAnnotation(e.activeAnnotation),1)[0])&&(t=new jn.a(u,""),o=idForInsertion(t),a=idForInsertion,f=[r=t]):e.activeAnnotation.type===ANNOTATION_TYPES.pageBreak?(s=new jn.a(c+1,""),u=new jn.a(c,""),f=[r=s],l=[o=idForPageBreak(u)]):e.activeAnnotation.type===ANNOTATION_TYPES.lineBreak&&(t=new jn.a(c+1,""),s=new jn.a(c,""),f=[r=t],l=[o=idForLineBreak(s)]));if(a)for(var h=0;h<f.length;h++){var m=f[h];m instanceof jn.a&&(m=a(m),l.push(m))}return null!=n&&r&&o&&i?{selectedTextIndex:n,firstSelectedSegment:r,selectedElementId:o,splitTextRect:i,selectedElementIds:l}:null}},{key:"render",value:function(){var e=this,t=this.props,n=this.rowRenderer,r=this.cache,i=t.selectedWitness?t.selectedWitness.id:0;return o.createElement("div",{className:Dn.a.splitText,ref:function(t){return e.splitText=t},key:i,style:{cursor:"pointer"}},o.createElement(w.a,{disableWidth:!0},(function(i){return i=i.height,o.createElement(xt.d,{ref:function(t){return e.list=t},height:i,rowCount:t.splitText.texts.length,rowHeight:r.rowHeight,rowRenderer:n,width:1,overscanRowCount:1,deferredMeasurementCache:r,onScroll:e.scrollEvent,scrollToAlignment:"start",containerStyle:{width:"100%",maxWidth:"100%"},style:{width:"100%",paddingTop:30,paddingInline:50}})})))}},{key:"getStringPositions",value:function(e,t,n){var r=this.props.splitText.annotatedText.getUniqueId();if((Kn=Kn.hasOwnProperty(r)?Kn:qn({},r,{}))[r].hasOwnProperty(t)||(Kn[r]=qn({},t,{})),Kn[r][t].hasOwnProperty(n))return Kn[r][t][n];for(var o=new I.a,i=e.getText(),a=e.segments[0].start,l=[],c=i.indexOf(t);-1!==c;)l.push(c),c=i.indexOf(t,c+1);var s={};if(0<l.length)for(var u=o.splitGraphemes(i),f=0,d=null,p=0;p<u.length;p++){var h=u[p],m=f+(h.length-1);null!==d?d+(t.length-1)<=m&&(s[d+a]=[d+a,m+a],d=null):-1!==l.indexOf(f)?t.length===h.length?s[f+a]=[f+a,m+a]:t.length>h.length&&(d=f):d=null,f+=h.length}return Kn[r][t][n]=s}},{key:"rowRenderer",value:function(e){var t=e.key,n=e.index,r=e.parent,i=(e=e.style,this.props),a=this.cache,l={},c=((c=this.props.searchValue)&&0<c.length&&i.splitText&&(l=this.getStringPositions(i.splitText.texts[n],c,n)),zn(zn({},e),{},{height:e.height+10}));return o.createElement(x.a,{columnIndex:0,parent:r,rowIndex:n,cache:a,key:t},o.createElement("div",{style:c,ref:this.splitTextRef,id:"index2_".concat(n),className:Dn.a.splitTextRow},o.createElement("div",{className:Dn.a.splitTextRowContent},o.createElement(Ln,{segmentedText:i.splitText.texts[n],row:n,selectedSegmentId:i.selectedSegmentId,searchStringPositions:l,textAlignmentById:i.textAlignmentById,fontSize:i.fontSize,isPanelLinked:this.props.isPanelLinked,selectedSourceRange:i.selectedSourceRange,selectedTargetRange:i.selectedTargetRange,changeSelectedRange:i.changeSelectedRange,changeSyncIdOnClick:this.props.changeSyncIdOnClick,changeScrollToId:this.props.changeScrollToId,condition:this.condition}))))}}])&&Un(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),r}(o.PureComponent);Wn=n(112);var Jn=n.n(Wn),Xn=n(113);function Zn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function er(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function tr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?er(Object(n),!0).forEach((function(t){var r,o;r=e,o=n[t=t],t in r?Object.defineProperty(r,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[t]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):er(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var nr,rr,or,ir,ar={},lr={},cr=function(e,t){var n,r;return(t=b.jb(e,t))?(r=t.text,n=b.nb(e,r.id),r=b.o(e,r.id),n&&r?(e=(r=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||function(e,t){var n;if(e)return"string"==typeof e?Zn(e,t):"Map"===(n="Object"===(n=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Zn(e,t):void 0}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(function(e,t,n){if(lr.hasOwnProperty(t.id))return[lr[t.id].appliedAnnotations,lr[t.id].allAnnotations];t.text;var r=b.m(e,n.id),o=function(e,t,n){if(!b.qb(e,t))return{};var r=b.f(e,t);if(!r)return{};var o,i,a={};for(o in r)!r.hasOwnProperty(o)||(i=b.k(e,n,o))&&(a[i.unique_id]=i);return sr(e,a)}(e,t.id,n.id),i=null,a={};if(t.id!==n.id){i=b.w(e,t.id);var l,c,s={};for(l in r)r.hasOwnProperty(l)&&((c=r[l]).creator_witness!==t.id||i.hasOwnProperty(c.unique_id)?c.creator_witness===t.id&&(a[c.unique_id]=c):s[c.unique_id]=c);o=tr(tr({},sr(e,s)),o),r=s}return n=sr(e,r),a=sr(e,a),0<Object.keys(a).length&&(n=tr(tr({},n),a)),n=tr(tr({},o),n),n=Jn()(n,(function(e,n){return!(t&&e.type===In.a.lineBreak&&e.creatorWitness.id!==t.id)})),b.pb(e,t.id)&&b.qb(e,t.id)&&(lr[t.id]={appliedAnnotations:o,allAnnotations:n}),[o,n]}(e,t,n),2))[0],r[1],r=function(e){return ur[e.id]||(ur[e.id]=Object(Xn.a)(e.content||"")),ur[e.id]}(n),new sn.g(r,Object.values(e),(function(e){return Object(Xn.a)(e).segments}),n,t)):null):(console.warn("no witness"),null)},sr=function(e,t){var n,r,o={};for(n in t)t.hasOwnProperty(n)&&(r=t[n],(r=b.b(e,r))&&(o[n]=r));return o},ur={};function fr(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function dr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fr(Object(n),!0).forEach((function(t){var r,o;r=e,o=n[t=t],t in r?Object.defineProperty(r,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[t]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function pr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||hr(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function hr(e,t){var n;if(e)return"string"==typeof e?mr(e,t):"Map"===(n="Object"===(n=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?mr(e,t):void 0}function mr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function yr(e){return[e.start,e.length].join("-")}Wn=Object(a.connect)((function(e){var t,n={},r=Object(b.X)(e),o=Object(b.H)(e),i={},a=(o&&(t=b.nb(e,o.id)||{},(a=b.L(e,o.id))&&(n=b.jb(e,a)),We()(n)&&We()(t),n=t),t=function(e,t){var n=null;return t&&(n=cr(e,t))&&(ar[t]=n),n}(e,null==(a=n)?void 0:a.id),e.data2.loadingWitnesses),l=(t&&(i=function(e,t){if(e===nr&&t===rr&&e.version===ir)return or;for(var n={},r={},o=0;o<t.length;o++)!function(o){var i=t[o],a=(o=pr(e.getPositionOfAnnotation(i),2))[0],l=o[1];if(null!=a)if(0===l){if(i.isInsertion){if(o=yr(i),o=r[o])return o.map((function(e){return n[e].push(i)}));a=INSERTION_KEY+a}i.isDeletion&&0<i.length&&(a=DELETION_KEY+a),i.type===ANNOTATION_TYPES.pageBreak&&(a=PAGE_BREAK_KEY+a),i.type===ANNOTATION_TYPES.lineBreak&&(a=LINE_BREAK_KEY+a),void 0===n[a]&&(n[a]=[]),-1===n[a].indexOf(i)&&n[a].push(i)}else{for(var c=[],s=a;s<a+l;s++)void 0===n[s]&&(n[s]=[]),-1===n[s].indexOf(i)&&n[s].push(i),c.push(s);i.isInsertion&&(o=yr(i),r[o]=c)}}(o);return rr=t,or=n,ir=(nr=e).version,n}(t,Object.values([]))),b.sb(e)),c=Object(b.x)(e),s=Object(b.Q)(e),u=Object(b.U)(e),f=Object(b.M)(e),d=Object(b.B)(e),p=b.ub(e),h=Object(b.p)(e);return{text:o,textFontSize:r,annotatedText:t,selectedWitness:n,loading:a,annotationPositions:i,scrollToId:c,syncIdOnClick:s,textAlignment:u,textAlignmentById:Object(b.V)(e),selectedWindow:f,selectedSourceRange:Object(b.E)(e),selectedTargetRange:Object(b.F)(e),showTableContent:Object(b.O)(e),selectedSearchResult:Object(b.D)(e),searchResults:Object(b.z)(e,d),searchValue:d,condition:h&&l&&p}}),null,(function(e,t,n){function r(e){return-1!==e.indexOf("ds2_")}function o(e){return-1!==e.indexOf("i2_")}function i(e){return!o(e)&&r(e)?e.substr(3):e.substr(2)}var a=e.annotatedText,l=e.annotationPositions,c=t.dispatch;return dr(dr(dr({},n),e),{},{onChangedFontSize:function(e){c(y.Vb(e))},didSelectSegmentIds:function(t){if(0!==t.length){var n,c=[],s=[],u=function(e,t){var n,r,o,i,a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(a)return r=!(n=!0),{s:function(){a=a.call(e)},n:function(){var e=a.next();return n=e.done,e},e:function(e){r=!0,o=e},f:function(){try{n||null==a.return||a.return()}finally{if(r)throw o}}};if(Array.isArray(e)||(a=hr(e))||t&&e&&"number"==typeof e.length)return a&&(e=a),i=0,{s:t=function(){},n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(t);try{for(u.s();!(n=u.n()).done;){var f,d,p,h=n.value;r(h)||o(h)||(f=i(h),d=a.segmentedText.segmentAtPosition(f),s.push(d),(p=l[d.start])&&(c=c.concat(p)))}}catch(t){u.e(t)}finally{u.f()}c=dt()(c,(function(e,t){return e.toString()==t.toString()}));var m,y=pt()(c,a.annotations,(function(e,t){return e.toString()==t.toString()})),b=getSegmentsRange(s,y,c,e.annotatedText);b?(m=a.getBaseAnnotation(b.start,b.length),b.annotation||0<y.length&&(y=a.segmentedText.segmentsInRange(b.start,b.length).reduce((function(e,t){return e+t.text}),""),e.selectedWitness||console.log("no stateProps.selectedWitness: %o",e.selectedWitness),new Annotation(WORKING_VERSION_ANNOTATION_ID,getTextWorkingWitness(e.text),m.start,m.length,y,ANNOTATION_TYPES.variant,e.selectedWitness,e.user))):console.warn("No range for selected segment ids: %o",t)}},changeScrollToId:function(e){return c(y.Jb(e))},changeSyncIdOnClick:function(e){c(y.Mb(e))},changeSelectedWindow:function(e){c(y.Lb(e))},changeSelectedRange:function(e){c(y.Kb(e))},changeShowTableContent:function(e){c(y.Pc(e))},selectedSegmentId:function(t){var n=i(t),a=n;o(t)?a=INSERTION_KEY+n:r(t)?a=DELETION_KEY+n:-1!==t.indexOf("p2_")?a=PAGE_BREAK_KEY+n:-1!==t.indexOf("l2_")&&(a=LINE_BREAK_KEY+n),l[a],e.activeAnnotation&&e.activeAnnotation&&(t=y.Rb(null),c(t))}})}))((function(e){var t=Object(o.useRef)(),n={name:""};function r(){n.name&&e.changeSelectedWindow(2)}e.text&&(n=e.text),Object(o.useEffect)((function(){var e=t.current;return e.addEventListener("mouseenter",r),function(){e.removeEventListener("mouseenter",r)}}),[]);var a=null,c=e.selectedWindow,s=[e.annotatedText&&e.text&&!e.loading?(s=e.paginated?positionSplitter(e.pageBreaks):Object(dn.a)(800,/^།[\s]+(?!།[\s]+)/,2,5),a=new fn(e.annotatedText,s),i.a.createElement(Yn,{splitText:a,limitWidth:!1,selectedSegmentId:e.selectedSegmentId,annotationPositions:e.annotationPositions,selectedAnnotatedSegments:null==e?void 0:e.selectedAnnotatedSegments,selectedWitness:e.selectedWitness,key:12,selectedSearchResult:e.selectedSearchResult,fontSize:e.textFontSize,scrollToId:e.scrollToId,syncIdOnClick:e.syncIdOnClick,textAlignment:e.textAlignment,textAlignmentById:e.textAlignmentById,isPanelLinked:e.isPanelLinked,changeScrollToId:e.changeScrollToId,changeSyncIdOnClick:e.changeSyncIdOnClick,selectedWindow:c,selectedSourceRange:e.selectedSourceRange,selectedTargetRange:e.selectedTargetRange,changeSelectedRange:e.changeSelectedRange,searchResults:e.searchResults,searchValue:e.searchValue,selectedText:e.text,condition:e.condition})):i.a.createElement("div",{key:Math.random()})];return i.a.createElement(q.a,{ref:t,className:pn.a.textDetail,sx:{height:"100%",flex:1,bgcolor:"navbar.main",color:"texts.main"}},i.a.createElement(ln,null),i.a.createElement(Dt.a,null),i.a.createElement(l.a,{loaded:!e.loading,zIndex:5}),i.a.createElement(q.a,{style:{display:"flex",height:"100%",width:"100%",position:"relative"}},i.a.createElement(q.a,{className:v()(pn.a.textContainer,_e.a.flex)},e.loading?i.a.createElement("div",null):s),i.a.createElement(hn.a,{direction:"left",in:e.showTableContent,container:t.current,unmountOnExit:!0,mountOnEnter:!0},i.a.createElement(q.a,{sx:{position:"absolute",height:"100%",minWidth:"50%",right:0}},i.a.createElement(xn,null)))))}));var br,gr,vr=i.a.memo(Wn),wr=(Wn=n(962),n.n(Wn)),xr=n(99),Or=n(95),Er=(Wn=n(827),n.n(Wn)),Sr=(Wn=n(828),n.n(Wn));function Tr(){return(Tr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function jr(e){return i.a.createElement("svg",Tr({viewBox:"0 0 24 24"},e),br=br||i.a.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),gr=gr||i.a.createElement("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}))}function Ir(e){return e=e.content,i.a.createElement("div",{className:Br.a.shareContainer},i.a.createElement("div",{className:Br.a.shareButton},i.a.createElement(H.a,{id:"annotation.share"})),i.a.createElement(kr.a,{className:Br.a.facebookButton,id:"sharebutton",url:"https://parkhang.lopenling.org".concat(window.location.pathname),quote:e,hashtag:"#openPecha"},i.a.createElement(Cr.a,{size:16,round:!0})),i.a.createElement(Rr.a,{className:Br.a.whatsappButton,onClick:function(){return console.log("https://parkhang.lopenling.org".concat(window.location.pathname))},title:"Parkhang",url:"https://parkhang.lopenling.org".concat(window.location.pathname)},i.a.createElement(_r.a,{size:16,round:!0})))}Wn=n(758);var Ar,Pr=n.n(Wn),kr=n(1077),Cr=n(1078),Rr=n(1079),_r=n(1080),Br=(Wn=n(972),n.n(Wn)),Nr=(Wn=n(974),n.n(Wn)),Wr=(Wn=n(973),n.n(Wn));function Lr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Dr(e){e.data;var t=(e=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||function(e,t){var n;if(e)return"string"==typeof e?Lr(e,t):"Map"===(n="Object"===(n=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Lr(e,t):void 0}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(i.a.useState(20),2))[0],n=e[1];return i.a.createElement("div",{className:Wr.a.voteContainer,onClick:function(){return n((function(e){return e+1}))}},i.a.createElement("button",{"aria-label":"vote",className:Wr.a.voteBtn},i.a.createElement(Nr.a,{color:"inherit"})),i.a.createElement("span",{className:Wr.a.number},t))}function Hr(e){var t=i.a.createElement("p",null,"<",i.a.createElement(H.a,{id:"annotation.delete"}),">"),n=(""!==(n=e.annotationData.content).trim()&&(250<n.length&&(n=n.substr(0,250)+"…"),t=i.a.createElement("p",null,n)),[Sr.a.annotationDetail]);e.isActive&&n.push(Sr.a.active),n=v.a.apply(void 0,n);return i.a.createElement("div",{className:n,onClick:e.selectAnnotationHandler},i.a.createElement("div",{className:Sr.a.annotationHeader},e.isActive&&i.a.createElement("div",{className:Sr.a.activeIcon},i.a.createElement(jr,{style:{fill:Pr.a.activeButton},width:15,height:15})),i.a.createElement("h3",null,e.annotationData.name),e.isLoggedIn&&e.isActive&&i.a.createElement("button",{style:{display:"none"},className:Sr.a.edit,onClick:e.editAnnotationHandler,id:"editBtn"})),t,e.isActive&&i.a.createElement("div",{className:Sr.a.contentOptions},i.a.createElement(Dr,{data:e.annotationData}),i.a.createElement(Ir,{content:e.annotationData.content})))}function Mr(){return(Mr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function zr(e){return i.a.createElement("svg",Mr({viewBox:"0 0 512 512"},e),Ar=Ar||i.a.createElement("path",{d:"M497.9 142.1l-46.1 46.1c-4.7 4.7-12.3 4.7-17 0l-111-111c-4.7-4.7-4.7-12.3 0-17l46.1-46.1c18.7-18.7 49.1-18.7 67.9 0l60.1 60.1c18.8 18.7 18.8 49.1 0 67.9zM284.2 99.8L21.6 362.4.4 483.9c-2.9 16.4 11.4 30.6 27.8 27.8l121.5-21.3 262.6-262.6c4.7-4.7 4.7-12.3 0-17l-111-111c-4.8-4.7-12.4-4.7-17.1 0zM124.1 339.9c-5.5-5.5-5.5-14.3 0-19.8l154-154c5.5-5.5 14.3-5.5 19.8 0s5.5 14.3 0 19.8l-154 154c-5.5 5.5-14.3 5.5-19.8 0zM88 424h48v36.3l-64.5 11.3-31.1-31.1L51.7 376H88v48z"}))}function qr(e){var t=e.annotationData.content,n=[Sr.a.annotationDetail],r=null;e.isActive&&n.push(Sr.a.active),n=v.a.apply(void 0,n);return i.a.createElement("div",{className:n},i.a.createElement("h3",null,e.annotationData.name),i.a.createElement("div",{className:Sr.a.editing},i.a.createElement("textarea",{defaultValue:t,autoFocus:!0,onInput:function(e){r.style.height="5px",r.style.height=r.scrollHeight+"px"},ref:function(e){return r=e}}),i.a.createElement("div",{className:Sr.a.actionButtons},i.a.createElement("div",{className:Sr.a.save,onClick:function(){r&&e.saveAnnotationHandler(r.value)}},i.a.createElement(zr,{height:"0.8em",width:"0.8em",style:{fill:"currentColor",marginRight:6}}),i.a.createElement(H.a,{id:"annotation.save"})),i.a.createElement("div",{className:Sr.a.cancel,onClick:e.cancelAnnotationHandler},i.a.createElement(H.a,{id:"annotation.cancel"})))))}function Vr(e){return i.a.createElement("div",{className:Qr.a.button,title:e.title,onClick:e.onClick},"+")}Wn=n(735);var Fr=n.n(Wn),Ur=(Wn=(n(57),n(975)),n.n(Wn)),Qr=(Wn=n(976),n.n(Wn));function Gr(e){return(Gr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Kr(e,t){return(Kr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Yr(e){return(Yr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Wn=function(e){var t=r;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Kr(t,e);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Yr(e);n=t?(n=Yr(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),r=this;if(n&&("object"===Gr(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==r)return r;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(r);function r(){var e=this,t=r;if(e instanceof t)return n.apply(this,arguments);throw new TypeError("Cannot call a class as a function")}return t=r,(e=[{key:"render",value:function(){var e,t=null;return this.props.buttonOnClick&&(e=this.props.buttonTitleId?this.props.intl.formatMessage({id:this.props.buttonTitleId}):"",t=i.a.createElement(Vr,{title:e,onClick:this.props.buttonOnClick})),i.a.createElement("h3",{className:Ur.a.heading},i.a.createElement("span",{className:Ur.a.title},i.a.createElement(H.a,{id:this.props.titleId})),t&&i.a.createElement("div",{className:Ur.a.button},t))}}])&&$r(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),r}(i.a.Component),Object(c.c)(Wn),Wn=n(977);var Jr=n.n(Wn),Xr=(Wn=n(745),n.n(Wn));function Zr(e){return(Zr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function eo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function to(e,t){return(to=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function no(e){return(no=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ro=function(e){var t=r;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&to(t,e);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=no(e);n=t?(n=no(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),r=this;if(n&&("object"===Zr(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==r)return r;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(r);function r(e){var t;if(this instanceof r)return(t=n.call(this,e)).state={content:e.note.content},t;throw new TypeError("Cannot call a class as a function")}return t=r,(e=[{key:"save",value:function(){var e=this.textarea?this.textarea.value:"";this.props.saveNote(this.props.note,e)}},{key:"cancel",value:function(){this.props.cancel()}},{key:"handleChange",value:function(e){var t=e.target instanceof HTMLTextAreaElement?e.target.value:"";this.setState((function(e,n){return{content:t}}))}},{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:Jr.a.editorContainer},i.a.createElement("textarea",{className:Jr.a.textEditor,ref:function(t){return e.textarea=t},value:this.state.content,onChange:this.handleChange.bind(this)}),i.a.createElement("div",{className:Xr.a.buttonContainer},i.a.createElement("div",{className:Xr.a.save,onClick:this.save.bind(this)},i.a.createElement(H.a,{id:"annotation.save"})),i.a.createElement("div",{className:Xr.a.cancel,onClick:this.cancel.bind(this)},i.a.createElement(H.a,{id:"annotation.cancel"}))))}}])&&eo(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),r}(i.a.Component),oo=(Wn=n(978),n.n(Wn)),io=(Wn=(n(191),n(979)),n.n(Wn)),ao=(n(144),n(332));function lo(e){return(lo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function co(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function so(e,t){return(so=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function uo(e){return(uo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var fo=function(e){var t=r;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&so(t,e);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=uo(e);n=t?(n=uo(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),r=this;if(n&&("object"===lo(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==r)return r;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(r);function r(){var e=this,t=r;if(e instanceof t)return n.apply(this,arguments);throw new TypeError("Cannot call a class as a function")}return t=r,(e=[{key:"render",value:function(){return i.a.createElement("div",{className:io.a.answer},i.a.createElement("p",{className:Fr.a.text,dangerouslySetInnerHTML:{__html:this.props.answer.content}}),i.a.createElement("p",{className:Fr.a.subTitle},i.a.createElement(H.a,{id:"question.answeredBy"})," ",this.props.answer.name,","," ",i.a.createElement(ao.FormattedDate,{value:this.props.answer.created})))}}])&&co(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),r}(i.a.Component),po=(Wn=n(832),n.n(Wn));function ho(e){return(ho="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function mo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function yo(e,t){return(yo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function bo(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function go(e){return(go=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var vo=function(e){var t=r;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&yo(t,e);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=go(e);n=t?(n=go(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),r=this;if(n&&("object"===ho(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return bo(r)}}(r);function r(){var e,t=this,o=r;if(!(t instanceof o))throw new TypeError("Cannot call a class as a function");for(var i,a=arguments.length,l=new Array(a),c=0;c<a;c++)l[c]=arguments[c];return o=function(){e.props.delete&&e.props.delete()},(i="delete")in(t=bo(e=n.call.apply(n,[this].concat(l))))?Object.defineProperty(t,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[i]=o,e}return t=r,(e=[{key:"render",value:function(){for(var e=this.props.question.topicId||null,t=u.g+e,n=[],r=this.props.question.answers,o=0;o<r.length;o++){var a=r[o];n.push(i.a.createElement(fo,{answer:a,key:"answer_"+a.created}))}var l=0<this.props.question.name.length?this.props.question.name:this.props.question.username;return i.a.createElement(q.a,{className:v()(oo.a.question,Fr.a.padding),sx:{boxShadow:2}},i.a.createElement("p",{className:Fr.a.text,dangerouslySetInnerHTML:{__html:this.props.question.content}}),i.a.createElement("div",{style:{display:"flex",alignItems:"center"}},i.a.createElement("span",{className:v()(oo.a.threadLink,Fr.a.text)},i.a.createElement("a",{href:t,target:"_blank"},i.a.createElement(H.a,{id:"question.viewThread"}))),i.a.createElement(nt.a,{"aria-label":"delete",size:"small",onClick:this.delete},i.a.createElement(po.a,{fontSize:"inherit"}))),i.a.createElement("p",{className:Fr.a.subTitle},l,i.a.createElement(ao.FormattedDate,{value:this.props.question.created})),i.a.createElement(ye,{topicId:e}))}}])&&mo(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),r}(i.a.Component),wo=(Wn=n(980),n.n(Wn));function xo(e){return(xo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Oo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Eo(e,t){return(Eo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function So(e){return(So=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var To=function(e){var t=r;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Eo(t,e);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=So(e);n=t?(n=So(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),r=this;if(n&&("object"===xo(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==r)return r;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(r);function r(e){var t;if(this instanceof r)return(t=n.call(this,e)).state={content:e.question.content},t;throw new TypeError("Cannot call a class as a function")}return t=r,(e=[{key:"save",value:function(){var e=this.textarea?this.textarea.value:"",t=this.props.defaultTitle+"[# ".concat(Date.now().toString().slice(-5,-1)," ]");this.props.saveQuestion(this.props.question,t,e)}},{key:"cancel",value:function(){this.props.cancel()}},{key:"handleChange",value:function(e){var t=e.target instanceof HTMLTextAreaElement?e.target.value:"";this.setState((function(e,n){return{content:t}}))}},{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:wo.a.editorContainer},i.a.createElement("div",null,this.props.questionQuote),i.a.createElement("textarea",{className:wo.a.textEditor,ref:function(t){return e.textarea=t},value:this.state.content,onChange:this.handleChange.bind(this)}),i.a.createElement("div",{className:Xr.a.buttonContainer},i.a.createElement("div",{className:Xr.a.save,onClick:this.save.bind(this)},i.a.createElement(H.a,{id:"annotation.save"})),i.a.createElement("div",{className:Xr.a.cancel,onClick:this.cancel.bind(this)},i.a.createElement(H.a,{id:"annotation.cancel"}))))}}])&&Oo(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),r}(i.a.Component),jo=(Wn=n(981),n.n(Wn));function Io(e){return(Io="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ao(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Po(e,t){return(Po=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function ko(e){return(ko=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Co=function(e){var t=r;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Po(t,e);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ko(e);n=t?(n=ko(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),r=this;if(n&&("object"===Io(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==r)return r;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(r);function r(){var e=this,t=r;if(e instanceof t)return n.apply(this,arguments);throw new TypeError("Cannot call a class as a function")}return t=r,(e=[{key:"render",value:function(){return i.a.createElement("div",{className:v()(jo.a.loading,Fr.a.text)},i.a.createElement(l.a,{loaded:!1,scale:.25,position:"relative",top:"50%",left:"50%",lines:9,width:8,length:8,radius:14}),"Loading questions...")}}])&&Ao(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),r}(i.a.Component),Ro=(Wn=n(982),n.n(Wn));function _o(e){return(_o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Bo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function No(e,t){return(No=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Wo(e){return(Wo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Lo(e){var t={};return t.backgroundColor=e.backgroundColor||"",t.color=e.color||"#fff",i.a.createElement("div",{className:Mo.a.accessory,title:e.title,onClick:e.onClick,style:t},zo[e.type])}var Do=function(e){var t=r;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&No(t,e);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Wo(e);n=t?(n=Wo(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),r=this;if(n&&("object"===_o(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==r)return r;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(r);function r(){var e=this,t=r;if(e instanceof t)return n.apply(this,arguments);throw new TypeError("Cannot call a class as a function")}return t=r,(e=[{key:"delete",value:function(){this.props.delete&&this.props.delete(this.props.note)}},{key:"edit",value:function(){this.props.edit&&this.props.edit(this.props.note)}},{key:"render",value:function(){return i.a.createElement(q.a,{className:Ro.a.note,sx:{boxShadow:2}},i.a.createElement("p",null,"Note:"),i.a.createElement("div",{className:Ro.a.header},i.a.createElement("h4",{className:Ro.a.info},this.props.note.creatorUser.name),this.props.delete&&i.a.createElement("div",{className:Ro.a.delete,onClick:this.delete.bind(this)},i.a.createElement(nt.a,{"aria-label":"delete",size:"small"},i.a.createElement(po.a,{fontSize:"inherit"})))),i.a.createElement("div",{className:Ro.a.content,onClick:this.edit.bind(this)},this.props.note.content))}}])&&Bo(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),r}(i.a.Component),Ho=(Wn=n(983),n.n(Wn)),Mo=(Wn=n(984),n.n(Wn)),zo={ADD:"+",DELETE:"×"},qo=n(1121);function Vo(e){var t=e.children,n=e.tooltipName,r=void 0===(r=e.format)?null:r,o=e.className,a=e.shortcut;e=e.on;return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{"data-tip":!0,"data-for":n,className:void 0===o?"":o,style:{width:"100%"}},void 0!==e&&e?t:i.a.createElement(qo.a,{placement:"top",followCursor:!0,title:r?i.a.createElement(H.a,{id:r}):i.a.createElement("span",null,n," [".concat(void 0===a?"":a,"]"))},t)))}function Fo(e){return(Fo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Uo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Qo(e,t){return(Qo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Go(e){return(Go=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var $o,Ko,Yo,Jo=function(e){var t=r;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Qo(t,e);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Go(e);n=t?(n=Go(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),r=this;if(n&&("object"===Fo(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==r)return r;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(r);function r(){var e=this,t=r;if(e instanceof t)return n.apply(this,arguments);throw new TypeError("Cannot call a class as a function")}return t=r,(e=[{key:"render",value:function(){var e=this.props.color||"#ffffff",t=this.props.backgroundColor||Pr.a.mainTint,n=this.props.fontSize||"14px",r=this.props.noBezel?[Ho.a.buttonNoBezel]:[Ho.a.button],o=this.props.tooltipTitle||"",a=(r=(this.props.isActive&&r.push(Ho.a.active),v.a.apply(void 0,r)),this.props.shortcut||"");n={fontSize:n,color:e,backgroundColor:t};return this.props.align&&(n.textAlign=this.props.align),i.a.createElement(Vo,{tooltipName:o,shortcut:a,on:this.props.disabled},i.a.createElement("button",{style:n,className:r,onClick:this.props.onClick,disabled:this.props.disabled},this.props.icon&&i.a.createElement("div",{className:Ho.a.icon},this.props.icon),this.props.title&&i.a.createElement("span",{className:Ho.a.title},this.props.title),this.props.accessoryType&&i.a.createElement(Lo,{type:this.props.accessoryType})))}}])&&Uo(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),r}(i.a.Component);function Xo(){return(Xo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Zo(e){return i.a.createElement("svg",Xo({viewBox:"0 0 30 40",fill:"currentColor"},e),$o=$o||i.a.createElement("path",{d:"M3 0h24v15H3z"}),Ko=Ko||i.a.createElement("path",{stroke:"currentColor",strokeWidth:3,d:"M0 20h8M11 20h8M22 20h8"}),Yo=Yo||i.a.createElement("path",{d:"M3 25h24v15H3z"}))}Wn=n(985);var ei,ti,ni,ri,oi=n.n(Wn);function ii(){return(ii=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function ai(e){return i.a.createElement("svg",ii({viewBox:"0 0 24 24"},e),ei=ei||i.a.createElement("path",{d:"M3 18h12v-2H3v2zM3 6v2h18V6H3zm0 7h18v-2H3v2z"}),ti=ti||i.a.createElement("path",{fill:"none",d:"M0 0h24v24H0V0z"}))}function li(){return(li=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function ci(e){return i.a.createElement("svg",li({viewBox:"0 0 24 24",fill:"currentColor"},e),ni=ni||i.a.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),ri=ri||i.a.createElement("path",{d:"M21 6h-2v9H6v2c0 .55.45 1 1 1h11l4 4V7c0-.55-.45-1-1-1zm-4 6V3c0-.55-.45-1-1-1H3c-.55 0-1 .45-1 1v14l4-4h10c.55 0 1-.45 1-1z"}))}function si(e){return(si="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ui(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function fi(e,t){return(fi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function di(e){return(di=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var pi=function(e){var t=r;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&fi(t,e);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=di(e);n=t?(n=di(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),r=this;if(n&&("object"===si(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==r)return r;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(r);function r(){if(this instanceof r)return n.call(this);throw new TypeError("Cannot call a class as a function")}return t=r,(e=[{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.keyHandler)}},{key:"render",value:function(){var e=null!=this.props.addPageBreak,t=null!=this.props.addLineBreak;return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:oi.a.header},i.a.createElement(Jo,{noBezel:!0,icon:i.a.createElement(ai,{width:15,height:15,style:{fill:"#fff"}}),backgroundColor:"transparent",onClick:this.props.addNote,disabled:!this.props.addNote,align:"center",tooltipTitle:"Note",shortcut:"n"}),i.a.createElement(Jo,{noBezel:!0,icon:i.a.createElement(ci,{width:15,height:15,style:{fill:"#fff"}}),onClick:this.props.addQuestion,disabled:!this.props.addQuestion,align:"left",backgroundColor:"transparent",tooltipTitle:"Question",shortcut:"q"}),i.a.createElement(Jo,{noBezel:!0,color:"#fff",fontSize:"".concat(15,"px"),icon:"¶",onClick:this.props.addLineBreak,disabled:!t,align:"left",backgroundColor:"transparent",tooltipTitle:"LineBreak",shortcut:"l"}),i.a.createElement(Jo,{noBezel:!0,icon:i.a.createElement(Zo,{width:15,height:15,style:{fill:"#fff"}}),onClick:this.props.addPageBreak,disabled:!e,align:"left",backgroundColor:"transparent",tooltipTitle:"PageBreak",shortcut:"p"}),i.a.createElement(Jo,{onClick:this.props.editAnnotationHandler,backgroundColor:"transparent",noBezel:!0,icon:i.a.createElement(zr,{width:15,height:15,style:{fill:"#fff"}}),tooltipTitle:"Edit",shortcut:"e"})))}}])&&ui(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),r}(i.a.Component);function hi(e){return(hi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function mi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function yi(e,t){return(yi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function bi(e){return(bi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Wn=function(e){var t=r;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&yi(t,e);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=bi(e);n=t?(n=bi(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),r=this;if(n&&("object"===hi(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==r)return r;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(r);function r(e){if(this instanceof r)return(e=n.call(this,e)).controls=null,e.arrow=null,e.arrowDs=null,e;throw new TypeError("Cannot call a class as a function")}return t=r,(e=[{key:"componentDidMount",value:function(){this.updatePosition()}},{key:"componentDidUpdate",value:function(){setTimeout(this.updatePosition.bind(this),0)}},{key:"updatePosition",value:function(){var e=this.getMeasurements();if(this.props.inline&&this.controls&&this.arrow&&e){var t=this.controls,n=t.offsetHeight,r=t.offsetWidth,o=this.arrow,i=e.bottomGap,a=i<0||n<i,l=e.top,c=e.viewPortWidth||0,s=e.left,u=s+e.width;if(o.style.display="none",this.props.selectedElementIds)for(var f=0,d=0,p=0;p<this.props.selectedElementIds.length;p++){var h,m,y=this.props.selectedElementIds[p];(y=document.getElementById(y))&&(m=(h=y.offsetLeft)+y.offsetWidth,h<f?(y.offsetTop,y.offsetHeight,s=h,u=d=m):d<m&&(d=m),h<s&&(s=h),u<m&&(u=m),f=h)}var b=u-s,g=3,v=!1,w=0;!a&&i<n&&(v=!0),(v=c-(s+b)<r+50||c-e.left<r+50||v)?(o.className=Fr.a.arrowLeft,g=s-r-o.offsetWidth<0?4:2):(s-(a=r/2-b/2)<0&&(w=Math.abs(s-a)),c<u+a&&(w=c-(u+a))),3===g?(a=c=0,this.arrow&&(this.arrow.className=Fr.a.arrowTop,a=r/2-this.arrow.offsetWidth/2-w,this.arrow.style.left=(a=a<0?0:a)+"px",c=this.arrow.offsetHeight,this.arrow.style.top=0-c+"px"),t.style.top=l-e.height-15+"px",t.style.left=e.left+"px"):v?(o.className=Fr.a.arrowRight,w=o.offsetHeight,a=e.top-e.height-15,e.top+e.height+i-a<n&&(a=e.top+e.height+i-n),2===g?(o.style.left=r-2+"px",t.style.left=s-r/2-o.offsetWidth+"px"):(o.className=Fr.a.arrowLeft,o.style.left=-o.offsetWidth+"px",t.style.left=s+b-r/2+o.offsetWidth+"px"),o.style.top=e.top-a+e.height/2-w/2+"px",t.style.top=a+"px"):t.style.top=l+"px"}}},{key:"getMeasurements",value:function(){var e,t,n,r,o,i,a,l,c,s,u,f;return this.props.selectedElementIds?(e=this.props.selectedElementIds[this.props.selectedElementIds.length-1],e=document.getElementById(e),s=this.props.selectedElementIds[0],s=document.getElementById(s),t=this.props.splitTextRect,n=0,this.props.list&&this.props.list.Grid.state.scrollTop,this.props.pechaImageClass&&(n=document.getElementsByClassName(this.props.pechaImageClass)[0].offsetHeight),s?(n=s.offsetTop+n,r=s.offsetTop,o=s.offsetLeft,i=s.offsetWidth,a=s.offsetHeight,l=n,f=null,u=c=0,s&&t&&(s=s.getBoundingClientRect(),c=t.height-s.top),e&&t&&(s=e.getBoundingClientRect(),u=t.height+t.top-s.bottom,f=t.width),{top:n,textTop:r,rowTop:l,left:o,width:i,height:a,topGap:c,bottomGap:u,viewPortWidth:f}):(console.warn("no valid element found in getMeasurements, elementId: %s",this.props.selectedElementId),{top:0,textTop:0,rowTop:0,left:0,width:1,height:1,topGap:0,bottomGap:0,viewPortWidth:1})):null}},{key:"render",value:function(){var e,t,n=this,r=this.props,i=[],a=[],l=null,c=null,s=r.user.isLoggedIn,u=!1,f=(r.activeAnnotation&&(r.activeAnnotation.isType(In.a.pageBreak)||r.activeAnnotation.isType(In.a.lineBreak))&&(u=!0),r.annotationsData?(r.annotationsData.map((function(e){var t,n=!1,l=!1;e.isTemporary?l=n=!0:r.temporaryAnnotation||e.annotation.uniqueId!=r.activeAnnotation.uniqueId||(l=!0),n?(t=o.createElement(qr,{annotationData:e,key:e.annotation.uniqueId,isActive:l,saveAnnotationHandler:function(t){r.saveAnnotation(e.annotation,t)},cancelAnnotationHandler:function(){r.cancelEditAnnotation(e.annotation)},isLoggedIn:s,selectAnnotationHandler:function(){},editAnnotationHandler:function(){}}),a.push(t)):(t=o.createElement(Hr,{annotationData:e,key:e.annotation.uniqueId,isActive:l,selectAnnotationHandler:function(){s&&!n&&r.didSelectAnnotation(e.annotation)},editAnnotationHandler:function(){s&&!n&&r.editAnnotation(e.annotation)},isLoggedIn:s}),i.push(t))}),this),r.user.isLoggedIn||(l=o.createElement("div",{className:Fr.a.anonymousMessage,style:{position:"relative",width:"fit-content",border:"1px solid gray",paddingInline:10}},o.createElement(H.a,{id:"annotations.loginMessage",values:{loginLink:o.createElement(o.Fragment,null,o.createElement(H.a,{id:"annotations.loginLink"}))}})))):c=o.createElement("div",{className:Fr.a.nothingSelected},"Nothing Selected"),null),d=!this.props.selectedWitness.isWorking,p=null,h=!this.props.selectedWitness.isWorking,m=(s&&!this.props.selectedWitness.isWorking&&(e=[],t=[],this.props.availableAnnotations&&(e=this.props.availableAnnotations.filter((function(e){return e.type===In.a.pageBreak&&e.creatorWitness.id===n.props.selectedWitness.id})),t=this.props.availableAnnotations.filter((function(e){return e.type===In.a.lineBreak&&e.creatorWitness.id===n.props.selectedWitness.id}))),0<e.length&&(f=o.createElement("div",{className:Fr.a.breakButtons},o.createElement(Jo,{title:"Page Break",accessoryType:"DELETE",icon:o.createElement(Zo,{width:20,height:20}),onClick:function(){n.props.deleteAnnotation(e[0])},isActive:!0,backgroundColor:Pr.a.activeButton})),d=!1),0<t.length&&(p=o.createElement("div",{className:Fr.a.breakButtons},o.createElement(Jo,{title:"Line Break",accessoryType:"DELETE",icon:"¶",onClick:function(){n.props.deleteAnnotation(t[0])},isActive:!0,backgroundColor:Pr.a.activeButton})),h=!1),(h=!!d&&h)||(d=!1)),null),y={},b=(r.temporaryNotes&&0<r.temporaryNotes.length&&(m=r.temporaryNotes.map((function(e){var t="NOTE_"+e.uniqueId;return e.basedOn&&(y[e.basedOn.uniqueId]=e.uniqueId),o.createElement(ro,{note:e,key:t,saveNote:r.saveAnnotation,cancel:function(){return r.cancelEditAnnotation(e)}})}))),null),g=(r.notes&&0<r.notes.length&&(b=r.notes.filter((function(e){return!y.hasOwnProperty(e.uniqueId)})).map((function(e){var t="NOTE_"+e.uniqueId;return o.createElement(Do,{note:e,key:t,delete:n.props.deleteAnnotation,edit:n.props.editNote})}))),null),w={},x=(r.temporaryQuestions&&0<r.temporaryQuestions.length&&r.questionQuote&&(g=r.temporaryQuestions.map((function(e){w[e.uniqueId]=e.uniqueId;var t="QUESTION_"+e.uniqueId;return o.createElement(To,{question:e,questionQuote:r.questionQuote,defaultTitle:r.selectedWitness.text.name,key:t,saveQuestion:r.saveQuestion,cancel:function(){return r.cancelEditAnnotation(e)}})}))),[]),O=!1;if(r.questions&&0<r.questions.length){for(var E=[],S=0;S<r.questions.length;S++){var T=r.questions[S];!w.hasOwnProperty(T.uniqueId)&&r.questionsData.hasOwnProperty(T.uniqueId)&&(r.questionsData[T.uniqueId].loading&&(O=!0),E=E.concat(r.questionsData[T.uniqueId].questions))}x=E.map((function(e,t){return e.annotationUniqueId,o.createElement(vo,{question:e,key:"question_"+e.annotationUniqueId,delete:function(){return n.props.deleteAnnotation(n.props.questions[t])}})}))}var j=null,I=(0<x.length&&(j=o.createElement("h3",{className:Fr.a.sectionHeading},"Questions")),null),A=(O&&(I=o.createElement(Co,null)),0===(null==(A=r.questions)?void 0:A.length)&&0===r.temporaryQuestions.length),P=[Fr.a.annotationControls],k=(r.inline&&P.push(Fr.a.inline),!0);(l||u)&&(k=!1),c=Sn.a.createPortal(o.createElement("div",{className:Fr.a.annotationContent},c,!u&&i,f,p,m,b,j,g,I,x),document.getElementById("annotation-portal"));return o.createElement("div",{className:v.a.apply(void 0,P),style:{maxWidth:150},ref:function(e){return n.controls=e}},l,k&&o.createElement(pi,{addPageBreak:d?r.addPageBreak:null,addLineBreak:h?r.addLineBreak:null,addNote:s&&!m?function(){return r.addNote()}:null,addQuestion:A?r.addQuestion:null,closeAnnotation:r.closeAnnotation,editAnnotationHandler:function(){var e=document.getElementById("editBtn");null!=e&&e.click()},userLoggedIn:s}),!u&&a,c,o.createElement("div",{className:Fr.a.arrow,ref:function(e){return n.arrow=e}}))}}])&&mi(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),r}(o.Component);var gi=n(833),vi=n.n(gi);function wi(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function xi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wi(Object(n),!0).forEach((function(t){var r,o;r=e,o=n[t=t],t in r?Object.defineProperty(r,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[t]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Oi(e){return function(e){if(Array.isArray(e))return Ti(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Si(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ei(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||Si(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Si(e,t){var n;if(e)return"string"==typeof e?Ti(e,t):"Map"===(n="Object"===(n=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ti(e,t):void 0}function Ti(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ji(e,t,n,r){var o=[],i=t.filter((function(e){return e.isWorking||e.isBase})).map((function(e){return e.name}));if(e){for(var a={},l=0;l<e.length;l++)!function(t){var n=e[t];t=n.content+n.start;n.isTemporary?(a[Ii]={name:n.getSourceName(),content:n.content,id:n.uniqueId,isTemporary:!0,annotation:n},i=i.filter((function(e){return e!==n.getSourceName()})),t=Ii):i=a[t]?(a[t].name+=" "+T(n.getSourceName()),i.filter((function(e){return e!==n.getSourceName()}))):(a[t]={name:T(n.getSourceName()),content:n.content,id:n.uniqueId,userCreated:n.userCreated,annotation:n},i.filter((function(e){return e!==n.getSourceName()}))),!n.userCreated&&n.creatorWitness.isWorking?a[t].isWorking=!0:a[t].isWorking=!1}(l);i.unshift(n);var c=i;"བྱང་ཆུབ་སེམས་དཔའི་སྤྱོད་པ་ལ་འཇུག་པ་བཞུགས་སོ།"!==(null==r?void 0:r.name)&&(c=i.filter((function(e){return"Dominant"!==e}))),o=Object.keys(a).reduce((function(e,t){return(t=a[t]).isWorking&&(t.name=c.reduce((function(e,t){return e+" "+T(t,";")}),"")),e.push(t),e}),[])}return o}var Ii=-3,Ai=Object(a.connect)((function(e,t){var n=b.gb(e),r=b.G(e),o=t.activeAnnotation,a=t.inline,l=b.I(e);if(l||r&&(l=b.mb(e,r.id)),!o||!l)return{annotationsData:null,activeAnnotation:null,baseAnnotation:null,availableAnnotations:null,user:n,temporaryAnnotation:null,inline:null,firstSelectedSegment:null,splitTextRect:null,selectedWitness:null};var c=function(e,t,n,r,o){return 0<(e=b.R(e,n.id,r,o,t)).length?e[0]:null}(e,In.a.variant,l,o.start,o.length),s=function(e,t,n,r){var o=[];n&&t.naturalId===n.naturalId||o.push(t),n&&o.push(n);var i=(a=Ei(e.getPositionOfAnnotation(t),2))[0],a=a[1];if(i){a=i+a;var l,c=[];t.isInsertion?((l=r["i"+i])&&(c=c.concat(l)),(l=r[String(i)])&&(c=c.concat(l))):((l=r[String(i)])&&(c=l),(i=r[String(a)])&&(c=c.concat(i)));for(var s=0;s<c.length;s++){var u=c[s];u.start===t.start&&u.length===t.length?n&&u.naturalId===n.naturalId||o.push(u):e.activeWitness.isWorking||u.type!==In.a.pageBreak&&u.type!==In.a.lineBreak||o.push(u)}o=dt()(o,(function(e,t){return e.id===t.id}))}return o}(t.annotatedText,o,c,t.annotationPositions),u=ji(u=s.filter((function(e){return e.type===In.a.variant})),d=b.P(e),O=b.fb(e,"annotation.workingEdition","Working"),r),f=(r=null,o.id==sn.a?r=o:(E=(f=Ei(t.annotatedText.getPositionOfAnnotation(o),2))[0],f=f[1],u=null===E||null===f?null:(E=ji([r=t.annotatedText.getBaseAnnotation(E,f)],d,O),[].concat(Oi(E),Oi(u)))),u&&u.sort((function(e,t){return e.isTemporary?-1:t.isTemporary?1:e.userCreated?-1:!t.userCreated&&e.annotation.id&&t.annotation.id?e.annotation.id-t.annotation.id:1})),s.filter((function(e){return e.type===In.a.note}))),d=b.R(e,l.id,o.start,o.length,In.a.note),p=s.filter((function(e){return e.type===In.a.question})),h={};if(0<p.length)for(var m=0;m<p.length;m++){var y=p[m],g=(h[y.uniqueId]={},b.vb(e,y));g=(h[y.uniqueId].loading=g,b.v(e,y.uniqueId));h[y.uniqueId].questions=g}var v,w,x,O,E=null,S=(0<(O=b.R(e,l.id,o.start,o.length,In.a.question)).length&&(S=O[0],w=(S=Ei(t.annotatedText.getPositionOfAnnotation(S),2))[0],S=S[1],w&&(S=(w=Ei(t.annotatedText.segmentedText.extractTextAroundPosition(w,S=S||w+1,["།"," "]),3))[0],v=w[1],w=w[2],x=document.location.href,E=i.a.createElement("blockquote",null,S,i.a.createElement("a",{href:x},v),w))),Object(b.W)(e));return{annotationsData:u,activeAnnotation:o,baseAnnotation:r,availableAnnotations:s,user:n,temporaryAnnotation:c,inline:a,firstSelectedSegment:t.firstSelectedSegment,splitTextRect:t.splitTextRect,selectedWitness:l,notes:f,temporaryNotes:d,questions:p,temporaryQuestions:O,questionsData:h,questionQuote:E,fontSize:S}}),null,(function(e,t,n){var r=t.dispatch;if(0<e.questions.length)for(var o=0;o<e.questions.length;o++){var i=e.questions[o],a=!0;(a=!(e.questionsData.hasOwnProperty(i.uniqueId)&&0<e.questionsData[i.uniqueId].questions.length&&!e.questionsData[i.uniqueId].loading)&&a)&&r(new y.gc(i))}function l(t){var o=1<arguments.length&&void 0!==arguments[1]&&arguments[1];return function(){var i=n.activeAnnotation,a=(i=new In.c(null,i.witness,i.end+1,0,null,t,e.selectedWitness,e.user),b.d(e.selectedWitness)),l=[];l.push(y.Zb(i)),l.push(y.Eb(i.uniqueId,a)),l.push(o?y.Rb(i):y.Rb(null)),r(Object($.batchActions)(l))}}function c(t,n){var o,i,a;t.isTemporary?(o=e.selectedWitness,o=b.d(o),(n=new In.c(t.id,t.witness,t.start,t.length,n,t.type,t.creatorWitness,e.user,t.uniqueId,t.basedOn)).isSaved=t.isSaved,i=[],a=null,a=n.isSaved?y.Sc:y.Zb,i.push(a(n)),i.push(y.Ac(t)),i.push(y.Eb(n.uniqueId,o)),n.type===In.a.variant&&i.push(y.Rb(n)),r(Object($.batchActions)(i))):console.warn("Tried to save a non-temporary annotation: %o",t)}return xi(xi(xi({},e),n),{},{closeAnnotation:function(){var t;e.activeAnnotation&&(t=y.Rb(null),r(t))},didSelectAnnotation:function(t){var n=t.id==sn.a?e.baseAnnotation:Er()(e.availableAnnotations,(function(e){return e.uniqueId==t.uniqueId}))||null,o=[],i=e.selectedWitness,a=b.d(i);t.uniqueId!=e.activeAnnotation.uniqueId&&(i.isWorking?(t.id!=sn.a&&o.push(y.Eb(n.uniqueId,a)),e.activeAnnotation.id!=sn.a&&o.push(y.yc(e.activeAnnotation.uniqueId,a))):e.activeAnnotation.creatorWitness.id===i.id?(o.push(y.zc(e.activeAnnotation.uniqueId,a)),n.id!==sn.a&&o.push(y.Eb(n.uniqueId,a))):(n.creatorWitness.id===i.id?o.push(y.Fb(n.uniqueId,a)):n.id!==sn.a&&o.push(y.Eb(n.uniqueId,a)),e.activeAnnotation.id!==sn.a&&o.push(y.yc(e.activeAnnotation.uniqueId,a))),o.push(y.Rb(n)),r(Object($.batchActions)(o)))},editAnnotation:function(t){var n=t.isWorkingAnnotation||t.userCreated||t.id===sn.a?null:t;n=new In.b(n,t.witness,t.start,t.length,t.content,t.type,e.selectedWitness,e.user);t.userCreated&&(n.uniqueId=t.uniqueId,n.isSaved=t.isSaved),r(y.Db(n,!0))},saveAnnotation:c,cancelEditAnnotation:function(e){var t;e.isTemporary?(t=y.Ac(e),r(t)):console.warn("Tried to call cancelEditAnnotation on a non-temporary annotation: %o",e)},deleteAnnotation:function(t){var n=e.selectedWitness,o=b.d(n),i=[];i=t.userCreated?[y.bc(t,n),y.yc(t.uniqueId,o)]:[y.zc(t.uniqueId,o)],e.activeAnnotation.uniqueId===t.uniqueId&&i.push(y.Rb(null)),r(Object($.batchActions)(i))},addNote:function(){var t=n.activeAnnotation;t=new In.b(null,t.witness,t.start,t.length,"",In.a.note,e.selectedWitness,e.user);r(y.Db(t,!0))},editNote:function(t){t=new In.b(t,t.witness,t.start,t.length,t.content,In.a.note,e.selectedWitness,e.user),r(y.Db(t,!0))},addPageBreak:l(In.a.pageBreak),addLineBreak:l(In.a.lineBreak),addQuestion:function(){var t=n.activeAnnotation;t=new In.b(null,t.witness,t.start,t.length,"",In.a.question,e.selectedWitness,e.user);r(y.Db(t,!0))},saveQuestion:function(t,o,i){var a=((a=Ei(n.annotatedText.getPositionOfAnnotation(t),2))[0],a[1],vi.a.renderToStaticMarkup(e.questionQuote)+i);c(t,i),i=y.ac(t,o,a);r(i)}})}))(Wn);function Pi(e){return function(e){if(Array.isArray(e))return ki(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){var n;if(e)return"string"==typeof e?ki(e,t):"Map"===(n="Object"===(n=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ki(e,t):void 0}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ki(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ci=Object(o.memo)(Object(c.c)((function(e){var t=[],n="",r="",o=[];return e.witnesses&&e.activeWitness&&(r=e.witnesses.findIndex((function(t){return t.id===e.activeWitness.id})),(t=e.witnesses.map((function(e){return e}))).sort((function(e,t){return e.isWorking?-1:t.isWorking?1:e.isBase?-1:t.isBase?1:0})),t=t.sort((function(e,t){return e.id-t.id}))),0===t.length?null:i.a.createElement(vt.a,{onChange:function(n){We()(t)||e.onSelectedWitness(t[n.target.value])},className:bt.a.selectVersion,value:r,label:"Version",classes:{root:bt.a.selectEmpty,select:bt.a.selectOptions}},t.map((function(t,r){return t.id===e.activeWitness.id&&o.push(bt.a.selected),n=t.source.name,t.isWorking&&(n="en"===e.intl.locale?"User"===(null==(t=e.user)?void 0:t.name)?"Working":"My Edition":"མཉམ་འབྲེལ་པར་མ།"),i.a.createElement("option",{key:"versionSelect-".concat(r),value:r,className:bt.a.selectOptions},n)})))})));function Ri(e){return function(e){if(Array.isArray(e))return Ni(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Bi(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||Bi(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Bi(e,t){var n;if(e)return"string"==typeof e?Ni(e,t):"Map"===(n="Object"===(n=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ni(e,t):void 0}function Ni(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}gi=i.a.memo((function(e){var t=Object(o.useRef)(e.texts),n=(s=_i(Object(o.useState)(t.current),2))[0],r=s[1],a=(s=_i(Object(o.useState)(null),2))[0],l=s[1],c=e.onSelectedText,s=e.selectedText,u=(e=_i(Object(o.useState)(!1),2))[0],d=e[1],p=(e=null==s?void 0:s.name,Object(o.useRef)(new xt.c({fixedHeight:!0,defaultHeight:40}))),h=[Ot.a.textlist],m=(Object(o.useEffect)((function(){var e;""===a&&r(Ri(t.current)),null!==a&&""!==a&&(e=t.current.filter((function(e){return e.name.includes(a)})),r(Ri(e)))}),[a]),i.a.useCallback((function(e){var t=e.key,r=e.index,o=e.style,a=(e=e.parent,n[r]);return i.a.createElement(xt.b,{key:"optionvalues-".concat(t),cache:p.current,parent:e,columnIndex:0,rowIndex:r},i.a.createElement("div",{style:o,onClick:function(){d(!1),c(a)}},i.a.createElement(q.a,{sx:{overflow:"hidden",textOverflow:"ellipsis",width:"13rem",paddingLeft:2,fontSize:{lg:12,md:11,sm:10,xs:10},color:"text.primary"},component:"div"},i.a.createElement(re.a,{noWrap:!0},T(a.name)))))}),[n]));return i.a.createElement(Et.a,{onClickAway:function(){return d(!1)}},i.a.createElement("div",{style:{position:"relative",marginLeft:10}},i.a.createElement(f.a,{onClick:function(){d((function(e){return!e})),!1===u&&h.push(Ot.a.open)},component:"div",variant:"outlined",sx:{textOverflow:"ellipsis",width:"10rem",height:"100%",color:"text.primary"}},i.a.createElement(re.a,{noWrap:!0},e||"select Text here")),i.a.createElement(St.a,{in:u},i.a.createElement(q.a,{className:v()(h),sx:{position:"absolute",bgcolor:"heading.main",zIndex:1}},i.a.createElement(Tt.a,{onChange:function(e){e=e.target.value,l(e)},id:"standard-basic",label:"Search",variant:"standard",style:{width:"100%"}}),i.a.createElement(xt.a,null,(function(e){var t=e.width;e=e.height;return i.a.createElement(xt.d,{width:t,height:e,rowHeight:30,deferredMeasurementCache:p.current,rowCount:n.length,rowRenderer:m})}))))))})),Wn=Object(a.connect)((function(e){return{texts:b.db(e),selectedText:b.G(e)}}),(function(e){return{onSelectedText:function(t){e(y.Ic(t))}}}))(gi);var Wi=i.a.memo(Wn);function Li(e){return e=e.handleWindowSearch,i.a.createElement(nt.a,{size:"small",variant:"text",onClick:e},i.a.createElement(p.a,null))}function Di(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||function(e,t){var n;if(e)return"string"==typeof e?Hi(e,t):"Map"===(n="Object"===(n=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Hi(e,t):void 0}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Hi(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Mi(e){var t=Di(Object(o.useState)(!1),2),n=t[0],r=t[1],a=(t=Di(Object(ve.a)("WindowOneFont","Tibetan"),2))[0],l=t[1];return Object(o.useEffect)((function(){document.body.style.setProperty("--tibetan-fonts",a)}),[]),i.a.createElement(Et.a,{onClickAway:function(){return r(!1)}},i.a.createElement(q.a,{position:"relative"},i.a.createElement(nt.a,{onClick:function(){r((function(e){return!e}))},size:"small",variant:"text"},i.a.createElement(_t,{height:20,width:20,fill:"currentColor"})),i.a.createElement(St.a,{in:n},i.a.createElement(Lt.a,{dense:!0,sx:{position:"absolute",right:0,zIndex:2,top:40,bgcolor:"heading.main"}},i.a.createElement(Bt,{fontSize:e.textFontSize,onChange:e.onChangedFontSize}),i.a.createElement(Dt.a,null),i.a.createElement(zi,{selectFont:function(e){l(e),document.body.style.setProperty("--tibetan-fonts","".concat(e)),setTimeout((function(){window.dispatchEvent(new Event("resize"))}),1e3),r(!1)},selectedfont:a}),i.a.createElement(Ht.a,{onClick:function(){return e.onExport()}},i.a.createElement(re.a,{variant:"subtitle2"},"Export Document"))))))}var zi=function(e){var t=e.selectFont,n=(e=e.selectedfont,u.c||[]);return i.a.createElement(q.a,{textAlign:"center"},i.a.createElement("span",null,"Font:")," ",i.a.createElement("select",{onChange:function(e){return t(e.target.value)},value:e},n.map((function(e,t){return i.a.createElement("option",{key:t+"-fontselect",value:e},e)}))))};function qi(e){var t=e.changeShowTableContent,n=e.showTableContent;return i.a.createElement(i.a.Fragment,null,i.a.createElement(nt.a,{onClick:function(){t(!n)}},n?i.a.createElement(Ut.a,null):i.a.createElement(Ee.a,null)))}function Vi(e){return(Vi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Fi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ui(e,t){return(Ui=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Qi(e){return(Qi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Gi=function(e){var t=r;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ui(t,e);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Qi(e);n=t?(n=Qi(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),r=this;if(n&&("object"===Vi(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==r)return r;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(r);function r(e){if(this instanceof r)return n.call(this,e);throw new TypeError("Cannot call a class as a function")}return t=r,(e=[{key:"render",value:function(){var e=this,t=this.props.string,n=t,r=this.props.stringClass||"";if(this.props.searchTerm){var i=this.props.searchTerm,a=(new I.a).splitGraphemes(t),l=t.indexOf(i),c=l+i.length,s=0,u="";if(-1<l)for(var f=0;f<a.length;f++){var d=a[f];l<=s&&s<c&&(u+=d),s+=d.length}0<u.length&&(n=A()(t,u,(function(t,n){return o.createElement("span",{className:e.props.highlightClass,key:"highlight-".concat(n)},t)})))}return o.createElement("span",{className:r},n)}}])&&Fi(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),r}(o.Component),$i=(c=n(988),n.n(c));function Ki(e){function t(e){var t=e.key,o=e.index,c=e.parent,u=(e=e.style,a[o]);return i.a.createElement(xt.b,{key:"listkeys2-".concat(t),cache:s.current,parent:c,columnIndex:0,rowIndex:o},i.a.createElement("div",{className:$i.a.searchListItem,onClick:function(){return n(l,u[0],r.length,l)},style:e},i.a.createElement(Gi,{string:u[1],highlightClass:$i.a.highlight,searchTerm:r})))}var n=e.onSelectedSearchResult,r=e.searchValue,a=e.results,l=e.selectedText,c=Object(o.useRef)(),s=Object(o.useRef)(new xt.c({fixedWidth:!0,defaultHeight:100}));return a?i.a.createElement(i.a.Fragment,null,i.a.createElement(xt.a,null,(function(e){var n=e.height;e=e.width;return i.a.createElement(xt.d,{ref:c,height:n,rowCount:null==a?void 0:a.length,rowHeight:s.current.rowHeight,deferredMeasurementCache:s.current,rowRenderer:t,width:e,overscanRowCount:1})}))):null}function Yi(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}function Ji(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||function(e,t){var n;if(e)return"string"==typeof e?Xi(e,t):"Map"===(n="Object"===(n=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Xi(e,t):void 0}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Xi(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Zi(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function ea(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Zi(Object(n),!0).forEach((function(t){ta(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Zi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ta(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}gi=i.a.memo((function(e){var t=(s=Ji(Object(o.useState)(""),2))[0],n=s[1],r=(s=Ji(Object(o.useState)(!1),2))[0],a=s[1],l=(s=Ji(Object(o.useState)(!1),2))[0],c=s[1],s=Object(o.useRef)(),u=Object(o.useRef)(),d=i.a.useRef(mt()((function(t){e.searchChanged(t)}),1e3)).current,p=Object(o.useCallback)((function(e){e.preventDefault(),d(t),c(!0)}),[t]),h=Object(o.useCallback)((function(){!1===r&&d(null),a(!r)}),[r]),m=(Object(o.useEffect)((function(){!0===r&&u.current.focus(),!1===r&&d(null)}),[r]),Object(o.useCallback)((function(){c(!1),d(null),n("")}),[])),y=Object(o.useMemo)((function(){return ht()(e.searchResults)&&e.searchResults.hasOwnProperty(e.selectedText.id)}),[e.searchResults,e.selectedText]),b=y?e.searchResults[e.selectedText.id].results:[];return i.a.createElement(Gt.a,{ref:s,direction:"column",spacing:1,sx:{paddingInline:{md:1,xs:0},paddingBlock:{md:1,xs:0},bgcolor:"heading.main",color:"text.primary"}},i.a.createElement(Gt.a,{direction:"row",spacing:1,justifyContent:"space-between"},i.a.createElement(q.a,{sx:{display:"flex",gap:{md:2,sx:0},flexDirection:{md:"row",xs:"column"}}},i.a.createElement(Wi,null),i.a.createElement(Ci,{witnesses:e.witnesses,activeWitness:e.selectedWitness,onSelectedWitness:e.onSelectedWitness,user:e.user})),i.a.createElement($t.a,{size:"small",sx:{position:"relative",display:"flex",height:"fit-content",alignItems:"center",justifyContent:"center",width:"fit-content",border:function(e){return"1px solid ".concat(e.palette.divider)},borderRadius:1,bgcolor:"background.paper",color:"text.secondary","& svg":{m:1},"& hr":{mx:.5}},className:yt.a.button_group_menu},i.a.createElement(Dt.a,{orientation:"vertical",variant:"middle",flexItem:!0}),i.a.createElement(Li,{handleWindowSearch:h}),i.a.createElement(Mi,{textFontSize:e.textFontSize,onChangedFontSize:e.onChangedFontSize,onExport:e.onExport}),i.a.createElement(qi,{changeShowTableContent:e.changeShowTableContent,showTableContent:e.showTableContent}))),i.a.createElement(De.a,{in:r,mountOnEnter:!0,unmountOnExit:!0},i.a.createElement("form",{onSubmit:p},i.a.createElement(Gt.a,{direction:"row",spacing:2,position:"relative"},i.a.createElement(Tt.a,{hiddenLabel:!0,id:"filled-hidden-label-small",inputProps:{style:{height:25,padding:"0 14px"}},style:{height:25,flex:1},fullWidth:!0,inputRef:u,value:t,onChange:function(e){return n(e.target.value)}}),i.a.createElement(f.a,{variant:"outlined",size:"small",onClick:p,style:{height:25}},"Search"),e.searchResults&&l&&i.a.createElement(q.a,{sx:(Yi(s={position:"absolute",top:35,right:0,zIndex:1,bgcolor:"heading.main",height:350,width:350,boxShadow:3,overflowX:"hidden"},"boxShadow",3),Yi(s,"display",0===b.length?"none":"block"),s)},y&&0<b.length&&i.a.createElement(Ki,{onSelectedSearchResult:e.onSelectedSearchResult,searchValue:e.searchValue,results:b,selectedText:e.selectedText}),i.a.createElement(nt.a,{"aria-label":"closeButton",onClick:m,size:"small",sx:{right:15,top:0,position:"absolute"}},i.a.createElement(Se.a,{fontSize:"inherit"})))))))}));var na=Object(a.connect)((function(e){var t,n,r=b.G(e),o=b.H(e),i=[],a=!1,l=(r&&(i=b.bb(e,r.id),(l=b.K(e,r.id))?(t=b.ib(e,l),a=b.q(e,l)):t=b.mb(e,r.id)),o&&(n=(l=b.L(e,o.id))?b.jb(e,l):b.nb(e,o.id)),b.W(e)),c=b.A(e);return{witnesses:i,selectedText:r,selectedText2:o,selectedWitness:t,selectedWitness2:n,textFontSize:l,exportingWitness:a,searchValue:c,showTableContent:b.N(e),searchResults:b.y(e,c)}}),null,(function(e,t,n){var r=t.dispatch,o=e.selectedText;return ea(ea(ea({},n),e),{},(ta(n={navigationButtonClicked:function(){t.dispatch(y.Xb(!e.textListIsVisible))},onSelectedWitness:function(e){r(y.Kc(null==o?void 0:o.id,null==e?void 0:e.id))},onChangedFontSize:function(e){r(y.Vb(e))},onChangeWindowOpen:function(e){r(y.Qc(e))},onExport:function(){r(y.cc(e.selectedWitness.id,"docx"))}},"navigationButtonClicked",(function(){r(y.Xb(!e.textListIsVisible))})),ta(n,"changeIsAnnotating",(function(e){r(y.Hb(e)),!1===e&&(e=y.Rb(null),r(e),r(y.Rb(null)))})),ta(n,"searchChanged",(function(e){r(y.Sb(e))})),ta(n,"changeShowTableContent",(function(e){r(y.Oc(e))})),ta(n,"onSelectedSearchResult",(function(e,t,n,o){o&&o.id===e.id?r(y.Gc(e.id,t,n)):r(batchActions([y.Gc(e.id,t,n),y.Ic(e)]))})),n))}))(gi),ra=(Wn=n(989),n.n(Wn)),oa=Object(a.connect)((function(e){var t=b.t(e);return{alignmentData:b.i(e),selectedMedia:t,text:function(t){return b.S(e,t)},getWitness:function(t){return b.ib(e,t)}}}),(function(e){return{changeMediaSelection:function(t){return e(y.xc(t))},onChangeWindowOpen:function(t){e(y.Qc(t))},onSelectedSearchResult:function(t,n,r){e(y.Gc(t,n,r))},selectSecondWindowText:function(t){e(y.Qc(!0)),e(y.Jc(t))}}}))((function(e){e.getWitness;var t=e.alignmentData,n=e.text,r=e.selectSecondWindowText;return(e=(null==t?void 0:t.alignments.text)||[]).length?i.a.createElement(q.a,null,i.a.createElement(re.a,{variant:"h6",gutterBottom:!0,component:"div"},"Commentary"),e.map((function(e,t){return i.a.createElement("div",{key:"commentary-".concat(t),style:{cursor:"pointer"},onClick:function(){var e;e=n(2),r(e)}},n(2).name,e.target)}))):null}));function ia(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var aa=Object(ce.a)("div")((function(e){return ia({position:"relative",borderRadius:(e=e.theme).shape.borderRadius,backgroundColor:Object(mn.a)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object(mn.a)(e.palette.common.white,.25)},marginLeft:0,width:"100%"},e.breakpoints.up("sm"),{marginLeft:e.spacing(1),width:"auto"})})),la=Object(ce.a)("div")((function(e){return{padding:e.theme.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"}})),ca=Object(ce.a)(d.c)((function(e){return{color:"inherit","& .MuiInputBase-input":ia({padding:(e=e.theme).spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(e.spacing(4),")"),transition:e.transitions.create("width"),width:"100%"},e.breakpoints.up("sm"),{width:"0",cursor:"pointer","&:focus":{width:"20ch"}})}})),sa=i.a.memo(Object(a.connect)((function(e){return{}}),(function(e){return{changeScrollToId:function(t){return e(y.Jb(t))}}}))((function(e){return i.a.createElement(q.a,{className:ra.a.TableContent,sx:{bgcolor:"heading.main",color:"text.primary",width:"100%",height:"100%",paddingInline:2}},i.a.createElement(oa,null),i.a.createElement(yn.a,{sx:{justifyContent:"space-between",paddingLeft:"0 !important",margin:0}},i.a.createElement(re.a,{textTransform:"uppercase",component:"h6"},"Table Of Content"),i.a.createElement(aa,null,i.a.createElement(la,null,i.a.createElement(p.a,null)),i.a.createElement(ca,{placeholder:"Search…",inputProps:{"aria-label":"search"}}))),i.a.createElement(q.a,null,[{Id:1,Title:"chapter 1",segment_id:1},{Id:2,Title:"chapter 2",segment_id:400},{Id:3,Title:"chapter 3",segment_id:3e3}].map((function(t,n){return i.a.createElement(q.a,{key:"TableContent-"+n,sx:{cursor:"pointer",width:"fit-content","&:hover":{textDecoration:"underline"}},onClick:function(){return e.changeScrollToId({from:"table",id:t.segment_id})}},t.Title)}))))}))),ua=n(990);function fa(e){var t=e.children,n=e.cl;return Object(o.useEffect)((function(){var e=document.querySelector("."+n);Object(ua.a)(e,{margin:50,background:"rgba(0,0,0,0.4)",scrollOffset:200})}),[]),i.a.createElement(i.a.Fragment,null,t)}function da(e){return(da="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function pa(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||function(e,t){var n;if(e)return"string"==typeof e?ha(e,t):"Map"===(n="Object"===(n=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ha(e,t):void 0}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ha(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ma(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function ya(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ma(Object(n),!0).forEach((function(t){var r,o;r=e,o=n[t=t],t in r?Object.defineProperty(r,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[t]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ma(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ba(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ga(e,t){return(ga=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function va(e){return(va=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function wa(e){return"s_"+e.start}function xa(e){return"ds_"+e.start}function Oa(e){return"i_"+e.start}function Ea(e){return"p_"+(e.end+1)}function Sa(e){return"l_"+(e.end+1)}var Ta=String.fromCharCode(182),ja=vi.a.renderToStaticMarkup(i.a.createElement(Zo,null)),Ia=(c=function(e){var t=r;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ga(t,e);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=va(e);n=t?(n=va(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),r=this;if(n&&("object"===da(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==r)return r;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(r);function r(e){var t;if(this instanceof r)return(t=n.call(this,e)).textAlignmentById=[],t.state={segmentedText:e.segmentedText},t.textAlignmentById=t.props.textAlignmentById,t._renderedSegments=null,t._renderedHtml=null,t.rangeSelect=[],t.theme=e.theme,t;throw new TypeError("Cannot call a class as a function")}return t=r,(e=[{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.setState((function(t,n){return ya(ya({},t),{},{segmentedText:e.segmentedText})}))}},{key:"annotationsForSegment",value:function(e){var t=[],n=this.props.annotationPositions[String(e.start)],r=this.props.annotationPositions[sn.c+e.start]||[],o=this.props.annotationPositions[sn.b+e.start]||[],i=this.props.annotationPositions[sn.e+(e.end+1)]||[];e=this.props.annotationPositions[sn.d+(e.end+1)]||[];return(t=n||t).concat(r,o,i,e)}},{key:"segmentsContainSegment",value:function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(r.start===t.start&&r.text===t.text)return!0}return!1}},{key:"selectedElement",value:function(e){if("DIV"===e.tagName)this.props.selectedSegmentId("");else{var t=[],n=[],r=document.getSelection(),o=parseInt(e.id.replace("s_",""));if(this.props.changeSyncIdOnClick(o),null!=e&&e.id.includes("s_")&&this.props.condition){this.props.changeScrollToId({id:null,from:null});var i=parseInt(e.id.replace("s_","")),a=Er()(this.textAlignmentById,(function(e){return i>=e.start&&i<e.end}));if(a){for(var l=a.start;l<a.end;l++)t.push(l);for(var c=a.TStart;c<a.TEnd;c++)n.push(c);this.props.changeSelectedRange({source:t,target:n})}}r&&"Range"===r.type||(this.props.selectedSegmentId(e.id),e.id||this.props.changeSelectedRange({source:[],target:[]}))}}},{key:"generateHtml",value:function(e,t){var n=t.segmentedText.segments,r=Tn.a.textLine,o='<p class="'+r+'">';if(0===n.length)return{__html:o};for(var i=Tn.a.insertion,a=n[n.length-1].end+1,l=(e.annotationPositions[sn.c+a]&&(t=new jn.a(a,""),n.push(t)),e.annotationPositions[sn.e+a]&&(t=new jn.a(a,""),n.push(t)),e.annotationPositions[sn.d+a]&&(t=new jn.a(a,""),n.push(t)),e.activeAnnotations||{}),c=Tn.a.highlight,s=Tn.a.activeHighlight,u=null,f={},d=0;d<n.length;d++){var p=n[d],h="",m=[],y=this.annotationsForSegment(p),b=null,g=!1,w=!1,x=!1,O=!1,E=null;if(y){for(var S,T=[],j=[],I=[],A=[],P=0,k=y.length;P<k;P++){var C,R=y[P];R.isInsertion?R.uniqueId in l?T.push(R):(C=R.start,f.hasOwnProperty(C)||(j.push(R),f[C]=R)):R.isDeletion?R.uniqueId in l&&A.push(R):R.type!==In.a.pageBreak||e.activeWitness.isWorking?R.type!==In.a.lineBreak||e.activeWitness.isWorking?I.push(R):O=R:E=R}0===T.length&&0<j.length&&(_=j[0],S=Oa(p),B=i,e.activeAnnotation&&e.activeAnnotation.isInsertion&&e.activeAnnotation.start===_.start&&(B+=" "+Tn.a.selectedAnnotation),o+="<span id="+S+" key="+S+' class="'+B+'">'+_.content+"</span>"),0<A.length&&(b=e.getBaseAnnotation(S=A[0]).content,e.activeAnnotation&&e.activeAnnotation.isDeletion&&e.activeAnnotation.start===S.start&&e.activeAnnotation.length===S.length&&0===p.length&&(g=!0)),E&&e.activeAnnotation&&e.activeAnnotation.uniqueId===E.uniqueId&&(w=!0),O&&e.activeAnnotation&&e.activeAnnotation.uniqueId===O.uniqueId&&(x=!0),(0<I.length||0<T.length)&&(I.some((function(e){return"P"===e.type}))&&m.push(Tn.a.P_annotation),I.some((function(e){return"Q"===e.type}))&&(1<I.filter((function(e){return"Q"===e.type})).length&&m.push(Tn.a.Q_annotation_double),m.push(Tn.a.Q_annotation)),I.some((function(e){return"N"===e.type}))&&m.push(Tn.a.N_annotation),I.some((function(e){return"V"===e.type}))&&m.push(Tn.a.V_annotation))}if(p.start===a)break;var _,B=null,N=(0===p.length?(B=xa(p),m.push(Tn.a.removedByAnnotation),b&&(p=new jn.a(p.start,b))):B=wa(p),(this.segmentsContainSegment(e.selectedAnnotatedSegments,p)||g)&&m.push(Tn.a.selectedAnnotation),e.selectedSourceRange.includes(p.start)&&e.condition&&(_="light"===e.theme.palette.mode?Tn.a.selectedRangelight:Tn.a.selectedRangeDark,m.push(_)),e.selectedMedia.isVideoVisible&&e.isPanelLinked&&e.MediaInterval.source_segment&&e.MediaInterval.source_segment.start<p.start&&e.MediaInterval.source_segment.end>p.start&&m.push(Tn.a.mediaInterval),0<m.length&&(h='class="'+v.a.apply(void 0,m)+'"'),p.text);if(e.searchStringPositions){var W=p.start,L=W,D=(N="",c);e.selectedSearchResult&&e.selectedSearchResult.start<=L&&e.selectedSearchResult.start+e.selectedSearchResult.length>L&&(D=s);for(var H=0;H<p.text.length;H++){var M,z,q,V=p.text.charAt(H);L=W+H;u?((M=pa(u,2))[0],0===H&&(N+='<span class="'+D+'">'),L===M[1]?(N+=V+"</span>",u=null):H===p.text.length-1?N+=V+"</span>":N+=V):L in e.searchStringPositions?(z=(M=pa(e.searchStringPositions[L],2))[0],q=M[1],N+='<span class="'+D+'">'+V,H!==p.text.length-1&&L!==q||(N+="</span>"),L<q&&(u=[z,q])):N+=V}}o+="<span id="+B+" key="+B+" "+h+">"+N+"</span>",E&&(b=[Tn.a.pageBreak],w&&b.push(Tn.a.selectedAnnotation),g=' class="'+b.join(" ")+'" ',o+="<span id="+Ea(p)+" key="+Ea(p)+g+">"+ja+"</span>"),O&&(m=[Tn.a.lineBreak],x&&m.push(Tn.a.selectedAnnotation),h=' class="'+m.join(" ")+'" ',o=o+"<span id="+Sa(p)+" key="+Sa(p)+h+">"+Ta+'</span></p><p class="'+r+'">')}return this._renderedSegments=n,{__html:o+="</p>"}}},{key:"shouldComponentUpdate",value:function(e,t){return this.textAlignmentById=this.props.textAlignmentById,t=this.generateHtml(e,t),this.props.fontSize!==e.fontSize||(!this._renderedHtml||t.__html!==this._renderedHtml.__html)&&(this._renderedHtml=t,!0)}},{key:"render",value:function(){var e=this,t=[Tn.a.text],n=(0===this.props.row&&t.push(Tn.a.textFirstRow),this._renderedHtml||this.generateHtml(this.props,this.state));return this._renderedHtml||(this._renderedHtml=n),i.a.createElement("div",{className:Tn.a.textContainer},i.a.createElement("div",{className:v.a.apply(void 0,t),id:"text1",dangerouslySetInnerHTML:n,style:{fontSize:this.props.fontSize,fontFamily:"var(--tibetan-fonts)"},onClick:function(t){e.selectedElement(t.target)}}))}}])&&ba(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),r}(i.a.Component),Object(On.a)(c));function Aa(e){return(Aa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Pa(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function ka(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pa(Object(n),!0).forEach((function(t){Ca(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pa(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ca(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ra(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||function(e,t){var n;if(e)return"string"==typeof e?_a(e,t):"Map"===(n="Object"===(n=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_a(e,t):void 0}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ba(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Na(e,t){return(Na=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Wa(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function La(e){return(La=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}parseInt(Fr.a.inlineWidth);var Da="bdrcimg_pre",Ha={},Ma=function(e){var t=r;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Na(t,e);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=La(e);n=t?(n=La(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),r=this;if(n&&("object"===Aa(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return Wa(r)}}(r);function r(e){var t;if(this instanceof r)return(t=n.call(this,e)).textAlignmentById=[],t.list=null,t.splitText=null,t.cache=new x.b({fixedWidth:!0}),t.splitTextRef=o.createRef(null),t.rowRenderer=t.rowRenderer.bind(Wa(t)),t.textListVisible=e.textListVisible,t.editMenuVisible=e.editMenuVisible,t.isPanelLinked=e.isPanelLinked,t.activeSelection=null,t.selectedNodes=null,t._mouseDown=!1,t._activeWitness=null,t._didSetInitialScrollPosition=!1,t._modifyingSelection=!1,t.imageHeight=null,t.imageWidth=null,t.calculatedImageHeight=null,t.processProps(e),t.changeScrollToId=e.changeScrollToId,t.changeSyncIdOnClick=e.changeSyncIdOnClick,t.closeAnnotation=e.closeAnnotation,t.scrollJump=e.scrollJump,t.textAlignmentById=[],t.scrollEvent=t.scrollEvent.bind(Wa(t)),t.selectedWindow=e.selectedWindow,t.condition=e.condition,t;throw new TypeError("Cannot call a class as a function")}return t=r,(e=[{key:"scrollEvent",value:function(e){if(2===this.selectedWindow)return null;var t;1===this.selectedWindow&&(t=[],this.textAlignmentById.map((function(e){var n=document.getElementById("s_"+e.start);n&&102<n.getBoundingClientRect().top&&t.push({id:e.id,start:e.start,target:e.TStart})})),We()(t)&&We()([])||1===this.selectedWindow&&this.debouncedScroll(t))}},{key:"updateList",value:function(){var e=!(0<arguments.length&&void 0!==arguments[0])||arguments[0],t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;if(this.props.showImages&&!this.calculatedImageHeight&&this.imageHeight&&this.imageWidth&&(this.calculatedImageHeight=this.calculateImageHeight()),this.list){var n=this.list;if(e)if(null!==t)if(Array.isArray(t)){if(Array.isArray(t))for(var r=0;r<t.length;r++){var o=t[r];this.cache.clear(o)}}else this.cache.clear(t);else this.cache.clearAll(),n.measureAllRows(),n.recomputeRowHeights(0);n.forceUpdateGrid()}}},{key:"mouseDown",value:function(){this._mouseDown=!0}},{key:"mouseUp",value:function(){var e;this._mouseDown=!1,this.activeSelection&&(e=(e=this.processSelection(this.activeSelection))||[],this.props.didSelectSegmentIds(e),this.activeSelection=null)}},{key:"handleSelection",value:function(e){this._modifyingSelection?(e.stopPropagation(),this._modifyingSelection=!1):(this.activeSelection=document.getSelection(),this._mouseDown||this.mouseUp())}},{key:"processSelection",value:function(e){if(0===e.rangeCount||e.isCollapsed||"Caret"===e.type)return this.selectedNodes=null;var t=(e=e.getRangeAt(0)).startContainer;if(!(t=this.getNodeSegmentSpan(t))||!t.parentNode)return null;var n=this.getRangeNodes(e,t.parentNode),r=(0<n.length&&(r=n[0],e.startOffset===r.textContent.length&&n.shift()),e.endContainer);return(r=this.getNodeSegmentSpan(r))&&r.parentNode?(r&&t.parentNode!==r.parentNode?n=n.concat(this.getRangeNodes(e,r.parentNode)):0===e.endOffset&&n.pop(),t=[],(this.selectedNodes=n).reduce((function(e,t){return t instanceof Element&&e.push(t.id),e}),t),t):null}},{key:"getNodeSegmentSpan",value:function(e){for(var t=e,n=null,r=/^(i|s|ds)_/;!n&&t.parentNode;)t instanceof Element&&r.test(t.id)&&(n=t),t=t.parentNode;return n}},{key:"getRangeNodes",value:function(e,t){for(var n=[],r=0,o=t.childNodes.length;r<o;r++){var i=t.childNodes[r];e.intersectsNode(i)&&n.push(i)}return n}},{key:"getControlsMeasurements",value:function(e){if(!this.splitText)return null;var t=this.splitText,n=null,r=null,o=null,i=null,a=null,l=[],c=0;if(e.activeAnnotation){var s=e.activeAnnotation;if(null===(c=Ra(e.splitText.annotatedText.getPositionOfAnnotation(s),1)[0]))return console.warn("No startPos in getControlsMeasurements"),null;s.type===In.a.pageBreak&&--c,s.type===In.a.lineBreak&&--c,s.length,s.length,n=e.splitText.getTextIndexOfPosition(c),i=t.getBoundingClientRect()}var u=[];if(e.selectedAnnotatedSegments&&0<e.selectedAnnotatedSegments.length){u=e.selectedAnnotatedSegments;for(var f=0;f<u.length;f++){var d=u[f];if(null===r&&d instanceof jn.a){r=d;break}}r&&(a=0===r.length&&e.activeAnnotation&&e.activeAnnotation.isInsertion?(o=Oa(r),Oa):(o=wa(r),wa))}else e.activeAnnotation&&(e.activeAnnotation.isDeletion?(o=xa(s=new jn.a(c,"")),a=xa,u=[r=s]):e.activeAnnotation.isInsertion?(t=Ra(e.splitText.annotatedText.getPositionOfAnnotation(e.activeAnnotation),1)[0])&&(o=Oa(s=new jn.a(t,"")),a=Oa,u=[r=s]):e.activeAnnotation.type===In.a.pageBreak?(u=[r=new jn.a(c+1,"")],l=[o=Ea(new jn.a(c,""))]):e.activeAnnotation.type===In.a.lineBreak&&(u=[r=new jn.a(c+1,"")],l=[o=Sa(new jn.a(c,""))]));if(a)for(var p=0;p<u.length;p++){var h=u[p];h instanceof jn.a&&(h=a(h),l.push(h))}return null!=n&&r&&o&&i?{selectedTextIndex:n,firstSelectedSegment:r,selectedElementId:o,splitTextRect:i,selectedElementIds:l}:null}},{key:"shouldResetListCache",value:function(e,t){var n=!1;return!(e.showImages===t.showImages&&!this.pageBreaksChanged(e,t))||n}},{key:"pageBreaksChanged",value:function(e,t){return e=e.splitText.getTextsFinalPositions(),t=t.splitText.getTextsFinalPositions(),e.length!==t.length||JSON.stringify(e)!==JSON.stringify(t)}},{key:"lineBreaksChanges",value:function(e,t){var n=e.activeAnnotation,r=t.activeAnnotation,o=!1;return n&&n.isType(In.a.lineBreak)&&t.activeAnnotations&&!t.activeAnnotations.hasOwnProperty(n.uniqueId)&&(o=!0),!(!(r&&r.isType(In.a.lineBreak)&&e.activeAnnotations)||e.activeAnnotations.hasOwnProperty(r.uniqueId))||o}},{key:"selectedListRow",value:function(e){var t=null;return e.activeAnnotation?e.splitText.getTextIndexOfPosition(e.activeAnnotation.start):t}},{key:"processProps",value:function(e){var t=this,n=!1;if((o=((!this.props.selectedWitness||e.selectedWitness&&e.selectedWitness.id!==this.props.selectedWitness.id)&&(this._didSetInitialScrollPosition=!(n=!0)),!e.selectedSearchResult||this.props.selectedSearchResult&&e.selectedSearchResult.start===this.props.selectedSearchResult.start&&e.selectedSearchResult.textId===this.props.selectedSearchResult.textId||(console.log("resetting scroll position from search result"),this._didSetInitialScrollPosition=!1),this._filteredSelectedAnnotatedSegments=e.selectedAnnotatedSegments.reduce((function(e,t){return t instanceof jn.a&&e.push(t),e}),[]),this.getControlsMeasurements(e)))&&(this.selectedTextIndex=o.selectedTextIndex,this.firstSelectedSegment=o.firstSelectedSegment,this.splitTextRect=o.splitTextRect,this.selectedElementId=o.selectedElementId,this.selectedElementIds=o.selectedElementIds),e.textListVisible!==this.textListVisible||e.editMenuVisible!==this.editMenuVisible)setTimeout((function(){t.textListVisible=e.textListVisible,t.editMenuVisible=e.editMenuVisible,t.updateList(!0)}),500);else if(n)this.updateList(!0);else if(this.pageBreaksChanged(this.props,e)){var r=null,o=this.selectedListRow(this.props);n=this.selectedListRow(e);if(o&&n){r=[];for(var i=n<o?n:o,a=this.props.splitText.texts.length;i<a;i++)r.push(i)}this.updateList(!0,r)}else if(this.lineBreaksChanges(this.props,e)){n=(n=this.selectedListRow(e))||this.selectedListRow(this.props),o=this.props.splitText.texts;var l=[];if(null!==n){for(var c=n,s=o.length;c<s;c++)l.push(c);this.updateList(!0,l)}}else this.props.fontSize!==e.fontSize?this.updateList(!0):this.props.activeAnnotation&&e.activeAnnotation&&this.annotationsInSameLocation(this.props.activeAnnotation,e.activeAnnotation)?this.updateList(!0,this.selectedListRow(e)):this.updateList(this.shouldResetListCache(this.props,e))}},{key:"annotationsInSameLocation",value:function(e,t){return e.start===t.start&&e.length===t.length}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.processProps(e)}},{key:"scrollToIndex",value:function(e){var t=this.list,n=this.props.splitText.getTextIndexOfPosition(e);setTimeout((function(){t.scrollToRow(n),setTimeout((function(){t.scrollToPosition(t.props.scrollTop-300)}),0)}),100)}},{key:"componentDidMount",value:function(){var e=this;this.resizeHandler=En()((function(){e.calculatedImageHeight=null,e.updateList()}),600).bind(this),this.processProps(this.props),this.debouncedScroll=mt()((function(t){t.length&&e.changeScrollToId({id:null==(t=t[0])?void 0:t.start,from:1})}),1e3),window.addEventListener("resize",this.resizeHandler),this.selectionHandler=mt()((function(t){e.handleSelection(t)}),200).bind(this),setTimeout((function(){window.dispatchEvent(new Event("resize"))}),2e3),document.addEventListener("selectionchange",this.selectionHandler),document.addEventListener("mousedown",this.mouseDown.bind(this),!0),document.addEventListener("mouseup",this.mouseUp.bind(this),!0),this.componentDidUpdate()}},{key:"componentDidUpdate",value:function(e){var t,n,r,o,i,a=this;this.Alignment=this.props.textAlignment,this.condition=this.props.condition,this.scrollToId=this.props.scrollToId,this.props.isAnnotating||(this.activeSelection=null),this.textAlignmentById=this.props.textAlignmentById,this.selectedWindow=this.props.selectedWindow,this.targetId=this.props.syncIdOnClick,this.selectedNodes&&0<this.selectedNodes.length&&(t=this.selectedNodes,n=this.props.selectedAnnotatedSegments,setTimeout((function(){var e=document.createRange(),r=t[0],o=t[t.length-1],i=n[n.length-1];i instanceof jn.a&&(i=document.getElementById(wa(i)))&&(o=i),r instanceof Element&&o instanceof Element&&(r=document.getElementById(r.id),o=document.getElementById(o.id),r&&o&&(e.setStart(r,0),e.setEnd(o,o.childNodes.length),(i=document.getSelection())&&(a._modifyingSelection=!0,i.removeAllRanges(),i.addRange(e),a.selectedNodes=null)))}),0)),!this._didSetInitialScrollPosition&&this.list&&(r=this.list,(this.props.activeAnnotation||this.props.selectedSearchResult)&&(o=this.getSelectedTextIndex(),setTimeout((function(){r.scrollToRow(o),setTimeout((function(){r.scrollToPosition(r.props.scrollTop-300)}),0)}),100)),this._didSetInitialScrollPosition=!0),"table"==this.scrollToId.from&&this.scrollToId.id&&(i=this.scrollToId.id,this.scrollToIndex(i)),"video"==this.scrollToId.from&&this.scrollToId.id&&(i=this.scrollToId.id,this.scrollToIndex(i)),2===this.selectedWindow&&2==this.scrollToId.from&&this.condition&&null!==this.scrollToId.id&&(this.textAlignmentById=this.props.textAlignmentById||[],this.Alignment&&null!==(i=null==(i=this.textAlignmentById.find((function(e){return e.TStart===a.scrollToId.id})))?void 0:i.start)&&this.scrollToIndex(i)),this.targetId&&"ua"===this.scrollToId.from&&2===this.selectedWindow&&"ua"===this.scrollToId.id&&this.condition&&(i=null==(i=this.Alignment.alignment.find((function(e){return a.targetId>=e.target_segment.start&&a.targetId<e.target_segment.end})))||null==(i=i.source_segment)?void 0:i.start,this.scrollToIndex(i))}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousedown",this),document.removeEventListener("mouseup",this),window.removeEventListener("resize",this.resizeHandler),document.removeEventListener("selectionchange",this.selectionHandler)}},{key:"calculateImageHeight",value:function(){var e,t,n=null;return this.imageHeight&&this.imageWidth&&(e=this.imageWidth/this.imageHeight,t=Dn.a.pechaImage,0<(t=document.getElementsByClassName(t)).length&&(n=t[0].offsetWidth/e)),n}},{key:"getSelectedTextIndex",value:function(){var e,t=0,n=null;return this.props.activeAnnotation?n=Ra(this.props.splitText.annotatedText.getPositionOfAnnotation(this.props.activeAnnotation),1)[0]:this.props.selectedSearchResult&&((e=this.props.splitText.annotatedText.segmentAtOriginalPosition(this.props.selectedSearchResult.start))instanceof jn.a?n=e.start:"number"==typeof e&&(n=e)),n?this.props.splitText.getTextIndexOfPosition(n):t}},{key:"getBaseAnnotation",value:function(e){var t=Ra(this.props.splitText.annotatedText.getPositionOfAnnotation(e),1)[0];return this.props.splitText.annotatedText.getBaseAnnotation(t=null===t?0:t,e.content.length)}},{key:"render",value:function(){var e=this,t=this.props,n=this.rowRenderer,r=this.cache,i=t.selectedWitness?t.selectedWitness.id:0;return o.createElement("div",{className:Dn.a.splitText,ref:function(t){return e.splitText=t},key:i},o.createElement(w.a,{disableWidth:!0},(function(i){return i=i.height,o.createElement(O.a,{width:1,ref:function(t){return e.list=t},height:i,rowCount:t.splitText.texts.length,rowHeight:r.rowHeight,rowRenderer:n,overscanRowCount:3,deferredMeasurementCache:r,onScroll:e.scrollEvent,scrollToAlignment:"start",containerStyle:{width:"100%",maxWidth:"100%"},style:{width:"100%",paddingTop:30,paddingInline:50}})})))}},{key:"getImageUrl",value:function(e){var t,n,r;return this.props.selectedWitness&&this.props.selectedWitness.properties?(t=(r=this.props.selectedWitness.properties)[Da],n=r.bdrcimg_number,r=r.bdrcimg_suffix,"//iiif.bdrc.io/"+t+(Number(n)+e)+"."+r+"/full/full/0/default.jpg"):""}},{key:"getStringPositions",value:function(e,t,n){var r=this.props.splitText.annotatedText.getUniqueId();if((Ha=Ha.hasOwnProperty(r)?Ha:Ca({},r,{}))[r].hasOwnProperty(t)||(Ha[r]=Ca({},t,{})),Ha[r][t].hasOwnProperty(n))return Ha[r][t][n];for(var o=new I.a,i=e.getText(),a=null==(e=e.segments[0])?void 0:e.start,l=[],c=i.indexOf(t);-1!==c;)l.push(c),c=i.indexOf(t,c+1);var s={};if(0<l.length)for(var u=o.splitGraphemes(i),f=0,d=null,p=0;p<u.length;p++){var h=u[p],m=f+(h.length-1);null!==d?d+(t.length-1)<=m&&(s[d+a]=[d+a,m+a],d=null):-1!==l.indexOf(f)?t.length===h.length?s[f+a]=[f+a,m+a]:t.length>h.length&&(d=f):d=null,f+=h.length}return Ha[r][t][n]=s}},{key:"rowRenderer",value:function(e){var t=e.key,n=e.index,r=e.parent,i=(e=e.style,this.props),a=this.cache,l=this,c=i.showImages?Dn.a.pechaImage:null,s="",u=(i.selectedWitness&&i.selectedWitness.properties&&i.selectedWitness.properties.hasOwnProperty(Da)&&(s=this.getImageUrl(n)),{}),f=this.props.searchValue,d=(f&&0<f.length&&i.splitText&&(u=this.getStringPositions(i.splitText.texts[n],f,n)),e.height,{});i.showImages&&c&&this.calculatedImageHeight&&(d.height=this.calculatedImageHeight+"px"),e=ka(ka({},e),{},{height:e.height+10,cursor:this.props.isAnnotating?"text":"pointer"});return o.createElement(x.a,{columnIndex:0,parent:r,rowIndex:n,cache:a,key:t},o.createElement("div",{key:t,style:e,className:Dn.a.splitTextRow,ref:this.splitTextRef,id:"index_".concat(n)},o.createElement("div",{className:Dn.a.splitTextRowContent},i.showImages&&o.createElement("div",{className:c,style:d},o.createElement(fa,{cl:"zoomableImage-".concat(n)},o.createElement("img",{alt:"Text related Image",className:v()([Dn.a.image,"zoomableImage-".concat(n)]),src:s,width:"100%",height:"100%",loading:"lazy",decoding:"async",onLoad:function(e){e.target&&null===l.imageWidth&&(l.imageWidth=e.target.naturalWidth,l.imageHeight=e.target.naturalHeight,l.calculatedImageHeight=null,window.setTimeout(l.updateList.bind(l),0))}}))),o.createElement(Ia,{segmentedText:i.splitText.texts[n],annotations:i.annotations,activeAnnotations:i.activeAnnotations,activeAnnotation:i.activeAnnotation,row:n,selectedSegmentId:i.selectedSegmentId,annotationPositions:i.annotationPositions,selectedAnnotatedSegments:this._filteredSelectedAnnotatedSegments,getBaseAnnotation:this.getBaseAnnotation.bind(this),activeWitness:this.props.selectedWitness,searchValue:f,selectedSearchResult:this.props.selectedSearchResult,searchStringPositions:u,fontSize:i.fontSize,changeSyncIdOnClick:this.props.changeSyncIdOnClick,changeScrollToId:this.props.changeScrollToId,textAlignmentById:this.props.textAlignmentById,selectedSourceRange:this.props.selectedSourceRange,selectedTargetRange:this.props.selectedTargetRange,changeSelectedRange:this.props.changeSelectedRange,condition:this.condition,isPanelLinked:this.props.isPanelLinked,selectedMedia:this.props.selectedMedia,MediaInterval:this.props.MediaInterval})),this.props.isAnnotating&&this.selectedTextIndex===n&&this.props.activeAnnotation&&o.createElement(Ai,{annotationPositions:i.annotationPositions,annotatedText:i.splitText.annotatedText,activeAnnotation:i.activeAnnotation,inline:!0,firstSelectedSegment:this.firstSelectedSegment,splitTextRect:this.splitTextRect,selectedElementId:this.selectedElementId,pechaImageClass:c,splitText:i.splitText,selectedElementIds:this.selectedElementIds,list:this.list})))}}])&&Ba(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),r}(o.PureComponent);function za(e){return(za="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qa(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Va(e,t){return(Va=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Fa(e){return(Fa=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ua,Qa,Ga,$a,Ka=0,Ya=(gi=function(e){var t=r;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Va(t,e);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Fa(e);n=t?(n=Fa(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),r=this;if(n&&("object"===za(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==r)return r;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(r);function r(){var e;if(this instanceof r)return(e=n.call(this)).key=Ka++,e.ref=i.a.createRef(),e.selectedWindow=null,e;throw new TypeError("Cannot call a class as a function")}return t=r,(e=[{key:"mouseEnter",value:function(){2===this.selectedWindow&&this.props.text.name&&this.props.changeSelectedWindow(1)}},{key:"componentDidMount",value:function(){this.ref.current.addEventListener("mouseenter",this.mouseEnter.bind(this))}},{key:"componentDidUpdate",value:function(){this.selectedWindow=this.props.selectedWindow}},{key:"render",value:function(){this.props.text&&this.props.text;var e,t,n=null;n=[this.props.annotatedText&&this.props.text&&!this.props.loading?(e=this.props.paginated?(e=this.props.pageBreaks,0===(t=Pi(e))[0]&&t.shift(),function(e){return t}):Object(dn.a)(1e3,/^།[\s]+(?!།[\s]+)/,2,5),n=new fn(this.props.annotatedText,e),i.a.createElement(Ma,{splitText:n,annotations:this.props.annotations,activeAnnotations:this.props.activeAnnotations,activeAnnotation:this.props.activeAnnotation,limitWidth:!1,didSelectSegmentIds:this.props.didSelectSegmentIds,selectedSegmentId:this.props.selectedSegmentId,annotationPositions:this.props.annotationPositions,selectedAnnotatedSegments:this.props.selectedAnnotatedSegments,isAnnotating:this.props.isAnnotating,syncIdOnClick:this.props.syncIdOnClick,textListVisible:this.props.textListVisible,showImages:this.props.pageImagesVisible,imagesBaseUrl:this.props.imagesBaseUrl,selectedWitness:this.props.selectedWitness,key:this.key,selectedSearchResult:this.props.selectedSearchResult,searchValue:this.props.searchValue,fontSize:this.props.fontSize,isSecondWindowOpen:this.props.isSecondWindowOpen,changeScrollToId:this.props.changeScrollToId,changeSyncIdOnClick:this.props.changeSyncIdOnClick,imageData:this.props.imageData,isPanelLinked:this.props.isPanelLinked,selectedImage:this.props.selectedImage,changeSelectedImage:this.props.changeSelectedImage,closeAnnotation:this.props.closeAnnotation,textAlignment:this.props.textAlignment,textAlignmentById:this.props.textAlignmentById,isPanelVisible:this.props.isPanelVisible,scrollToId:this.props.scrollToId,selectedWindow:this.selectedWindow,selectedSourceRange:this.props.selectedSourceRange,selectedTargetRange:this.props.selectedTargetRange,changeSelectedRange:this.props.changeSelectedRange,searchResults:this.props.searchResults,showTableContent:this.props.showTableContent,selectedText:this.props.text,condition:this.props.condition,selectedMedia:this.props.selectedMedia,MediaInterval:this.props.MediaInterval})):i.a.createElement("div",{key:this.key})];return i.a.createElement(q.a,{sx:{bgcolor:"navbar.main",color:"texts.main"},className:v()(pn.a.textDetail,_e.a.flex,_e.a.flexColumn),key:this.key,ref:this.ref},i.a.createElement(na,null),i.a.createElement(Dt.a,null),i.a.createElement(l.a,{loaded:!this.props.loading,zIndex:5}),i.a.createElement(q.a,{style:{display:"flex",height:"100%",width:"100%"}},i.a.createElement(q.a,{className:v()(pn.a.textContainer,_e.a.flex)},this.props.loading?i.a.createElement("div",null):n),i.a.createElement(hn.a,{direction:"left",in:this.props.showTableContent,container:this.ref.current,unmountOnExit:!0,mountOnEnter:!0},i.a.createElement(q.a,{sx:{position:"absolute",height:"100%",minWidth:"50%",right:0}},i.a.createElement(sa,null)))))}}])&&qa(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),r}(i.a.Component),n(89));function Ja(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function Xa(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ja(Object(n),!0).forEach((function(t){var r,o;r=e,o=n[t=t],t in r?Object.defineProperty(r,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[t]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ja(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Za(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||el(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function el(e,t){var n;if(e)return"string"==typeof e?tl(e,t):"Map"===(n="Object"===(n=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?tl(e,t):void 0}function tl(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function nl(e){return[e.start,e.length].join("-")}var rl=null,ol=Object(a.connect)((function(e){var t=Object(b.gb)(e),n=e.data.loadingWitnesses||e.data.loadingAnnotations,r=Object(b.Y)(e),o=b.V(e);if(n)return{text:null,witnesses:null,baseWitness:null,annotations:null,loading:n,paginated:null,pageImagesVisible:!0,annotatedText:null,selectedAnnotatedSegments:null,annotationPositions:null,activeAnnotations:null,activeAnnotation:null,user:t,textListVisible:r,fontSize:u.a,textAlignmentById:o};var i,a,l,c=Object(b.G)(e),s={},f=(c&&(i=Object(b.mb)(e,c.id),a=Object(b.n)(e,c.id)),Object(b.C)(e)),d={},p=[],h=null,m=Object(b.h)(e),y=[],g={},v=[],w="",x=Object(b.A)(e),O=!1,E=!1,S=Object(b.W)(e);if(i&&c&&e.data.witnessAnnotationsById.hasOwnProperty(i.id)){s=Object(b.bb)(e,c.id),h=((l=(T=Object(b.K)(e,c.id))?Object(b.ib)(e,T):l)||(l=i).id,l.id!==i.id&&(O=!0,E=Object(b.wb)(e)),Ya.d(e,l.id)),g=(T=Za(Ya.c(e,l,i),2))[0],p=T[1];if(h&&(d=function(e,t){if(e===Ua&&t===Qa&&e.version===$a)return Ga;for(var n={},r={},o=0;o<t.length;o++)!function(o){var i=t[o],a=(o=Za(e.getPositionOfAnnotation(i),2))[0],l=o[1];if(null!=a)if(0===l){if(i.isInsertion){if(o=nl(i),o=r[o])return o.map((function(e){return n[e].push(i)}));a=sn.c+a}i.isDeletion&&0<i.length&&(a=sn.b+a),i.type===In.a.pageBreak&&(a=sn.e+a),i.type===In.a.lineBreak&&(a=sn.d+a),void 0===n[a]&&(n[a]=[]),-1===n[a].indexOf(i)&&n[a].push(i)}else{for(var c=[],s=a;s<a+l;s++)void 0===n[s]&&(n[s]=[]),-1===n[s].indexOf(i)&&n[s].push(i),c.push(s);i.isInsertion&&(o=nl(i),r[o]=c)}}(o);return Qa=t,Ga=n,$a=(Ua=e).version,n}(h,Object.values(p))),m&&h&&(m=rl&&rl.id===l.id?m:h.getAnnotation(m.start,m.length))&&(y=h.segmentsForAnnotation(m)),l&&a&&h){var T=h.getAnnotationsOfType(In.a.pageBreak)||{},j=null;l.id!==a.id&&(j=Object(b.m)(e,i.id,In.a.pageBreak,a.id));for(var I=0,A=(v=function(e,t){var n=[];if(wr()(e,(function(e){return n.push(e.start)})),n=n.sort((function(e,t){return e-t})),t){var r=[];if(wr()(t,(function(e){return r.push(e.start)})),r=r.sort((function(e,t){return e-t})),0===n.length)return r;if(n.length/r.length<.9)for(var o=n[n.length-1],i=0,a=r.length;i<a;i++){var l=r[i];o<l&&n.push(l)}console.log(n)}return n}(T,j)).length;I<A;I++){var P=v[I];(P=h.segmentAtOriginalPosition(P))instanceof jn.a?v[I]=P.start:P instanceof Number&&(v[I]=P)}O&&(w="/static/images/texts/"+c.name+"/"+l.source.name+"/")}}rl=l;T=b.x(e),j=b.sb(e);var k=b.U(e),C=b.Q(e),R=b.M(e),_=(b.J(e),b.t(e)),B=b.ub(e),N=b.p(e);return{text:c,witnesses:s,workingWitness:i,baseWitness:a,annotations:p,loading:n,paginated:O,pageImagesVisible:E,annotatedText:h,selectedAnnotatedSegments:y,annotationPositions:d,activeAnnotations:Xa({},g),activeAnnotation:m,pageBreaks:v,imagesBaseUrl:w,user:t,textListVisible:r,selectedWitness:l,selectedSearchResult:f,searchValue:x,fontSize:S,isSecondWindowOpen:B,isAnnotating:b.rb(e),textAlignment:k,textAlignmentById:o,scrollToId:T,syncIdOnClick:C,selectedWindow:R,selectedSourceRange:Object(b.E)(e),selectedTargetRange:Object(b.F)(e),searchResults:Object(b.y)(e,x),showTableContent:Object(b.N)(e),selectedMedia:_,MediaInterval:Object(b.u)(e),condition:N&&j&&B,isPanelLinked:j}}),null,(function(e,t,n){function r(e,t,n){var r=[],o=[],i=[];(e=f[e])&&(r=e.filter((function(e){return e.type===In.a.variant})),o=e.filter((function(e){return e.type===In.a.pageBreak})),i=e.filter((function(e){return e.type===In.a.lineBreak}))),e=pt()(r.concat(o,i),u.annotations,(function(e,t){return e.toString()==t.toString()})),o=null,o=0<e.length?e[0]:r&&0<r.length?(i=function(e){for(var t=null,n=0;n<e.length;n++){var r=e[n];(!t||r.length>t.length)&&(t=r)}return t}(r),r=(e=Za(u.getPositionOfAnnotation(i),2))[0],e=e[1],i&&i.isInsertion&&(e=0),u.getBaseAnnotation(r,e)):u.getBaseAnnotation(t,n);s(Object(y.Rb)(o))}function o(e){return-1!==e.indexOf("i_")}function i(e){return-1!==e.indexOf("ds_")}function a(e){return-1!==e.indexOf("p_")}function l(e){return-1!==e.indexOf("l_")}function c(e){return!o(e)&&i(e)?e.substr(3):e.substr(2)}var s=t.dispatch,u=e.annotatedText,f=e.annotationPositions;return Xa(Xa(Xa({},e),n),{},{didSelectSegmentIds:function(t){if(0!==t.length){var n,r=[],a=[],l=function(e,t){var n,r,o,i,a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(a)return r=!(n=!0),{s:function(){a=a.call(e)},n:function(){var e=a.next();return n=e.done,e},e:function(e){r=!0,o=e},f:function(){try{n||null==a.return||a.return()}finally{if(r)throw o}}};if(Array.isArray(e)||(a=el(e))||t&&e&&"number"==typeof e.length)return a&&(e=a),i=0,{s:t=function(){},n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(t);try{for(l.s();!(n=l.n()).done;){var d,p,h,m=n.value;i(m)||o(m)||(d=c(m),p=u.segmentedText.segmentAtPosition(d),a.push(p),(h=f[p.start])&&(r=r.concat(h)))}}catch(t){l.e(t)}finally{l.f()}r=dt()(r,(function(e,t){return e.toString()==t.toString()}));var b,g,v=pt()(r,u.annotations,(function(e,t){return e.toString()==t.toString()})),w=function(e,t,n,r){if(0===e.length)return null;for(var o=e[0],i=(e=e[e.length-1],o.start),a=e.end,l=null,c=null,s=0;s<n.length;s++){var u=n[s],f=null,d=(p=Za(r.getPositionOfAnnotation(u),2))[0],p=p[1];-1!==t.indexOf(u)?(d&&d<i&&(i=d,l=u),(f=d+p-1)&&a<f&&(c=a=f)):a<(f=d+p-1)&&(a=f)}return{start:i,length:a-i+1,annotation:l&&c&&l===c?l:null}}(a,v,r,e.annotatedText);w?(b=u.getBaseAnnotation(w.start,w.length),null,g=w.annotation||(0<v.length?(v=u.segmentedText.segmentsInRange(w.start,w.length).reduce((function(e,t){return e+t.text}),""),e.selectedWitness||console.log("no stateProps.selectedWitness: %o",e.selectedWitness),new In.c(sn.f,function(e){var t=new xr.b(sn.f,xr.a);return e=new Or.a(e.id,e.name),new gt.a(sn.f,e,t,"",!1)}(e.text),b.start,b.length,v,In.a.variant,e.selectedWitness,e.user)):b),s(Object(y.Rb)(g))):console.warn("No range for selected segment ids: %o",t)}},selectedSegmentId:function(t){var n,d=c(t),p=d;o(t)?p=sn.c+d:i(t)?p=sn.b+d:a(t)?p=sn.e+d:l(t)&&(p=sn.d+d),f[p],""===t?e.activeAnnotation&&(n=y.Rb(null),s(n)):o(t)||i(t)||a(t)||l(t)?r(p,d,0):(n=Number(c(t)),(p=u.segmentedText.segmentAtPosition(n))&&r(p.start,p.start,p.length))},changeScrollToId:function(e){return s(y.Jb(e))},changeSyncIdOnClick:function(e){return s(y.Mb(e))},changeSelectedImage:function(e){s(y.Cc(e))},changeSelectedWindow:function(e){s(y.Lb(e))},changeSelectedRange:function(e){s(y.Kb(e))},changeShowTableContent:function(e){s(y.Oc(e))},closeAnnotation:function(){var e=y.Rb(null);s(e)}})}))(gi);function il(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}function al(e,t,n){var r,o=3<arguments.length&&void 0!==arguments[3]&&arguments[3],i=b.I(e),a=b.h(e);!a||a.isType(In.a.pageBreak)||a.isType(In.a.lineBreak)||(r=null,i&&(r=Ya.d(e,i.id)),e=b.gb(e),a&&i&&r&&e&&(a=new In.c(null,a.witness,a.end+1,0,null,n,i,e),cl(r,a)||(n=b.d(i),(e=[]).push(y.Zb(a)),e.push(y.Eb(a.uniqueId,n)),e.push(o?y.Rb(a):y.Rb(null)),t(Object($.batchActions)(e)))))}function ll(e,t,n){var r,o=e.getAnnotationsOfType(t);for(r in o)if(o.hasOwnProperty(r)&&n===o[r].start)return!0;return!1}var cl=function(e,t){return ll(e,In.a.pageBreak,t.start)||ll(e,In.a.lineBreak,t.start)},sl=(il(Wn={Escape:function(e,t){b.h(e)&&t(y.Rb(null))}},"shift-Enter",(function(e,t){al(e,t,In.a.pageBreak)})),il(Wn,"Enter",(function(e,t){al(e,t,In.a.lineBreak)})),il(Wn,"ArrowLeft",(function(e,t){var n,r,o,i=b.I(e),a=b.h(e),l=null;i&&(l=Ya.d(e,i.id)),i&&a&&l&&0!==a.start&&(n=a.start-1,(n=l.segmentAtOriginalPosition(n))&&n instanceof jn.a?o=n.start:n&&"number"==typeof n&&(l.annotationsForPosition(n),0<(r=l.segmentsForAnnotation(a)).length&&(o="number"==typeof r[0]?r[0]:r[0].start)),void 0===o?console.warn("Can't get previous segment before %o",a):(r=null,!(r=0<(a=l.annotationsForPosition(o)).length&&(r=a[0]).isDeletion&&n&&n instanceof jn.a?null:r)&&n&&n instanceof jn.a&&(a=l.getBaseAnnotation(o,n.length),l=b.mb(e,i.text.id),o=b.gb(e),a&&l&&o&&n&&(r=new In.c(sn.f,l,a.start,a.length,n.text,In.a.variant,i,o))),r&&t(y.Rb(r))))})),il(Wn,"ArrowRight",(function(e,t){var n,r,o,i=b.I(e),a=b.h(e),l=null;i&&(l=Ya.d(e,i.id)),i&&a&&l&&(a.isDeletion?(r=a.end+1,(r=l.segmentAtOriginalPosition(r))&&r instanceof jn.a&&(o=r.start)):o=("number"==typeof(r=l.segmentsForAnnotation(a))[0]?r[0]:r[0].start)+a.content.length,void 0===o?console.warn("Can't get next segment after %o",a):(r=l.annotationsForPosition(o),n=null,0<(r=a.isDeletion?r.filter((function(e){a.uniqueId,e.uniqueId})):r).length?n=r[0]:(r=l.segmentedText.segmentAtPosition(o))&&(l=l.getBaseAnnotation(o,r.length),o=b.mb(e,i.text.id),e=b.gb(e),l&&o&&e&&r&&(n=new In.c(sn.f,o,l.start,l.length,r.text,In.a.variant,i,e))),n&&t(y.Rb(n))))})),il(Wn,"shift-ArrowRight",(function(e,t){var n,r,o,i=b.I(e),a=b.h(e),l=null;i&&(l=Ya.d(e,i.id)),i&&a&&l&&(a.isDeletion||(o=("number"==typeof(o=l.segmentsForAnnotation(a))[0]?o[0]:o[0].start)+a.content.length,n=null,0<(r=l.annotationsForPosition(o)).length?n=r[0]:(r=l.segmentedText.segmentAtPosition(o))&&(l=l.getBaseAnnotation(o,r.length),o=b.mb(e,i.text.id),e=b.gb(e),l&&o&&e&&r&&(n=new In.c(sn.f,o,l.start,l.length,r.text,In.a.variant,i,e))),n&&(o=new In.c(sn.f,n.witness,a.start,a.length+n.length,a.content+n.content,a.type,a.creatorWitness,a.creatorUser),t(y.Rb(o)))))})),il(Wn,"shift-ArrowLeft",(function(e,t){var n=b.I(e),r=b.h(e),o=null;n&&(o=Ya.d(e,n.id)),n&&r&&!r.isSaved&&o&&(r.isDeletion||1!==(e=o.segmentsForAnnotation(r)).length&&(e.pop(),n=e.reduce((function(e,t){return t instanceof jn.a&&(e+=t.text),e}),""),o=new In.c(sn.f,r.witness,r.start,n.length,n,r.type,r.creatorWitness,r.creatorUser),t(y.Rb(o))))})),Wn);function ul(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function fl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ul(Object(n),!0).forEach((function(t){var r,o;r=e,o=n[t=t],t in r?Object.defineProperty(r,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[t]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ul(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var dl=Object(a.connect)((function(e){var t=b.ub(e),n=b.t(e);return{state:e,selectedText:b.G(e),isSecondWindowOpen:t,Media:n}}),null,(function(e,t,n){return fl(fl({dispatch:t.dispatch},n),e)}))((function(e){var t=Object(o.useRef)(null);return i.a.createElement(q.a,{ref:t,sx:{display:"flex",flexDirection:"column",width:"100%",height:e.bodyHeight,position:"relative"},onKeyDown:function(t){var n=e.state,r=e.dispatch;t=function(e){var t=e.key;return e.shiftKey?"shift-"+t:t}(t),sl.hasOwnProperty(t)&&sl[t](n,r)}},i.a.createElement(ft.a,{size:e.isSecondWindowOpen&&e.selectedText?"50%":"100%",pane1Style:{display:"flex",justifyContent:"center"},resizerStyle:{display:e.isSecondWindowOpen?"block":"none"},onDragFinished:function(e){0<e&&window.dispatchEvent(new Event("resize"))}},i.a.createElement(ut,null,i.a.createElement(ol,null)),e.isSecondWindowOpen&&e.selectedText?i.a.createElement(ut,null,i.a.createElement(vr,null)):i.a.createElement("div",null)),e.Media.isPanelVisible&&i.a.createElement(ut,null,i.a.createElement(it,null)))})),pl=n(1101),hl=n(1102),ml=n(1123),yl=n(1098),bl=n(1096),gl=(ce=n(991),n.n(ce));function vl(){return i.a.createElement("div",{id:"annotation-portal",className:gl.a.annotation_portal})}var wl=n(1081),xl=n(1082),Ol=n(1083),El=n(1084);function Sl(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Tl=Object(a.connect)((function(e){var t,n,r=b.G(e),o=b.H(e);return r&&(b.bb(e,r.id),t=(t=b.K(e,r.id))?b.ib(e,t):b.mb(e,r.id)),o&&(b.cb(e,o.id),n=(n=b.L(e,o.id))?b.jb(e,n):b.nb(e,o.id)),-1===!e.user.userId&&(user=e.user),{selectedText:r,selectedWitness:t,selectedText2:o,selectedWitness2:n,title:b.fb(e,"header.title"),page:e.page,isAnnotating:b.rb(e),isSecondWindowOpen:b.ub(e),theme:b.eb(e),isPanelLinked:b.sb(e),textListIsVisible:b.Y(e),isPanelVisible:b.tb(e)}}),(function(e){return{onChangedTextWidth:function(t){e(y.Yb(t))},onChangedTextListVisible:function(t){e(y.Xb(t))},changeIsAnnotating:function(t){e(y.Hb(t)),!1===t&&(t=y.Rb(null),e(t),e(y.Rb(null)))},onChangeWindowOpen:function(t){e(y.Qc(t))},onChangePanelLink:function(t){e(y.Ib(t))}}}))((function(e){function t(e,t){"clickaway"!==t&&l(!1)}var n=[Re.a.listContainer],r=(u.f,u.e,function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||function(e,t){var n;if(e)return"string"==typeof e?Sl(e,t):"Map"===(n="Object"===(n=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Sl(e,t):void 0}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(Object(o.useState)(!1),2)),a=r[0],l=r[1];return u.b,e.textListWidth,e.textListIsVisible?n.push(Re.a.showListContainer):n.push(Re.a.hideListContainer),r="calc(100vh - "+J.a.headerHeight+")",n=[{icon:i.a.createElement(wl.a,{htmlColor:e.isAnnotating?"#ff7961":void 0}),name:"Annotate",condition:e.isAnnotating,function:function(){return e.changeIsAnnotating(!e.isAnnotating)}},{icon:i.a.createElement(xl.a,{htmlColor:e.isPanelLinked?"#ff7961":void 0}),name:"Link Panel",condition:e.isPanelLinked,function:function(){return e.onChangePanelLink(!e.isPanelLinked)}},{icon:i.a.createElement(Ol.a,null),name:"Share",function:function(){var t=e.selectedText,n=e.selectedText2,r=e.selectedWitness,o=e.selectedWitness2,i=n&&o?window.location.origin+"/texts/".concat(t.id,"/witnesses/").concat(null==r?void 0:r.id,"/texts2/").concat(n.id,"/witnesses2/").concat(o.id):window.location.origin+"/texts/".concat(t.id,"/witnesses/").concat(null==r?void 0:r.id);navigator.clipboard.writeText(i).then().catch((function(e){return console.log(e.message)})).finally((function(){return l(!0)}))}},{icon:i.a.createElement(El.a,{htmlColor:e.isSecondWindowOpen?"#ff7961":void 0}),name:"Split Window",condition:e.isSecondWindowOpen,function:function(){return e.onChangeWindowOpen(!e.isSecondWindowOpen,140)}}],Object(o.useEffect)((function(){var e=setTimeout((function(){window.dispatchEvent(new Event("resize"))}),1e3);return function(){return clearTimeout(e)}}),[e.textListIsVisible]),i.a.createElement("div",{className:v()(Re.a.interface,_e.a.flex)},i.a.createElement(Pe,null),i.a.createElement(dl,{bodyHeight:r}),i.a.createElement(vl,null),i.a.createElement(pl.a,{ariaLabel:"SpeedDial basic",sx:{position:"absolute",bottom:60,right:16},icon:i.a.createElement(hl.a,null)},n.map((function(e){return i.a.createElement(ml.a,{key:e.name,icon:e.icon,tooltipTitle:e.name,onClick:e.function,open:e.condition})}))),i.a.createElement(yl.a,{open:a,autoHideDuration:6e3,onClose:t},i.a.createElement(bl.a,{onClose:t,severity:"success",sx:{width:"100%"}},"The Url Copied to Clipboard !")))})),jl=(d=n(835),n.n(d)),Il=(On=n(994),n.n(On)),Al=n(1104),Pl=n(1092),kl=n(1124),Cl=n(1125),Rl=(c=n(997),n.n(c));n(1097),n(1094),gi=n(995),Wn=n.n(gi),ce=n(996);function _l(e){var t=e.setFiltered,n=void 0===(e=e.featureText)?[]:e;return Object(o.useEffect)((function(){t(n)}),[]),i.a.createElement(Gt.a,{direction:{md:"row",xs:"column"},justifyContent:"space-around",alignItems:{md:"center"},gap:2,mx:{md:3},sx:{boxShadow:3,padding:2}},i.a.createElement(re.a,null,"Filter"),i.a.createElement(q.a,{flex:1},i.a.createElement(Bl,{handleChange:function(e){t(e.target.value)}})))}Wn.a,n.n(ce).a;var Bl=function(e){return e=e.handleChange,i.a.createElement(Tt.a,{id:"search-bar",className:"text",onInput:e,label:"Title",variant:"outlined",placeholder:"Search...",size:"small"})},Nl=n(1086),Wl=n.p+"b81eedeb7a90a13b48c4a1185a58ca30.png";function Ll(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Dl(){return i.a.createElement(Ne.a,{sx:Ll({marginTop:"calc(10% + 60px)",width:"100%",position:"fixed",bottom:0},"width","100%"),component:"footer",square:!0,variant:"outlined"},i.a.createElement(Gt.a,{sx:{width:"100%",position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",bottom:0}},i.a.createElement(q.a,{sx:Ll({height:"100%",display:"flex",background:"#292826",width:"100%",alignItems:"center",justifyContent:"center"},"height",55)},i.a.createElement(re.a,{textAlign:"center",variant:"h6",fontSize:{md:"20px",xs:"10px"},textTransform:"capitalize",color:"white"},"Our Trusted partner"),i.a.createElement("img",{src:Wl,alt:"indrajala logo",style:{objectFit:"contain",maxHeight:"100%",marginLeft:"40px"}}))))}function Hl(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ml=function(e,t){var n=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||function(e,t){var n;if(e)return"string"==typeof e?Hl(e,t):"Map"===(n="Object"===(n=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Hl(e,t):void 0}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(Object(o.useState)(1),2),r=n[0],i=n[1],a=Math.ceil(e.length/t);return{next:function(){i((function(e){return Math.min(e+1,a)}))},prev:function(){i((function(e){return Math.max(e-1,1)}))},jump:function(e){var t=Math.max(1,e);i((function(e){return Math.min(t,a)}))},currentData:function(){var n=(r-1)*t;return e.slice(n,n+t)},currentPage:r,maxPage:a}};function zl(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||function(e,t){var n;if(e)return"string"==typeof e?ql(e,t):"Map"===(n="Object"===(n=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ql(e,t):void 0}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ql(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}d=i.a.memo((function(e){var t=((e=e.Textdata).activeText,e.detail),n=(e=zl(Object(o.useState)(1),2))[0],r=e[1],a=(e=zl(Object(o.useState)([]),2))[0],l=e[1],c=(e=zl(Object(o.useState)(!1),2))[0],s=e[1],u=(e=zl(Object(o.useState)(""),2))[0],f=(e=e[1],Math.ceil(a.length/4)),d=Ml(a,4)||[],p=i.a.useCallback((function(){s((function(e){return!e}))}),[]),h=i.a.useRef(null);return Object(o.useEffect)((function(){var e=[];e=null!==u?null==t?void 0:t.filter((function(e){return""===u||u===[]?e:e.title.includes(u)})):t;l(e.sort((function(e,t){return(null==e?void 0:e.order)-(null==t?void 0:t.order)})))}),[u,t]),i.a.createElement(Gt.a,{sx:{height:"100vh"}},i.a.createElement(q.a,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",height:"4rem"},m:4},i.a.createElement("h3",{className:Il.a.title,mx:3},i.a.createElement(H.a,{id:"library"})),i.a.createElement(nt.a,{onClick:p},i.a.createElement(Rl.a,null))),i.a.createElement(De.a,{in:c},i.a.createElement(_l,{setFiltered:e})),i.a.createElement(Al.a,{sx:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"}},4<a.length&&i.a.createElement(Pl.a,{count:f,size:"small",page:n,variant:"outlined",shape:"rounded",onChange:function(e,t){r(t),d.jump(t)},sx:{alignSelf:"flex-end",marginTop:2}}),i.a.createElement(q.a,{mt:2,py:1,display:"flex"},i.a.createElement(Nl.a.div,{layout:!0},i.a.createElement(Gt.a,{sx:{flexWrap:"wrap",gap:1},pb:2,direction:"row",className:Il.a.list,ref:h},d.currentData().map((function(e,t){return i.a.createElement(q.a,{key:e.id||"filteredData-".concat(t),sx:{width:"auto",scrollSnapAlign:"start"}},i.a.createElement(qo.a,{title:e.description},i.a.createElement(Nl.a.div,{animate:{opacity:1},initial:{opacity:0},exit:{opacity:0},layout:!0},i.a.createElement(jl.a,{to:"/texts/".concat(e.text),style:{textDecoration:"none"}},i.a.createElement(kl.a,{sx:{cursor:"pointer",textDecoration:"none"},elevation:3,key:e.id},i.a.createElement(Cl.a,null,i.a.createElement(re.a,{gutterBottom:!0,variant:"h6",textAlign:"center",textTransform:"capitalize",fontWeight:"bold",width:"max-content"},T(e.title))))))))})))))),i.a.createElement(Dl,null))}));var Vl=Object(a.connect)((function(e){return-1===!e.user.userId&&e.user,{text:b.db(e),title:b.fb(e,"header.title"),Textdata:b.ab(e)}}),(function(e){return{onChangedTextWidth:function(t){e(y.Yb(t))},onChangedTextTitle:function(t){e(y.Ec(t))},dispatch:e}}))(d),Fl=n(1095),Ul=n(1103);function Ql(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function Gl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ql(Object(n),!0).forEach((function(t){var r,o;r=e,o=n[t=t],t in r?Object.defineProperty(r,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[t]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ql(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function $l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n(1002);var Kl=[{annotationId:"234241weq",annotationContent:"sad",voteCount:20},{annotationId:"12312weq",annotationContent:"happy",voteCount:40}],Yl=Object(a.connect)((function(e){return console.log(e),{user:"hi"}}))((function(e){var t=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||function(e,t){var n;if(e)return"string"==typeof e?$l(e,t):"Map"===(n="Object"===(n=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?$l(e,t):void 0}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(i.a.useState(Kl),2),n=t[0],r=t[1];return i.a.createElement(q.a,{sx:{display:"flex",flexDirection:"column",gap:2,marginTop:2}},n.map((function(e,t){return i.a.createElement(q.a,{sx:{display:"flex",alignItems:"center"},key:e.annotationId},i.a.createElement(Fl.a,{badgeContent:e.voteCount,color:"primary"},i.a.createElement(Ul.a,{label:e.annotationContent,onClick:function(){var t,o;t=e.annotationId,o=n.map((function(e){return e.annotationId===t?Gl(Gl({},e),{},{voteCount:e.voteCount+1}):e})),r(o)}})))})))})),Jl=function(){return i.a.createElement(Vl,null)},Xl=function(){return i.a.createElement(Tl,null)},Zl=function(){return i.a.createElement(Yl,null)},ec=function(){return i.a.createElement("h3",null,"404")},tc=["page","direction"];function nc(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],0<=t.indexOf(n)||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(e),i=0;i<o.length;i++)n=o[i],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}t.default=Object(a.connect)((function(e){var t=e.page;return e.direction,{page:t,isLoading:!nc(e,tc).data.loadedInitialData}}))((function(e){var t=e.page;return e.isLoading,i.a.createElement(r[t],null)}))},735:function(e,t,n){e.exports={"green-tint":"#88af8e","blue-tint":"#024279","active-button":"#00746b",mainTint:"#024279",activeButton:"#00746b",inlineWidth:"280px",annotationControls:"AnnotationControls---annotationControls",annotationContent:"AnnotationControls---annotationContent",subTitle:"AnnotationControls---subTitle",title:"AnnotationControls---title",sectionHeading:"AnnotationControls---sectionHeading",text:"AnnotationControls---text",padding:"AnnotationControls---padding",arrowTop:"AnnotationControls---arrowTop",arrowLeft:"AnnotationControls---arrowLeft",arrowRight:"AnnotationControls---arrowRight",inline:"AnnotationControls---inline",arrow:"AnnotationControls---arrow",arrowDs:"AnnotationControls---arrowDs",nothingSelected:"AnnotationControls---nothingSelected",anonymousMessage:"AnnotationControls---anonymousMessage",noNotes:"AnnotationControls---noNotes",breakButtons:"AnnotationControls---breakButtons"}},742:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(2);function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||function(e,t){var n;if(e)return"string"==typeof e?i(e,t):"Map"===(n="Object"===(n=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function a(e,t){var n=(i=o(Object(r.useState)((function(){return n=e,r=t,(n=JSON.parse(localStorage.getItem(n)))||r;var n,r})),2))[0],i=i[1];return Object(r.useEffect)((function(){localStorage.setItem(e,JSON.stringify(n))}),[n]),[n,i]}},745:function(e,t,n){e.exports={"green-tint":"#88af8e","blue-tint":"#024279","active-button":"#00746b",mainTint:"#024279",activeButton:"#00746b",save:"Button---save",cancel:"Button---cancel",buttonContainer:"Button---buttonContainer"}},756:function(e,t,n){e.exports={"green-tint":"#88af8e","blue-tint":"#024279","active-button":"#00746b","header-height":"40px",mainTint:"#024279",activeButton:"#00746b",headerHeight:"40px",header:"Header---header",logo:"Header---logo",navigationButton:"Header---navigationButton",loginButton:"Header---loginButton",ButtonText:"Header---ButtonText",buttonLink:"Header---buttonLink",controls:"Header---controls"}},758:function(e,t,n){e.exports={"green-tint":"#88af8e","blue-tint":"#024279","active-button":"#00746b",mainTint:"#024279",activeButton:"#00746b"}},793:function(e,t,n){e.exports={"green-tint":"#88af8e","blue-tint":"#024279","active-button":"#00746b",mainTint:"#024279",activeButton:"#00746b",textList:"TextList---textList",textListRow:"TextList---textListRow",selectedRow:"TextList---selectedRow",textNameRow:"TextList---textNameRow",textName:"TextList---textName",highlight:"TextList---highlight",searchResults:"TextList---searchResults",searchResult:"TextList---searchResult",selectedSearchResult:"TextList---selectedSearchResult",searchTotal:"TextList---searchTotal",textListLoader:"TextList---textListLoader",searching:"TextList---searching",loadMore:"TextList---loadMore"}},811:function(e,t,n){e.exports={"green-tint":"#88af8e","blue-tint":"#024279","active-button":"#00746b",mainTint:"#024279",activeButton:"#00746b",button_group_menu:"TextDetailHeading---button_group_menu"}},812:function(e,t,n){e.exports={"green-tint":"#88af8e","blue-tint":"#024279","active-button":"#00746b",mainTint:"#024279",activeButton:"#00746b",selectVersion:"SelectVersion---selectVersion",selectEmpty:"SelectVersion---selectEmpty",selectOptions:"SelectVersion---selectOptions","styled-select":"SelectVersion---styled-select"}},818:function(e,t,n){e.exports={textlist:"TextList---textlist",open:"TextList---open"}},823:function(e,t,n){e.exports={"green-tint":"#88af8e","blue-tint":"#024279","active-button":"#00746b",mainTint:"#024279",activeButton:"#00746b",textDetail:"TextDetail---textDetail",textContainer:"TextDetail---textContainer",tableContent:"TextDetail---tableContent"}},825:function(e,t,n){e.exports={"green-tint":"#88af8e","blue-tint":"#024279","active-button":"#00746b",mainTint:"#024279",activeButton:"#00746b",paddingSide:"20px",maxWidth:"600px",text:"Text---text",syncIdClass:"Text---syncIdClass",textFirstRow:"Text---textFirstRow",textLine:"Text---textLine",textline:"Text---textline",limitWidth:"Text---limitWidth",textContainer:"Text---textContainer",N_annotation:"Text---N_annotation",V_annotation:"Text---V_annotation",Q_annotation:"Text---Q_annotation",Q_annotation_double:"Text---Q_annotation_double",P_annotation:"Text---P_annotation",selectedAnnotation:"Text---selectedAnnotation",removedByAnnotation:"Text---removedByAnnotation",insertion:"Text---insertion",highlight:"Text---highlight",activeHighlight:"Text---activeHighlight",lineBreak:"Text---lineBreak",pageBreak:"Text---pageBreak",selectedRangelight:"Text---selectedRangelight",selectedRangeDark:"Text---selectedRangeDark",selectedImage:"Text---selectedImage",mediaInterval:"Text---mediaInterval"}},826:function(e,t,n){e.exports={"green-tint":"#88af8e","blue-tint":"#024279","active-button":"#00746b",mainTint:"#024279",activeButton:"#00746b",inlineWidth:"280px",annotationControls:"SplitText---annotationControls",annotationContent:"SplitText---annotationContent",subTitle:"SplitText---subTitle",title:"SplitText---title",sectionHeading:"SplitText---sectionHeading",text:"SplitText---text",padding:"SplitText---padding",arrowTop:"SplitText---arrowTop",arrowLeft:"SplitText---arrowLeft",arrowRight:"SplitText---arrowRight",inline:"SplitText---inline",arrow:"SplitText---arrow",arrowDs:"SplitText---arrowDs",nothingSelected:"SplitText---nothingSelected",anonymousMessage:"SplitText---anonymousMessage",noNotes:"SplitText---noNotes",breakButtons:"SplitText---breakButtons",splitText:"SplitText---splitText",splitTextRowContent:"SplitText---splitTextRowContent",splitTextRow:"SplitText---splitTextRow",pechaImage:"SplitText---pechaImage",image:"SplitText---image",controlsPlaceholder:"SplitText---controlsPlaceholder",hide:"SplitText---hide",pageNumber:"SplitText---pageNumber","image-loading":"SplitText---image-loading"}},828:function(e,t,n){e.exports={"green-tint":"#88af8e","blue-tint":"#024279","active-button":"#00746b",mainTint:"#024279",activeButton:"#00746b",annotationDetail:"AnnotationDetail---annotationDetail",active:"AnnotationDetail---active",annotationHeader:"AnnotationDetail---annotationHeader",activeIcon:"AnnotationDetail---activeIcon",editing:"AnnotationDetail---editing",contentOptions:"AnnotationDetail---contentOptions",actionButtons:"AnnotationDetail---actionButtons",edit:"AnnotationDetail---edit",editImage:"AnnotationDetail---editImage",save:"AnnotationDetail---save",cancel:"AnnotationDetail---cancel"}},853:function(e,t,n){var r={".":738,"./":738,"./index":738,"./index.js":738};function o(e){return e=i(e),n(e)}function i(e){if(n.o(r,e))return r[e];throw(e=new Error("Cannot find module '"+e+"'")).code="MODULE_NOT_FOUND",e}o.keys=function(){return Object.keys(r)},o.resolve=i,(e.exports=o).id=853},860:function(e,t,n){e.exports={textsSearchContainer:"TextsSearch---textsSearchContainer",textsSearch:"TextsSearch---textsSearch",minify:"TextsSearch---minify"}},878:function(e,t,n){e.exports={container:"LoadMore---container"}},879:function(e,t,n){e.exports={tab:"TextListTab---tab",showTab:"TextListTab---showTab",hideTab:"TextListTab---hideTab"}},880:function(e,t,n){e.exports={"green-tint":"#88af8e","blue-tint":"#024279","active-button":"#00746b",mainTint:"#024279",activeButton:"#00746b",Resources:"Sidebar---Resources",ResourceDetail:"Sidebar---ResourceDetail",optionlist:"Sidebar---optionlist","css-heg063-MuiTabs-flexContainer":"Sidebar---css-heg063-MuiTabs-flexContainer",listContainer:"Sidebar---listContainer",sidebar:"Sidebar---sidebar",menu_title:"Sidebar---menu_title",sidebar_header:"Sidebar---sidebar_header"}},881:function(e,t,n){},883:function(e,t,n){},889:function(e,t,n){e.exports={Dictionary:"ResourceOption---Dictionary"}},894:function(e,t,n){e.exports={container:"Editor---container",interface:"Editor---interface",listContainer:"Editor---listContainer",showListContainer:"Editor---showListContainer",hideListContainer:"Editor---hideListContainer"}},925:function(e,t,n){e.exports={time_stamp:"Chapters---time_stamp",active_stamp:"Chapters---active_stamp",dot:"Chapters---dot",image:"Chapters---image",chapter_info:"Chapters---chapter_info",topic:"Chapters---topic",startTime:"Chapters---startTime"}},933:function(e,t,n){e.exports={Resizer:"resizerStyle---Resizer",horizontal:"resizerStyle---horizontal",vertical:"resizerStyle---vertical",disabled:"resizerStyle---disabled"}},959:function(e,t,n){e.exports={fontSize:"FontSize---fontSize"}},961:function(e,t,n){e.exports={highlight:"SearchStyle---highlight",searchListItem:"SearchStyle---searchListItem"}},972:function(e,t,n){e.exports={shareContainer:"Sharebutton---shareContainer",shareButton:"Sharebutton---shareButton",facebookButton:"Sharebutton---facebookButton",whatsappButton:"Sharebutton---whatsappButton"}},973:function(e,t,n){e.exports={voteBtn:"Vote---voteBtn",number:"Vote---number",voteContainer:"Vote---voteContainer"}},975:function(e,t,n){e.exports={heading:"AnnotationControlsHeading---heading",title:"AnnotationControlsHeading---title",button:"AnnotationControlsHeading---button"}},976:function(e,t,n){e.exports={"green-tint":"#88af8e","blue-tint":"#024279","active-button":"#00746b",mainTint:"#024279",activeButton:"#00746b",button:"AddButton---button"}},977:function(e,t,n){e.exports={"green-tint":"#88af8e","blue-tint":"#024279","active-button":"#00746b",mainTint:"#024279",activeButton:"#00746b",editorContainer:"NoteEditor---editorContainer",textEditor:"NoteEditor---textEditor"}},978:function(e,t,n){e.exports={question:"QuestionView---question",threadLink:"QuestionView---threadLink"}},979:function(e,t,n){e.exports={name:"AnswerView---name",answer:"AnswerView---answer"}},980:function(e,t,n){e.exports={"green-tint":"#88af8e","blue-tint":"#024279","active-button":"#00746b",mainTint:"#024279",activeButton:"#00746b",editorContainer:"QuestionEditor---editorContainer",textEditor:"QuestionEditor---textEditor"}},981:function(e,t,n){e.exports={loading:"QuestionsLoading---loading"}},982:function(e,t,n){e.exports={"green-tint":"#88af8e","blue-tint":"#024279","active-button":"#00746b",mainTint:"#024279",activeButton:"#00746b",note:"Note---note",header:"Note---header",info:"Note---info",content:"Note---content",delete:"Note---delete"}},983:function(e,t,n){e.exports={button:"Button---button",buttonNoBezel:"Button---buttonNoBezel",active:"Button---active",leftAlign:"Button---leftAlign",title:"Button---title",icon:"Button---icon"}},984:function(e,t,n){e.exports={"green-tint":"#88af8e","blue-tint":"#024279","active-button":"#00746b",mainTint:"#024279",activeButton:"#00746b",accessory:"Accessory---accessory"}},985:function(e,t,n){e.exports={"green-tint":"#88af8e","blue-tint":"#024279","active-button":"#00746b",mainTint:"#024279",activeButton:"#00746b",header:"AnnotationControlsHeader---header",Anotation_closeBtn:"AnnotationControlsHeader---Anotation_closeBtn",edit:"AnnotationControlsHeader---edit"}},988:function(e,t,n){e.exports={highlight:"SearchStyle---highlight",searchListItem:"SearchStyle---searchListItem"}},989:function(e,t,n){e.exports={TableContent:"TableOfContent---TableContent"}},991:function(e,t,n){e.exports={annotation_portal:"AnnotationPortal---annotation_portal"}},994:function(e,t,n){e.exports={title:"HomePage---title",list:"HomePage---list"}}}]);