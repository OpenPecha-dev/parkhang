(window.webpackJsonpparkhang=window.webpackJsonpparkhang||[]).push([[5],{1017:function(e,t,n){e.exports={button_group_menu:"textDetailHeading---button_group_menu"}},1018:function(e,t,n){e.exports={"green-tint":"#88af8e","blue-tint":"#024279","active-button":"#00746b",mainTint:"#024279",activeButton:"#00746b",selectVersion:"SelectVersion---selectVersion",selected:"SelectVersion---selected","styled-select":"SelectVersion---styled-select"}},1019:function(e,t,n){e.exports={textlist:"TextList---textlist",open:"TextList---open",listToggelBtn:"TextList---listToggelBtn"}},1020:function(e,t,n){e.exports={"green-tint":"#88af8e","blue-tint":"#024279","active-button":"#00746b",mainTint:"#024279",activeButton:"#00746b",paddingSide:"20px",maxWidth:"600px",text:"Text2---text",textFirstRow:"Text2---textFirstRow",textLine:"Text2---textLine",limitWidth:"Text2---limitWidth",textContainer:"Text2---textContainer",annotation:"Text2---annotation",selectedAnnotation:"Text2---selectedAnnotation",removedByAnnotation:"Text2---removedByAnnotation",insertion:"Text2---insertion",highlight:"Text2---highlight",activeHighlight:"Text2---activeHighlight",lineBreak:"Text2---lineBreak",pageBreak:"Text2---pageBreak",syncIdClass:"Text2---syncIdClass",selectedRange:"Text2---selectedRange"}},1021:function(e,t,n){e.exports={"green-tint":"#88af8e","blue-tint":"#024279","active-button":"#00746b",mainTint:"#024279",activeButton:"#00746b",inlineWidth:"280px",annotationControls:"SplitText---annotationControls",annotationContent:"SplitText---annotationContent",subTitle:"SplitText---subTitle",title:"SplitText---title",sectionHeading:"SplitText---sectionHeading",text:"SplitText---text",padding:"SplitText---padding",arrowTop:"SplitText---arrowTop",arrowLeft:"SplitText---arrowLeft",arrowRight:"SplitText---arrowRight",inline:"SplitText---inline",arrow:"SplitText---arrow",arrowDs:"SplitText---arrowDs",nothingSelected:"SplitText---nothingSelected",anonymousMessage:"SplitText---anonymousMessage",noNotes:"SplitText---noNotes",breakButtons:"SplitText---breakButtons",splitText2:"SplitText---splitText2",splitTextRowContent:"SplitText---splitTextRowContent",splitTextRow:"SplitText---splitTextRow",pechaImage:"SplitText---pechaImage",controlsPlaceholder:"SplitText---controlsPlaceholder",pageNumber:"SplitText---pageNumber",hightlighter:"SplitText---hightlighter",pulse:"SplitText---pulse"}},1022:function(e,t,n){e.exports={"green-tint":"#88af8e","blue-tint":"#024279","active-button":"#00746b",mainTint:"#024279",activeButton:"#00746b",textDetail2:"TextDetail---textDetail2",textContainer:"TextDetail---textContainer"}},1046:function(e,t,n){"use strict";n.r(t);var r=n(939),i=n.n(r),o=(r=n(947),n.n(r)),a=n(0),l=n.n(a),s=(r=n(33),n(307)),c=n.n(s),u=(s=n(936),n.n(s)),d=(s=n(1017),n.n(s)),f=(s=n(83),n.n(s)),p=(s=n(43),n(1018)),h=n.n(p),g=(n(91),n(916));p=n(1044);function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,i=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw i}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?y(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var b=Object(a.memo)(Object(s.c)(Object(p.a)((function(e){return{root:{minWidth:60,padding:0,textAlign:"center",fontWeight:"bold"},selectEmpty:{paddingLeft:"6px",backgroundColor:"transparent"},select:{color:"black","&:not([multiple]) option":{backgroundColor:"#eee"}}}}))((function(e){var t=[],n="",r=e.classes,i="",o=m(Object(a.useState)(1),2),s=o[0],c=o[1],u=[h.a.selectOptions];return e.witnesses&&(t=e.witnesses.map((function(e){return e})),e.activeWitness&&(i=e.witnesses.findIndex((function(t){return t.id===e.activeWitness.id}))),u=[h.a.tab],t.sort((function(e,t){return e.isWorking?-1:t.isWorking?1:e.isBase?-1:t.isBase?1:0})),t=t.sort((function(e,t){return e.id-t.id}))),Object(a.useEffect)((function(){!f()(t)&&0<=s&&e.onSelectedWitness(t[s])}),[s]),f()(t)&&!e.activeWitness?null:l.a.createElement(g.a,{onChange:function(e){return c(e.target.value)},className:h.a.selectVersion,value:i,label:"Version2",classes:{root:r.selectEmpty,select:r.select}},t.map((function(t,r){var i;return t.id===(null==(i=e.activeWitness)?void 0:i.id)&&u.push(h.a.selected),n=t.source.name,t.isWorking&&(n="en"===e.intl.locale?"User"===e.user.name?"Working":"My Edition":"མཉམ་འབྲེལ་པར་མ།"),l.a.createElement("option",{key:"versionSelect2-".concat(r),value:r,className:u,styles:{textAlign:"center"}},n)})))})))),v=n(938),x=n(941),S=(s=n(61),n.n(s)),O=(p=n(1019),n.n(p)),T=n(918),w=n(928),E=n(926),I=n(1045);function A(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,i=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw i}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return j(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?j(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function j(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var P=n(2),k=n(6),R=(n(11),n(64),Object(r.connect)((function(e){var t=k.z(e),n=k.x(e,t),r=k.D(e),i=!1,o=e.data.texts;return{texts:o=0<t.length?null===n?(i=!0,[]):o.filter((function(e){return n.hasOwnProperty(e.id)})):o,selectedText:Object(k.H)(e),searchTerm:t,searchResults:n,selectedSearchResult:r,searching:i}}),(function(e){return{onSelectedText:function(t){e(P.Lc(t))}}}))((function(e){var t=Object(a.useRef)(e.texts),n=(o=A(Object(a.useState)(t.current),2))[0],r=o[1],i=e.onSelectedText,o=e.selectedText,s=(e=A(Object(a.useState)(!1),2))[0],c=e[1],u=(e=(o||n[0]).name,Object(a.useRef)(new x.c({fixedHeight:!0,defaultHeight:30}))),d=[O.a.textlist];return l.a.createElement(T.a,{onClickAway:function(){return c(!1)}},l.a.createElement("div",{style:{position:"relative"}},l.a.createElement(w.a,{onClick:function(){c((function(e){return!e})),!1===s&&d.push(O.a.open)},className:O.a.listToggelBtn,component:"div",sx:{overflow:"hidden",textOverflow:"ellipsis",width:"10rem"}},l.a.createElement(E.a,{noWrap:!0},e)),s&&l.a.createElement("div",{className:S()(d),style:{position:"absolute"}},l.a.createElement(I.a,{onChange:function(e){var i=e.target.value;r(t.current),""!==i&&null!==i&&(e=n.filter((function(e){return e.name.includes(i)})),r(e))},id:"standard-basic",label:"filter",variant:"standard",style:{width:"100%"}}),l.a.createElement(x.a,null,(function(e){var t=e.width;e=e.height;return l.a.createElement(x.d,{width:t,height:e,rowHeight:u.current.rowHeight,deferredMeasurementCache:u.current,rowCount:n.length,rowRenderer:function(e){var t=e.key,r=e.index,o=e.style,a=(e=e.parent,n[r]);return l.a.createElement(x.b,{key:"optionvalues-".concat(t),cache:u.current,parent:e,columnIndex:0,rowIndex:r},l.a.createElement("div",{style:o,onClick:function(){c(!1),i(a)}},l.a.createElement("span",{style:{paddingLeft:"10px"}},a.name)))}})})))))}))),_=(s=n(312),n.n(s)),C=(p=n(954),n.n(p)),N=n(929),W=n(909),L=n(931),B=n(925);function D(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function H(e){var t=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,i=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw i}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return D(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?D(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(Object(a.useState)(!1),2),n=t[0],r=t[1];return l.a.createElement(T.a,{onClickAway:function(){return r(!1)}},l.a.createElement(N.a,{onClick:function(){r((function(e){return!e}))},size:"small",variant:"text",style:{padding:0,color:"black"}},l.a.createElement(_.a,null),l.a.createElement(W.a,{in:n},l.a.createElement(L.a,{dense:!0,style:{position:"absolute",right:0,zIndex:2,top:30,backgroundColor:"#eee"}},l.a.createElement(v.a,{max:20,min:14,initialvalue:e.textFontSize,changeSize:e.onChangedFontSize}),l.a.createElement(B.a,{onClick:function(){return e.onExport()}},"Export Document",e.exportingWitness&&l.a.createElement(C.a,null)),l.a.createElement(B.a,{onClick:function(){return e.onChangePanelLink(!e.isPanelLinked)}},e.isPanelLinked&&l.a.createElement(C.a,null),"link panels")))))}s=n(953);var z=n.n(s);function F(e){return e=e.handleWindowSearch,l.a.createElement(N.a,{size:"small",variant:"text",onClick:e,style:{padding:0,color:"black"}},l.a.createElement(z.a,null))}p=n(955);var V=n.n(p);function M(e){return l.a.createElement(l.a.Fragment,{key:"right"},l.a.createElement(N.a,{onClick:function(){e.changeShowTableContent(!e.showTableContent)}},l.a.createElement(V.a,null)))}s=n(956);var U=n.n(s),Y=n(912),K=n(1049),q=n(1050),$=n(927),G=n(1047),J=n(924);function Z(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,i=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw i}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Q(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Q(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Q(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function X(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function ee(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?X(Object(n),!0).forEach((function(t){var r,i;r=e,i=n[t=t],t in r?Object.defineProperty(r,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[t]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):X(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var te=Object(r.connect)((function(e){var t,n=k.gb(e),r=k.H(e),i=[],o=(r&&(i=k.db(e,r.id),t=(t=k.K(e,r.id))?k.jb(e,t):k.nb(e,r.id)),k.Y(e)),a=Object(k.N)(e),l=k.A(e);return{witnesses:i,selectedText:r,selectedWitness:t,textListIsVisible:Object(k.Z)(e),accountOverlayVisible:Object(k.e)(e),textFontSize:o,user:n,searchValue:l,showTableContent:a,searchResults:k.y(e,l)}}),null,(function(e,t,n){var r=t.dispatch,i=e.selectedText;return ee(ee(ee({},n),e),{},{navigationButtonClicked:function(){t.dispatch(P.ac(!e.textListIsVisible))},onSelectedWitness:function(e){r(P.Nc(i.id,e.id))},onChangedFontSize:function(e){r(P.Zb(e))},changeShowTableContent:function(e){r(P.Sc(e))},searchChanged:function(e){r(P.Wb(e))},changeSelectSyncId:function(e){r(P.Rb(e))}})}))((function(e){var t=(p=Z(Object(a.useState)(""),2))[0],n=p[1],r=(p=Z(Object(a.useState)(!1),2))[0],i=p[1],o=(p=Z(Object(a.useState)(!1),2))[0],s=p[1],f=Object(a.useRef)(),p=Object(a.useRef)(),h=l.a.useRef(u()((function(t){e.searchChanged(t)}),1e3)).current,g=Object(a.useCallback)((function(e){e.preventDefault(),h(t),s(!0)}),[t]),m=Object(a.useCallback)((function(){i(!r)}),[r]);return Object(a.useEffect)((function(){!0===r&&f.current.focus(),!1===r&&h(null)}),[r]),l.a.createElement(Y.a,{direction:"column",ref:p,spacing:1,px:2,py:1,style:{background:"#f7f7f7"}}," ",l.a.createElement(Y.a,{direction:"row",spacing:1,justifyContent:"space-between"},l.a.createElement(w.a,{sx:{display:"flex",gap:2}},l.a.createElement(R,null),l.a.createElement(b,{witnesses:e.witnesses,activeWitness:e.selectedWitness,onSelectedWitness:e.onSelectedWitness,user:e.user})),l.a.createElement(K.a,{size:"small","aria-label":"small button group",sx:{position:"relative",display:"flex",alignItems:"center",justifyContent:"center",width:"fit-content",border:function(e){return"1px solid ".concat(e.palette.divider)},borderRadius:1,bgcolor:"background.paper",color:"text.secondary","& svg":{m:1.5},"& hr":{mx:.5}},className:d.a.button_group_menu},l.a.createElement(F,{handleWindowSearch:m}),l.a.createElement(H,e),l.a.createElement(M,e))),l.a.createElement(q.a,{in:r},l.a.createElement("form",{onSubmit:g},l.a.createElement(Y.a,{direction:"row",spacing:2,position:"relative"},l.a.createElement(I.a,{hiddenLabel:!0,id:"filled-hidden-label-small",inputProps:{style:{height:25,padding:"0 14px"}},style:{height:25,flex:1},fullWidth:!0,inputRef:f,value:t,onChange:function(e){return n(e.target.value)}}),l.a.createElement(N.a,{variant:"outlined",size:"small",onClick:g,style:{height:25}},"Search"),e.searchResults&&o&&l.a.createElement($.a,{sx:{position:"absolute",top:35,right:0,zIndex:10,background:"#eee",boxShadow:3}},c()(e.searchResults)&&e.searchResults.hasOwnProperty(e.selectedText.id)&&e.searchResults[e.selectedText.id].results&&(null==(p=e.searchResults[e.selectedText.id])?void 0:p.results.map((function(t,n){return l.a.createElement(G.a,{onClick:function(){var n;n=t[0],e.changeSelectSyncId(n)},sx:{cursor:"pointer","&:hover":{background:"#fff"}},key:t[0]+"listsearch"},t[1])}))),l.a.createElement(J.a,{"aria-label":"closeButton",onClick:function(){s(!1),h(null),n("")},size:"small",sx:{right:0,top:0,position:"absolute"}},l.a.createElement(U.a,{fontSize:"inherit"})))))))})),ne=(p=n(948),n.n(p)),re=(n(52),n(310)),ie=n(255),oe=(s=(n(447),n(1020)),n.n(s)),ae=n(46),le=n(62),se=(n(170),n(23)),ce=(p=n(308),n.n(p));function ue(e){return(ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function de(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,i=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw i}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return fe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?fe(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function pe(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function he(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pe(Object(n),!0).forEach((function(t){var r,i;r=e,i=n[t=t],t in r?Object.defineProperty(r,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[t]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ge(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function me(e,t){return(me=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ye(e){return(ye=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var be=function(e){var t=r;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&me(t,e);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ye(e);n=t?(n=ye(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),r=this;if(n&&("object"===ue(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==r)return r;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(r);function r(e){var t;if(this instanceof r)return(t=n.call(this,e)).state={segmentedText:e.segmentedText},t.textAlignmentById=[],t._renderedSegments=null,t._renderedHtml=null,t;throw new TypeError("Cannot call a class as a function")}return t=r,(e=[{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.setState((function(t,n){return he(he({},t),{},{segmentedText:e.segmentedText})}))}},{key:"selectedElement",value:function(e){var t=document.getSelection();t&&"Range"===t.type||this.props.selectedSegmentId(e.id)}},{key:"generateHtml",value:function(e,t){var n=this,r=t.segmentedText.segments,i='<p class="'+oe.a.textLine+'">';if(0===r.length)return{__html:i};for(var o=r[r.length-1].end+1,a=oe.a.highlight,l=oe.a.activeHighlight,s=null,c=0;c<r.length&&"break"!==function(t){var c=r[t],u=(t="",[]);if(c.start===o)return"break";var d,f=null,p=(0!==c.length&&(f="s2_"+c.start),null!=(d=e.selectedTargetRange)&&d.includes(c.start)&&u.push(oe.a.selectedRange),0<u.length&&(t='class="'+S.a.apply(void 0,u)+'"'),c.text);if(e.searchStringPositions){var h=c.start,g=h,m=(p="",a);e.selectedSearchResult&&e.selectedSearchResult.start<=g&&e.selectedSearchResult.start+e.selectedSearchResult.length>g&&(m=l);for(var y=0;y<c.text.length;y++){var b,v,x,O=c.text.charAt(y);g=h+y;s?((b=de(s,2))[0],0===y&&(p+='<span class="'+m+'">'),g===b[1]?(p+=O+"</span>",s=null):y===c.text.length-1?p+=O+"</span>":p+=O):g in e.searchStringPositions?(v=(b=de(e.searchStringPositions[g],2))[0],x=b[1],p+='<span class="'+m+'">'+O,y!==c.text.length-1&&g!==x||(p+="</span>"),g<x&&(s=[v,x])):p+=O}}null!==n.props.textAlignmentById&&(d=n.props.textAlignmentById.find((function(e){return e.TStart===c.start})))&&(i+="<span id='alignment2_"+c.start+"'><sup class="+oe.a.syncIdClass+">".concat(d.id,"</sup>")+"</span>"),i+="<span id="+f+" key="+f+" "+t+">"+p+"</span>"}(c);c++);return this._renderedSegments=r,{__html:i+="</p>"}}},{key:"shouldComponentUpdate",value:function(e,t){return t=this.generateHtml(e,t),this.props.fontSize!==e.fontSize||(!this._renderedHtml||t.__html!==this._renderedHtml.__html)&&(this._renderedHtml=t,!0)}},{key:"render",value:function(){var e=this,t=[oe.a.text],n=(0===this.props.row&&t.push(oe.a.textFirstRow),this._renderedHtml||this.generateHtml(this.props,this.state));return this._renderedHtml||(this._renderedHtml=n),l.a.createElement("div",{className:oe.a.textContainer},l.a.createElement("div",{className:S.a.apply(void 0,t),dangerouslySetInnerHTML:n,onClick:function(t){return e.selectedElement(t.target)},style:{fontSize:this.props.fontSize,cursor:"pointer"}}))}}])&&ge(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),r}(l.a.Component),ve=n(934),xe=(s=n(1021),n.n(s));function Se(e){return(Se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Oe(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function Te(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Oe(Object(n),!0).forEach((function(t){we(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Oe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function we(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ee(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,i=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw i}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Ie(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ie(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ie(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ae(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function je(e,t){return(je=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Pe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ke(e){return(ke=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Re={},_e=function(e){var t=r;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&je(t,e);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ke(e);n=t?(n=ke(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),r=this;if(n&&("object"===Se(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return Pe(r)}}(r);function r(e){var t;if(this instanceof r)return(t=n.call(this,e)).textAlignmentById=[],t.changeScrollToId=e.changeScrollToId,t.list=null,t.splitText=null,t.cache=new ie.b({fixedWidth:!0,defaultHeight:300}),t.rowRenderer=t.rowRenderer.bind(Pe(t)),t.isPanelLinked=t.props.isPanelLinked,t.activeSelection=null,t.selectedNodes=null,t._mouseDown=!1,t._activeWitness=null,t._didSetInitialScrollPosition=!1,t._modifyingSelection=!1,t.imageHeight=null,t.imageWidth=null,t.calculatedImageHeight=null,t.selectedWindow=t.props.selectedWindow,t.scrollEvent=t.scrollEvent.bind(Pe(t)),t.scrollTop=0,t;throw new TypeError("Cannot call a class as a function")}return t=r,(e=[{key:"scrollEvent",value:function(e){if(1===this.selectedWindow)return null;var t;2===this.selectedWindow&&this.isPanelLinked&&(t=[],this.textAlignmentById.map((function(e){var n=document.getElementById("s2_"+e.TStart);n&&90<n.getBoundingClientRect().top&&t.push({id:e.id,start:e.start,TStart:e.TStart,end:e.end,TEnd:e.TEnd})})),f()(t)||2===this.selectedWindow&&this.debouncedScroll(t))}},{key:"selectedListRow",value:function(e){var t=null;return e.activeAnnotation?e.splitText.getTextIndexOfPosition(e.activeAnnotation.start):t}},{key:"handleSelection",value:function(e){this._modifyingSelection?(e.stopPropagation(),this._modifyingSelection=!1):(this.activeSelection=document.getSelection(),e=null==(e=this.activeSelection)||null==(e=e.anchorNode)||null==(e=e.parentElement)?void 0:e.id,this.updateId(e),this._mouseDown||this.mouseUp())}},{key:"mouseDown",value:function(){this._mouseDown=!0}},{key:"mouseUp",value:function(){this._mouseDown=!1,this.activeSelection&&(this.activeSelection=null)}},{key:"getNodeSegmentSpan",value:function(e){for(var t=e,n=null,r=/^(i|s|ds)_/;!n&&t.parentNode;)t instanceof Element&&r.test(t.id)&&(n=t),t=t.parentNode;return n}},{key:"updateId",value:function(e){}},{key:"updateList",value:function(){var e=!(0<arguments.length&&void 0!==arguments[0])||arguments[0],t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;if(this.props.showImages&&!this.calculatedImageHeight&&this.imageHeight&&this.imageWidth&&(this.calculatedImageHeight=this.calculateImageHeight()),this.list){var n=this.list;if(e)if(null!==t)if(Array.isArray(t)){if(Array.isArray(t))for(var r=0;r<t.length;r++){var i=t[r];this.cache.clear(i)}}else this.cache.clear(t);else this.cache.clearAll(),n.measureAllRows(),n.recomputeRowHeights(0);n.forceUpdateGrid()}}},{key:"processProps",value:function(e){var t=this,n=!1;if((i=((!this.props.selectedWitness||e.selectedWitness&&e.selectedWitness.id!==this.props.selectedWitness.id)&&(this._didSetInitialScrollPosition=!(n=!0)),!e.selectedSearchResult||this.props.selectedSearchResult&&e.selectedSearchResult.start===this.props.selectedSearchResult.start&&e.selectedSearchResult.textId===this.props.selectedSearchResult.textId||(console.log("resetting scroll position from search result"),this._didSetInitialScrollPosition=!1),this.getControlsMeasurements(e)))&&(this.selectedTextIndex=i.selectedTextIndex,this.firstSelectedSegment=i.firstSelectedSegment,this.splitTextRect=i.splitTextRect,this.selectedElementId=i.selectedElementId,this.selectedElementIds=i.selectedElementIds),e.textListVisible!==this.textListVisible||e.editMenuVisible!==this.editMenuVisible)setTimeout((function(){t.textListVisible=e.textListVisible,t.editMenuVisible=e.editMenuVisible,t.updateList(!0)}),500);else if(n)this.updateList(!0);else if(this.pageBreaksChanged(this.props,e)){var r=null,i=this.selectedListRow(this.props);n=this.selectedListRow(e);if(i&&n){r=[];for(var o=n<i?n:i,a=this.props.splitText.texts.length;o<a;o++)r.push(o)}this.updateList(!0,r)}else if(this.lineBreaksChanges(this.props,e)){n=(n=this.selectedListRow(e))||this.selectedListRow(this.props),i=this.props.splitText.texts;var l=[];if(null!==n){for(var s=n,c=i.length;s<c;s++)l.push(s);this.updateList(!0,l)}}else this.props.fontSize!==e.fontSize?this.updateList(!0):this.props.activeAnnotation&&e.activeAnnotation&&this.annotationsInSameLocation(this.props.activeAnnotation,e.activeAnnotation)?this.updateList(!0,this.selectedListRow(e)):this.updateList(this.shouldResetListCache(this.props,e))}},{key:"pageBreaksChanged",value:function(e,t){return e=e.splitText.getTextsFinalPositions(),t=t.splitText.getTextsFinalPositions(),e.length!==t.length||JSON.stringify(e)!==JSON.stringify(t)}},{key:"lineBreaksChanges",value:function(e,t){var n=e.activeAnnotation,r=t.activeAnnotation,i=!1;return n&&n.isType(ANNOTATION_TYPES.lineBreak)&&t.activeAnnotations&&!t.activeAnnotations.hasOwnProperty(n.uniqueId)&&(i=!0),!(!(r&&r.isType(ANNOTATION_TYPES.lineBreak)&&e.activeAnnotations)||e.activeAnnotations.hasOwnProperty(r.uniqueId))||i}},{key:"shouldResetListCache",value:function(e,t){var n=!1;return!(e.showImages===t.showImages&&!this.pageBreaksChanged(e,t))||n}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.processProps(e)}},{key:"componentDidMount",value:function(){var e=this;this.resizeHandler=ne()((function(){e.calculatedImageHeight=null,e.updateList()}),500).bind(this),window.addEventListener("resize",this.resizeHandler),this.debouncedScroll=u()((function(t){e.changeScrollToId({id:t[0].TStart,from:2})}),1e3),this.selectionHandler=u()((function(t){e.handleSelection(t)}),200).bind(this),document.addEventListener("selectionchange",this.selectionHandler),document.addEventListener("mousedown",this.mouseDown.bind(this),!0),document.addEventListener("mouseup",this.mouseUp.bind(this),!0),this.processProps(this.props),this.componentDidUpdate()}},{key:"componentDidUpdate",value:function(e,t){var n,r,i,o,a,l=this.props.scrollToId,s=this.props.syncIdOnClick,c=(this.isPanelLinked=this.props.isPanelLinked,this.selectedWindow=this.props.selectedWindow,this.props.syncIdOnSearch||null),u=this.list,d=this.props.searchResults,f=this.props.textAlignment,p=(null==f||null==(p=f.target)?void 0:p.witness)===this.props.selectedWitness.id;((null==e?void 0:e.searchResults)!==(null==(i=this.props)?void 0:i.searchResults)||(null==e?void 0:e.syncIdOnSearch)!==(null==(i=this.props)?void 0:i.syncIdOnSearch))&&d&&c&&(n=this.props.splitText.getTextIndexOfPosition(c),setTimeout((function(){u.scrollToRow(n),setTimeout((function(){u.scrollToPosition(u.props.scrollTop-300)}),0)}),100)),1===this.selectedWindow&&1===l.from&&this.isPanelLinked&&p&&null!==l.id&&(r=this.list,this.textAlignmentById=this.props.textAlignmentById||[],this.splitText.style.scrollBehavior="smooth",f&&this.isPanelLinked&&null!==(i=null==(e=this.textAlignmentById.find((function(e){return e.start===l.id})))?void 0:e.TStart)&&(o=this.props.splitText.getTextIndexOfPosition(i),setTimeout((function(){r.scrollToRow(o),setTimeout((function(){r.scrollToPosition(r.props.scrollTop-300)}),0)}),100))),s&&null===l.from&&1===this.selectedWindow&&(p=null==(d=f.alignment.find((function(e){return s>=e.source_segment.start&&s<e.source_segment.end})))||null==(c=d.target_segment)?void 0:c.start,a=this.props.splitText.getTextIndexOfPosition(p),setTimeout((function(){u.scrollToRow(a),setTimeout((function(){u.scrollToPosition(u.props.scrollTop-300)}),0)}),100))}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousedown",this),document.removeEventListener("mouseup",this),window.removeEventListener("resize",this.resizeHandler),document.removeEventListener("selectionchange",this.selectionHandler)}},{key:"getSelectedTextIndex",value:function(){var e,t=0,n=null;return this.props.activeAnnotation?n=Ee(this.props.splitText.annotatedText.getPositionOfAnnotation(this.props.activeAnnotation),1)[0]:this.props.selectedSearchResult&&((e=this.props.splitText.annotatedText.segmentAtOriginalPosition(this.props.selectedSearchResult.start))instanceof ae.a?n=e.start:"number"==typeof e&&(n=e)),n?this.props.splitText.getTextIndexOfPosition(n):t}},{key:"getControlsMeasurements",value:function(e){if(!this.splitText)return null;var t=this.splitText,n=null,r=null,i=null,o=null,a=null,l=[],s=0;if(e.activeAnnotation){var c=e.activeAnnotation;if(null===(s=Ee(e.splitText.annotatedText.getPositionOfAnnotation(c),1)[0]))return console.warn("No startPos in getControlsMeasurements"),null;c.type===ANNOTATION_TYPES.pageBreak&&--s,c.type===ANNOTATION_TYPES.lineBreak&&--s;var u=s+c.length;0<c.length&&--u,n=e.splitText.getTextIndexOfPosition(u),o=t.getBoundingClientRect()}var d=[];if(e.selectedAnnotatedSegments&&0<e.selectedAnnotatedSegments.length){d=e.selectedAnnotatedSegments;for(var f=0;f<d.length;f++){var p=d[f];if(null===r&&p instanceof ae.a){r=p;break}}r&&(a=0===r.length&&e.activeAnnotation&&e.activeAnnotation.isInsertion?(i=idForInsertion(r),idForInsertion):(i=idForSegment(r),idForSegment))}else e.activeAnnotation&&(e.activeAnnotation.isDeletion?(c=new ae.a(s,""),i=idForDeletedSegment(c),a=idForDeletedSegment,d=[r=c]):e.activeAnnotation.isInsertion?(u=Ee(e.splitText.annotatedText.getPositionOfAnnotation(e.activeAnnotation),1)[0])&&(t=new ae.a(u,""),i=idForInsertion(t),a=idForInsertion,d=[r=t]):e.activeAnnotation.type===ANNOTATION_TYPES.pageBreak?(c=new ae.a(s+1,""),u=new ae.a(s,""),d=[r=c],l=[i=idForPageBreak(u)]):e.activeAnnotation.type===ANNOTATION_TYPES.lineBreak&&(t=new ae.a(s+1,""),c=new ae.a(s,""),d=[r=t],l=[i=idForLineBreak(c)]));if(a)for(var h=0;h<d.length;h++){var g=d[h];g instanceof ae.a&&(g=a(g),l.push(g))}return null!=n&&r&&i&&o?{selectedTextIndex:n,firstSelectedSegment:r,selectedElementId:i,splitTextRect:o,selectedElementIds:l}:null}},{key:"render",value:function(){var e=this,t=this.props,n=this.rowRenderer,r=this.cache,i=t.selectedWitness?t.selectedWitness.id:0;return a.createElement("div",{className:xe.a.splitText2,ref:function(t){return e.splitText=t},key:i},a.createElement("button",{id:"updateList2",style:{display:"none"},onClick:function(){return e.updateList(!0)}}),a.createElement(re.a,null,(function(i){var o=i.height;i=i.width;return a.createElement(x.d,{ref:function(t){return e.list=t},height:o,rowCount:t.splitText.texts.length,rowHeight:r.rowHeight,rowRenderer:n,width:i,overscanRowCount:1,deferredMeasurementCache:r,onScroll:e.scrollEvent,scrollToAlignment:"start"})})))}},{key:"getStringPositions",value:function(e,t,n){var r=this.props.splitText.annotatedText.getUniqueId();if((Re=Re.hasOwnProperty(r)?Re:we({},r,{}))[r].hasOwnProperty(t)||(Re[r]=we({},t,{})),Re[r][t].hasOwnProperty(n))return Re[r][t][n];for(var i=new ce.a,o=e.getText(),a=e.segments[0].start,l=[],s=o.indexOf(t);-1!==s;)l.push(s),s=o.indexOf(t,s+1);var c={};if(0<l.length)for(var u=i.splitGraphemes(o),d=0,f=null,p=0;p<u.length;p++){var h=u[p],g=d+(h.length-1);null!==f?f+(t.length-1)<=g&&(c[f+a]=[f+a,g+a],f=null):-1!==l.indexOf(d)?t.length===h.length?c[d+a]=[d+a,g+a]:t.length>h.length&&(f=d):f=null,d+=h.length}return Re[r][t][n]=c}},{key:"rowRenderer",value:function(e){var t=e.key,n=e.index,r=e.parent,i=(e=e.style,this.props),o=this.cache,l={},s=((s=this.props.searchValue)&&0<s.length&&i.splitText&&(l=this.getStringPositions(i.splitText.texts[n],s,n)),Te(Te({},e),{},{height:e.height+10}));return a.createElement(ie.a,{columnIndex:0,key:t,parent:r,rowIndex:n,cache:o},a.createElement("div",{key:t,style:s,ref:this.splitTextRef,id:"index2_".concat(n),className:xe.a.splitTextRow},a.createElement("div",{className:xe.a.splitTextRowContent},a.createElement(be,{segmentedText:i.splitText.texts[n],row:n,selectedSegmentId:i.selectedSegmentId,searchStringPositions:l,textAlignmentById:i.textAlignmentById,fontSize:i.fontSize,selectedSourceRange:i.selectedSourceRange,selectedTargetRange:i.selectedTargetRange,changeSelectedRange:i.changeSelectedRange}))))}}])&&Ae(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),r}(a.PureComponent),Ce=(p=n(311),n.n(p)),Ne=n(316),We=(s=n(1022),n.n(s)),Le=n(915);function Be(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(E.a,{textTransform:"uppercase"},"Table Of Content"))}p=n(196);var De=n.n(p),He=(s=n(161),n.n(s));p=n(159);var ze=n.n(p),Fe=n(160);function Ve(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Me(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function Ue(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Me(Object(n),!0).forEach((function(t){var r,i;r=e,i=n[t=t],t in r?Object.defineProperty(r,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[t]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Me(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ye,Ke,qe,$e,Ge={},Je={},Ze=function(e,t){if(!(t=k.jb(e,t)))return console.warn("no witness"),null;var n=t.text,r=k.nb(e,n.id);n=k.o(e,n.id);return r&&n?(e=(n=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,i=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw i}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Ve(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ve(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(function(e,t,n){if(Je.hasOwnProperty(t.id))return[Je[t.id].appliedAnnotations,Je[t.id].allAnnotations];t.text;var r=k.m(e,n.id),i=function(e,t,n){if(!k.qb(e,t))return{};var r=k.f(e,t);if(!r)return{};var i,o,a={};for(i in r)!r.hasOwnProperty(i)||(o=k.k(e,n,i))&&(a[o.unique_id]=o);return Qe(e,a)}(e,t.id,n.id),o=null,a={};if(t.id!==n.id){o=k.v(e,t.id);var l,s,c={};for(l in r)r.hasOwnProperty(l)&&((s=r[l]).creator_witness!==t.id||o.hasOwnProperty(s.unique_id)?s.creator_witness===t.id&&(a[s.unique_id]=s):c[s.unique_id]=s);i=Ue(Ue({},Qe(e,c)),i),r=c}return n=Qe(e,r),a=Qe(e,a),0<Object.keys(a).length&&(n=Ue(Ue({},n),a)),n=Ue(Ue({},i),n),n=ze()(n,(function(e,n){return!(t&&e.type===se.a.lineBreak&&e.creatorWitness.id!==t.id)})),k.ob(e,t.id)&&k.qb(e,t.id)&&(Je[t.id]={appliedAnnotations:i,allAnnotations:n}),[i,n]}(e,t,r),2))[0],n[1],n=function(e){return Xe[e.id]||(Xe[e.id]=Object(Fe.a)(e.content||"")),Xe[e.id]}(r),new le.g(n,Object.values(e),(function(e){return Object(Fe.a)(e).segments}),r,t)):null},Qe=function(e,t){var n,r,i={};for(n in t)t.hasOwnProperty(n)&&(r=t[n],(r=k.b(e,r))&&(i[n]=r));return i},Xe={};function et(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function tt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?et(Object(n),!0).forEach((function(t){var r,i;r=e,i=n[t=t],t in r?Object.defineProperty(r,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[t]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):et(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function nt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,i=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw i}}return o}}(e,t)||rt(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function rt(e,t){if(e){if("string"==typeof e)return it(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?it(e,t):void 0}}function it(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ot(e){return[e.start,e.length].join("-")}s=Object(r.connect)((function(e){var t,n={},r=k.Y(e),i=k.H(e),o={},a=(i&&(a=k.nb(e,i.id),n=(n=(t=k.K(e,i.id))?k.jb(e,t):n)||a),t=function(e,t){var n=null;return t&&(n=Ze(e,t))&&(Ge[t]=n),n}(e,n.id),e.data2.loadingWitnesses),l=(t&&(o=function(e,t){if(e===Ye&&t===Ke&&e.version===$e)return qe;for(var n={},r={},i=0;i<t.length;i++)!function(i){var o=t[i],a=(i=nt(e.getPositionOfAnnotation(o),2))[0],l=i[1];if(null!=a)if(0===l){if(o.isInsertion){if(i=ot(o),i=r[i])return i.map((function(e){return n[e].push(o)}));a=INSERTION_KEY+a}o.isDeletion&&0<o.length&&(a=DELETION_KEY+a),o.type===ANNOTATION_TYPES.pageBreak&&(a=PAGE_BREAK_KEY+a),o.type===ANNOTATION_TYPES.lineBreak&&(a=LINE_BREAK_KEY+a),void 0===n[a]&&(n[a]=[]),-1===n[a].indexOf(o)&&n[a].push(o)}else{for(var s=[],c=a;c<a+l;c++)void 0===n[c]&&(n[c]=[]),-1===n[c].indexOf(o)&&n[c].push(o),s.push(c);o.isInsertion&&(i=ot(o),r[i]=s)}}(i);return Ke=t,qe=n,$e=(Ye=e).version,n}(t,Object.values([]))),k.tb(e)),s=k.w(e),c=k.P(e),u=k.V(e),d=k.L(e),f=k.A(e);return{text:i,textFontSize:r,annotatedText:t,selectedWitness:n,loading:a,annotationPositions:o,isSecondWindowOpen:Object(k.vb)(e),imageData:Object(k.q)(e),isPanelLinked:l,selectedImage:Object(k.B)(e),isImagePortrait:Object(k.sb)(e),isPanelVisible:Object(k.ub)(e),scrollToId:s,syncIdOnClick:c,textAlignment:u,textAlignmentById:k.W(e),selectedWindow:d,selectedSourceRange:Object(k.E)(e),selectedTargetRange:Object(k.F)(e),showTableContent:k.N(e),searchResults:Object(k.y)(e,f),searchValue:f,syncIdOnSearch:k.R(e)}}),null,(function(e,t,n){function r(e){return-1!==e.indexOf("ds2_")}function a(e){return-1!==e.indexOf("i2_")}function l(e){return!a(e)&&r(e)?e.substr(3):e.substr(2)}var s=e.annotatedText,c=e.annotationPositions,u=t.dispatch;return tt(tt(tt({},n),e),{},{onChangedFontSize:function(e){u(P.Yb(e))},didSelectSegmentIds:function(t){if(0!==t.length){var n,u=[],d=[],f=function(e,t){var n,r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=rt(e))||t&&e&&"number"==typeof e.length)return r&&(e=r),n=0,{s:t=function(){},n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,a=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){a=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(a)throw i}}}}(t);try{for(f.s();!(n=f.n()).done;){var p,h,g,m=n.value;r(m)||a(m)||(p=l(m),h=s.segmentedText.segmentAtPosition(p),d.push(h),(g=c[h.start])&&(u=u.concat(g)))}}catch(t){f.e(t)}finally{f.f()}u=i()(u,(function(e,t){return e.toString()==t.toString()}));var y,b=o()(u,s.annotations,(function(e,t){return e.toString()==t.toString()})),v=getSegmentsRange(d,b,u,e.annotatedText);v?(y=s.getBaseAnnotation(v.start,v.length),v.annotation||0<b.length&&(b=s.segmentedText.segmentsInRange(v.start,v.length).reduce((function(e,t){return e+t.text}),""),e.selectedWitness||console.log("no stateProps.selectedWitness: %o",e.selectedWitness),new Annotation(WORKING_VERSION_ANNOTATION_ID,getTextWorkingWitness(e.text),y.start,y.length,b,ANNOTATION_TYPES.variant,e.selectedWitness,e.user))):console.warn("No range for selected segment ids: %o",t)}},changeScrollToId:function(e){return u(P.Mb(e))},changeSelectedWindow:function(e){u(P.Ob(e))},changeSelectedRange:function(e){u(P.Nb(e))},changeShowTableContent:function(e){u(P.Sc(e))},selectedSegmentId:function(t){var n=l(t),i=n;a(t)?i=INSERTION_KEY+n:r(t)?i=DELETION_KEY+n:-1!==t.indexOf("p2_")?i=PAGE_BREAK_KEY+n:-1!==t.indexOf("l2_")&&(i=LINE_BREAK_KEY+n),c[i],e.activeAnnotation&&e.activeAnnotation&&(t=P.Ub(null),u(t))}})}))((function(e){var t=Object(a.useRef)();function n(){e.changeSelectedWindow(2)}e.text&&e.text,Object(a.useEffect)((function(){var e=t.current;return e.addEventListener("mouseenter",n),function(){e.removeEventListener("mouseenter",n)}}),[]);var r=null,i=[e.annotatedText&&e.text&&!e.loading?(i=e.paginated?positionSplitter(e.pageBreaks):Object(Ne.a)(800,/^།[\s]+(?!།[\s]+)/,2,5),r=new ve.a(e.annotatedText,i),l.a.createElement(_e,{splitText:r,limitWidth:!1,selectedSegmentId:e.selectedSegmentId,annotationPositions:e.annotationPositions,selectedAnnotatedSegments:null==e?void 0:e.selectedAnnotatedSegments,selectedWitness:e.selectedWitness,key:12,fontSize:e.textFontSize,scrollToId:e.scrollToId,syncIdOnClick:e.syncIdOnClick,textAlignment:e.textAlignment,textAlignmentById:e.textAlignmentById,isPanelLinked:e.isPanelLinked,changeScrollToId:e.changeScrollToId,selectedWindow:e.selectedWindow,selectedSourceRange:e.selectedSourceRange,selectedTargetRange:e.selectedTargetRange,changeSelectedRange:e.changeSelectedRange,searchResults:e.searchResults,searchValue:e.searchValue,selectedText:e.text,syncIdOnSearch:e.syncIdOnSearch})):l.a.createElement("div",{key:"key-".concat(Math.random())})];return He.a.ThirdWindowHeight,l.a.createElement(w.a,{ref:t,className:We.a.textDetail2,style:{height:"100%",flex:1}},l.a.createElement(te,null),l.a.createElement(Ce.a,{loaded:!e.loading}),l.a.createElement(w.a,{style:{display:"flex",height:"100%",width:"100%",position:"relative"}},l.a.createElement(w.a,{style:{flex:1},className:S()(We.a.textContainer2,De.a.flex)},e.loading?l.a.createElement("div",null):i),l.a.createElement(Le.a,{direction:"left",in:e.showTableContent,container:t.current},l.a.createElement(w.a,{sx:{position:"absolute",height:"100%",minWidth:"50%",right:0,background:"#eee",borderLeft:"1px solid gray",padding:2}},l.a.createElement(Be,null)))))})),t.default=s},934:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(170);function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n(62);var o=function(){function e(t,n){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.annotatedText=t,this.splitter=n,this._texts=null,this._textsId=null,this._textsFinalPositions=[]}var t,n;return t=e,(n=[{key:"texts",get:function(){if(!this.annotatedText)return[];if(!this._texts||this._textsId!==this.annotatedText.getUniqueId()){this._textsFinalPositions=[];var e=this.annotatedText.segmentedText,t=e.getText(),n=this.splitter(t).filter((function(e){return 0!==e}));if(0===n.length)return this._textsFinalPositions.push(t.length),[e];n[n.length-1]+1<t.length&&n.push(t.length-1);for(var i=e.segments,o=0,a=[],l=0;l<n.length;l++){var s=n[l],c=(s=e.indexOfSegmentAtPosition(s-1),void 0);c=l==n.length-1?i.slice(o):i.slice(o,s+1),c=new r.a(c);a.push(c),o=s+1,0<=s&&(c=i[s],this._textsFinalPositions.push(c.end))}this._texts=a.filter((function(e){return 0<e.segments.length})),this._textsId=this.annotatedText.getUniqueId()}return this._texts||[]}},{key:"getTextsFinalPositions",value:function(){return this.texts,this._textsFinalPositions}},{key:"getTextIndexOfPosition",value:function(e){for(var t=this.getTextsFinalPositions(),n=0,r=null,i=0;i<t.length;i++){var o=t[i];if(n<=e&&e<=o){r=i;break}n=o}return null===r&&(console.warn("no index for position %d",e),r=t.length-1),r}}])&&i(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}()},938:function(e,t,n){"use strict";var r=n(0),i=n.n(r),o=(r=n(940),n.n(r));t.a=function(e){var t=e.max,n=e.min,r=e.initialvalue,a=void 0===(e=e.changeSize)?function(e){return console.log(e)}:e;return i.a.createElement("div",{className:o.a.inputRanges},i.a.createElement("span",{style:{fontSize:13,top:"-5px"}},"ཀ"),i.a.createElement("input",{type:"range",style:{width:"70%"},className:o.a.inputRange,min:n,max:t,step:1,smooth:"yes",value:r,onChange:function(e){return a(parseInt(e.target.value))}}),i.a.createElement("span",{style:{fontSize:18,top:"-10px"}},"ཀ"))}},940:function(e,t,n){e.exports={inputRanges:"Slider---inputRanges",inputRange:"Slider---inputRange"}}}]);