(window.webpackJsonpparkhang=window.webpackJsonpparkhang||[]).push([[5],{1018:function(e,t,n){e.exports={button_group_menu:"textDetailHeading---button_group_menu"}},1019:function(e,t,n){e.exports={"green-tint":"#88af8e","blue-tint":"#024279","active-button":"#00746b",mainTint:"#024279",activeButton:"#00746b",selectVersion:"SelectVersion---selectVersion",selected:"SelectVersion---selected","styled-select":"SelectVersion---styled-select"}},1020:function(e,t,n){e.exports={textlist:"TextList---textlist",open:"TextList---open",listToggelBtn:"TextList---listToggelBtn"}},1021:function(e,t,n){e.exports={"green-tint":"#88af8e","blue-tint":"#024279","active-button":"#00746b",mainTint:"#024279",activeButton:"#00746b",paddingSide:"20px",maxWidth:"600px",text:"Text2---text",textFirstRow:"Text2---textFirstRow",textLine:"Text2---textLine",limitWidth:"Text2---limitWidth",textContainer:"Text2---textContainer",annotation:"Text2---annotation",selectedAnnotation:"Text2---selectedAnnotation",removedByAnnotation:"Text2---removedByAnnotation",insertion:"Text2---insertion",highlight:"Text2---highlight",activeHighlight:"Text2---activeHighlight",lineBreak:"Text2---lineBreak",pageBreak:"Text2---pageBreak",syncIdClass:"Text2---syncIdClass",selectedRange:"Text2---selectedRange"}},1022:function(e,t,n){e.exports={"green-tint":"#88af8e","blue-tint":"#024279","active-button":"#00746b",mainTint:"#024279",activeButton:"#00746b",inlineWidth:"280px",annotationControls:"SplitText---annotationControls",annotationContent:"SplitText---annotationContent",subTitle:"SplitText---subTitle",title:"SplitText---title",sectionHeading:"SplitText---sectionHeading",text:"SplitText---text",padding:"SplitText---padding",arrowTop:"SplitText---arrowTop",arrowLeft:"SplitText---arrowLeft",arrowRight:"SplitText---arrowRight",inline:"SplitText---inline",arrow:"SplitText---arrow",arrowDs:"SplitText---arrowDs",nothingSelected:"SplitText---nothingSelected",anonymousMessage:"SplitText---anonymousMessage",noNotes:"SplitText---noNotes",breakButtons:"SplitText---breakButtons",splitText2:"SplitText---splitText2",splitTextRowContent:"SplitText---splitTextRowContent",splitTextRow:"SplitText---splitTextRow",pechaImage:"SplitText---pechaImage",controlsPlaceholder:"SplitText---controlsPlaceholder",pageNumber:"SplitText---pageNumber",hightlighter:"SplitText---hightlighter",pulse:"SplitText---pulse"}},1023:function(e,t,n){e.exports={"green-tint":"#88af8e","blue-tint":"#024279","active-button":"#00746b",mainTint:"#024279",activeButton:"#00746b",textDetail2:"TextDetail---textDetail2",textContainer:"TextDetail---textContainer"}},1047:function(e,t,n){"use strict";n.r(t);var r=n(940),i=n.n(r),o=(r=n(948),n.n(r)),a=n(0),s=n.n(a),l=(r=n(33),n(307)),c=n.n(l),u=(l=n(937),n.n(l)),d=(l=n(1018),n.n(l)),f=(l=n(61),n.n(l)),p=(l=n(43),n(1019)),h=n.n(p),g=(n(91),n(314)),y=n(917);p=n(1045);function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,i=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return b(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?b(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var v=Object(a.memo)(Object(l.c)(Object(p.a)((function(e){return{root:{minWidth:60,padding:0,textAlign:"center",fontWeight:"bold"},selectEmpty:{paddingLeft:"6px",backgroundColor:"transparent"},select:{color:"black","&:not([multiple]) option":{backgroundColor:"#eee"}}}}))((function(e){var t,n="",r=e.classes,i=(e.witnesses.findIndex((function(t){return t.id===e.activeWitness.id})),m(Object(g.a)("selectedWitness2",0),2)),o=i[0],l=i[1],c=[h.a.selectOptions];return e.witnesses&&(t=e.witnesses.map((function(e){return e})),c=[h.a.tab],t.sort((function(e,t){return e.isWorking?-1:t.isWorking?1:e.isBase?-1:t.isBase?1:0})),t=t.sort((function(e,t){return e.id-t.id}))),Object(a.useEffect)((function(){0<e.witnesses.length&&e.onSelectedWitness(t[o])}),[o]),s.a.createElement(y.a,{onChange:function(e){return l(e.target.value)},className:h.a.selectVersion,defaultValue:o,label:"Version2",classes:{root:r.selectEmpty,select:r.select}},t.map((function(t,r){return t.id===e.activeWitness.id&&c.push(h.a.selected),n=t.source.name,t.isWorking&&(n="en"===e.intl.locale?"User"===e.user.name?"Working":"My Edition":"མཉམ་འབྲེལ་པར་མ།"),s.a.createElement("option",{key:"versionSelect2-".concat(r),value:r,className:c},n)})))})))),x=n(939),S=n(942),O=(l=n(1020),n.n(l)),w=n(919),T=n(929),E=n(927),I=n(1046);function P(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,i=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return A(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?A(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var j=n(2),k=n(6),R=(n(11),n(64),Object(r.connect)((function(e){var t=k.y(e),n=k.w(e,t),r=k.C(e),i=!1,o=e.data.texts;return{texts:o=0<t.length?null===n?(i=!0,[]):o.filter((function(e){return n.hasOwnProperty(e.id)})):o,selectedText:Object(k.G)(e),searchTerm:t,searchResults:n,selectedSearchResult:r,searching:i}}),(function(e){return{onSelectedText:function(t){e(j.Pc(t))}}}))((function(e){var t=Object(a.useRef)(e.texts),n=(o=P(Object(a.useState)(t.current),2))[0],r=o[1],i=e.onSelectedText,o=e.selectedText,l=(e=P(Object(a.useState)(!1),2))[0],c=e[1],u=(e=(o||n[0]).name,Object(a.useRef)(new S.c({fixedHeight:!0,defaultHeight:30}))),d=[O.a.textlist];return s.a.createElement(w.a,{onClickAway:function(){return c(!1)}},s.a.createElement("div",{style:{position:"relative"}},s.a.createElement(T.a,{onClick:function(){c((function(e){return!e})),!1===l&&d.push(O.a.open)},className:O.a.listToggelBtn,component:"div",sx:{overflow:"hidden",textOverflow:"ellipsis",width:"10rem"}},s.a.createElement(E.a,{noWrap:!0},e)),l&&s.a.createElement("div",{className:f()(d),style:{position:"absolute"}},s.a.createElement(I.a,{onChange:function(e){var i=e.target.value;r(t.current),""!==i&&null!==i&&(e=n.filter((function(e){return e.name.includes(i)})),r(e))},id:"standard-basic",label:"filter",variant:"standard",style:{width:"100%"}}),s.a.createElement(S.a,null,(function(e){var t=e.width;e=e.height;return s.a.createElement(S.d,{width:t,height:e,rowHeight:u.current.rowHeight,deferredMeasurementCache:u.current,rowCount:n.length,rowRenderer:function(e){var t=e.key,r=e.index,o=e.style,a=(e=e.parent,n[r]);return s.a.createElement(S.b,{key:"optionvalues-".concat(t),cache:u.current,parent:e,columnIndex:0,rowIndex:r},s.a.createElement("div",{style:o,onClick:function(){c(!1),i(a)}},s.a.createElement("span",{style:{paddingLeft:"10px"}},a.name)))}})})))))}))),_=(p=n(312),n.n(p)),C=(l=n(955),n.n(l)),W=n(930),N=n(910),L=n(932),B=n(926);function D(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function H(e){var t=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,i=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return D(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?D(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(Object(a.useState)(!1),2),n=t[0],r=t[1];return s.a.createElement(w.a,{onClickAway:function(){return r(!1)}},s.a.createElement(W.a,{onClick:function(){r((function(e){return!e}))},size:"small",variant:"text",style:{padding:0,color:"black"}},s.a.createElement(_.a,null),s.a.createElement(N.a,{in:n},s.a.createElement(L.a,{dense:!0,style:{position:"absolute",right:0,zIndex:2,top:30,backgroundColor:"#eee"}},s.a.createElement(x.a,{max:20,min:14,initialvalue:e.textFontSize,changeSize:e.onChangedFontSize}),s.a.createElement(B.a,{onClick:function(){return e.onExport()}},"Export Document",e.exportingWitness&&s.a.createElement(C.a,null)),s.a.createElement(B.a,{onClick:function(){return e.onChangePanelLink(!e.isPanelLinked)}},e.isPanelLinked&&s.a.createElement(C.a,null),"link panels")))))}p=n(954);var z=n.n(p);function F(e){return e=e.handleWindowSearch,s.a.createElement(W.a,{size:"small",variant:"text",onClick:e,style:{padding:0,color:"black"}},s.a.createElement(z.a,null))}l=n(956);var V=n.n(l);function M(e){return s.a.createElement(s.a.Fragment,{key:"right"},s.a.createElement(W.a,{onClick:function(){e.changeShowTableContent(!e.showTableContent)}},s.a.createElement(V.a,null)))}var U=n(913),Y=n(1050),K=n(1051),q=n(928),G=n(1048);function $(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,i=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return J(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?J(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function J(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Z(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function X(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(n),!0).forEach((function(t){var r,i;r=e,i=n[t=t],t in r?Object.defineProperty(r,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[t]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Z(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Q=Object(r.connect)((function(e){var t,n=k.hb(e),r=k.G(e),i=[],o=(r&&(i=k.eb(e,r.id),t=(t=k.J(e,r.id))?k.kb(e,t):k.ob(e,r.id)),k.Z(e)),a=Object(k.M)(e),s=k.z(e);return{witnesses:i,selectedText:r,selectedWitness:t,textListIsVisible:Object(k.ab)(e),accountOverlayVisible:Object(k.e)(e),textFontSize:o,user:n,searchValue:s,showTableContent:a,searchResults:k.x(e,s)}}),null,(function(e,t,n){var r=t.dispatch,i=e.selectedText;return X(X(X({},n),e),{},{navigationButtonClicked:function(){t.dispatch(j.dc(!e.textListIsVisible))},onSelectedWitness:function(e){r(j.Rc(i.id,e.id))},onChangedFontSize:function(e){r(j.cc(e))},changeShowTableContent:function(e){r(j.Wc(e))},searchChanged:function(e){r(j.Zb(e))},changeSelectSyncId:function(e){r(j.Ub(e))}})}))((function(e){var t=(p=$(Object(a.useState)(""),2))[0],n=p[1],r=(p=$(Object(a.useState)(!1),2))[0],i=p[1],o=(p=$(Object(a.useState)(!1),2))[0],l=p[1],f=Object(a.useRef)(),p=Object(a.useRef)(),h=s.a.useRef(u()((function(t){e.searchChanged(t)}),1e3)).current,g=Object(a.useCallback)((function(e){e.preventDefault(),n(""),h(t),l(!0)}),[t]),y=Object(a.useCallback)((function(){i(!r)}),[r]);return Object(a.useEffect)((function(){!0===r&&f.current.focus(),!1===r&&h(null)}),[r]),s.a.createElement(U.a,{direction:"column",ref:p,spacing:1,px:2,py:1,style:{background:"#f7f7f7"}}," ",s.a.createElement(U.a,{direction:"row",spacing:1,justifyContent:"space-between"},s.a.createElement(T.a,{sx:{display:"flex",gap:2}},s.a.createElement(R,null),s.a.createElement(v,{witnesses:e.witnesses,activeWitness:e.selectedWitness,onSelectedWitness:e.onSelectedWitness,user:e.user})),s.a.createElement(Y.a,{size:"small","aria-label":"small button group",sx:{position:"relative",display:"flex",alignItems:"center",justifyContent:"center",width:"fit-content",border:function(e){return"1px solid ".concat(e.palette.divider)},borderRadius:1,bgcolor:"background.paper",color:"text.secondary","& svg":{m:1.5},"& hr":{mx:.5}},className:d.a.button_group_menu},s.a.createElement(F,{handleWindowSearch:y}),s.a.createElement(H,e),s.a.createElement(M,e))),s.a.createElement(K.a,{in:r},s.a.createElement("form",{onSubmit:g},s.a.createElement(U.a,{direction:"row",spacing:2,position:"relative"},s.a.createElement(I.a,{hiddenLabel:!0,id:"filled-hidden-label-small",inputProps:{style:{height:25,padding:"0 14px"}},style:{height:25,flex:1},fullWidth:!0,inputRef:f,value:t,onChange:function(e){return n(e.target.value)}}),s.a.createElement(W.a,{variant:"outlined",size:"small",onClick:g,style:{height:25}},"Search"),e.searchResults&&o&&s.a.createElement(q.a,{sx:{position:"absolute",top:84,zIndex:10,background:"#eee",boxShadow:3}},c()(e.searchResults)&&e.searchResults.hasOwnProperty(e.selectedText.id)&&e.searchResults[e.selectedText.id].results&&(null==(p=e.searchResults[e.selectedText.id])?void 0:p.results.map((function(t,n){return s.a.createElement(G.a,{onClick:function(){return n=t[0],e.changeSelectSyncId(n),void l(!1);var n},sx:{cursor:"pointer","&:hover":{background:"#fff"}},key:t[0]+"listsearch"},t[1])}))))))))})),ee=(p=n(949),n.n(p)),te=(n(52),n(310)),ne=n(255),re=(l=(n(448),n(1021)),n.n(l)),ie=n(46),oe=n(62),ae=(n(170),n(23)),se=(p=n(308),n.n(p));function le(e){return(le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ce(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,i=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ue(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ue(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ue(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function de(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function fe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?de(Object(n),!0).forEach((function(t){var r,i;r=e,i=n[t=t],t in r?Object.defineProperty(r,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[t]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):de(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function pe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function he(e,t){return(he=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ge(e){return(ge=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ye=function(e){var t=r;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&he(t,e);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ge(e);n=t?(n=ge(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),r=this;if(n&&("object"===le(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==r)return r;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(r);function r(e){var t;if(this instanceof r)return(t=n.call(this,e)).state={segmentedText:e.segmentedText},t.textAlignmentById=[],t._renderedSegments=null,t._renderedHtml=null,t;throw new TypeError("Cannot call a class as a function")}return t=r,(e=[{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.setState((function(t,n){return fe(fe({},t),{},{segmentedText:e.segmentedText})}))}},{key:"selectedElement",value:function(e){var t=document.getSelection();t&&"Range"===t.type||this.props.selectedSegmentId(e.id)}},{key:"generateHtml",value:function(e,t){var n=this,r=t.segmentedText.segments,i='<p class="'+re.a.textLine+'">';if(0===r.length)return{__html:i};for(var o=r[r.length-1].end+1,a=re.a.highlight,s=re.a.activeHighlight,l=null,c=0;c<r.length&&"break"!==function(t){var c=r[t],u=(t="",[]);if(c.start===o)return"break";var d,p=null,h=(0!==c.length&&(p="s2_"+c.start),null!=(d=e.selectedTargetRange)&&d.includes(c.start)&&u.push(re.a.selectedRange),0<u.length&&(t='class="'+f.a.apply(void 0,u)+'"'),c.text);if(e.searchStringPositions){var g=c.start,y=g,m=(h="",a);e.selectedSearchResult&&e.selectedSearchResult.start<=y&&e.selectedSearchResult.start+e.selectedSearchResult.length>y&&(m=s);for(var b=0;b<c.text.length;b++){var v,x,S,O=c.text.charAt(b);y=g+b;l?((v=ce(l,2))[0],0===b&&(h+='<span class="'+m+'">'),y===v[1]?(h+=O+"</span>",l=null):b===c.text.length-1?h+=O+"</span>":h+=O):y in e.searchStringPositions?(x=(v=ce(e.searchStringPositions[y],2))[0],S=v[1],h+='<span class="'+m+'">'+O,b!==c.text.length-1&&y!==S||(h+="</span>"),y<S&&(l=[x,S])):h+=O}}null!==n.props.textAlignmentById&&(d=n.props.textAlignmentById.find((function(e){return e.TStart===c.start})))&&(i+="<span id='alignment2_"+c.start+"'><sup class="+re.a.syncIdClass+">".concat(d.id,"</sup>")+"</span>"),i+="<span id="+p+" key="+p+" "+t+">"+h+"</span>"}(c);c++);return this._renderedSegments=r,{__html:i+="</p>"}}},{key:"shouldComponentUpdate",value:function(e,t){return t=this.generateHtml(e,t),this.props.fontSize!==e.fontSize||(!this._renderedHtml||t.__html!==this._renderedHtml.__html)&&(this._renderedHtml=t,!0)}},{key:"render",value:function(){var e=this,t=[re.a.text],n=(0===this.props.row&&t.push(re.a.textFirstRow),this._renderedHtml||this.generateHtml(this.props,this.state));return this._renderedHtml||(this._renderedHtml=n),s.a.createElement("div",{className:re.a.textContainer},s.a.createElement("div",{className:f.a.apply(void 0,t),dangerouslySetInnerHTML:n,onClick:function(t){return e.selectedElement(t.target)},style:{fontSize:this.props.fontSize}}))}}])&&pe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),r}(s.a.Component),me=n(935),be=(l=n(1022),n.n(l));function ve(e){return(ve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xe(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function Se(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xe(Object(n),!0).forEach((function(t){Oe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Oe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function we(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,i=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Te(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Te(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Te(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ee(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ie(e,t){return(Ie=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Pe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ae(e){return(Ae=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var je={},ke=function(e){var t=r;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ie(t,e);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ae(e);n=t?(n=Ae(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),r=this;if(n&&("object"===ve(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return Pe(r)}}(r);function r(e){var t;if(this instanceof r)return(t=n.call(this,e)).textAlignmentById=[],t.changeSyncIdOnScroll2=e.changeSyncIdOnScroll2,t.list=null,t.splitText=null,t.cache=new ne.b({fixedWidth:!0,defaultHeight:300}),t.rowRenderer=t.rowRenderer.bind(Pe(t)),t.isPanelLinked=t.props.isPanelLinked,t.activeSelection=null,t.selectedNodes=null,t._mouseDown=!1,t._activeWitness=null,t._didSetInitialScrollPosition=!1,t._modifyingSelection=!1,t.imageHeight=null,t.imageWidth=null,t.calculatedImageHeight=null,t.selectedWindow=t.props.selectedWindow,t.scrollEvent=t.scrollEvent.bind(Pe(t)),t.scrollTop=0,t;throw new TypeError("Cannot call a class as a function")}return t=r,(e=[{key:"scrollEvent",value:function(e){if(1===this.selectedWindow)return null;var t;2===this.selectedWindow&&this.isPanelLinked&&(t=[],this.textAlignmentById.map((function(e){var n=document.getElementById("s2_"+e.start);n&&102<n.getBoundingClientRect().top&&t.push({id:e.id,start:e.start,target:e.TStart})})),0<t.length&&this.changeSyncIdOnScroll2(t[0].target))}},{key:"selectedListRow",value:function(e){var t=null;return e.activeAnnotation?e.splitText.getTextIndexOfPosition(e.activeAnnotation.start):t}},{key:"handleSelection",value:function(e){this._modifyingSelection?(e.stopPropagation(),this._modifyingSelection=!1):(this.activeSelection=document.getSelection(),e=null==(e=this.activeSelection)||null==(e=e.anchorNode)||null==(e=e.parentElement)?void 0:e.id,this.updateId(e),this._mouseDown||this.mouseUp())}},{key:"mouseDown",value:function(){this._mouseDown=!0}},{key:"mouseUp",value:function(){this._mouseDown=!1,this.activeSelection&&(this.activeSelection=null)}},{key:"getNodeSegmentSpan",value:function(e){for(var t=e,n=null,r=/^(i|s|ds)_/;!n&&t.parentNode;)t instanceof Element&&r.test(t.id)&&(n=t),t=t.parentNode;return n}},{key:"updateId",value:function(e){}},{key:"updateList",value:function(){var e=!(0<arguments.length&&void 0!==arguments[0])||arguments[0],t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;if(this.props.showImages&&!this.calculatedImageHeight&&this.imageHeight&&this.imageWidth&&(this.calculatedImageHeight=this.calculateImageHeight()),this.list){var n=this.list;if(e)if(null!==t)if(Array.isArray(t)){if(Array.isArray(t))for(var r=0;r<t.length;r++){var i=t[r];this.cache.clear(i)}}else this.cache.clear(t);else this.cache.clearAll(),n.measureAllRows(),n.recomputeRowHeights(0);n.forceUpdateGrid()}}},{key:"processProps",value:function(e){var t=this,n=!1;if((i=((!this.props.selectedWitness||e.selectedWitness&&e.selectedWitness.id!==this.props.selectedWitness.id)&&(this._didSetInitialScrollPosition=!(n=!0)),!e.selectedSearchResult||this.props.selectedSearchResult&&e.selectedSearchResult.start===this.props.selectedSearchResult.start&&e.selectedSearchResult.textId===this.props.selectedSearchResult.textId||(console.log("resetting scroll position from search result"),this._didSetInitialScrollPosition=!1),this.getControlsMeasurements(e)))&&(this.selectedTextIndex=i.selectedTextIndex,this.firstSelectedSegment=i.firstSelectedSegment,this.splitTextRect=i.splitTextRect,this.selectedElementId=i.selectedElementId,this.selectedElementIds=i.selectedElementIds),e.textListVisible!==this.textListVisible||e.editMenuVisible!==this.editMenuVisible)setTimeout((function(){t.textListVisible=e.textListVisible,t.editMenuVisible=e.editMenuVisible,t.updateList(!0)}),500);else if(n)this.updateList(!0);else if(this.pageBreaksChanged(this.props,e)){var r=null,i=this.selectedListRow(this.props);n=this.selectedListRow(e);if(i&&n){r=[];for(var o=n<i?n:i,a=this.props.splitText.texts.length;o<a;o++)r.push(o)}this.updateList(!0,r)}else if(this.lineBreaksChanges(this.props,e)){n=(n=this.selectedListRow(e))||this.selectedListRow(this.props),i=this.props.splitText.texts;var s=[];if(null!==n){for(var l=n,c=i.length;l<c;l++)s.push(l);this.updateList(!0,s)}}else this.props.fontSize!==e.fontSize?this.updateList(!0):this.props.activeAnnotation&&e.activeAnnotation&&this.annotationsInSameLocation(this.props.activeAnnotation,e.activeAnnotation)?this.updateList(!0,this.selectedListRow(e)):this.updateList(this.shouldResetListCache(this.props,e))}},{key:"pageBreaksChanged",value:function(e,t){return e=e.splitText.getTextsFinalPositions(),t=t.splitText.getTextsFinalPositions(),e.length!==t.length||JSON.stringify(e)!==JSON.stringify(t)}},{key:"lineBreaksChanges",value:function(e,t){var n=e.activeAnnotation,r=t.activeAnnotation,i=!1;return n&&n.isType(ANNOTATION_TYPES.lineBreak)&&t.activeAnnotations&&!t.activeAnnotations.hasOwnProperty(n.uniqueId)&&(i=!0),!(!(r&&r.isType(ANNOTATION_TYPES.lineBreak)&&e.activeAnnotations)||e.activeAnnotations.hasOwnProperty(r.uniqueId))||i}},{key:"shouldResetListCache",value:function(e,t){var n=!1;return!(e.showImages===t.showImages&&!this.pageBreaksChanged(e,t))||n}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.processProps(e)}},{key:"componentDidMount",value:function(){var e=this;this.resizeHandler=ee()((function(){e.calculatedImageHeight=null,e.updateList()}),500).bind(this),window.addEventListener("resize",this.resizeHandler),this.selectionHandler=u()((function(t){e.handleSelection(t)}),200).bind(this),document.addEventListener("selectionchange",this.selectionHandler),document.addEventListener("mousedown",this.mouseDown.bind(this),!0),document.addEventListener("mouseup",this.mouseUp.bind(this),!0),this.processProps(this.props),this.componentDidUpdate()}},{key:"componentDidUpdate",value:function(e,t){var n,r,i,o,a,s,l=this,c=(this.selectedWindow=this.props.selectedWindow,this.props.syncIdOnSearch||null),u=this.list,d=this.props.searchResults,f=this.props.textAlignment,p=f.target===this.props.selectedWitness.id;((null==e?void 0:e.searchResults)!==(null==(a=this.props)?void 0:a.searchResults)||(null==e?void 0:e.syncIdOnSearch)!==(null==(a=this.props)?void 0:a.syncIdOnSearch))&&d&&c&&(n=this.props.splitText.getTextIndexOfPosition(c),setTimeout((function(){u.scrollToRow(n),setTimeout((function(){u.scrollToPosition(u.props.scrollTop-300)}),0)}),100)),1===this.selectedWindow&&this.isPanelLinked&&p&&(e=this.props.syncIdOnScroll,r=this.props.syncIdOnClick,this.isPanelLinked=this.props.isPanelLinked,i=this.list,this.textAlignmentById=this.props.textAlignmentById,this.splitText.style.scrollBehavior="smooth",f&&this.isPanelLinked&&(null!==e?(o=this.props.splitText.getTextIndexOfPosition(e),setTimeout((function(){i.scrollToRow(o),setTimeout((function(){i.scrollToPosition(i.props.scrollTop-300),l.resizeHandler()}),0)}),100)):(c=null==(a=f.alignment.find((function(e){return r>=e.source_segment.start&&r<e.source_segment.end})))||null==(d=a.target_segment)?void 0:d.start,s=this.props.splitText.getTextIndexOfPosition(c),setTimeout((function(){i.scrollToRow(s),setTimeout((function(){i.scrollToPosition(i.props.scrollTop-300),l.resizeHandler()}),0)}),100))))}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousedown",this),document.removeEventListener("mouseup",this),window.removeEventListener("resize",this.resizeHandler),document.removeEventListener("selectionchange",this.selectionHandler)}},{key:"getSelectedTextIndex",value:function(){var e,t=0,n=null;return this.props.activeAnnotation?n=we(this.props.splitText.annotatedText.getPositionOfAnnotation(this.props.activeAnnotation),1)[0]:this.props.selectedSearchResult&&((e=this.props.splitText.annotatedText.segmentAtOriginalPosition(this.props.selectedSearchResult.start))instanceof ie.a?n=e.start:"number"==typeof e&&(n=e)),n?this.props.splitText.getTextIndexOfPosition(n):t}},{key:"getControlsMeasurements",value:function(e){if(!this.splitText)return null;var t=this.splitText,n=null,r=null,i=null,o=null,a=null,s=[],l=0;if(e.activeAnnotation){var c=e.activeAnnotation;if(null===(l=we(e.splitText.annotatedText.getPositionOfAnnotation(c),1)[0]))return console.warn("No startPos in getControlsMeasurements"),null;c.type===ANNOTATION_TYPES.pageBreak&&--l,c.type===ANNOTATION_TYPES.lineBreak&&--l;var u=l+c.length;0<c.length&&--u,n=e.splitText.getTextIndexOfPosition(u),o=t.getBoundingClientRect()}var d=[];if(e.selectedAnnotatedSegments&&0<e.selectedAnnotatedSegments.length){d=e.selectedAnnotatedSegments;for(var f=0;f<d.length;f++){var p=d[f];if(null===r&&p instanceof ie.a){r=p;break}}r&&(a=0===r.length&&e.activeAnnotation&&e.activeAnnotation.isInsertion?(i=idForInsertion(r),idForInsertion):(i=idForSegment(r),idForSegment))}else e.activeAnnotation&&(e.activeAnnotation.isDeletion?(c=new ie.a(l,""),i=idForDeletedSegment(c),a=idForDeletedSegment,d=[r=c]):e.activeAnnotation.isInsertion?(u=we(e.splitText.annotatedText.getPositionOfAnnotation(e.activeAnnotation),1)[0])&&(t=new ie.a(u,""),i=idForInsertion(t),a=idForInsertion,d=[r=t]):e.activeAnnotation.type===ANNOTATION_TYPES.pageBreak?(c=new ie.a(l+1,""),u=new ie.a(l,""),d=[r=c],s=[i=idForPageBreak(u)]):e.activeAnnotation.type===ANNOTATION_TYPES.lineBreak&&(t=new ie.a(l+1,""),c=new ie.a(l,""),d=[r=t],s=[i=idForLineBreak(c)]));if(a)for(var h=0;h<d.length;h++){var g=d[h];g instanceof ie.a&&(g=a(g),s.push(g))}return null!=n&&r&&i&&o?{selectedTextIndex:n,firstSelectedSegment:r,selectedElementId:i,splitTextRect:o,selectedElementIds:s}:null}},{key:"render",value:function(){var e=this,t=this.props,n=this.rowRenderer,r=this.cache,i=t.selectedWitness?t.selectedWitness.id:0;return a.createElement("div",{className:be.a.splitText2,ref:function(t){return e.splitText=t},key:i},a.createElement("button",{id:"updateList2",style:{display:"none"},onClick:function(){return e.updateList(!0)}}),a.createElement(te.a,null,(function(i){var o=i.height;i=i.width;return a.createElement(S.d,{ref:function(t){return e.list=t},height:o,rowCount:t.splitText.texts.length,rowHeight:r.rowHeight,rowRenderer:n,width:i,overscanRowCount:1,deferredMeasurementCache:r,onScroll:e.scrollEvent,scrollToAlignment:"start"})})))}},{key:"getStringPositions",value:function(e,t,n){var r=this.props.splitText.annotatedText.getUniqueId();if((je=je.hasOwnProperty(r)?je:Oe({},r,{}))[r].hasOwnProperty(t)||(je[r]=Oe({},t,{})),je[r][t].hasOwnProperty(n))return je[r][t][n];for(var i=new se.a,o=e.getText(),a=e.segments[0].start,s=[],l=o.indexOf(t);-1!==l;)s.push(l),l=o.indexOf(t,l+1);var c={};if(0<s.length)for(var u=i.splitGraphemes(o),d=0,f=null,p=0;p<u.length;p++){var h=u[p],g=d+(h.length-1);null!==f?f+(t.length-1)<=g&&(c[f+a]=[f+a,g+a],f=null):-1!==s.indexOf(d)?t.length===h.length?c[d+a]=[d+a,g+a]:t.length>h.length&&(f=d):f=null,d+=h.length}return je[r][t][n]=c}},{key:"rowRenderer",value:function(e){var t=e.key,n=e.index,r=e.parent,i=(e=e.style,this.props),o=this.cache,s={},l=((l=this.props.searchValue)&&0<l.length&&i.splitText&&(s=this.getStringPositions(i.splitText.texts[n],l,n)),Se(Se({},e),{},{height:e.height+10}));return a.createElement(ne.a,{columnIndex:0,key:t,parent:r,rowIndex:n,cache:o},a.createElement("div",{key:t,style:l,ref:this.splitTextRef,id:"index2_".concat(n),className:be.a.splitTextRow},a.createElement("div",{className:be.a.splitTextRowContent},a.createElement(ye,{segmentedText:i.splitText.texts[n],row:n,selectedSegmentId:i.selectedSegmentId,searchStringPositions:s,textAlignmentById:i.textAlignmentById,fontSize:i.fontSize,selectedSourceRange:i.selectedSourceRange,selectedTargetRange:i.selectedTargetRange,changeSelectedRange:i.changeSelectedRange}))))}}])&&Ee(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),r}(a.PureComponent),Re=(p=n(311),n.n(p)),_e=n(317),Ce=(l=n(1023),n.n(l)),We=n(916);function Ne(){return s.a.createElement(s.a.Fragment,null,s.a.createElement(E.a,{textTransform:"uppercase"},"Table Of Content"))}p=n(196);var Le=n.n(p),Be=(l=n(161),n.n(l));p=n(159);var De=n.n(p),He=n(160);function ze(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Fe(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function Ve(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Fe(Object(n),!0).forEach((function(t){var r,i;r=e,i=n[t=t],t in r?Object.defineProperty(r,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[t]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Me,Ue,Ye,Ke,qe={},Ge={},$e=function(e,t){if(!(t=k.kb(e,t)))return console.warn("no witness"),null;var n=t.text,r=k.ob(e,n.id);n=k.o(e,n.id);return r&&n?(e=(n=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,i=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ze(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ze(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(function(e,t,n){if(Ge.hasOwnProperty(t.id))return[Ge[t.id].appliedAnnotations,Ge[t.id].allAnnotations];t.text;var r=k.m(e,n.id),i=function(e,t,n){if(!k.rb(e,t))return{};var r=k.f(e,t);if(!r)return{};var i,o,a={};for(i in r)!r.hasOwnProperty(i)||(o=k.k(e,n,i))&&(a[o.unique_id]=o);return Je(e,a)}(e,t.id,n.id),o=null,a={};if(t.id!==n.id){o=k.v(e,t.id);var s,l,c={};for(s in r)r.hasOwnProperty(s)&&((l=r[s]).creator_witness!==t.id||o.hasOwnProperty(l.unique_id)?l.creator_witness===t.id&&(a[l.unique_id]=l):c[l.unique_id]=l);i=Ve(Ve({},Je(e,c)),i),r=c}return n=Je(e,r),a=Je(e,a),0<Object.keys(a).length&&(n=Ve(Ve({},n),a)),n=Ve(Ve({},i),n),n=De()(n,(function(e,n){return!(t&&e.type===ae.a.lineBreak&&e.creatorWitness.id!==t.id)})),k.pb(e,t.id)&&k.rb(e,t.id)&&(Ge[t.id]={appliedAnnotations:i,allAnnotations:n}),[i,n]}(e,t,r),2))[0],n[1],n=function(e){return Ze[e.id]||(Ze[e.id]=Object(He.a)(e.content||"")),Ze[e.id]}(r),new oe.g(n,Object.values(e),(function(e){return Object(He.a)(e).segments}),r,t)):null},Je=function(e,t){var n,r,i={};for(n in t)t.hasOwnProperty(n)&&(r=t[n],(r=k.b(e,r))&&(i[n]=r));return i},Ze={};function Xe(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function Qe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Xe(Object(n),!0).forEach((function(t){var r,i;r=e,i=n[t=t],t in r?Object.defineProperty(r,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[t]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function et(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,i=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}(e,t)||tt(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tt(e,t){if(e){if("string"==typeof e)return nt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?nt(e,t):void 0}}function nt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function rt(e){return[e.start,e.length].join("-")}l=Object(r.connect)((function(e){var t,n={},r=k.Z(e),i=k.G(e),o={},a=(i&&(a=k.ob(e,i.id),n=(n=(t=k.J(e,i.id))?k.kb(e,t):n)||a),t=function(e,t){var n=null;return t&&(n=$e(e,t))&&(qe[t]=n),n}(e,n.id),e.data2.loadingWitnesses),s=(t&&(o=function(e,t){if(e===Me&&t===Ue&&e.version===Ke)return Ye;for(var n={},r={},i=0;i<t.length;i++)!function(i){var o=t[i],a=(i=et(e.getPositionOfAnnotation(o),2))[0],s=i[1];if(null!=a)if(0===s){if(o.isInsertion){if(i=rt(o),i=r[i])return i.map((function(e){return n[e].push(o)}));a=INSERTION_KEY+a}o.isDeletion&&0<o.length&&(a=DELETION_KEY+a),o.type===ANNOTATION_TYPES.pageBreak&&(a=PAGE_BREAK_KEY+a),o.type===ANNOTATION_TYPES.lineBreak&&(a=LINE_BREAK_KEY+a),void 0===n[a]&&(n[a]=[]),-1===n[a].indexOf(o)&&n[a].push(o)}else{for(var l=[],c=a;c<a+s;c++)void 0===n[c]&&(n[c]=[]),-1===n[c].indexOf(o)&&n[c].push(o),l.push(c);o.isInsertion&&(i=rt(o),r[i]=l)}}(i);return Ue=t,Ye=n,Ke=(Me=e).version,n}(t,Object.values([]))),k.ub(e)),l=k.P(e),c=k.O(e),u=k.W(e),d=k.K(e),f=k.z(e);return{text:i,textFontSize:r,annotatedText:t,selectedWitness:n,loading:a,annotationPositions:o,isSecondWindowOpen:Object(k.wb)(e),imageData:Object(k.q)(e),isPanelLinked:s,selectedImage:Object(k.A)(e),isImagePortrait:Object(k.tb)(e),isPanelVisible:Object(k.vb)(e),syncIdOnScroll:l,syncIdOnClick:c,textAlignment:u,textAlignmentById:k.X(e),selectedWindow:d,selectedSourceRange:Object(k.D)(e),selectedTargetRange:Object(k.E)(e),showTableContent:k.M(e),searchResults:Object(k.x)(e,f),searchValue:f,syncIdOnSearch:k.S(e)}}),null,(function(e,t,n){function r(e){return-1!==e.indexOf("ds2_")}function a(e){return-1!==e.indexOf("i2_")}function s(e){return!a(e)&&r(e)?e.substr(3):e.substr(2)}var l=e.annotatedText,c=e.annotationPositions,u=t.dispatch;return Qe(Qe(Qe({},n),e),{},{onChangedFontSize:function(e){u(j.bc(e))},didSelectSegmentIds:function(t){if(0!==t.length){var n,u=[],d=[],f=function(e,t){var n,r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=tt(e))||t&&e&&"number"==typeof e.length)return r&&(e=r),n=0,{s:t=function(){},n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,a=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){a=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(a)throw i}}}}(t);try{for(f.s();!(n=f.n()).done;){var p,h,g,y=n.value;r(y)||a(y)||(p=s(y),h=l.segmentedText.segmentAtPosition(p),d.push(h),(g=c[h.start])&&(u=u.concat(g)))}}catch(t){f.e(t)}finally{f.f()}u=i()(u,(function(e,t){return e.toString()==t.toString()}));var m,b=o()(u,l.annotations,(function(e,t){return e.toString()==t.toString()})),v=getSegmentsRange(d,b,u,e.annotatedText);v?(m=l.getBaseAnnotation(v.start,v.length),v.annotation||0<b.length&&(b=l.segmentedText.segmentsInRange(v.start,v.length).reduce((function(e,t){return e+t.text}),""),e.selectedWitness||console.log("no stateProps.selectedWitness: %o",e.selectedWitness),new Annotation(WORKING_VERSION_ANNOTATION_ID,getTextWorkingWitness(e.text),m.start,m.length,b,ANNOTATION_TYPES.variant,e.selectedWitness,e.user))):console.warn("No range for selected segment ids: %o",t)}},changeSyncIdOnScroll2:function(e){return u(j.Sb(e))},changeSelectedWindow:function(e){u(j.Pb(e))},changeSelectedRange:function(e){u(j.Ob(e))},changeShowTableContent:function(e){u(j.Wc(e))},selectedSegmentId:function(t){var n=s(t),i=n;a(t)?i=INSERTION_KEY+n:r(t)?i=DELETION_KEY+n:-1!==t.indexOf("p2_")?i=PAGE_BREAK_KEY+n:-1!==t.indexOf("l2_")&&(i=LINE_BREAK_KEY+n),c[i],e.activeAnnotation&&e.activeAnnotation&&(t=j.Xb(null),u(t))}})}))((function(e){var t=Object(a.useRef)();function n(){e.changeSelectedWindow(2)}e.text&&e.text,Object(a.useEffect)((function(){var e=t.current;return e.addEventListener("mouseenter",n),function(){e.removeEventListener("mouseenter",n)}}),[]);var r=null,i=[e.annotatedText&&e.text&&!e.loading?(i=e.paginated?positionSplitter(e.pageBreaks):Object(_e.a)(800,/^།[\s]+(?!།[\s]+)/,2,5),r=new me.a(e.annotatedText,i),s.a.createElement(ke,{splitText:r,limitWidth:!1,selectedSegmentId:e.selectedSegmentId,annotationPositions:e.annotationPositions,selectedAnnotatedSegments:null==e?void 0:e.selectedAnnotatedSegments,selectedWitness:e.selectedWitness,key:12,fontSize:e.textFontSize,syncIdOnScroll:e.syncIdOnScroll,syncIdOnClick:e.syncIdOnClick,textAlignment:e.textAlignment,textAlignmentById:e.textAlignmentById,isPanelLinked:e.isPanelLinked,changeSyncIdOnScroll2:e.changeSyncIdOnScroll2,selectedWindow:e.selectedWindow,selectedSourceRange:e.selectedSourceRange,selectedTargetRange:e.selectedTargetRange,changeSelectedRange:e.changeSelectedRange,searchResults:e.searchResults,searchValue:e.searchValue,selectedText:e.text,syncIdOnSearch:e.syncIdOnSearch})):s.a.createElement("div",{key:"key-".concat(Math.random())})];return Be.a.ThirdWindowHeight,s.a.createElement(T.a,{ref:t,className:Ce.a.textDetail2,style:{height:"100%",flex:1}},s.a.createElement(Q,null),s.a.createElement(Re.a,{loaded:!e.loading}),s.a.createElement(T.a,{style:{display:"flex",height:"100%",width:"100%",position:"relative"}},s.a.createElement(T.a,{style:{flex:1},className:f()(Ce.a.textContainer2,Le.a.flex)},e.loading?s.a.createElement("div",null):i),s.a.createElement(We.a,{direction:"left",in:e.showTableContent,container:t.current},s.a.createElement(T.a,{sx:{position:"absolute",height:"100%",minWidth:"50%",right:0,background:"#eee",borderLeft:"1px solid gray",padding:2}},s.a.createElement(Ne,null)))))})),t.default=l},935:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(170);function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n(62);var o=function(){function e(t,n){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.annotatedText=t,this.splitter=n,this._texts=null,this._textsId=null,this._textsFinalPositions=[]}var t,n;return t=e,(n=[{key:"texts",get:function(){if(!this.annotatedText)return[];if(!this._texts||this._textsId!==this.annotatedText.getUniqueId()){this._textsFinalPositions=[];var e=this.annotatedText.segmentedText,t=e.getText(),n=this.splitter(t).filter((function(e){return 0!==e}));if(0===n.length)return this._textsFinalPositions.push(t.length),[e];n[n.length-1]+1<t.length&&n.push(t.length-1);for(var i=e.segments,o=0,a=[],s=0;s<n.length;s++){var l=n[s],c=(l=e.indexOfSegmentAtPosition(l-1),void 0);c=s==n.length-1?i.slice(o):i.slice(o,l+1),c=new r.a(c);a.push(c),o=l+1,0<=l&&(c=i[l],this._textsFinalPositions.push(c.end))}this._texts=a.filter((function(e){return 0<e.segments.length})),this._textsId=this.annotatedText.getUniqueId()}return this._texts||[]}},{key:"getTextsFinalPositions",value:function(){return this.texts,this._textsFinalPositions}},{key:"getTextIndexOfPosition",value:function(e){for(var t=this.getTextsFinalPositions(),n=0,r=null,i=0;i<t.length;i++){var o=t[i];if(n<=e&&e<=o){r=i;break}n=o}return null===r&&(console.warn("no index for position %d",e),r=t.length-1),r}}])&&i(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}()},939:function(e,t,n){"use strict";var r=n(0),i=n.n(r),o=(r=n(941),n.n(r));t.a=function(e){var t=e.max,n=e.min,r=e.initialvalue,a=void 0===(e=e.changeSize)?function(e){return console.log(e)}:e;return i.a.createElement("div",{className:o.a.inputRanges},i.a.createElement("span",{style:{fontSize:13,top:"-5px"}},"ཀ"),i.a.createElement("input",{type:"range",style:{width:"70%"},className:o.a.inputRange,min:n,max:t,step:1,smooth:"yes",value:r,onChange:function(e){return a(parseInt(e.target.value))}}),i.a.createElement("span",{style:{fontSize:18,top:"-10px"}},"ཀ"))}},941:function(e,t,n){e.exports={inputRanges:"Slider---inputRanges",inputRange:"Slider---inputRange"}}}]);