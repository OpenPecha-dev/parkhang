(window.webpackJsonpparkhang=window.webpackJsonpparkhang||[]).push([[5],{1010:function(e,t,n){e.exports={button_group_menu:"textDetailHeading---button_group_menu"}},1011:function(e,t,n){e.exports={"green-tint":"#88af8e","blue-tint":"#024279","active-button":"#00746b",mainTint:"#024279",activeButton:"#00746b",selectVersion:"SelectVersion---selectVersion",selected:"SelectVersion---selected","styled-select":"SelectVersion---styled-select"}},1012:function(e,t,n){e.exports={textlist:"TextList---textlist",open:"TextList---open",listToggelBtn:"TextList---listToggelBtn"}},1013:function(e,t,n){e.exports={"green-tint":"#88af8e","blue-tint":"#024279","active-button":"#00746b",mainTint:"#024279",activeButton:"#00746b",paddingSide:"20px",maxWidth:"600px",text:"Text2---text",textFirstRow:"Text2---textFirstRow",textLine:"Text2---textLine",limitWidth:"Text2---limitWidth",textContainer:"Text2---textContainer",annotation:"Text2---annotation",selectedAnnotation:"Text2---selectedAnnotation",removedByAnnotation:"Text2---removedByAnnotation",insertion:"Text2---insertion",highlight:"Text2---highlight",activeHighlight:"Text2---activeHighlight",lineBreak:"Text2---lineBreak",pageBreak:"Text2---pageBreak",syncIdClass:"Text2---syncIdClass",selectedRange:"Text2---selectedRange"}},1014:function(e,t,n){e.exports={"green-tint":"#88af8e","blue-tint":"#024279","active-button":"#00746b",mainTint:"#024279",activeButton:"#00746b",inlineWidth:"280px",annotationControls:"SplitText---annotationControls",annotationContent:"SplitText---annotationContent",subTitle:"SplitText---subTitle",title:"SplitText---title",sectionHeading:"SplitText---sectionHeading",text:"SplitText---text",padding:"SplitText---padding",arrowTop:"SplitText---arrowTop",arrowLeft:"SplitText---arrowLeft",arrowRight:"SplitText---arrowRight",inline:"SplitText---inline",arrow:"SplitText---arrow",arrowDs:"SplitText---arrowDs",nothingSelected:"SplitText---nothingSelected",anonymousMessage:"SplitText---anonymousMessage",noNotes:"SplitText---noNotes",breakButtons:"SplitText---breakButtons",splitText2:"SplitText---splitText2",splitTextRowContent:"SplitText---splitTextRowContent",splitTextRow:"SplitText---splitTextRow",pechaImage:"SplitText---pechaImage",controlsPlaceholder:"SplitText---controlsPlaceholder",pageNumber:"SplitText---pageNumber",hightlighter:"SplitText---hightlighter",pulse:"SplitText---pulse"}},1015:function(e,t,n){e.exports={"green-tint":"#88af8e","blue-tint":"#024279","active-button":"#00746b",mainTint:"#024279",activeButton:"#00746b",textDetail2:"TextDetail---textDetail2",textContainer:"TextDetail---textContainer"}},1041:function(e,t,n){"use strict";n.r(t);var r=n(930),i=n.n(r),o=(r=n(938),n.n(r)),a=n(0),l=n.n(a),s=(r=n(33),n(1010)),c=n.n(s),u=(s=n(55),n.n(s)),d=(s=n(43),n(1011)),f=n.n(d),p=(n(89),n(314)),h=n(911);d=n(1039);function g(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,i=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw i}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return m(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?m(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var y=Object(a.memo)(Object(s.c)(Object(d.a)((function(e){return{root:{minWidth:60,padding:0,textAlign:"center",fontWeight:"bold"},selectEmpty:{paddingLeft:"6px",backgroundColor:"transparent"},select:{color:"black","&:not([multiple]) option":{backgroundColor:"#eee"}}}}))((function(e){var t,n="",r=e.classes,i=(e.witnesses.findIndex((function(t){return t.id===e.activeWitness.id})),g(Object(p.a)("selectedWitness2",0),2)),o=i[0],s=i[1],c=[f.a.selectOptions];return e.witnesses&&(t=e.witnesses.map((function(e){return e})),c=[f.a.tab],t.sort((function(e,t){return e.isWorking?-1:t.isWorking?1:e.isBase?-1:t.isBase?1:0})),t=t.sort((function(e,t){return e.id-t.id}))),Object(a.useEffect)((function(){0<e.witnesses.length&&e.onSelectedWitness(t[o])}),[o]),l.a.createElement(h.a,{onChange:function(e){return s(e.target.value)},className:f.a.selectVersion,defaultValue:o,label:"Version2",classes:{root:r.selectEmpty,select:r.select}},t.map((function(t,r){return t.id===e.activeWitness.id&&c.push(f.a.selected),n=t.source.name,t.isWorking&&(n="en"===e.intl.locale?"User"===e.user.name?"Working":"My Edition":"མཉམ་འབྲེལ་པར་མ།"),l.a.createElement("option",{key:"versionSelect2-".concat(r),value:r,className:c},n)})))})))),b=n(929),v=n(932),x=(s=n(1012),n.n(s)),S=n(1036),O=n(916),w=n(253),T=n(1040);function E(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,i=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw i}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return A(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?A(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var j=n(2),I=n(6),P=(n(11),n(60),Object(r.connect)((function(e){var t=I.y(e),n=I.w(e,t),r=I.B(e),i=!1,o=e.data.texts;return{texts:o=0<t.length?null===n?(i=!0,[]):o.filter((function(e){return n.hasOwnProperty(e.id)})):o,selectedText:Object(I.F)(e),searchTerm:t,searchResults:n,selectedSearchResult:r,searching:i}}),(function(e){return{onSelectedText:function(t){e(j.Ic(t))}}}))((function(e){var t=Object(a.useRef)(e.texts),n=(o=E(Object(a.useState)(t.current),2))[0],r=o[1],i=e.onSelectedText,o=e.selectedText,s=(e=E(Object(a.useState)(!1),2))[0],c=e[1],d=(o=(e=E(Object(a.useState)(o.name),2))[0],e[1]),f=Object(a.useRef)(new v.c({fixedHeight:!0,defaultHeight:30})),p=[x.a.textlist];return l.a.createElement(S.a,{onClickAway:function(){return c(!1)}},l.a.createElement("div",{style:{position:"relative"}},l.a.createElement(O.a,{onClick:function(){c((function(e){return!e})),!1===s&&p.push(x.a.open)},className:x.a.listToggelBtn,component:"div",sx:{overflow:"hidden",textOverflow:"ellipsis",width:"5rem"}},l.a.createElement(w.a,{noWrap:!0},o)),s&&l.a.createElement("div",{className:u()(p),style:{position:"absolute"}},l.a.createElement(T.a,{onChange:function(e){var i=e.target.value;r(t.current),""!==i&&null!==i&&(e=n.filter((function(e){return e.name.includes(i)})),r(e))},id:"standard-basic",label:"filter",variant:"standard",style:{width:"100%"}}),l.a.createElement(v.a,null,(function(e){var t=e.width;e=e.height;return l.a.createElement(v.d,{width:t,height:e,rowHeight:f.current.rowHeight,deferredMeasurementCache:f.current,rowCount:n.length,rowRenderer:function(e){var t=e.key,r=e.index,o=e.style,a=(e=e.parent,n[r]);return l.a.createElement(v.b,{key:"optionvalues-".concat(t),cache:f.current,parent:e,columnIndex:0,rowIndex:r},l.a.createElement("div",{style:o,onClick:function(){d(a.name),c(!1),i(a)}},l.a.createElement("span",{style:{paddingLeft:"10px"}},a.name)))}})})))))}))),k=(d=n(312),n.n(d)),_=(s=n(946),n.n(s)),R=n(921),C=n(903),N=n(922),L=n(920);function W(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function B(e){var t=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,i=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw i}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return W(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?W(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(Object(a.useState)(!1),2),n=t[0],r=t[1];return l.a.createElement(S.a,{onClickAway:function(){return r(!1)}},l.a.createElement(R.a,{onClick:function(){r((function(e){return!e}))},size:"small",variant:"text",style:{padding:0,color:"black"}},l.a.createElement(k.a,null),l.a.createElement(C.a,{in:n},l.a.createElement(N.a,{dense:!0,style:{position:"absolute",right:0,zIndex:2,top:30,backgroundColor:"#eee"}},l.a.createElement(b.a,{max:20,min:14,initialvalue:e.textFontSize,changeSize:e.onChangedFontSize}),l.a.createElement(L.a,{onClick:function(){return e.onExport()}},"Export Document",e.exportingWitness&&l.a.createElement(_.a,null)),l.a.createElement(L.a,{onClick:function(){return e.onChangePanelLink(!e.isPanelLinked)}},e.isPanelLinked&&l.a.createElement(_.a,null),"link panels")))))}d=n(945);var D=n.n(d);function H(e){return e=e.handleWindowSearch,l.a.createElement(R.a,{size:"small",variant:"text",onClick:e,style:{padding:0,color:"black"}},l.a.createElement(D.a,null))}var F=n(915),z=n(923),M=n(1044),U=n(909),V=n(910),Y=(s=n(947),n.n(s));function K(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function q(){var e=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,i=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw i}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return K(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?K(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(Object(a.useState)(),2),t=e[0],n=e[1];return l.a.createElement(l.a.Fragment,{key:"right"},l.a.createElement(R.a,{onClick:function(){return n(!0)}},l.a.createElement(Y.a,null)),l.a.createElement(F.a,{anchor:"right",open:t,onClose:function(){return n(!1)}},l.a.createElement($,null)))}var $=function(){return l.a.createElement(O.a,null,l.a.createElement(w.a,{variant:"h6",gutterBottom:!0,component:"div",p:2},"Table of Content 2"),l.a.createElement(z.a,null,l.a.createElement(M.a,{disablePadding:!0},l.a.createElement(U.a,null,l.a.createElement(V.a,{primary:"chapter1"}))),l.a.createElement(M.a,{disablePadding:!0},l.a.createElement(U.a,{component:"a",href:"#simple-list"},l.a.createElement(V.a,{primary:"chapter2"})))))},J=n(906),G=n(1046),Q=n(1047);function Z(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,i=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw i}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return X(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?X(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function X(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ee(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function te(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ee(Object(n),!0).forEach((function(t){var r,i;r=e,i=n[t=t],t in r?Object.defineProperty(r,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[t]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ee(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ne=Object(r.connect)((function(e){var t,n=I.cb(e),r=I.F(e),i=[],o=(r&&(i=I.Z(e,r.id),t=(t=I.I(e,r.id))?I.fb(e,t):I.jb(e,r.id)),I.U(e));return{witnesses:i,selectedText:r,selectedWitness:t,textListIsVisible:Object(I.V)(e),accountOverlayVisible:Object(I.e)(e),textFontSize:o,user:n}}),null,(function(e,t,n){var r=t.dispatch,i=e.selectedText;return te(te(te({},n),e),{},{navigationButtonClicked:function(){t.dispatch(j.Vb(!e.textListIsVisible))},onSelectedWitness:function(e){r(j.Kc(i.id,e.id))},onChangedFontSize:function(e){r(j.Ub(e))}})}))((function(e){var t=(o=Z(Object(a.useState)(""),2))[0],n=o[1],r=(o=Z(Object(a.useState)(!1),2))[0],i=o[1],o=Object(a.useCallback)((function(e){e.preventDefault()}),[t]),s=Object(a.useCallback)((function(){i((function(e){return!e}))}),[]);return l.a.createElement(J.a,{direction:"column",spacing:1,px:2,py:1,style:{background:"#f7f7f7"}}," ",l.a.createElement(J.a,{direction:"row",spacing:1,justifyContent:"space-between"},l.a.createElement(O.a,{sx:{display:"flex",gap:2}},l.a.createElement(P,null),l.a.createElement(y,{witnesses:e.witnesses,activeWitness:e.selectedWitness,onSelectedWitness:e.onSelectedWitness,user:e.user})),l.a.createElement(G.a,{size:"small","aria-label":"small button group",sx:{position:"relative",display:"flex",alignItems:"center",justifyContent:"center",width:"fit-content",border:function(e){return"1px solid ".concat(e.palette.divider)},borderRadius:1,bgcolor:"background.paper",color:"text.secondary","& svg":{m:1.5},"& hr":{mx:.5}},className:c.a.button_group_menu},l.a.createElement(H,{handleWindowSearch:s}),l.a.createElement(B,e),l.a.createElement(q,e))),l.a.createElement(Q.a,{in:r},l.a.createElement("form",{onSubmit:o},l.a.createElement(J.a,{direction:"row"},l.a.createElement(T.a,{hiddenLabel:!0,id:"filled-hidden-label-small",inputProps:{style:{height:25,padding:"0 14px"}},style:{height:25,flex:1},fullWidth:!0,value:t,onChange:function(e){return n(e.target.value)}}),l.a.createElement(R.a,{variant:"outlined",size:"small",onClick:o,style:{height:25}},"Search")))))})),re=(d=n(928),n.n(d)),ie=(s=n(939),n.n(s)),oe=(n(50),n(309)),ae=n(254),le=(d=(n(445),n(1013)),n.n(d)),se=n(44),ce=n(58),ue=(n(167),n(23));function de(e){return(de="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,i=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw i}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return pe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?pe(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function he(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function ge(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?he(Object(n),!0).forEach((function(t){var r,i;r=e,i=n[t=t],t in r?Object.defineProperty(r,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[t]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):he(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function me(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ye(e,t){return(ye=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function be(e){return(be=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n(307);var ve=function(e){var t=r;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ye(t,e);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=be(e);n=t?(n=be(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),r=this;if(n&&("object"===de(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==r)return r;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(r);function r(e){var t;if(this instanceof r)return(t=n.call(this,e)).state={segmentedText:e.segmentedText},t.textAlignmentById=[],t._renderedSegments=null,t._renderedHtml=null,t;throw new TypeError("Cannot call a class as a function")}return t=r,(e=[{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.setState((function(t,n){return ge(ge({},t),{},{segmentedText:e.segmentedText})}))}},{key:"selectedElement",value:function(e){var t=document.getSelection();t&&"Range"===t.type||this.props.selectedSegmentId(e.id)}},{key:"generateHtml",value:function(e,t){var n=this,r=t.segmentedText.segments,i='<p class="'+le.a.textLine+'">';if(0===r.length)return{__html:i};for(var o=r[r.length-1].end+1,a=le.a.highlight,l=le.a.activeHighlight,s=null,c=0;c<r.length&&"break"!==function(t){var c=r[t],d=(t="",[]);if(c.start===o)return"break";var f,p=null,h=(0!==c.length&&(p="s2_"+c.start),null!=(f=e.selectedTargetRange)&&f.includes(c.start)&&d.push(le.a.selectedRange),0<d.length&&(t='class="'+u.a.apply(void 0,d)+'"'),c.text);if(e.searchStringPositions){var g=c.start,m=g,y=(h="",a);e.selectedSearchResult&&e.selectedSearchResult.start<=m&&e.selectedSearchResult.start+e.selectedSearchResult.length>m&&(y=l);for(var b=0;b<c.text.length;b++){var v,x,S,O=c.text.charAt(b);m=g+b;s?((v=fe(s,2))[0],0===b&&(h+='<span class="'+y+'">'),m===v[1]?(h+=O+"</span>",s=null):b===c.text.length-1?h+=O+"</span>":h+=O):m in e.searchStringPositions?(x=(v=fe(e.searchStringPositions[m],2))[0],S=v[1],h+='<span class="'+y+'">'+O,b!==c.text.length-1&&m!==S||(h+="</span>"),m<S&&(s=[x,S])):h+=O}}null!==n.props.textAlignmentById&&(f=n.props.textAlignmentById.find((function(e){return e.TStart===c.start})))&&(i+="<span id='alignment2_"+c.start+"'><sup class="+le.a.syncIdClass+">༼".concat(f.id,"༽</sup>")+"</span>"),i+="<span id="+p+" key="+p+" "+t+">"+h+"</span>"}(c);c++);return this._renderedSegments=r,{__html:i+="</p>"}}},{key:"shouldComponentUpdate",value:function(e,t){return t=this.generateHtml(e,t),this.props.fontSize!==e.fontSize||(!this._renderedHtml||t.__html!==this._renderedHtml.__html)&&(this._renderedHtml=t,!0)}},{key:"render",value:function(){var e=this,t=[le.a.text],n=(0===this.props.row&&t.push(le.a.textFirstRow),this._renderedHtml||this.generateHtml(this.props,this.state));return this._renderedHtml||(this._renderedHtml=n),l.a.createElement("div",{className:le.a.textContainer},l.a.createElement("div",{className:u.a.apply(void 0,t),dangerouslySetInnerHTML:n,onClick:function(t){return e.selectedElement(t.target)},style:{fontSize:this.props.fontSize}}))}}])&&me(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),r}(l.a.Component),xe=n(925),Se=(s=n(1014),n.n(s));function Oe(e){return(Oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function we(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function Te(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?we(Object(n),!0).forEach((function(t){var r,i;r=e,i=n[t=t],t in r?Object.defineProperty(r,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[t]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):we(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ee(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,i=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw i}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Ae(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ae(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ae(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function je(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ie(e,t){return(Ie=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Pe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ke(e){return(ke=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var _e=function(e){var t=r;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ie(t,e);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ke(e);n=t?(n=ke(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),r=this;if(n&&("object"===Oe(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return Pe(r)}}(r);function r(e){var t;if(this instanceof r)return(t=n.call(this,e)).textAlignmentById=[],t.changeSyncIdOnScroll2=e.changeSyncIdOnScroll2,t.list=null,t.splitText=null,t.cache=new ae.b({fixedWidth:!0,defaultHeight:300}),t.rowRenderer=t.rowRenderer.bind(Pe(t)),t.isPanelLinked=t.props.isPanelLinked,t.activeSelection=null,t.selectedNodes=null,t._mouseDown=!1,t._activeWitness=null,t._didSetInitialScrollPosition=!1,t._modifyingSelection=!1,t.imageHeight=null,t.imageWidth=null,t.calculatedImageHeight=null,t.selectedWindow=t.props.selectedWindow,t.scrollEvent=t.scrollEvent.bind(Pe(t)),t.scrollTop=0,t;throw new TypeError("Cannot call a class as a function")}return t=r,(e=[{key:"scrollEvent",value:function(e){if(1===this.selectedWindow)return null;var t;2===this.selectedWindow&&this.isPanelLinked&&(t=[],this.textAlignmentById.map((function(e){var n=document.getElementById("s2_"+e.start);n&&102<n.getBoundingClientRect().top&&t.push({id:e.id,start:e.start,target:e.TStart})})),0<t.length&&this.changeSyncIdOnScroll2(t[0].target))}},{key:"selectedListRow",value:function(e){var t=null;return e.activeAnnotation?e.splitText.getTextIndexOfPosition(e.activeAnnotation.start):t}},{key:"handleSelection",value:function(e){this._modifyingSelection?(e.stopPropagation(),this._modifyingSelection=!1):(this.activeSelection=document.getSelection(),e=null==(e=this.activeSelection)||null==(e=e.anchorNode)||null==(e=e.parentElement)?void 0:e.id,this.updateId(e),this._mouseDown||this.mouseUp())}},{key:"mouseDown",value:function(){this._mouseDown=!0}},{key:"mouseUp",value:function(){this._mouseDown=!1,this.activeSelection&&(this.activeSelection=null)}},{key:"getNodeSegmentSpan",value:function(e){for(var t=e,n=null,r=/^(i|s|ds)_/;!n&&t.parentNode;)t instanceof Element&&r.test(t.id)&&(n=t),t=t.parentNode;return n}},{key:"updateId",value:function(e){}},{key:"updateList",value:function(){var e=!(0<arguments.length&&void 0!==arguments[0])||arguments[0],t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;if(this.props.showImages&&!this.calculatedImageHeight&&this.imageHeight&&this.imageWidth&&(this.calculatedImageHeight=this.calculateImageHeight()),this.list){var n=this.list;if(e)if(null!==t)if(Array.isArray(t)){if(Array.isArray(t))for(var r=0;r<t.length;r++){var i=t[r];this.cache.clear(i)}}else this.cache.clear(t);else this.cache.clearAll(),n.measureAllRows(),n.recomputeRowHeights(0);n.forceUpdateGrid()}}},{key:"processProps",value:function(e){var t=this,n=!1;if((i=((!this.props.selectedWitness||e.selectedWitness&&e.selectedWitness.id!==this.props.selectedWitness.id)&&(this._didSetInitialScrollPosition=!(n=!0)),!e.selectedSearchResult||this.props.selectedSearchResult&&e.selectedSearchResult.start===this.props.selectedSearchResult.start&&e.selectedSearchResult.textId===this.props.selectedSearchResult.textId||(console.log("resetting scroll position from search result"),this._didSetInitialScrollPosition=!1),this.getControlsMeasurements(e)))&&(this.selectedTextIndex=i.selectedTextIndex,this.firstSelectedSegment=i.firstSelectedSegment,this.splitTextRect=i.splitTextRect,this.selectedElementId=i.selectedElementId,this.selectedElementIds=i.selectedElementIds),e.textListVisible!==this.textListVisible||e.editMenuVisible!==this.editMenuVisible)setTimeout((function(){t.textListVisible=e.textListVisible,t.editMenuVisible=e.editMenuVisible,t.updateList(!0)}),500);else if(n)this.updateList(!0);else if(this.pageBreaksChanged(this.props,e)){var r=null,i=this.selectedListRow(this.props);n=this.selectedListRow(e);if(i&&n){r=[];for(var o=n<i?n:i,a=this.props.splitText.texts.length;o<a;o++)r.push(o)}this.updateList(!0,r)}else if(this.lineBreaksChanges(this.props,e)){n=(n=this.selectedListRow(e))||this.selectedListRow(this.props),i=this.props.splitText.texts;var l=[];if(null!==n){for(var s=n,c=i.length;s<c;s++)l.push(s);this.updateList(!0,l)}}else this.props.fontSize!==e.fontSize?this.updateList(!0):this.props.activeAnnotation&&e.activeAnnotation&&this.annotationsInSameLocation(this.props.activeAnnotation,e.activeAnnotation)?this.updateList(!0,this.selectedListRow(e)):this.updateList(this.shouldResetListCache(this.props,e))}},{key:"pageBreaksChanged",value:function(e,t){return e=e.splitText.getTextsFinalPositions(),t=t.splitText.getTextsFinalPositions(),e.length!==t.length||JSON.stringify(e)!==JSON.stringify(t)}},{key:"lineBreaksChanges",value:function(e,t){var n=e.activeAnnotation,r=t.activeAnnotation,i=!1;return n&&n.isType(ANNOTATION_TYPES.lineBreak)&&t.activeAnnotations&&!t.activeAnnotations.hasOwnProperty(n.uniqueId)&&(i=!0),!(!(r&&r.isType(ANNOTATION_TYPES.lineBreak)&&e.activeAnnotations)||e.activeAnnotations.hasOwnProperty(r.uniqueId))||i}},{key:"shouldResetListCache",value:function(e,t){var n=!1;return!(e.showImages===t.showImages&&!this.pageBreaksChanged(e,t))||n}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.processProps(e)}},{key:"componentDidMount",value:function(){var e=this;this.resizeHandler=ie()((function(){e.calculatedImageHeight=null,e.updateList()}),500).bind(this),window.addEventListener("resize",this.resizeHandler),this.selectionHandler=re()((function(t){e.handleSelection(t)}),200).bind(this),document.addEventListener("selectionchange",this.selectionHandler),document.addEventListener("mousedown",this.mouseDown.bind(this),!0),document.addEventListener("mouseup",this.mouseUp.bind(this),!0),this.processProps(this.props),this.componentDidUpdate()}},{key:"componentDidUpdate",value:function(){var e,t,n,r,i,o;this.selectedWindow=this.props.selectedWindow,1===this.selectedWindow&&this.isPanelLinked&&(i=this.props.syncIdOnScroll,e=this.props.syncIdOnClick,this.isPanelLinked=this.props.isPanelLinked,t=this.list,this.textAlignmentById=this.props.textAlignmentById,this.splitText.style.scrollBehavior="smooth",(r=this.props.textAlignment.alignment)&&(null!==i?(n=this.props.splitText.getTextIndexOfPosition(i),setTimeout((function(){t.scrollToRow(n),setTimeout((function(){t.scrollToPosition(t.props.scrollTop-300)}),0)}),100)):(i=null==(i=r.find((function(t){return e>=t.source_segment.start&&e<t.source_segment.end})))||null==(r=i.target_segment)?void 0:r.start,o=this.props.splitText.getTextIndexOfPosition(i),setTimeout((function(){t.scrollToRow(o),setTimeout((function(){t.scrollToPosition(t.props.scrollTop-300)}),0)}),100))))}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousedown",this),document.removeEventListener("mouseup",this),window.removeEventListener("resize",this.resizeHandler),document.removeEventListener("selectionchange",this.selectionHandler)}},{key:"getSelectedTextIndex",value:function(){var e,t=0,n=null;return this.props.activeAnnotation?n=Ee(this.props.splitText.annotatedText.getPositionOfAnnotation(this.props.activeAnnotation),1)[0]:this.props.selectedSearchResult&&((e=this.props.splitText.annotatedText.segmentAtOriginalPosition(this.props.selectedSearchResult.start))instanceof se.a?n=e.start:"number"==typeof e&&(n=e)),n?this.props.splitText.getTextIndexOfPosition(n):t}},{key:"getControlsMeasurements",value:function(e){if(!this.splitText)return null;var t=this.splitText,n=null,r=null,i=null,o=null,a=null,l=[],s=0;if(e.activeAnnotation){var c=e.activeAnnotation;if(null===(s=Ee(e.splitText.annotatedText.getPositionOfAnnotation(c),1)[0]))return console.warn("No startPos in getControlsMeasurements"),null;c.type===ANNOTATION_TYPES.pageBreak&&--s,c.type===ANNOTATION_TYPES.lineBreak&&--s;var u=s+c.length;0<c.length&&--u,n=e.splitText.getTextIndexOfPosition(u),o=t.getBoundingClientRect()}var d=[];if(e.selectedAnnotatedSegments&&0<e.selectedAnnotatedSegments.length){d=e.selectedAnnotatedSegments;for(var f=0;f<d.length;f++){var p=d[f];if(null===r&&p instanceof se.a){r=p;break}}r&&(a=0===r.length&&e.activeAnnotation&&e.activeAnnotation.isInsertion?(i=idForInsertion(r),idForInsertion):(i=idForSegment(r),idForSegment))}else e.activeAnnotation&&(e.activeAnnotation.isDeletion?(c=new se.a(s,""),i=idForDeletedSegment(c),a=idForDeletedSegment,d=[r=c]):e.activeAnnotation.isInsertion?(u=Ee(e.splitText.annotatedText.getPositionOfAnnotation(e.activeAnnotation),1)[0])&&(t=new se.a(u,""),i=idForInsertion(t),a=idForInsertion,d=[r=t]):e.activeAnnotation.type===ANNOTATION_TYPES.pageBreak?(c=new se.a(s+1,""),u=new se.a(s,""),d=[r=c],l=[i=idForPageBreak(u)]):e.activeAnnotation.type===ANNOTATION_TYPES.lineBreak&&(t=new se.a(s+1,""),c=new se.a(s,""),d=[r=t],l=[i=idForLineBreak(c)]));if(a)for(var h=0;h<d.length;h++){var g=d[h];g instanceof se.a&&(g=a(g),l.push(g))}return null!=n&&r&&i&&o?{selectedTextIndex:n,firstSelectedSegment:r,selectedElementId:i,splitTextRect:o,selectedElementIds:l}:null}},{key:"render",value:function(){var e=this,t=this.props,n=this.rowRenderer,r=this.cache,i=t.selectedWitness?t.selectedWitness.id:0;return a.createElement("div",{className:Se.a.splitText2,ref:function(t){return e.splitText=t},key:i},a.createElement("button",{id:"updateList2",style:{display:"none"},onClick:function(){return e.updateList(!0)}}),a.createElement(oe.a,null,(function(i){var o=i.height;i=i.width;return a.createElement(v.d,{ref:function(t){return e.list=t},height:o,rowCount:t.splitText.texts.length,rowHeight:r.rowHeight,rowRenderer:n,width:i,overscanRowCount:3,deferredMeasurementCache:r,onScroll:e.scrollEvent,scrollToAlignment:"start"})})))}},{key:"rowRenderer",value:function(e){var t=e.key,n=e.index,r=e.parent,i=(e=e.style,this.props),o=this.cache;i.searchValue,e=Te(Te({},e),{},{height:e.height+10});return a.createElement(ae.a,{columnIndex:0,key:t,parent:r,rowIndex:n,cache:o},a.createElement("div",{key:t,style:e,ref:this.splitTextRef,id:"index2_".concat(n),className:Se.a.splitTextRow},a.createElement("div",{className:Se.a.splitTextRowContent},a.createElement(ve,{segmentedText:i.splitText.texts[n],row:n,selectedSegmentId:i.selectedSegmentId,textAlignmentById:i.textAlignmentById,fontSize:i.fontSize,selectedSourceRange:i.selectedSourceRange,selectedTargetRange:i.selectedTargetRange,changeSelectedRange:i.changeSelectedRange}))))}}])&&je(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),r}(a.PureComponent),Re=(d=n(311),n.n(d)),Ce=n(316),Ne=(s=n(1015),n.n(s)),Le=(d=n(159),n.n(d));s=n(156);var We=n.n(s),Be=n(157);function De(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function He(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function Fe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?He(Object(n),!0).forEach((function(t){var r,i;r=e,i=n[t=t],t in r?Object.defineProperty(r,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[t]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):He(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ze,Me,Ue,Ve,Ye={},Ke={},qe=function(e,t){if(!(t=I.fb(e,t)))return console.warn("no witness"),null;var n=t.text,r=I.jb(e,n.id);n=I.o(e,n.id);return r&&n?(e=(n=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,i=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw i}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return De(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?De(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(function(e,t,n){if(Ke.hasOwnProperty(t.id))return[Ke[t.id].appliedAnnotations,Ke[t.id].allAnnotations];t.text;var r=I.m(e,n.id),i=function(e,t,n){if(!I.mb(e,t))return{};var r=I.f(e,t);if(!r)return{};var i,o,a={};for(i in r)!r.hasOwnProperty(i)||(o=I.k(e,n,i))&&(a[o.unique_id]=o);return $e(e,a)}(e,t.id,n.id),o=null,a={};if(t.id!==n.id){o=I.v(e,t.id);var l,s,c={};for(l in r)r.hasOwnProperty(l)&&((s=r[l]).creator_witness!==t.id||o.hasOwnProperty(s.unique_id)?s.creator_witness===t.id&&(a[s.unique_id]=s):c[s.unique_id]=s);i=Fe(Fe({},$e(e,c)),i),r=c}return n=$e(e,r),a=$e(e,a),0<Object.keys(a).length&&(n=Fe(Fe({},n),a)),n=Fe(Fe({},i),n),n=We()(n,(function(e,n){return!(t&&e.type===ue.a.lineBreak&&e.creatorWitness.id!==t.id)})),I.kb(e,t.id)&&I.mb(e,t.id)&&(Ke[t.id]={appliedAnnotations:i,allAnnotations:n}),[i,n]}(e,t,r),2))[0],n[1],n=function(e){return Je[e.id]||(Je[e.id]=Object(Be.a)(e.content||"")),Je[e.id]}(r),new ce.g(n,Object.values(e),(function(e){return Object(Be.a)(e).segments}),r,t)):null},$e=function(e,t){var n,r,i={};for(n in t)t.hasOwnProperty(n)&&(r=t[n],(r=I.b(e,r))&&(i[n]=r));return i},Je={};function Ge(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function Qe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ge(Object(n),!0).forEach((function(t){var r,i;r=e,i=n[t=t],t in r?Object.defineProperty(r,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[t]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ge(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ze(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,i=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw i}}return o}}(e,t)||Xe(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Xe(e,t){if(e){if("string"==typeof e)return et(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?et(e,t):void 0}}function et(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function tt(e){return[e.start,e.length].join("-")}d=Object(r.connect)((function(e){var t,n={},r=I.U(e),i=I.F(e),o={},a=(i&&(a=I.jb(e,i.id),n=(n=(t=I.I(e,i.id))?I.fb(e,t):n)||a),t=function(e,t){var n=null;return t&&(n=qe(e,t))&&(Ye[t]=n),n}(e,n.id),e.data2.loadingWitnesses),l=(t&&(o=function(e,t){if(e===ze&&t===Me&&e.version===Ve)return Ue;for(var n={},r={},i=0;i<t.length;i++)!function(i){var o=t[i],a=(i=Ze(e.getPositionOfAnnotation(o),2))[0],l=i[1];if(null!=a)if(0===l){if(o.isInsertion){if(i=tt(o),i=r[i])return i.map((function(e){return n[e].push(o)}));a=INSERTION_KEY+a}o.isDeletion&&0<o.length&&(a=DELETION_KEY+a),o.type===ANNOTATION_TYPES.pageBreak&&(a=PAGE_BREAK_KEY+a),o.type===ANNOTATION_TYPES.lineBreak&&(a=LINE_BREAK_KEY+a),void 0===n[a]&&(n[a]=[]),-1===n[a].indexOf(o)&&n[a].push(o)}else{for(var s=[],c=a;c<a+l;c++)void 0===n[c]&&(n[c]=[]),-1===n[c].indexOf(o)&&n[c].push(o),s.push(c);o.isInsertion&&(i=tt(o),r[i]=s)}}(i);return Me=t,Ue=n,Ve=(ze=e).version,n}(t,Object.values([]))),I.pb(e)),s=I.M(e),c=I.L(e),u=I.R(e),d=I.J(e);return{text:i,textFontSize:r,annotatedText:t,selectedWitness:n,loading:a,annotationPositions:o,isSecondWindowOpen:Object(I.rb)(e),imageData:Object(I.q)(e),isPanelLinked:l,selectedImage:Object(I.z)(e),isImagePortrait:Object(I.ob)(e),isPanelVisible:Object(I.qb)(e),syncIdOnScroll:s,syncIdOnClick:c,textAlignment:u,textAlignmentById:I.S(e),selectedWindow:d,selectedSourceRange:Object(I.C)(e),selectedTargetRange:Object(I.D)(e)}}),null,(function(e,t,n){function r(e){return-1!==e.indexOf("ds2_")}function a(e){return-1!==e.indexOf("i2_")}function l(e){return!a(e)&&r(e)?e.substr(3):e.substr(2)}var s=e.annotatedText,c=e.annotationPositions,u=t.dispatch;return Qe(Qe(Qe({},n),e),{},{onChangedFontSize:function(e){u(j.Tb(e))},didSelectSegmentIds:function(t){if(0!==t.length){var n,u=[],d=[],f=function(e,t){var n,r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=Xe(e))||t&&e&&"number"==typeof e.length)return r&&(e=r),n=0,{s:t=function(){},n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,a=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){a=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(a)throw i}}}}(t);try{for(f.s();!(n=f.n()).done;){var p,h,g,m=n.value;r(m)||a(m)||(p=l(m),h=s.segmentedText.segmentAtPosition(p),d.push(h),(g=c[h.start])&&(u=u.concat(g)))}}catch(t){f.e(t)}finally{f.f()}u=i()(u,(function(e,t){return e.toString()==t.toString()}));var y,b=o()(u,s.annotations,(function(e,t){return e.toString()==t.toString()})),v=getSegmentsRange(d,b,u,e.annotatedText);v?(y=s.getBaseAnnotation(v.start,v.length),v.annotation||0<b.length&&(b=s.segmentedText.segmentsInRange(v.start,v.length).reduce((function(e,t){return e+t.text}),""),e.selectedWitness||console.log("no stateProps.selectedWitness: %o",e.selectedWitness),new Annotation(WORKING_VERSION_ANNOTATION_ID,getTextWorkingWitness(e.text),y.start,y.length,b,ANNOTATION_TYPES.variant,e.selectedWitness,e.user))):console.warn("No range for selected segment ids: %o",t)}},changeSyncIdOnScroll2:function(e){return u(j.Nb(e))},changeSelectedWindow:function(e){u(j.Kb(e))},changeSelectedRange:function(e){u(j.Jb(e))},selectedSegmentId:function(t){var n=l(t),i=n;a(t)?i=INSERTION_KEY+n:r(t)?i=DELETION_KEY+n:-1!==t.indexOf("p2_")?i=PAGE_BREAK_KEY+n:-1!==t.indexOf("l2_")&&(i=LINE_BREAK_KEY+n),c[i],e.activeAnnotation&&e.activeAnnotation&&(t=j.Qb(null),u(t))}})}))((function(e){var t=Object(a.useRef)();function n(){e.changeSelectedWindow(2)}e.text&&e.text,Object(a.useEffect)((function(){var e=t.current;return e.addEventListener("mouseenter",n),function(){e.removeEventListener("mouseenter",n)}}),[]);var r=null,i=[e.annotatedText&&e.text&&!e.loading?(i=e.paginated?positionSplitter(e.pageBreaks):Object(Ce.a)(800,/^།[\s]+(?!།[\s]+)/,2,5),r=new xe.a(e.annotatedText,i),l.a.createElement(_e,{splitText:r,limitWidth:!1,selectedSegmentId:e.selectedSegmentId,annotationPositions:e.annotationPositions,selectedAnnotatedSegments:null==e?void 0:e.selectedAnnotatedSegments,selectedWitness:e.selectedWitness,key:12,fontSize:e.textFontSize,syncIdOnScroll:e.syncIdOnScroll,syncIdOnClick:e.syncIdOnClick,textAlignment:e.textAlignment,textAlignmentById:e.textAlignmentById,isPanelLinked:e.isPanelLinked,changeSyncIdOnScroll2:e.changeSyncIdOnScroll2,selectedWindow:e.selectedWindow,selectedSourceRange:e.selectedSourceRange,selectedTargetRange:e.selectedTargetRange,changeSelectedRange:e.changeSelectedRange})):l.a.createElement("div",{key:"key-".concat(Math.random())})];return Le.a.ThirdWindowHeight,l.a.createElement("div",{ref:t,className:Ne.a.textDetail2,style:{height:"100%"}},l.a.createElement(ne,null),l.a.createElement(Re.a,{loaded:!e.loading}),e.loading?l.a.createElement("div",null):i)})),t.default=d},925:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(167);function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n(58);var o=function(){function e(t,n){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.annotatedText=t,this.splitter=n,this._texts=null,this._textsId=null,this._textsFinalPositions=[]}var t,n;return t=e,(n=[{key:"texts",get:function(){if(!this.annotatedText)return[];if(!this._texts||this._textsId!==this.annotatedText.getUniqueId()){this._textsFinalPositions=[];var e=this.annotatedText.segmentedText,t=e.getText(),n=this.splitter(t).filter((function(e){return 0!==e}));if(0===n.length)return this._textsFinalPositions.push(t.length),[e];n[n.length-1]+1<t.length&&n.push(t.length-1);for(var i=e.segments,o=0,a=[],l=0;l<n.length;l++){var s=n[l],c=(s=e.indexOfSegmentAtPosition(s-1),void 0);c=l==n.length-1?i.slice(o):i.slice(o,s+1),c=new r.a(c);a.push(c),o=s+1,0<=s&&(c=i[s],this._textsFinalPositions.push(c.end))}this._texts=a.filter((function(e){return 0<e.segments.length})),this._textsId=this.annotatedText.getUniqueId()}return this._texts||[]}},{key:"getTextsFinalPositions",value:function(){return this.texts,this._textsFinalPositions}},{key:"getTextIndexOfPosition",value:function(e){for(var t=this.getTextsFinalPositions(),n=0,r=null,i=0;i<t.length;i++){var o=t[i];if(n<=e&&e<=o){r=i;break}n=o}return null===r&&(console.warn("no index for position %d",e),r=t.length-1),r}}])&&i(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}()},929:function(e,t,n){"use strict";var r=n(0),i=n.n(r),o=(r=n(931),n.n(r));t.a=function(e){var t=e.max,n=e.min,r=e.initialvalue,a=void 0===(e=e.changeSize)?function(e){return console.log(e)}:e;return i.a.createElement("div",{className:o.a.inputRanges},i.a.createElement("span",{style:{fontSize:13,top:"-5px"}},"ཀ"),i.a.createElement("input",{type:"range",style:{width:"70%"},className:o.a.inputRange,min:n,max:t,step:1,smooth:"yes",value:r,onChange:function(e){return a(parseInt(e.target.value))}}),i.a.createElement("span",{style:{fontSize:18,top:"-10px"}},"ཀ"))}},931:function(e,t,n){e.exports={inputRanges:"Slider---inputRanges",inputRange:"Slider---inputRange"}}}]);