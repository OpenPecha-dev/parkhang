(window.webpackJsonpparkhang=window.webpackJsonpparkhang||[]).push([[4],{1005:function(e,t,n){e.exports={"green-tint":"#88af8e","blue-tint":"#024279","active-button":"#00746b",mainTint:"#024279",activeButton:"#00746b",MediaOption:"MediaOptions---MediaOption",header:"MediaOptions---header",closeBtn:"MediaOptions---closeBtn"}},1015:function(e,t,n){e.exports={Resizer:"resizerStyle---Resizer",horizontal:"resizerStyle---horizontal",vertical:"resizerStyle---vertical",disabled:"resizerStyle---disabled"}},1038:function(e,t,n){e.exports={fontSize:"FontSize---fontSize"}},1040:function(e,t,n){e.exports={highlight:"SearchStyle---highlight",searchListItem:"SearchStyle---searchListItem"}},1051:function(e,t,n){e.exports={shareContainer:"Sharebutton---shareContainer",shareButton:"Sharebutton---shareButton",facebookButton:"Sharebutton---facebookButton",whatsappButton:"Sharebutton---whatsappButton"}},1052:function(e,t,n){e.exports={voteBtn:"Vote---voteBtn",number:"Vote---number",voteContainer:"Vote---voteContainer"}},1054:function(e,t,n){e.exports={heading:"AnnotationControlsHeading---heading",title:"AnnotationControlsHeading---title",button:"AnnotationControlsHeading---button"}},1055:function(e,t,n){e.exports={"green-tint":"#88af8e","blue-tint":"#024279","active-button":"#00746b",mainTint:"#024279",activeButton:"#00746b",button:"AddButton---button"}},1056:function(e,t,n){e.exports={"green-tint":"#88af8e","blue-tint":"#024279","active-button":"#00746b",mainTint:"#024279",activeButton:"#00746b",editorContainer:"NoteEditor---editorContainer",textEditor:"NoteEditor---textEditor"}},1057:function(e,t,n){e.exports={question:"QuestionView---question",threadLink:"QuestionView---threadLink"}},1058:function(e,t,n){e.exports={name:"AnswerView---name",answer:"AnswerView---answer"}},1059:function(e,t,n){e.exports={"green-tint":"#88af8e","blue-tint":"#024279","active-button":"#00746b",mainTint:"#024279",activeButton:"#00746b",editorContainer:"QuestionEditor---editorContainer",textEditor:"QuestionEditor---textEditor"}},1060:function(e,t,n){e.exports={loading:"QuestionsLoading---loading"}},1061:function(e,t,n){e.exports={"green-tint":"#88af8e","blue-tint":"#024279","active-button":"#00746b",mainTint:"#024279",activeButton:"#00746b",note:"Note---note",header:"Note---header",info:"Note---info",content:"Note---content",delete:"Note---delete"}},1062:function(e,t,n){e.exports={button:"Button---button",buttonNoBezel:"Button---buttonNoBezel",active:"Button---active",leftAlign:"Button---leftAlign",title:"Button---title",icon:"Button---icon"}},1063:function(e,t,n){e.exports={"green-tint":"#88af8e","blue-tint":"#024279","active-button":"#00746b",mainTint:"#024279",activeButton:"#00746b",accessory:"Accessory---accessory"}},1064:function(e,t,n){e.exports={"green-tint":"#88af8e","blue-tint":"#024279","active-button":"#00746b",mainTint:"#024279",activeButton:"#00746b",header:"AnnotationControlsHeader---header",Anotation_closeBtn:"AnnotationControlsHeader---Anotation_closeBtn",edit:"AnnotationControlsHeader---edit"}},1067:function(e,t,n){e.exports={highlight:"SearchStyle---highlight",searchListItem:"SearchStyle---searchListItem"}},1068:function(e,t,n){e.exports={TableContent:"TableOfContent---TableContent"}},1070:function(e,t,n){e.exports={voteBtn:"embedingVote---voteBtn"}},1113:function(e,t,n){"use strict";n.r(t);var r={},o=(n.r(r),n.d(r,"HomePage",(function(){return El})),n.d(r,"Editors",(function(){return Tl})),n.d(r,"Vote",(function(){return jl})),n.d(r,"NotFound",(function(){return Il})),n(0)),i=n.n(o),a=(n(892),n(861)),l=n.n(a),c=(a=n(72),n(948)),s=n.n(c),u=n(92),f=(c=n(42),n(1121)),d=n(868),p=n.n(d),h=n(1095);function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}d=Object(c.c)((function(e){function t(t){var r;t.preventDefault(),n.current instanceof HTMLInputElement&&(r=n.current.value,a((function(){e.searchChanged(r)})))}var n=i.a.createRef(),r=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||function(e,t){var n;if(e)return"string"==typeof e?m(e,t):"Map"===(n="Object"===(n=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?m(e,t):void 0}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(Object(o.useTransition)(),2),a=(r[0],r[1]);return i.a.createElement(h.a,{sx:{bgcolor:"inherit"},className:s.a.textsSearchContainer},i.a.createElement("div",{className:s.a.textsSearch},i.a.createElement("form",{onSubmit:t},i.a.createElement("input",{style:{outline:"none",maxWidth:196},type:"text",id:"textSearchInput",placeholder:e.intl.formatMessage({id:"leftbar.search"}),ref:n}),i.a.createElement(f.a,{onClick:t,variant:"outlined",size:"small",sx:{minWidth:2}},i.a.createElement(p.a,null)))))}));var y=n(2),b=n(11),g=Object(a.connect)((function(e){return{searchTerm:b.A(e),searchValue:e.ui.searchValue,textListWidth:b.bb(e)}}),(function(e){return{searchChanged:function(t){e(Object(y.Wb)(t))}}}))(d),v=(d=n(288),n.n(d)),w=n(875),O=n(863),x=(n(882),n(874)),S=(n(9),n(295)),E=(d=n(898),n.n(d)),T=(d=n(862),n.n(d)),j=(d=n(884),n.n(d));function I(e){return(I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function A(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function P(e,t){return(P=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function k(e){return(k=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var C=function(e){var t=r;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&P(t,e);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k(e);n=t?(n=k(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),r=this;if(n&&("object"===I(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==r)return r;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(r);function r(e){if(this instanceof r)return n.call(this,e);throw new TypeError("Cannot call a class as a function")}return t=r,(e=[{key:"render",value:function(){var e=this,t=this.props.string,n=t,r=this.props.stringClass||"";if(this.props.searchTerm){var i=this.props.searchTerm,a=(new T.a).splitGraphemes(t),l=t.indexOf(i),c=l+i.length,s=0,u="";if(-1<l)for(var f=0;f<a.length;f++){var d=a[f];l<=s&&s<c&&(u+=d),s+=d.length}0<u.length&&(n=j()(t,u,(function(t,n){return o.createElement("span",{className:e.props.highlightClass,key:"highlight-".concat(n)},t)})))}return o.createElement("span",{className:r},n)}}])&&A(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),r}(o.Component);function R(e){return(R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function B(e,t){return(B=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function N(e){return(N=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var W=function(e){var t=r;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&B(t,e);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=N(e);n=t?(n=N(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),r=this;if(n&&("object"===R(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==r)return r;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(r);function r(e){if(this instanceof r)return n.call(this,e);throw new TypeError("Cannot call a class as a function")}return t=r,(e=[{key:"render",value:function(){var e=this.props.count;return this.props.extra&&(e+="+"),o.createElement("span",{className:E.a.searchTotal},e)}}])&&_(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),r}(o.Component),D=n(182),L=(d=n(963),n.n(d));function H(e){return e=e.loading?i.a.createElement("span",null,i.a.createElement(D.a,{id:"leftbar.loading"})):i.a.createElement("span",null,i.a.createElement(D.a,{id:"leftbar.loadMore"})),i.a.createElement("div",{className:L.a.container},e)}var z=n(831);function M(e){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function V(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function q(e,t){return(q=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function F(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function U(e){return(U=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}d=function(e){var t=r;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&q(t,e);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=U(e);n=t?(n=U(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),r=this;if(n&&("object"===M(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return F(r)}}(r);function r(e){if(this instanceof r)return(e=n.call(this,e)).cache=new O.b({fixedWidth:!0,defaultHeight:60,minHeight:60}),e.rowRenderer=e.rowRenderer.bind(F(e)),e;throw new TypeError("Cannot call a class as a function")}return t=r,(e=[{key:"componentDidUpdate",value:function(e){this.cache.clearAll(),this.list&&this.list.forceUpdateGrid()}},{key:"rowRenderer",value:function(e){var t=this,n=e.key,r=e.index,i=e.parent,a=(e=e.style,this.props.selectedText),l=a?a.id:-1,c=this.props.selectedSearchResult,s=this.props.texts,u=this.props.onSelectedText,f=this.props.onSelectedSearchResult,d=this.props.searchTerm,p=this.props.searchResults,h=E.a.textListRow,m=s[r],y=(l=(m.id===l&&(h=v()(h,E.a.selectedRow)),Object(S.a)(m.name)),o.createElement("span",{className:E.a.textName},l)),b=[],g=null,w=!1,x=!1;0<d.length&&(y=o.createElement(C,{string:l,stringClass:E.a.textName,highlightClass:E.a.highlight,searchTerm:d}),p.hasOwnProperty(m.id)&&(b=p[m.id].results,w=p[m.id].extra,x=p[m.id].loading,g=o.createElement(W,{count:p[m.id].total,extra:w}))),l=this.cache,p=[];return 0<b.length&&(p=b.map((function(e){var t=c&&c.textId===m.id&&c.start===e[0],n=t?E.a.selectedSearchResult:E.a.searchResult;return t&&console.log("got selected result: %o",e),o.createElement(z.a,{key:m.id+"_"+e[0],onClick:function(){f(m,e[0],d.length,a)},sx:{bgcolor:"inherit",color:"inherit"},className:n},o.createElement(C,{string:e[1],highlightClass:E.a.highlight,searchTerm:d}))}))),o.createElement(O.a,{columnIndex:0,key:n,parent:i,rowIndex:r,cache:l},o.createElement("div",{key:n,style:e,className:h},o.createElement("div",{className:E.a.textNameRow,onClick:function(){u(s[r])}},y," ",g),0<b.length&&o.createElement("div",{className:E.a.searchResults},p),w&&o.createElement("div",{className:E.a.loadMore,onClick:function(){t.props.onSearchText(m,d)}},o.createElement(H,{loading:x}))))}},{key:"render",value:function(){var e=this,t=this.props.texts.length;return o.createElement("div",{className:E.a.textList},this.props.texts&&0<this.props.texts.length?o.createElement(w.a,null,(function(n){var r=n.height;n=n.width;return o.createElement(x.a,{ref:function(t){return e.list=t},height:r,rowCount:t,rowHeight:e.cache.rowHeight,rowRenderer:e.rowRenderer,width:n,overscanRowCount:3,deferredMeasurementCache:e.cache})})):this.props.searching?o.createElement("div",{className:E.a.textListLoader},o.createElement(l.a,{loaded:!this.props.searching,scale:.5}),o.createElement("p",{className:E.a.searching},"Searching…")):o.createElement("ul",{className:"textList"}))}}])&&V(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),r}(o.Component);var Q=n(111),K=Object(a.connect)((function(e){var t=b.A(e),n=b.y(e,t),r=b.E(e),o=!1,i=e.data.texts;return{texts:i=0<t.length?null===n?(o=!0,[]):i.filter((function(e){return n.hasOwnProperty(e.id)})):i,selectedText:Object(b.I)(e),searchTerm:t,searchResults:n,selectedSearchResult:r,searching:o}}),(function(e){return{onSelectedText:function(t){e(y.Mc(t))},onSelectedSearchResult:function(t,n,r,o){o&&o.id===t.id?e(y.Kc(t.id,n,r)):e(Object(Q.batchActions)([y.Kc(t.id,n,r),y.Mc(t)]))},onSearchText:function(t,n){e(y.Fc(t.id,n))}}}))(d),G=(d=n(964),n.n(d)),$=(d=(Object(a.connect)((function(e){return{textListIsVisible:Object(b.ab)(e)}}),(function(e){return{tabClicked:function(){e(Object(y.bc)(!0))}}}))((function(e){var t=[G.a.tab];return e.textListIsVisible?t.push(G.a.hideTab):t.push(G.a.showTab),i.a.createElement("div",{className:v.a.apply(void 0,t),onClick:e.tabClicked},"Text List")})),n.p,n(877)),n.n(d)),Y=(d=n(965),n.n(d)),J=(d=n(975),n.n(d)),X=(d=n(976),n.n(d)),Z=(d=n(977),n.n(d)),ee=(d=n(978),n.n(d)),te=(n(966),n(843)),ne=n(1122),re=n(1123),oe=n(1124),ie=(n(967),n(1096)),ae=(d=Object(a.connect)((function(e){return{Textdata:b.cb(e),selectedText:b.I(e)}}),(function(e){return{}}))((function(e){var t=e.Textdata,n=e.selectedText;return n?(e=t.detail.find((function(e){return e.text===n.id})))?i.a.createElement(i.a.Fragment,null,i.a.createElement(te.a,{variant:"h4",component:"div",mb:3},i.a.createElement(D.a,{id:"Resource.About"})),i.a.createElement(ne.a,{TransitionProps:{unmountOnExit:!0}},i.a.createElement(re.a,{sx:{fontWeight:"bold"},expandIcon:i.a.createElement(ie.a,null)},i.a.createElement(D.a,{id:"text.title"})),i.a.createElement(oe.a,null,e.title)),i.a.createElement(ne.a,{TransitionProps:{unmountOnExit:!0}},i.a.createElement(re.a,{expandIcon:i.a.createElement(ie.a,null)},i.a.createElement(D.a,{id:"text.description"})),i.a.createElement(oe.a,null,e.description))):i.a.createElement("div",null,"No about info"):i.a.createElement("div",null,"no selected Text available")})),n(968),n(970)),le=n.n(ae),ce=(ae=n(972),n.n(ae)),se=(ae=n(973),n.n(ae)),ue=n(847),fe=n(1125),de=n(1097),pe=n(1098);function he(e){var t=e.topicId;return Object(o.useEffect)((function(){window.DiscourseEmbed={discourseUrl:"https://lopenling.org/",topicId:t};var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src=function(e){var t=window.DiscourseEmbed||{};if(e=document.getElementById("discourse-comments-".concat(e))){var n=function(e){return e.replace(/^https?(\:\/\/)?/,"")},r=document.createElement("iframe"),o=(["discourseUrl","discourseEmbedUrl","discourseUserName","discourseReferrerPolicy"].forEach((function(e){window[e]&&(t[e]=t[e]||window[e])})),{}),i=(t.discourseEmbedUrl&&(t.discourseEmbedUrl.startsWith("/")&&console.error("discourseEmbedUrl must be a full URL, not a relative path"),o.embed_url=encodeURIComponent(t.discourseEmbedUrl)),t.discourseUserName&&(o.discourse_username=t.discourseUserName),t.topicId&&(o.topic_id=t.topicId),t.discourseUrl+"embed/comments"),a=Object.keys(o);if(0<a.length){i+="?";for(var l=0;l<a.length;l++){0<l&&(i+="&");var c=a[l];i+=c+"="+o[c]}}r.src=i,r.id="discourse-embed-frame",r.width="100%",r.frameBorder="0",r.scrolling="no",r.referrerPolicy=t.discourseReferrerPolicy||"no-referrer-when-downgrade",e.appendChild(r),window.addEventListener("message",(function(e){e&&n(t.discourseUrl).includes(n(e.origin))&&e.data&&("discourse-resize"===e.data.type&&e.data.height&&(r.height=e.data.height+"px"),"discourse-scroll"===e.data.type&&e.data.top&&(e=function(e){var t=0;if(e.offsetParent)for(;t+=e.offsetTop,e.offsetParent;)e=e.offsetParent;else e.y&&(t+=e.y);return t}(r)+e.data.top,window.scrollTo(0,e)))}),!1)}}(t),(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(e)}),[]),t?i.a.createElement("div",{id:"discourse-comments-".concat(t)}):i.a.createElement("div",null,"Topic unavailable")}function me(e){var t=void 0===(t=e.category)?"":t;e=void 0===(e=e.perPage)?5:e;return i.a.useEffect((function(){for(var e=document.querySelectorAll("#topics"),t=0;t<e.length;t++){var n=e[t],r=n.getAttribute("url");if(r&&0!==r.length){var o="de-"+Math.random().toString(36).substr(2,9),i=["discourse_embed_id="+o];n.removeAttribute("discourse-url");for(var a=0;a<n.attributes.length;a++){var l=n.attributes[a];i.push(l.name.replace("-","_")+"="+l.value)}var c=document.createElement("iframe");c.src=r+"/embed/topics?"+i.join("&"),c.id=o,c.frameBorder=0,c.scrolling="no",c.width="100%",n.appendChild(c)}else console.error("Error, `discourse-url` was not found")}}),[]),i.a.createElement("div",{id:"topics",url:"https://lopenling.org/",style:{maxHeight:"70vh",overflow:"scroll"},"per-page":e,category:t,template:"complete",status:"open","allow-create":"true"})}ae=Object(a.connect)((function(e){var t=b.u(e);return{alignmentData:b.i(e),selectedMedia:t,showPageImages:b.yb(e)}}),(function(e){return{changedShowPageImages:function(t){e(y.Yb(t))},changeMediaSelection:function(t){return e(y.Bc(t))},onSelectedSearchResult:function(t,n,r){e(y.Kc(t,n,r))}}}))((function(e){function t(t){e.changeMediaSelection(t)}return i.a.createElement(i.a.Fragment,null,i.a.createElement(te.a,{variant:"h6",gutterBottom:!0,component:"div"},"Media"),i.a.createElement(ue.a,{sx:{width:"100%",maxWidth:360,bgcolor:"background.paper"}},i.a.createElement(fe.a,{selected:e.showPageImages,onClick:function(){return e.changedShowPageImages(!e.showPageImages)}},i.a.createElement(de.a,null,i.a.createElement(le.a,null)),i.a.createElement(pe.a,{primary:"Image"})),i.a.createElement(fe.a,{selected:e.selectedMedia.isVideoVisible,onClick:function(){return t("VIDEO")}},i.a.createElement(de.a,null,i.a.createElement(ce.a,null)),i.a.createElement(pe.a,{primary:"Video"})),i.a.createElement(fe.a,{selected:e.selectedMedia.isAudioVisible,onClick:function(){return t("AUDIO")}},i.a.createElement(de.a,null,i.a.createElement(se.a,null)),i.a.createElement(pe.a,{primary:"Audio"}))))})),n(974),window.addEventListener("message",(function(e){var t;e&&e.data&&"discourse-resize"===e.data.type&&e.data.embedId&&(t=document.getElementById(e.data.embedId))&&(t.height=e.data.height+"px")}),!1);var ye={About:d,Resources:ae,FullTextSearch:function(){return i.a.createElement(i.a.Fragment,null,i.a.createElement(g,null),i.a.createElement(K,null))},Discussion:function(){return i.a.createElement(i.a.Fragment,null,"       ",i.a.createElement(te.a,{variant:"h6",gutterBottom:!0,component:"div"},"Discussions"),i.a.createElement(me,{category:"55",perPage:"5"}))}},be=n(869),ge=n(1115),ve=n(1126),we=n(782),Oe=(d=n(886),n.n(d)),xe=(ae=n(870),n.n(ae)),Se=["children","value","index"];function Ee(){return(Ee=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Te(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||function(e,t){var n;if(e)return"string"==typeof e?je(e,t):"Map"===(n="Object"===(n=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?je(e,t):void 0}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function je(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ie=Object(a.connect)((function(e){return{isSecondWindowOpen:b.wb(e)}}))((function(e){var t=(l=Te(Object(be.a)("selectedResources",0),2))[0],n=l[1],r=(l=Te(Object(o.useState)(!1),2))[0],a=l[1],l=(i.a.useEffect((function(){var t=setTimeout((function(){e.isSecondWindowOpen&&window.dispatchEvent(new Event("resize"))}),1e3);return function(){return clearTimeout(t)}}),[r]),Object(we.a)());return i.a.createElement(z.a,{sx:{width:r?"100%":"45px",bgcolor:"background.default",position:e.isSecondWindowOpen?"relative":"absolute",borderRight:"light"===l.palette.mode?"2px solid lightgray":"2px solid #d3d3d3"},className:Y.a.sidebar},i.a.createElement(z.a,{className:Y.a.sidebar_header},i.a.createElement(te.a,{className:Y.a.menu_title,sx:r?{width:"fit-content",opacity:1}:{width:"0",opacity:0}},"Menu"),i.a.createElement("div",{onClick:function(){a((function(e){return!e}))},style:{cursor:"pointer",zIndex:1}},r?i.a.createElement(xe.a,null):i.a.createElement(Oe.a,null))),i.a.createElement(z.a,{sx:{borderBottom:1,display:"flex"},className:Y.a.optionlist},i.a.createElement(ge.a,{value:t,sx:{flex:1},onChange:function(e,t){n(t)},orientation:r?"horizontal":"vertical","aria-label":"basic tabs example"},i.a.createElement(ve.a,Ee({style:{minWidth:0,flex:1},onClick:function(){return a(!0)},icon:i.a.createElement(J.a,null)},Ae(0))),i.a.createElement(ve.a,Ee({style:{minWidth:0,flex:1},icon:i.a.createElement(X.a,null),onClick:function(){return a(!0)}},Ae(1))),i.a.createElement(ve.a,Ee({style:{minWidth:0,flex:1},icon:i.a.createElement(Z.a,null),onClick:function(){return a(!0)}},Ae(2))),i.a.createElement(ve.a,Ee({style:{minWidth:0,flex:1},icon:i.a.createElement(ee.a,null),onClick:function(){return a(!0)}},Ae(3))))),r&&i.a.createElement(i.a.Fragment,null,i.a.createElement(Pe,{value:t,index:0},i.a.createElement(ye.About,null)),i.a.createElement(Pe,{value:t,index:1},i.a.createElement(ye.Resources,null)),i.a.createElement(Pe,{value:t,index:2},i.a.createElement(ye.FullTextSearch,null)),i.a.createElement(Pe,{value:t,index:3},i.a.createElement(ye.Discussion,null))))}));function Ae(e){return{id:"simple-tab-".concat(e),"aria-controls":"simple-tabpanel-".concat(e)}}function Pe(e){var t=e.children,n=e.value,r=e.index;e=function(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],0<=t.indexOf(n)||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(e),i=0;i<o.length;i++)n=o[i],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}(e,Se);return i.a.createElement("div",Ee({role:"tabpanel",hidden:n!==r,id:"simple-tabpanel-".concat(r),"aria-labelledby":"simple-tab-".concat(r)},e,{style:{flex:1,display:n==r?"flex":"none",flexDirection:"column"}}),n===r&&i.a.createElement("div",{className:Y.a.listContainer},t))}d=n(979);var ke=n.n(d),Ce=(ae=n(241),n.n(ae)),Re=(d=n(193),n.n(d)),_e=(ae=n(887),n.n(ae)),Be=(n(980),n(981),n(844),n(1099)),Ne=n(848);n(983),n(982),n(851),n(903);var We=n(849),De=n(984),Le=n(62);function He(e){var t=Object(Le.a)(),n=i.a.useRef(null);return i.a.createElement(We.a,{in:e.open},i.a.createElement(De.a,{profile:"top_progress",src:["https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3"],isDark:"dark"===t.palette.mode,onLoad:function(e){console.log(e)},speedPanel:"bottom",ref:n,onPlay:function(e){console.log(e)}}))}d=n(986);var ze=n.n(d);function Me(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function Ve(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Me(Object(n),!0).forEach((function(t){var r,o;r=e,o=n[t=t],t in r?Object.defineProperty(r,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[t]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Me(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function qe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||function(e,t){var n;if(e)return"string"==typeof e?Fe(e,t):"Map"===(n="Object"===(n=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Fe(e,t):void 0}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Fe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ue(e){return 60*+(e=(0<arguments.length&&void 0!==e?e:"").split(":"))[0]*60+60*+e[1]+ +e[2]}function Qe(e){var t,n=e.alignmentData.text,r=null==e||null==(r=e.videoData)||null==(r=r.source)?void 0:r.text,a=(null==e||null==(l=e.videoData)?void 0:l.alignment)||[],l=qe(Object(o.useState)({}),2),c=l[0],s=l[1],u=[],f=e.syncIdOnClick,d=(l=qe(Object(o.useState)({played:0,duration:0,playing:!0}),2))[0],p=l[1],h=(Re()(a)||(u=a.map((function(e){return[parseInt(e.source_segment.start),parseInt(e.source_segment.end)]}))),Object(o.useEffect)((function(){var r,o;n===e.selectedText.id&&(r=f,(t=u.find((function(e){var t=(e=qe(e,2))[0];e=e[1];return t<r&&r<e})))&&(o=a.find((function(e){return e.source_segment.start===(null==(e=t[0])?void 0:e.toString())})),Re()(o)||y(o.target_segment.start)))}),[f]),Object(o.useCallback)((function(){var t=c;if(n===e.selectedText.id)for(var r=t.start;r<t.end;r++){var o=document.getElementById("s_".concat(r));o&&(o.style.fontWeight="bold")}}),[c.start])),m=(Object(o.useEffect)((function(){var t=setTimeout((function(){return h()}),800),n=c;return c.start&&e.changeScrollToId({id:n.start||null,from:"video"}),function(){clearTimeout(t);for(var e=n.start;e<n.end;e++){var r=document.getElementById("s_".concat(e));r&&(r.style.fontWeight="normal")}}}),[c.start]),Object(o.useRef)()),y=function(e){t=d.duration,e=Ue(e=e)/t;var t=parseFloat(e);m.current.seekTo(parseFloat(t))};return 0===a.length||r!==e.selectedText.id?i.a.createElement("div",null):i.a.createElement(We.a,{in:e.open},i.a.createElement(ze.a,{url:"https://www.youtube.com/watch?v=2MMM_ggekfE",style:{maxWidth:"100%"},ref:m,controls:!0,onDuration:function(e){return p(Ve(Ve({},d),{},{duration:e}))},light:!0,playing:!0,onPlay:function(){return p(Ve(Ve({},d),{},{playing:!0}))},onPause:function(){return p(Ve(Ve({},d),{},{playing:!1}))},onProgress:function(e){var t=e.playedSeconds;e=a.find((function(e){return Ue(e.target_segment.start)<t&&Ue(e.target_segment.end)>t}));Re()(e)||(e=e.source_segment,h(),s(Ve({},e)))},onError:function(){return console.log("error in media sec")}}))}n(1005);ae=n(888);var Ke=n.n(ae),Ge=n(845);function $e(){return($e=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Ye(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Je(e){return i.a.createElement(Ke.a,{handle:"#draggable-dialog-title",bounds:"parent"},i.a.createElement(Ge.a,e))}n(1009);var Xe=Object(a.connect)((function(e){var t=b.x(e),n=b.S(e),r=b.r(e),o=b.jb(e),i=b.u(e),a=b.I(e);return{scrollToId:t,syncIdOnClick:n,imageData:r,videoData:o,selectedMedia:i,selectedText:a,isImagePortrait:b.ub(e),alignmentData:b.i(e),witness:b.M(e,a.id),witnesses:b.db(e,a.id),ImageVersion:b.D(e),selectedImage:b.C(e)}}),(function(e){return{toggleImage:function(t){return e(y.Yb(t))},onSelectedSearchResult:function(t,n,r,o){o&&o.id===t.id?e(y.Kc(t.id,n,r)):e(batchActions([y.Kc(t.id,n,r),y.Mc(t)]))},changeMediaSelection:function(t){return e(y.Bc(t))},changeIsImagePortrait:function(t){return e(y.Qc(t))},changeImageVersion:function(t){return e(y.Hc(t))},changeSelectedImage:function(t){return e(y.Gc(t))},changeSelectedRange:function(t){e(y.Ob(t))},changeScrollToId:function(t){return e(y.Nb(t))}}}))((function(e){var t=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||function(e,t){var n;if(e)return"string"==typeof e?Ye(e,t):"Map"===(n="Object"===(n=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ye(e,t):void 0}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(i.a.useState(!0),2),n=t[0],r=t[1];return e.selectedMedia.isImageVisible?null:i.a.createElement(Je,{sx:{position:"absolute",zIndex:1,right:0}},i.a.createElement("div",{className:"Resizable-media-div"},i.a.createElement("div",{style:{cursor:"move",paddingInline:20,paddingTop:10,display:"flex",justifyContent:"space-between",alignItems:"center"},id:"draggable-dialog-title"},i.a.createElement("h3",null,e.selectedMedia.isVideoVisible&&"VIDEO"),i.a.createElement("h3",null,e.selectedMedia.isAudioVisible&&"AUDIO"),i.a.createElement("div",{className:"buttons-hide-close"},i.a.createElement(Ne.a,{onClick:function(){r((function(e){return!e}))},disableRipple:!0},n?"-":"+"),i.a.createElement(Ne.a,{onClick:function(){e.changeMediaSelection(null)},disableRipple:!0},i.a.createElement(xe.a,null)))),i.a.createElement(i.a.Fragment,null,e.selectedMedia.isVideoVisible&&i.a.createElement(Qe,$e({},e,{open:n,setOpen:r})),e.selectedMedia.isAudioVisible&&i.a.createElement(He,{open:n,setOpen:r}))))}));function Ze(e){return(Ze="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function et(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function tt(e,t){return(tt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function nt(e){return(nt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var rt=function(e){var t=o;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&tt(t,e);var n,r=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=nt(e);n=t?(n=nt(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),r=this;if(n&&("object"===Ze(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==r)return r;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(o);function o(e){if(this instanceof o)return(e=r.call(this,e)).state={hasError:!1},e;throw new TypeError("Cannot call a class as a function")}return t=o,e=[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0}}}],(n=[{key:"componentDidCatch",value:function(e,t){console.log(e,t)}},{key:"render",value:function(){return this.state.hasError?i.a.createElement("h1",null,"Something went wrong."):this.props.children}}])&&et(t.prototype,n),e&&et(t,e),Object.defineProperty(t,"prototype",{writable:!1}),o}(i.a.Component),ot=n(1012),it=(d=(n(1015),n(890)),n.n(d)),at=(ae=n(916),n.n(ae)),lt=(d=n(293),n.n(d)),ct=(ae=n(871),n.n(ae)),st=(d=n(917),n.n(d)),ut=(ae=n(918),n.n(ae)),ft=n(83),dt=Object(o.memo)(Object(c.c)((function(e){var t=[],n="",r="",o=[];return e.witnesses&&(t=e.witnesses.map((function(e){return e})),e.activeWitness&&(r=e.witnesses.findIndex((function(t){return t.id===e.activeWitness.id}))),t.sort((function(e,t){return e.isWorking?-1:t.isWorking?1:e.isBase?-1:t.isBase?1:0})),t=t.sort((function(e,t){return e.id-t.id}))),Re()(t)&&!e.activeWitness?null:i.a.createElement(Be.a,{onChange:function(n){Re()(t)||e.onSelectedWitness(t[n.target.value])},className:ut.a.selectVersion,value:r,label:"Version2",classes:{root:ut.a.selectEmpty,select:ut.a.selectOptions}},t.map((function(t,r){var a;return t.id===(null==(a=e.activeWitness)?void 0:a.id)&&o.push(ut.a.selected),n=t.source.name,t.isWorking&&(n="en"===e.intl.locale?"User"===e.user.name?"Working":"My Edition":"མཉམ་འབྲེལ་པར་མ།"),i.a.createElement("option",{key:"versionSelect2-".concat(r),value:r,className:ut.a.selectOptions},n)})))}))),pt=n(873),ht=(d=n(921),n.n(d)),mt=n(1100),yt=n(836),bt=n(838);function gt(e){return function(e){if(Array.isArray(e))return Ot(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||wt(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function vt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||wt(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function wt(e,t){var n;if(e)return"string"==typeof e?Ot(e,t):"Map"===(n="Object"===(n=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ot(e,t):void 0}function Ot(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}ae=i.a.memo((function(e){var t=Object(o.useRef)(e.texts),n=(s=vt(Object(o.useState)(t.current),2))[0],r=s[1],a=(s=vt(Object(o.useState)(null),2))[0],l=s[1],c=e.onSelectedText,s=e.selectedText,u=(p=vt(Object(o.useState)(!1),2))[0],d=p[1],p=null==s?void 0:s.name,h=(s=e.selectedText1,Object(o.useEffect)((function(){var e;""===a&&r(gt(t.current)),null!==a&&""!==a&&(e=t.current.filter((function(e){return e.name.includes(a)})),r(gt(e)))}),[a]),Object(o.useRef)(new pt.c({fixedHeight:!0,defaultHeight:40}))),m=[ht.a.textlist],y=i.a.useCallback((function(e){var t=e.key,r=e.index,o=e.style,a=(e=e.parent,n[r]);return i.a.createElement(pt.b,{key:"optionvalues-".concat(t),cache:h.current,parent:e,columnIndex:0,rowIndex:r},i.a.createElement("div",{style:o,onClick:function(){d(!1),c(a)}},i.a.createElement(z.a,{sx:{overflow:"hidden",textOverflow:"ellipsis",width:"13rem",paddingLeft:2,fontSize:{lg:12,md:11,sm:10,xs:10},color:"text.primary"},component:"div"},i.a.createElement(te.a,{noWrap:!0},Object(S.a)(a.name)))))}),[n]);return i.a.createElement(mt.a,{onClickAway:function(){return d(!1)}},i.a.createElement("div",{style:{position:"relative",marginLeft:10}},i.a.createElement(f.a,{onClick:function(){d((function(e){return!e})),!1===u&&m.push(ht.a.open)},component:"div",variant:"outlined",sx:{overflow:"hidden",textOverflow:"ellipsis",width:"10rem",height:"100%",color:"text.primary"},disabled:null===s},i.a.createElement(te.a,{noWrap:!0},p||"select Text here")),i.a.createElement(yt.a,{in:u},i.a.createElement(z.a,{className:v()(m),sx:{position:"absolute",bgcolor:"heading.main",zIndex:1}},i.a.createElement(bt.a,{onChange:function(e){e=e.target.value,l(e)},id:"standard-basic",label:"filter",variant:"standard",style:{width:"100%"}}),i.a.createElement(pt.a,null,(function(e){var t=e.width;e=e.height;return i.a.createElement(pt.d,{width:t,height:e,rowHeight:40,deferredMeasurementCache:h.current,rowCount:n.length,rowRenderer:y})}))))))}));var xt,St=Object(a.connect)((function(e){var t=b.A(e),n=b.y(e,t),r=b.E(e),o=!1,i=e.data.texts;return{texts:i=0<t.length?null===n?(o=!0,[]):i.filter((function(e){return n.hasOwnProperty(e.id)})):i,selectedText1:Object(b.I)(e),selectedText:Object(b.J)(e),searchTerm:t,searchResults:n,selectedSearchResult:r,searching:o}}),(function(e){return{onSelectedText:function(t){e(y.Nc(t))}}}))(ae);function Et(){return(Et=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Tt(e){return i.a.createElement("svg",Et({viewBox:"0 0 512 512"},e),xt=xt||i.a.createElement("path",{d:"M507.73 109.1c-2.24-9.03-13.54-12.09-20.12-5.51l-74.36 74.36-67.88-11.31-11.31-67.88 74.36-74.36c6.62-6.62 3.43-17.9-5.66-20.16-47.38-11.74-99.55.91-136.58 37.93-39.64 39.64-50.55 97.1-34.05 147.2L18.74 402.76c-24.99 24.99-24.99 65.51 0 90.5 24.99 24.99 65.51 24.99 90.5 0l213.21-213.21c50.12 16.71 107.47 5.68 147.37-34.22 37.07-37.07 49.7-89.32 37.91-136.73zM64 472c-13.25 0-24-10.75-24-24 0-13.26 10.75-24 24-24s24 10.74 24 24c0 13.25-10.75 24-24 24z"}))}function jt(e){var t=new Array(34).fill().map((function(e,t){return t=14+t,i.a.createElement("option",{value:t,key:t},t)}));return i.a.createElement("div",{className:It.a.fontSize},i.a.createElement("label",{htmlFor:"fontSize"},"Font Size"),i.a.createElement("select",{value:e.fontSize,onChange:function(t){var n=event.target;n=Number(n.value);e.onChange(n)}},t))}d=n(1038);var It=n.n(d),At=(ae=n(922),n.n(ae)),Pt=n(846),kt=n(1101),Ct=n(1127);function Rt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||function(e,t){var n;if(e)return"string"==typeof e?_t(e,t):"Map"===(n="Object"===(n=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_t(e,t):void 0}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Bt(e){var t=Rt(Object(o.useState)(!1),2),n=t[0],r=t[1],a=(t=Rt(Object(be.a)("WindowTwoFont","Tibetan"),2))[0],l=t[1];return Object(o.useEffect)((function(){document.body.style.setProperty("--tibetan-fonts2",a)}),[]),i.a.createElement(mt.a,{onClickAway:function(){return r(!1)}},i.a.createElement(z.a,{position:"relative"},i.a.createElement(Ne.a,{onClick:function(){r((function(e){return!e}))},size:"small",variant:"text"},i.a.createElement(Tt,{height:20,width:20,fill:"currentColor"})),i.a.createElement(yt.a,{in:n},i.a.createElement(Pt.a,{dense:!0,sx:{position:"absolute",right:0,zIndex:2,top:40,bgcolor:"heading.main"}},i.a.createElement(jt,{fontSize:e.textFontSize,onChange:e.onChangedFontSize}),i.a.createElement(kt.a,null),i.a.createElement(Nt,{selectFont:function(e){l(e),document.body.style.setProperty("--tibetan-fonts2","".concat(e)),setTimeout((function(){window.dispatchEvent(new Event("resize"))}),1e3),r(!1)},selectedfont:a}),i.a.createElement(Ct.a,{onClick:function(){return e.onExport()}},"Export Document",e.exportingWitness&&i.a.createElement(At.a,null))))))}var Nt=function(e){var t=e.selectFont,n=(e=e.selectedfont,u.c||[]);return i.a.createElement(z.a,{textAlign:"center"},i.a.createElement("span",null,"Font:")," ",i.a.createElement("select",{onChange:function(e){return t(e.target.value)},value:e},n.map((function(e,t){return i.a.createElement("option",{key:t+"-fontselect",value:e},e)}))))};function Wt(e){return e=e.handleWindowSearch,i.a.createElement(Ne.a,{size:"small",variant:"text",onClick:e},i.a.createElement(p.a,null))}d=n(923);var Dt=n.n(d);function Lt(e){return i.a.createElement(i.a.Fragment,{key:"right"},i.a.createElement(Ne.a,{onClick:function(){e.changeShowTableContent(!e.showTableContent)}},e.showTableContent?i.a.createElement(Dt.a,null):i.a.createElement(Oe.a,null)))}var Ht=n(830),zt=n(1128);function Mt(e){return(Mt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Vt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function qt(e,t){return(qt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Ft(e){return(Ft=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ut=function(e){var t=r;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&qt(t,e);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ft(e);n=t?(n=Ft(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),r=this;if(n&&("object"===Mt(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==r)return r;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(r);function r(e){if(this instanceof r)return n.call(this,e);throw new TypeError("Cannot call a class as a function")}return t=r,(e=[{key:"render",value:function(){var e=this,t=this.props.string,n=t,r=this.props.stringClass||"";if(this.props.searchTerm){var i=this.props.searchTerm,a=(new T.a).splitGraphemes(t),l=t.indexOf(i),c=l+i.length,s=0,u="";if(-1<l)for(var f=0;f<a.length;f++){var d=a[f];l<=s&&s<c&&(u+=d),s+=d.length}0<u.length&&(n=j()(t,u,(function(t,n){return o.createElement("span",{className:e.props.highlightClass,key:"highlight-".concat(n)},t)})))}return o.createElement("span",{className:r},n)}}])&&Vt(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),r}(o.Component),Qt=(ae=n(1040),n.n(ae));function Kt(e){function t(e){var t=e.key,o=e.index,c=e.parent,u=(e=e.style,a[o]);return i.a.createElement(pt.b,{key:"listkeys2-".concat(t),cache:s.current,parent:c,columnIndex:0,rowIndex:o},i.a.createElement("div",{style:e},0<a.length&&i.a.createElement("div",{className:Qt.a.searchListItem,onClick:function(){return n(l,u[0],r.length,l)}},i.a.createElement(Ut,{string:u[1],highlightClass:Qt.a.highlight,searchTerm:r}))))}var n=e.onSelectedSearchResult,r=e.searchValue,a=e.results,l=e.selectedText,c=Object(o.useRef)(),s=Object(o.useRef)(new pt.c({fixedWidth:!0,defaultHeight:100}));return a?i.a.createElement(i.a.Fragment,null,i.a.createElement(pt.a,null,(function(e){var n=e.height;e=e.width;return i.a.createElement(pt.d,{ref:c,height:n,rowCount:null==a?void 0:a.length,rowHeight:s.current.rowHeight,deferredMeasurementCache:s.current,rowRenderer:t,width:e,overscanRowCount:1})}))):null}function Gt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||function(e,t){var n;if(e)return"string"==typeof e?$t(e,t):"Map"===(n="Object"===(n=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?$t(e,t):void 0}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Yt(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function Jt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Yt(Object(n),!0).forEach((function(t){var r,o;r=e,o=n[t=t],t in r?Object.defineProperty(r,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[t]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Yt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Xt=Object(a.connect)((function(e){var t,n=b.ib(e),r=b.J(e),o=[],i=(r&&(o=b.eb(e,r.id),t=(t=b.N(e,r.id))?b.lb(e,t):b.pb(e,r.id)),b.Z(e)),a=Object(b.Q)(e),l=b.B(e);return{witnesses:o,selectedText:r,selectedWitness:t,textListIsVisible:Object(b.ab)(e),accountOverlayVisible:Object(b.e)(e),textFontSize:i,user:n,searchValue:l,showTableContent:a,searchResults:b.z(e,l)}}),null,(function(e,t,n){var r=t.dispatch,o=e.selectedText;return Jt(Jt(Jt({},n),e),{},{navigationButtonClicked:function(){t.dispatch(y.bc(!e.textListIsVisible))},onSelectedWitness:function(e){r(y.Pc(null==o?void 0:o.id,null==e?void 0:e.id))},onChangedFontSize:function(e){r(y.ac(e))},changeShowTableContent:function(e){r(y.Uc(e))},searchChanged:function(e){r(y.Xb(e))},changeSelectSyncId:function(e){},onSelectedSearchResult:function(e,t,n,o){o&&o.id===e.id?r(y.Lc(e.id,t,n)):r(batchActions([y.Lc(e.id,t,n),y.Nc(e)]))}})}))((function(e){var t=(u=Gt(Object(o.useState)(""),2))[0],n=u[1],r=(u=Gt(Object(o.useState)(!1),2))[0],a=u[1],l=(u=Gt(Object(o.useState)(!1),2))[0],c=u[1],s=Object(o.useRef)(),u=Object(o.useRef)(),d=i.a.useRef(ct()((function(t){e.searchChanged(t)}),1e3)).current,p=Object(o.useCallback)((function(e){e.preventDefault(),d(t),c(!0)}),[t]),h=Object(o.useCallback)((function(){a(!r)}),[r]),m=(Object(o.useEffect)((function(){!0===r&&s.current.focus(),!1===r&&d(null)}),[r]),lt()(e.searchResults)&&e.searchResults.hasOwnProperty(e.selectedText.id)),y=m?e.searchResults[e.selectedText.id].results:[];return i.a.createElement(Ht.a,{direction:"column",ref:u,spacing:1,sx:{paddingInline:{md:1,xs:0},paddingBlock:{md:1,xs:0},borderTop:{md:0,xs:"1px solid gray"},bgcolor:"heading.main",color:"text.primary"}},i.a.createElement(Ht.a,{direction:"row",spacing:1,justifyContent:"space-between"},i.a.createElement(z.a,{sx:{display:"flex",gap:{md:2,sx:0},flexDirection:{md:"row",xs:"column"}}},i.a.createElement(St,null),i.a.createElement(dt,{witnesses:e.witnesses,activeWitness:e.selectedWitness,onSelectedWitness:e.onSelectedWitness,user:e.user})),i.a.createElement(zt.a,{size:"small","aria-label":"small button group",sx:{position:"relative",display:"flex",alignItems:"center",justifyContent:"center",height:"fit-content",width:"fit-content",border:function(e){return"1px solid ".concat(e.palette.divider)},borderRadius:1,bgcolor:"background.paper",color:"text.secondary","& svg":{m:1},"& hr":{mx:.5}},className:st.a.button_group_menu},i.a.createElement(Wt,{handleWindowSearch:h}),i.a.createElement(Bt,{textFontSize:e.textFontSize,onChangedFontSize:e.onChangedFontSize,onExport:e.onExport}),i.a.createElement(Lt,{changeShowTableContent:e.changeShowTableContent,showTableContent:e.showTableContent}))),i.a.createElement(We.a,{in:r,mountOnEnter:!0,unmountOnExit:!0},i.a.createElement("form",{onSubmit:p},i.a.createElement(Ht.a,{direction:"row",spacing:2,position:"relative"},i.a.createElement(bt.a,{hiddenLabel:!0,id:"filled-hidden-label-small",inputProps:{style:{height:25,padding:"0 14px"}},style:{height:25,flex:1},fullWidth:!0,inputRef:s,value:t,onChange:function(e){return n(e.target.value)}}),i.a.createElement(f.a,{variant:"outlined",size:"small",onClick:p,style:{height:25}},"Search"),e.searchResults&&l&&i.a.createElement(z.a,{sx:((u="boxShadow")in(p={position:"absolute",top:35,right:0,zIndex:1,bgcolor:"heading.main",width:350,height:350,boxShadow:h=3,overflowX:"hidden"})?Object.defineProperty(p,u,{value:h,enumerable:!0,configurable:!0,writable:!0}):p[u]=h,p)},0===y.length&&i.a.createElement("p",null,"no such word present"),m&&0<y.length&&i.a.createElement(Kt,{onSelectedSearchResult:e.onSelectedSearchResult,searchValue:e.searchValue,results:y,selectedText:e.selectedText}),i.a.createElement(Ne.a,{"aria-label":"closeButton",onClick:function(){c(!1),d(null),n("")},size:"small",sx:{right:15,top:0,position:"absolute"}},i.a.createElement(xe.a,{fontSize:"inherit"})))))))})),Zt=n(157),en=n(96);function tn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var nn=function(){function e(t,n){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.annotatedText=t,this.splitter=n,this._texts=null,this._textsId=null,this._textsFinalPositions=[]}var t,n;return t=e,(n=[{key:"texts",get:function(){if(!this.annotatedText)return[];if(!this._texts||this._textsId!==this.annotatedText.getUniqueId()){this._textsFinalPositions=[];var e=this.annotatedText.segmentedText,t=e.getText(),n=this.splitter(t).filter((function(e){return 0!==e}));if(0===n.length)return this._textsFinalPositions.push(t.length),[e];n[n.length-1]+1<t.length&&n.push(t.length-1);for(var r=e.segments,o=0,i=[],a=0;a<n.length;a++){var l=n[a],c=(l=e.indexOfSegmentAtPosition(l-1),void 0);c=a==n.length-1?r.slice(o):r.slice(o,l+1),c=new Zt.a(c);i.push(c),o=l+1,0<=l&&(c=r[l],this._textsFinalPositions.push(c.end))}this._texts=i.filter((function(e){return 0<e.segments.length})),this._textsId=this.annotatedText.getUniqueId()}return this._texts||[]}},{key:"getTextsFinalPositions",value:function(){return this.texts,this._textsFinalPositions}},{key:"getTextIndexOfPosition",value:function(e){for(var t=this.getTextsFinalPositions(),n=0,r=null,o=0;o<t.length;o++){var i=t[o];if(n<=e&&e<=i){r=o;break}n=i}return null===r&&(console.warn("no index for position %d",e),r=t.length-1),r}}])&&tn(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),rn=n(300),on=(d=n(924),n.n(d)),an=n(1103),ln=(ae=n(6),n(828)),cn=(d=n(50),n(1129));function sn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var un=Object(ae.a)("div")((function(e){return sn({position:"relative",borderRadius:(e=e.theme).shape.borderRadius,backgroundColor:Object(ln.a)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object(ln.a)(e.palette.common.white,.25)},marginLeft:0,width:"100%"},e.breakpoints.up("sm"),{marginLeft:e.spacing(1),width:"auto"})})),fn=Object(ae.a)("div")((function(e){return{padding:e.theme.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"}})),dn=Object(ae.a)(d.c)((function(e){return{color:"inherit","& .MuiInputBase-input":sn({padding:(e=e.theme).spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(e.spacing(4),")"),transition:e.transitions.create("width"),width:"100%"},e.breakpoints.up("sm"),{width:"0",cursor:"pointer","&:focus":{width:"20ch"}})}}));function pn(){return i.a.createElement(z.a,{sx:{bgcolor:"heading.main",color:"text.primary",width:"100%",height:"100%",paddingInline:2}},i.a.createElement(cn.a,{sx:{justifyContent:"space-between",paddingLeft:"0 !important",margin:0}},i.a.createElement(te.a,{textTransform:"uppercase",component:"h6"},"Table Of Content"),i.a.createElement(un,null,i.a.createElement(fn,null,i.a.createElement(p.a,null)),i.a.createElement(dn,{placeholder:"Search…",inputProps:{"aria-label":"search"}}))),i.a.createElement(z.a,null,[{Id:1,Title:"chapter 1",segment_id:0},{Id:2,Title:"chapter 2",segment_id:400}].map((function(e,t){return i.a.createElement(z.a,{key:"TableContent-"+t,sx:{cursor:"pointer",width:"fit-content","&:hover":{fontWeight:"bold"}}},e.Title)}))))}var hn=n(925),mn=n.n(hn),yn=(hn=n(73),n.n(hn)),bn=(hn=n(926),n.n(hn)),gn=n(68),vn=n(36);hn=n(1102);function wn(e){return(wn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function On(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||function(e,t){var n;if(e)return"string"==typeof e?xn(e,t):"Map"===(n="Object"===(n=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?xn(e,t):void 0}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Sn(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function En(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Sn(Object(n),!0).forEach((function(t){var r,o;r=e,o=n[t=t],t in r?Object.defineProperty(r,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[t]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Sn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Tn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function jn(e,t){return(jn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function In(e){return(In=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var An=function(e){var t=r;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&jn(t,e);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=In(e);n=t?(n=In(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),r=this;if(n&&("object"===wn(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==r)return r;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(r);function r(e){var t;if(this instanceof r)return(t=n.call(this,e)).state={segmentedText:e.segmentedText},t.textAlignmentById=t.props.textAlignmentById,t._renderedSegments=null,t._renderedHtml=null,t;throw new TypeError("Cannot call a class as a function")}return t=r,(e=[{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.setState((function(t,n){return En(En({},t),{},{segmentedText:e.segmentedText})}))}},{key:"selectedElement",value:function(e){var t=[],n=[],r=document.getSelection();if(null!=e&&e.id.includes("s2_")&&this.props.condition){var o=parseInt(e.id.replace("s2_","")),i=(this.props.changeSyncIdOnClick(o),this.props.changeScrollToId({id:"ua",from:"ua"}),parseInt(e.id.replace("s2_",""))),a=this.textAlignmentById.find((function(e){return i>=e.TStart&&i<e.TEnd}));if(a){for(var l=a.start;l<a.end;l++)t.push(l);for(var c=a.TStart;c<a.TEnd;c++)n.push(c);this.props.changeSelectedRange({source:t,target:n})}}r&&"Range"===r.type||(this.props.selectedSegmentId(e.id),e.id||this.props.changeSelectedRange({source:[],target:[]}))}},{key:"generateHtml",value:function(e,t){var n=t.segmentedText.segments,r='<p class="'+bn.a.textLine+'">';if(0===n.length)return{__html:r};for(var o=n[n.length-1].end+1,i=bn.a.highlight,a=bn.a.activeHighlight,l=null,c=0;c<n.length;c++){var s=n[c],u="",f=[];if(s.start===o)break;var d,p=null,h=(0!==s.length&&(p="s2_"+s.start),null!=(d=e.selectedTargetRange)&&d.includes(s.start)&&e.condition&&(d="light"===e.theme.palette.mode?bn.a.selectedRangelight:bn.a.selectedRangeDark,f.push(d)),0<f.length&&(u='class="'+v.a.apply(void 0,f)+'"'),s.text);if(e.searchStringPositions){var m=s.start,y=m,b=(h="",i);e.selectedSearchResult&&e.selectedSearchResult.start<=y&&e.selectedSearchResult.start+e.selectedSearchResult.length>y&&(b=a);for(var g=0;g<s.text.length;g++){var w,O,x,S=s.text.charAt(g);y=m+g;l?((w=On(l,2))[0],0===g&&(h+='<span class="'+b+'">'),y===w[1]?(h+=S+"</span>",l=null):g===s.text.length-1?h+=S+"</span>":h+=S):y in e.searchStringPositions?(O=(w=On(e.searchStringPositions[y],2))[0],x=w[1],h+='<span class="'+b+'">'+S,g!==s.text.length-1&&y!==x||(h+="</span>"),y<x&&(l=[O,x])):h+=S}}r+="<span id="+p+" key="+p+" "+u+">"+h+"</span>"}return this._renderedSegments=n,{__html:r+="</p>"}}},{key:"shouldComponentUpdate",value:function(e,t){return t=this.generateHtml(e,t),this.props.fontSize!==e.fontSize||(!this._renderedHtml||t.__html!==this._renderedHtml.__html)&&this._renderedHtml!==t&&(this._renderedHtml=t,!0)}},{key:"componentDidUpdate",value:function(){this.textAlignmentById=this.props.textAlignmentById}},{key:"render",value:function(){var e=this,t=[bn.a.text],n=(0===this.props.row&&t.push(bn.a.textFirstRow),this._renderedHtml||this.generateHtml(this.props,this.state));return this._renderedHtml||(this._renderedHtml=n),i.a.createElement("div",{className:bn.a.textContainer},i.a.createElement("div",{className:v.a.apply(void 0,t),dangerouslySetInnerHTML:n,onClick:function(t){return e.selectedElement(t.target)},style:{fontSize:this.props.fontSize,fontFamily:"var(--tibetan-fonts2)"}}))}}])&&Tn(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),r}(i.a.Component),Pn=Object(hn.a)(An),kn=(An=n(927),n.n(An));function Cn(e){return(Cn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Rn(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function _n(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Rn(Object(n),!0).forEach((function(t){Bn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Rn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Bn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Nn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||function(e,t){var n;if(e)return"string"==typeof e?Wn(e,t):"Map"===(n="Object"===(n=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Wn(e,t):void 0}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Wn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Dn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ln(e,t){return(Ln=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Hn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function zn(e){return(zn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Mn={},Vn=function(e){var t=r;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ln(t,e);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=zn(e);n=t?(n=zn(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),r=this;if(n&&("object"===Cn(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return Hn(r)}}(r);function r(e){var t;if(this instanceof r)return(t=n.call(this,e)).textAlignmentById=[],t.changeScrollToId=e.changeScrollToId,t.condition=e.condition,t.list=null,t.splitText=null,t.cache=new O.b({fixedWidth:!0}),t.rowRenderer=t.rowRenderer.bind(Hn(t)),t.activeSelection=null,t.selectedNodes=null,t._mouseDown=!1,t._activeWitness=null,t._didSetInitialScrollPosition=!1,t._modifyingSelection=!1,t.imageHeight=null,t.imageWidth=null,t.calculatedImageHeight=null,t.selectedWindow=t.props.selectedWindow,t.scrollEvent=t.scrollEvent.bind(Hn(t)),t.scrollTop=0,t;throw new TypeError("Cannot call a class as a function")}return t=r,(e=[{key:"scrollEvent",value:function(e){if(1===this.selectedWindow)return null;var t;2===this.selectedWindow&&(t=[],this.textAlignmentById.map((function(e){var n=document.getElementById("s2_"+e.TStart);n&&90<n.getBoundingClientRect().top&&t.push({id:e.id,start:e.start,TStart:e.TStart,end:e.end,TEnd:e.TEnd})})),Re()(t)||2===this.selectedWindow&&this.debouncedScroll(t))}},{key:"selectedListRow",value:function(e){var t=null;return e.activeAnnotation?e.splitText.getTextIndexOfPosition(e.activeAnnotation.start):t}},{key:"handleSelection",value:function(e){this._modifyingSelection?(e.stopPropagation(),this._modifyingSelection=!1):(this.activeSelection=document.getSelection(),this._mouseDown||this.mouseUp())}},{key:"mouseDown",value:function(){this._mouseDown=!0}},{key:"mouseUp",value:function(){this._mouseDown=!1,this.activeSelection&&(this.activeSelection=null)}},{key:"getNodeSegmentSpan",value:function(e){for(var t=e,n=null,r=/^(i|s|ds)_/;!n&&t.parentNode;)t instanceof Element&&r.test(t.id)&&(n=t),t=t.parentNode;return n}},{key:"updateList",value:function(){var e=!(0<arguments.length&&void 0!==arguments[0])||arguments[0],t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;if(this.props.showImages&&!this.calculatedImageHeight&&this.imageHeight&&this.imageWidth&&(this.calculatedImageHeight=this.calculateImageHeight()),this.list){var n=this.list;if(e)if(null!==t)if(Array.isArray(t)){if(Array.isArray(t))for(var r=0;r<t.length;r++){var o=t[r];this.cache.clear(o)}}else this.cache.clear(t);else this.cache.clearAll(),n.measureAllRows(),n.recomputeRowHeights(0);n.forceUpdateGrid()}}},{key:"processProps",value:function(e){var t=this,n=!1;if((o=((!this.props.selectedWitness||e.selectedWitness&&e.selectedWitness.id!==this.props.selectedWitness.id)&&(this._didSetInitialScrollPosition=!(n=!0)),!e.selectedSearchResult||this.props.selectedSearchResult&&e.selectedSearchResult.start===this.props.selectedSearchResult.start&&e.selectedSearchResult.textId===this.props.selectedSearchResult.textId||(console.log("resetting scroll position from search result"),this._didSetInitialScrollPosition=!1),this.getControlsMeasurements(e)))&&(this.selectedTextIndex=o.selectedTextIndex,this.firstSelectedSegment=o.firstSelectedSegment,this.splitTextRect=o.splitTextRect,this.selectedElementId=o.selectedElementId,this.selectedElementIds=o.selectedElementIds),e.textListVisible!==this.textListVisible||e.editMenuVisible!==this.editMenuVisible)setTimeout((function(){t.textListVisible=e.textListVisible,t.editMenuVisible=e.editMenuVisible,t.updateList(!0)}),500);else if(n)this.updateList(!0);else if(this.pageBreaksChanged(this.props,e)){var r=null,o=this.selectedListRow(this.props);n=this.selectedListRow(e);if(o&&n){r=[];for(var i=n<o?n:o,a=this.props.splitText.texts.length;i<a;i++)r.push(i)}this.updateList(!0,r)}else if(this.lineBreaksChanges(this.props,e)){n=(n=this.selectedListRow(e))||this.selectedListRow(this.props),o=this.props.splitText.texts;var l=[];if(null!==n){for(var c=n,s=o.length;c<s;c++)l.push(c);this.updateList(!0,l)}}else this.props.fontSize!==e.fontSize?this.updateList(!0):this.props.activeAnnotation&&e.activeAnnotation&&this.annotationsInSameLocation(this.props.activeAnnotation,e.activeAnnotation)?this.updateList(!0,this.selectedListRow(e)):this.updateList(this.shouldResetListCache(this.props,e))}},{key:"pageBreaksChanged",value:function(e,t){return e=e.splitText.getTextsFinalPositions(),t=t.splitText.getTextsFinalPositions(),e.length!==t.length||JSON.stringify(e)!==JSON.stringify(t)}},{key:"lineBreaksChanges",value:function(e,t){var n=e.activeAnnotation,r=t.activeAnnotation,o=!1;return n&&n.isType(ANNOTATION_TYPES.lineBreak)&&t.activeAnnotations&&!t.activeAnnotations.hasOwnProperty(n.uniqueId)&&(o=!0),!(!(r&&r.isType(ANNOTATION_TYPES.lineBreak)&&e.activeAnnotations)||e.activeAnnotations.hasOwnProperty(r.uniqueId))||o}},{key:"shouldResetListCache",value:function(e,t){var n=!1;return!(e.showImages===t.showImages&&!this.pageBreaksChanged(e,t))||n}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.processProps(e)}},{key:"componentDidMount",value:function(){var e=this;this.resizeHandler=mn()((function(){e.calculatedImageHeight=null,e.updateList()}),500).bind(this),window.addEventListener("resize",this.resizeHandler),this.debouncedScroll=ct()((function(t){e.changeScrollToId({id:t[0].TStart,from:2})}),1e3),this.selectionHandler=ct()((function(t){e.handleSelection(t)}),200).bind(this),document.addEventListener("selectionchange",this.selectionHandler),document.addEventListener("mousedown",this.mouseDown.bind(this),!0),document.addEventListener("mouseup",this.mouseUp.bind(this),!0),this.processProps(this.props),this.componentDidUpdate(),this.splitText.style.scrollBehavior="smooth",this.timer=setTimeout((function(){e.resizeHandler()}),2e3)}},{key:"scrollToIndex",value:function(e){var t=this.list;setTimeout((function(){t.scrollToRow(e),setTimeout((function(){t.scrollToPosition(t.props.scrollTop-300)}),0)}),100)}},{key:"componentDidUpdate",value:function(e,t){var n,r,o,i=this,a=this.props.scrollToId,l=(this.targetId2=this.props.syncIdOnClick,this.selectedWindow=this.props.selectedWindow,this.list,this.props.searchResults,this.props.textAlignment);this.condition=this.props.condition,!this._didSetInitialScrollPosition&&this.list&&(n=this.list,(this.props.activeAnnotation||this.props.selectedSearchResult)&&(r=this.getSelectedTextIndex(),setTimeout((function(){n.scrollToRow(r),setTimeout((function(){n.scrollToPosition(n.props.scrollTop-300)}),0)}),100)),this._didSetInitialScrollPosition=!0),1===this.selectedWindow&&1===a.from&&this.condition&&null!==a.id&&(this.textAlignmentById=this.props.textAlignmentById||[],l&&null!==(o=null==(o=this.textAlignmentById.find((function(e){return e.start===a.id})))?void 0:o.TStart)&&(o=this.props.splitText.getTextIndexOfPosition(o),this.scrollToIndex(o))),this.targetId2&&null===a.from&&1===this.selectedWindow&&null===a.id&&this.condition&&(o=null==(o=l.alignment.find((function(e){return i.targetId2>=e.source_segment.start&&i.targetId2<e.source_segment.end})))||null==(l=o.target_segment)?void 0:l.start,l=this.props.splitText.getTextIndexOfPosition(o),this.scrollToIndex(l))}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousedown",this),document.removeEventListener("mouseup",this),window.removeEventListener("resize",this.resizeHandler),document.removeEventListener("selectionchange",this.selectionHandler),clearTimeout(this.timer)}},{key:"getSelectedTextIndex",value:function(){var e,t=0,n=null;return this.props.activeAnnotation?n=Nn(this.props.splitText.annotatedText.getPositionOfAnnotation(this.props.activeAnnotation),1)[0]:this.props.selectedSearchResult&&((e=this.props.splitText.annotatedText.segmentAtOriginalPosition(this.props.selectedSearchResult.start))instanceof gn.a?n=e.start:"number"==typeof e&&(n=e)),n?this.props.splitText.getTextIndexOfPosition(n):t}},{key:"getControlsMeasurements",value:function(e){if(!this.splitText)return null;var t=this.splitText,n=null,r=null,o=null,i=null,a=null,l=[],c=0;if(e.activeAnnotation){var s=e.activeAnnotation;if(null===(c=Nn(e.splitText.annotatedText.getPositionOfAnnotation(s),1)[0]))return console.warn("No startPos in getControlsMeasurements"),null;s.type===ANNOTATION_TYPES.pageBreak&&--c,s.type===ANNOTATION_TYPES.lineBreak&&--c;var u=c+s.length;0<s.length&&--u,n=e.splitText.getTextIndexOfPosition(u),i=t.getBoundingClientRect()}var f=[];if(e.selectedAnnotatedSegments&&0<e.selectedAnnotatedSegments.length){f=e.selectedAnnotatedSegments;for(var d=0;d<f.length;d++){var p=f[d];if(null===r&&p instanceof gn.a){r=p;break}}r&&(a=0===r.length&&e.activeAnnotation&&e.activeAnnotation.isInsertion?(o=idForInsertion(r),idForInsertion):(o=idForSegment(r),idForSegment))}else e.activeAnnotation&&(e.activeAnnotation.isDeletion?(s=new gn.a(c,""),o=idForDeletedSegment(s),a=idForDeletedSegment,f=[r=s]):e.activeAnnotation.isInsertion?(u=Nn(e.splitText.annotatedText.getPositionOfAnnotation(e.activeAnnotation),1)[0])&&(t=new gn.a(u,""),o=idForInsertion(t),a=idForInsertion,f=[r=t]):e.activeAnnotation.type===ANNOTATION_TYPES.pageBreak?(s=new gn.a(c+1,""),u=new gn.a(c,""),f=[r=s],l=[o=idForPageBreak(u)]):e.activeAnnotation.type===ANNOTATION_TYPES.lineBreak&&(t=new gn.a(c+1,""),s=new gn.a(c,""),f=[r=t],l=[o=idForLineBreak(s)]));if(a)for(var h=0;h<f.length;h++){var m=f[h];m instanceof gn.a&&(m=a(m),l.push(m))}return null!=n&&r&&o&&i?{selectedTextIndex:n,firstSelectedSegment:r,selectedElementId:o,splitTextRect:i,selectedElementIds:l}:null}},{key:"render",value:function(){var e=this,t=this.props,n=this.rowRenderer,r=this.cache,i=t.selectedWitness?t.selectedWitness.id:0;return o.createElement("div",{className:kn.a.splitText,ref:function(t){return e.splitText=t},key:i,style:{cursor:"pointer"}},o.createElement(w.a,{disableWidth:!0},(function(i){return i=i.height,o.createElement(pt.d,{ref:function(t){return e.list=t},height:i,rowCount:t.splitText.texts.length,rowHeight:r.rowHeight,rowRenderer:n,width:1,overscanRowCount:1,deferredMeasurementCache:r,onScroll:e.scrollEvent,scrollToAlignment:"start",containerStyle:{width:"100%",maxWidth:"100%"},style:{width:"100%",paddingTop:30,paddingInline:50}})})))}},{key:"getStringPositions",value:function(e,t,n){var r=this.props.splitText.annotatedText.getUniqueId();if((Mn=Mn.hasOwnProperty(r)?Mn:Bn({},r,{}))[r].hasOwnProperty(t)||(Mn[r]=Bn({},t,{})),Mn[r][t].hasOwnProperty(n))return Mn[r][t][n];for(var o=new T.a,i=e.getText(),a=e.segments[0].start,l=[],c=i.indexOf(t);-1!==c;)l.push(c),c=i.indexOf(t,c+1);var s={};if(0<l.length)for(var u=o.splitGraphemes(i),f=0,d=null,p=0;p<u.length;p++){var h=u[p],m=f+(h.length-1);null!==d?d+(t.length-1)<=m&&(s[d+a]=[d+a,m+a],d=null):-1!==l.indexOf(f)?t.length===h.length?s[f+a]=[f+a,m+a]:t.length>h.length&&(d=f):d=null,f+=h.length}return Mn[r][t][n]=s}},{key:"rowRenderer",value:function(e){var t=e.key,n=e.index,r=e.parent,i=(e=e.style,this.props),a=this.cache,l={},c=((c=this.props.searchValue)&&0<c.length&&i.splitText&&(l=this.getStringPositions(i.splitText.texts[n],c,n)),_n(_n({},e),{},{height:e.height+10}));return o.createElement(O.a,{columnIndex:0,parent:r,rowIndex:n,cache:a,key:t},o.createElement("div",{style:c,ref:this.splitTextRef,id:"index2_".concat(n),className:kn.a.splitTextRow},o.createElement("div",{className:kn.a.splitTextRowContent},o.createElement(Pn,{segmentedText:i.splitText.texts[n],row:n,selectedSegmentId:i.selectedSegmentId,searchStringPositions:l,textAlignmentById:i.textAlignmentById,fontSize:i.fontSize,isPanelLinked:this.props.isPanelLinked,selectedSourceRange:i.selectedSourceRange,selectedTargetRange:i.selectedTargetRange,changeSelectedRange:i.changeSelectedRange,changeSyncIdOnClick:this.props.changeSyncIdOnClick,changeScrollToId:this.props.changeScrollToId,condition:this.condition}))))}}])&&Dn(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),r}(o.PureComponent);An=n(146);var qn=n.n(An),Fn=n(148);function Un(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Qn(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function Kn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Qn(Object(n),!0).forEach((function(t){var r,o;r=e,o=n[t=t],t in r?Object.defineProperty(r,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[t]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Gn,$n,Yn,Jn,Xn={},Zn={},er=function(e,t){var n,r;return(t=b.lb(e,t))?(r=t.text,n=b.pb(e,r.id),r=b.o(e,r.id),n&&r?(e=(r=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||function(e,t){var n;if(e)return"string"==typeof e?Un(e,t):"Map"===(n="Object"===(n=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Un(e,t):void 0}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(function(e,t,n){if(Zn.hasOwnProperty(t.id))return[Zn[t.id].appliedAnnotations,Zn[t.id].allAnnotations];t.text;var r=b.m(e,n.id),o=function(e,t,n){if(!b.sb(e,t))return{};var r=b.f(e,t);if(!r)return{};var o,i,a={};for(o in r)!r.hasOwnProperty(o)||(i=b.k(e,n,o))&&(a[i.unique_id]=i);return tr(e,a)}(e,t.id,n.id),i=null,a={};if(t.id!==n.id){i=b.w(e,t.id);var l,c,s={};for(l in r)r.hasOwnProperty(l)&&((c=r[l]).creator_witness!==t.id||i.hasOwnProperty(c.unique_id)?c.creator_witness===t.id&&(a[c.unique_id]=c):s[c.unique_id]=c);o=Kn(Kn({},tr(e,s)),o),r=s}return n=tr(e,r),a=tr(e,a),0<Object.keys(a).length&&(n=Kn(Kn({},n),a)),n=Kn(Kn({},o),n),n=qn()(n,(function(e,n){return!(t&&e.type===vn.a.lineBreak&&e.creatorWitness.id!==t.id)})),b.rb(e,t.id)&&b.sb(e,t.id)&&(Zn[t.id]={appliedAnnotations:o,allAnnotations:n}),[o,n]}(e,t,n),2))[0],r[1],r=function(e){return nr[e.id]||(nr[e.id]=Object(Fn.a)(e.content||"")),nr[e.id]}(n),new en.g(r,Object.values(e),(function(e){return Object(Fn.a)(e).segments}),n,t)):null):(console.warn("no witness"),null)},tr=function(e,t){var n,r,o={};for(n in t)t.hasOwnProperty(n)&&(r=t[n],(r=b.b(e,r))&&(o[n]=r));return o},nr={};function rr(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function or(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rr(Object(n),!0).forEach((function(t){var r,o;r=e,o=n[t=t],t in r?Object.defineProperty(r,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[t]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ir(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||ar(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ar(e,t){var n;if(e)return"string"==typeof e?lr(e,t):"Map"===(n="Object"===(n=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?lr(e,t):void 0}function lr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function cr(e){return[e.start,e.length].join("-")}An=Object(a.connect)((function(e){var t,n={},r=Object(b.Z)(e),o=Object(b.J)(e),i={},a=(o&&(t=b.pb(e,o.id)||{},(a=b.N(e,o.id))&&(n=b.lb(e,a)),Re()(n)&&Re()(t),n=t),t=function(e,t){var n=null;return t&&(n=er(e,t))&&(Xn[t]=n),n}(e,null==(a=n)?void 0:a.id),e.data2.loadingWitnesses),l=(t&&(i=function(e,t){if(e===Gn&&t===$n&&e.version===Jn)return Yn;for(var n={},r={},o=0;o<t.length;o++)!function(o){var i=t[o],a=(o=ir(e.getPositionOfAnnotation(i),2))[0],l=o[1];if(null!=a)if(0===l){if(i.isInsertion){if(o=cr(i),o=r[o])return o.map((function(e){return n[e].push(i)}));a=INSERTION_KEY+a}i.isDeletion&&0<i.length&&(a=DELETION_KEY+a),i.type===ANNOTATION_TYPES.pageBreak&&(a=PAGE_BREAK_KEY+a),i.type===ANNOTATION_TYPES.lineBreak&&(a=LINE_BREAK_KEY+a),void 0===n[a]&&(n[a]=[]),-1===n[a].indexOf(i)&&n[a].push(i)}else{for(var c=[],s=a;s<a+l;s++)void 0===n[s]&&(n[s]=[]),-1===n[s].indexOf(i)&&n[s].push(i),c.push(s);i.isInsertion&&(o=cr(i),r[o]=c)}}(o);return $n=t,Yn=n,Jn=(Gn=e).version,n}(t,Object.values([]))),b.vb(e)),c=Object(b.x)(e),s=Object(b.S)(e),u=Object(b.W)(e),f=Object(b.O)(e),d=Object(b.B)(e),p=b.wb(e),h=Object(b.p)(e);return{text:o,textFontSize:r,annotatedText:t,selectedWitness:n,loading:a,annotationPositions:i,imageData:Object(b.r)(e),selectedImage:Object(b.C)(e),isImagePortrait:Object(b.ub)(e),scrollToId:c,syncIdOnClick:s,textAlignment:u,textAlignmentById:Object(b.X)(e),selectedWindow:f,selectedSourceRange:Object(b.G)(e),selectedTargetRange:Object(b.H)(e),showTableContent:Object(b.Q)(e),selectedSearchResult:Object(b.F)(e),searchResults:Object(b.z)(e,d),searchValue:d,condition:h&&l&&p}}),null,(function(e,t,n){function r(e){return-1!==e.indexOf("ds2_")}function o(e){return-1!==e.indexOf("i2_")}function i(e){return!o(e)&&r(e)?e.substr(3):e.substr(2)}var a=e.annotatedText,l=e.annotationPositions,c=t.dispatch;return or(or(or({},n),e),{},{onChangedFontSize:function(e){c(y.Zb(e))},didSelectSegmentIds:function(t){if(0!==t.length){var n,c=[],s=[],u=function(e,t){var n,r,o,i,a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(a)return r=!(n=!0),{s:function(){a=a.call(e)},n:function(){var e=a.next();return n=e.done,e},e:function(e){r=!0,o=e},f:function(){try{n||null==a.return||a.return()}finally{if(r)throw o}}};if(Array.isArray(e)||(a=ar(e))||t&&e&&"number"==typeof e.length)return a&&(e=a),i=0,{s:t=function(){},n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(t);try{for(u.s();!(n=u.n()).done;){var f,d,p,h=n.value;r(h)||o(h)||(f=i(h),d=a.segmentedText.segmentAtPosition(f),s.push(d),(p=l[d.start])&&(c=c.concat(p)))}}catch(t){u.e(t)}finally{u.f()}c=it()(c,(function(e,t){return e.toString()==t.toString()}));var m,y=at()(c,a.annotations,(function(e,t){return e.toString()==t.toString()})),b=getSegmentsRange(s,y,c,e.annotatedText);b?(m=a.getBaseAnnotation(b.start,b.length),b.annotation||0<y.length&&(y=a.segmentedText.segmentsInRange(b.start,b.length).reduce((function(e,t){return e+t.text}),""),e.selectedWitness||console.log("no stateProps.selectedWitness: %o",e.selectedWitness),new Annotation(WORKING_VERSION_ANNOTATION_ID,getTextWorkingWitness(e.text),m.start,m.length,y,ANNOTATION_TYPES.variant,e.selectedWitness,e.user))):console.warn("No range for selected segment ids: %o",t)}},changeScrollToId:function(e){return c(y.Nb(e))},changeSyncIdOnClick:function(e){c(y.Qb(e))},changeSelectedWindow:function(e){c(y.Pb(e))},changeSelectedRange:function(e){c(y.Ob(e))},changeShowTableContent:function(e){c(y.Uc(e))},selectedSegmentId:function(t){var n=i(t),a=n;o(t)?a=INSERTION_KEY+n:r(t)?a=DELETION_KEY+n:-1!==t.indexOf("p2_")?a=PAGE_BREAK_KEY+n:-1!==t.indexOf("l2_")&&(a=LINE_BREAK_KEY+n),l[a],e.activeAnnotation&&e.activeAnnotation&&(t=y.Vb(null),c(t))}})}))((function(e){var t=Object(o.useRef)(),n={name:""};function r(){n.name&&e.changeSelectedWindow(2)}e.text&&(n=e.text),Object(o.useEffect)((function(){var e=t.current;return e.addEventListener("mouseenter",r),function(){e.removeEventListener("mouseenter",r)}}),[]);var a=null,c=e.selectedWindow,s=[e.annotatedText&&e.text&&!e.loading?(s=e.paginated?positionSplitter(e.pageBreaks):Object(rn.a)(800,/^།[\s]+(?!།[\s]+)/,2,5),a=new nn(e.annotatedText,s),i.a.createElement(Vn,{splitText:a,limitWidth:!1,selectedSegmentId:e.selectedSegmentId,annotationPositions:e.annotationPositions,selectedAnnotatedSegments:null==e?void 0:e.selectedAnnotatedSegments,selectedWitness:e.selectedWitness,key:12,selectedSearchResult:e.selectedSearchResult,fontSize:e.textFontSize,scrollToId:e.scrollToId,syncIdOnClick:e.syncIdOnClick,textAlignment:e.textAlignment,textAlignmentById:e.textAlignmentById,isPanelLinked:e.isPanelLinked,changeScrollToId:e.changeScrollToId,changeSyncIdOnClick:e.changeSyncIdOnClick,selectedWindow:c,selectedSourceRange:e.selectedSourceRange,selectedTargetRange:e.selectedTargetRange,changeSelectedRange:e.changeSelectedRange,searchResults:e.searchResults,searchValue:e.searchValue,selectedText:e.text,condition:e.condition})):i.a.createElement("div",{key:Math.random()})];return _e.a.ThirdWindowHeight,i.a.createElement(z.a,{ref:t,className:on.a.textDetail,sx:{height:"100%",flex:1,bgcolor:"navbar.main",color:"texts.main"}},i.a.createElement(Xt,null),i.a.createElement(kt.a,null),i.a.createElement(l.a,{loaded:!e.loading,zIndex:5}),i.a.createElement(z.a,{style:{display:"flex",height:"100%",width:"100%",position:"relative"}},i.a.createElement(z.a,{className:v()(on.a.textContainer,Ce.a.flex)},e.loading?i.a.createElement("div",null):s),i.a.createElement(an.a,{direction:"left",in:e.showTableContent,container:t.current,unmountOnExit:!0,mountOnEnter:!0},i.a.createElement(z.a,{sx:{position:"absolute",height:"100%",minWidth:"50%",right:0}},i.a.createElement(pn,null)))))}));var sr,ur,fr=i.a.memo(An),dr=(An=n(1041),n.n(An)),pr=n(131),hr=n(123),mr=(An=n(928),n.n(An)),yr=(An=n(929),n.n(An));function br(){return(br=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function gr(e){return i.a.createElement("svg",br({viewBox:"0 0 24 24"},e),sr=sr||i.a.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),ur=ur||i.a.createElement("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}))}function vr(e){return e=e.content,i.a.createElement("div",{className:jr.a.shareContainer},i.a.createElement("div",{className:jr.a.shareButton},i.a.createElement(D.a,{id:"annotation.share"})),i.a.createElement(xr.a,{className:jr.a.facebookButton,id:"sharebutton",url:"https://parkhang.lopenling.org".concat(window.location.pathname),quote:e,hashtag:"#openPecha"},i.a.createElement(Sr.a,{size:16,round:!0})),i.a.createElement(Er.a,{className:jr.a.whatsappButton,onClick:function(){return console.log("https://parkhang.lopenling.org".concat(window.location.pathname))},title:"Parkhang",url:"https://parkhang.lopenling.org".concat(window.location.pathname)},i.a.createElement(Tr.a,{size:16,round:!0})))}An=n(879);var wr,Or=n.n(An),xr=n(1104),Sr=n(1105),Er=n(1106),Tr=n(1107),jr=(An=n(1051),n.n(An)),Ir=(An=n(1053),n.n(An)),Ar=(An=n(1052),n.n(An));function Pr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function kr(e){e.data;var t=(e=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||function(e,t){var n;if(e)return"string"==typeof e?Pr(e,t):"Map"===(n="Object"===(n=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Pr(e,t):void 0}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(i.a.useState(20),2))[0],n=e[1];return i.a.createElement("div",{className:Ar.a.voteContainer,onClick:function(){return n((function(e){return e+1}))}},i.a.createElement("button",{"aria-label":"vote",className:Ar.a.voteBtn},i.a.createElement(Ir.a,{color:"inherit"})),i.a.createElement("span",{className:Ar.a.number},t))}function Cr(e){var t=i.a.createElement("p",null,"<",i.a.createElement(D.a,{id:"annotation.delete"}),">"),n=(""!==(n=e.annotationData.content).trim()&&(250<n.length&&(n=n.substr(0,250)+"…"),t=i.a.createElement("p",null,n)),[yr.a.annotationDetail]);e.isActive&&n.push(yr.a.active),n=v.a.apply(void 0,n);return i.a.createElement("div",{className:n,onClick:e.selectAnnotationHandler},i.a.createElement("div",{className:yr.a.annotationHeader},e.isActive&&i.a.createElement("div",{className:yr.a.activeIcon},i.a.createElement(gr,{style:{fill:Or.a.activeButton},width:15,height:15})),i.a.createElement("h3",null,e.annotationData.name),e.isLoggedIn&&e.isActive&&i.a.createElement("button",{style:{display:"none"},className:yr.a.edit,onClick:e.editAnnotationHandler,id:"editBtn"})),t,e.isActive&&i.a.createElement("div",{className:yr.a.contentOptions},i.a.createElement(kr,{data:e.annotationData}),i.a.createElement(vr,{content:e.annotationData.content})))}function Rr(){return(Rr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function _r(e){return i.a.createElement("svg",Rr({viewBox:"0 0 512 512"},e),wr=wr||i.a.createElement("path",{d:"M497.9 142.1l-46.1 46.1c-4.7 4.7-12.3 4.7-17 0l-111-111c-4.7-4.7-4.7-12.3 0-17l46.1-46.1c18.7-18.7 49.1-18.7 67.9 0l60.1 60.1c18.8 18.7 18.8 49.1 0 67.9zM284.2 99.8L21.6 362.4.4 483.9c-2.9 16.4 11.4 30.6 27.8 27.8l121.5-21.3 262.6-262.6c4.7-4.7 4.7-12.3 0-17l-111-111c-4.8-4.7-12.4-4.7-17.1 0zM124.1 339.9c-5.5-5.5-5.5-14.3 0-19.8l154-154c5.5-5.5 14.3-5.5 19.8 0s5.5 14.3 0 19.8l-154 154c-5.5 5.5-14.3 5.5-19.8 0zM88 424h48v36.3l-64.5 11.3-31.1-31.1L51.7 376H88v48z"}))}function Br(e){var t=e.annotationData.content,n=[yr.a.annotationDetail],r=null;e.isActive&&n.push(yr.a.active),n=v.a.apply(void 0,n);return i.a.createElement("div",{className:n},i.a.createElement("h3",null,e.annotationData.name),i.a.createElement("div",{className:yr.a.editing},i.a.createElement("textarea",{defaultValue:t,autoFocus:!0,onInput:function(e){r.style.height="5px",r.style.height=r.scrollHeight+"px"},ref:function(e){return r=e}}),i.a.createElement("div",{className:yr.a.actionButtons},i.a.createElement("div",{className:yr.a.save,onClick:function(){r&&e.saveAnnotationHandler(r.value)}},i.a.createElement(_r,{height:"0.8em",width:"0.8em",style:{fill:"currentColor",marginRight:6}}),i.a.createElement(D.a,{id:"annotation.save"})),i.a.createElement("div",{className:yr.a.cancel,onClick:e.cancelAnnotationHandler},i.a.createElement(D.a,{id:"annotation.cancel"})))))}function Nr(e){return i.a.createElement("div",{className:Lr.a.button,title:e.title,onClick:e.onClick},"+")}An=n(866);var Wr=n.n(An),Dr=(An=(n(78),n(1054)),n.n(An)),Lr=(An=n(1055),n.n(An));function Hr(e){return(Hr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function zr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Mr(e,t){return(Mr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Vr(e){return(Vr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}An=function(e){var t=r;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Mr(t,e);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vr(e);n=t?(n=Vr(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),r=this;if(n&&("object"===Hr(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==r)return r;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(r);function r(){var e=this,t=r;if(e instanceof t)return n.apply(this,arguments);throw new TypeError("Cannot call a class as a function")}return t=r,(e=[{key:"render",value:function(){var e,t=null;return this.props.buttonOnClick&&(e=this.props.buttonTitleId?this.props.intl.formatMessage({id:this.props.buttonTitleId}):"",t=i.a.createElement(Nr,{title:e,onClick:this.props.buttonOnClick})),i.a.createElement("h3",{className:Dr.a.heading},i.a.createElement("span",{className:Dr.a.title},i.a.createElement(D.a,{id:this.props.titleId})),t&&i.a.createElement("div",{className:Dr.a.button},t))}}])&&zr(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),r}(i.a.Component),Object(c.c)(An),An=n(1056);var qr=n.n(An),Fr=(An=n(872),n.n(An));function Ur(e){return(Ur="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Qr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Kr(e,t){return(Kr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Gr(e){return(Gr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var $r=function(e){var t=r;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Kr(t,e);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Gr(e);n=t?(n=Gr(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),r=this;if(n&&("object"===Ur(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==r)return r;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(r);function r(e){var t;if(this instanceof r)return(t=n.call(this,e)).state={content:e.note.content},t;throw new TypeError("Cannot call a class as a function")}return t=r,(e=[{key:"save",value:function(){var e=this.textarea?this.textarea.value:"";this.props.saveNote(this.props.note,e)}},{key:"cancel",value:function(){this.props.cancel()}},{key:"handleChange",value:function(e){var t=e.target instanceof HTMLTextAreaElement?e.target.value:"";this.setState((function(e,n){return{content:t}}))}},{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:qr.a.editorContainer},i.a.createElement("textarea",{className:qr.a.textEditor,ref:function(t){return e.textarea=t},value:this.state.content,onChange:this.handleChange.bind(this)}),i.a.createElement("div",{className:Fr.a.buttonContainer},i.a.createElement("div",{className:Fr.a.save,onClick:this.save.bind(this)},i.a.createElement(D.a,{id:"annotation.save"})),i.a.createElement("div",{className:Fr.a.cancel,onClick:this.cancel.bind(this)},i.a.createElement(D.a,{id:"annotation.cancel"}))))}}])&&Qr(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),r}(i.a.Component),Yr=(An=n(1057),n.n(An)),Jr=(An=(n(240),n(1058)),n.n(An)),Xr=(n(179),n(289));function Zr(e){return(Zr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function eo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function to(e,t){return(to=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function no(e){return(no=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ro=function(e){var t=r;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&to(t,e);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=no(e);n=t?(n=no(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),r=this;if(n&&("object"===Zr(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==r)return r;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(r);function r(){var e=this,t=r;if(e instanceof t)return n.apply(this,arguments);throw new TypeError("Cannot call a class as a function")}return t=r,(e=[{key:"render",value:function(){return i.a.createElement("div",{className:Jr.a.answer},i.a.createElement("p",{className:Wr.a.text,dangerouslySetInnerHTML:{__html:this.props.answer.content}}),i.a.createElement("p",{className:Wr.a.subTitle},i.a.createElement(D.a,{id:"question.answeredBy"})," ",this.props.answer.name,","," ",i.a.createElement(Xr.FormattedDate,{value:this.props.answer.created})))}}])&&eo(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),r}(i.a.Component),oo=(An=n(933),n.n(An));function io(e){return(io="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ao(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function lo(e,t){return(lo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function co(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function so(e){return(so=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var uo=function(e){var t=r;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&lo(t,e);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=so(e);n=t?(n=so(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),r=this;if(n&&("object"===io(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return co(r)}}(r);function r(){var e,t=this,o=r;if(!(t instanceof o))throw new TypeError("Cannot call a class as a function");for(var i,a=arguments.length,l=new Array(a),c=0;c<a;c++)l[c]=arguments[c];return o=function(){e.props.delete&&e.props.delete()},(i="delete")in(t=co(e=n.call.apply(n,[this].concat(l))))?Object.defineProperty(t,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[i]=o,e}return t=r,(e=[{key:"render",value:function(){for(var e=this.props.question.topicId||null,t=u.g+e,n=[],r=this.props.question.answers,o=0;o<r.length;o++){var a=r[o];n.push(i.a.createElement(ro,{answer:a,key:"answer_"+a.created}))}var l=0<this.props.question.name.length?this.props.question.name:this.props.question.username;return i.a.createElement(z.a,{className:v()(Yr.a.question,Wr.a.padding),sx:{boxShadow:2}},i.a.createElement("p",{className:Wr.a.text,dangerouslySetInnerHTML:{__html:this.props.question.content}}),i.a.createElement("div",{style:{display:"flex",alignItems:"center"}},i.a.createElement("span",{className:v()(Yr.a.threadLink,Wr.a.text)},i.a.createElement("a",{href:t,target:"_blank"},i.a.createElement(D.a,{id:"question.viewThread"}))),i.a.createElement(Ne.a,{"aria-label":"delete",size:"small",onClick:this.delete},i.a.createElement(oo.a,{fontSize:"inherit"}))),i.a.createElement("p",{className:Wr.a.subTitle},l,i.a.createElement(Xr.FormattedDate,{value:this.props.question.created})),i.a.createElement(he,{topicId:e}))}}])&&ao(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),r}(i.a.Component),fo=(An=n(1059),n.n(An));function po(e){return(po="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ho(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function mo(e,t){return(mo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function yo(e){return(yo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var bo=function(e){var t=r;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&mo(t,e);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=yo(e);n=t?(n=yo(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),r=this;if(n&&("object"===po(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==r)return r;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(r);function r(e){var t;if(this instanceof r)return(t=n.call(this,e)).state={content:e.question.content},t;throw new TypeError("Cannot call a class as a function")}return t=r,(e=[{key:"save",value:function(){var e=this.textarea?this.textarea.value:"",t=this.props.defaultTitle+"[# ".concat(Date.now().toString().slice(-5,-1)," ]");this.props.saveQuestion(this.props.question,t,e)}},{key:"cancel",value:function(){this.props.cancel()}},{key:"handleChange",value:function(e){var t=e.target instanceof HTMLTextAreaElement?e.target.value:"";this.setState((function(e,n){return{content:t}}))}},{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:fo.a.editorContainer},i.a.createElement("div",null,this.props.questionQuote),i.a.createElement("textarea",{className:fo.a.textEditor,ref:function(t){return e.textarea=t},value:this.state.content,onChange:this.handleChange.bind(this)}),i.a.createElement("div",{className:Fr.a.buttonContainer},i.a.createElement("div",{className:Fr.a.save,onClick:this.save.bind(this)},i.a.createElement(D.a,{id:"annotation.save"})),i.a.createElement("div",{className:Fr.a.cancel,onClick:this.cancel.bind(this)},i.a.createElement(D.a,{id:"annotation.cancel"}))))}}])&&ho(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),r}(i.a.Component),go=(An=n(1060),n.n(An));function vo(e){return(vo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function wo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Oo(e,t){return(Oo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function xo(e){return(xo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var So=function(e){var t=r;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Oo(t,e);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=xo(e);n=t?(n=xo(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),r=this;if(n&&("object"===vo(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==r)return r;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(r);function r(){var e=this,t=r;if(e instanceof t)return n.apply(this,arguments);throw new TypeError("Cannot call a class as a function")}return t=r,(e=[{key:"render",value:function(){return i.a.createElement("div",{className:v()(go.a.loading,Wr.a.text)},i.a.createElement(l.a,{loaded:!1,scale:.25,position:"relative",top:"50%",left:"50%",lines:9,width:8,length:8,radius:14}),"Loading questions...")}}])&&wo(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),r}(i.a.Component),Eo=(An=n(1061),n.n(An));function To(e){return(To="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function jo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Io(e,t){return(Io=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Ao(e){return(Ao=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Po(e){var t={};return t.backgroundColor=e.backgroundColor||"",t.color=e.color||"#fff",i.a.createElement("div",{className:Ro.a.accessory,title:e.title,onClick:e.onClick,style:t},_o[e.type])}var ko=function(e){var t=r;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Io(t,e);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ao(e);n=t?(n=Ao(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),r=this;if(n&&("object"===To(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==r)return r;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(r);function r(){var e=this,t=r;if(e instanceof t)return n.apply(this,arguments);throw new TypeError("Cannot call a class as a function")}return t=r,(e=[{key:"delete",value:function(){this.props.delete&&this.props.delete(this.props.note)}},{key:"edit",value:function(){this.props.edit&&this.props.edit(this.props.note)}},{key:"render",value:function(){return i.a.createElement(z.a,{className:Eo.a.note,sx:{boxShadow:2}},i.a.createElement("p",null,"Note:"),i.a.createElement("div",{className:Eo.a.header},i.a.createElement("h4",{className:Eo.a.info},this.props.note.creatorUser.name),this.props.delete&&i.a.createElement("div",{className:Eo.a.delete,onClick:this.delete.bind(this)},i.a.createElement(Ne.a,{"aria-label":"delete",size:"small"},i.a.createElement(oo.a,{fontSize:"inherit"})))),i.a.createElement("div",{className:Eo.a.content,onClick:this.edit.bind(this)},this.props.note.content))}}])&&jo(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),r}(i.a.Component),Co=(An=n(1062),n.n(An)),Ro=(An=n(1063),n.n(An)),_o={ADD:"+",DELETE:"×"},Bo=n(850);function No(e){var t=e.children,n=e.tooltipName,r=void 0===(r=e.format)?null:r,o=e.className,a=e.shortcut;e=e.on;return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{"data-tip":!0,"data-for":n,className:void 0===o?"":o,style:{width:"100%"}},void 0!==e&&e?t:i.a.createElement(Bo.a,{placement:"top",followCursor:!0,title:r?i.a.createElement(D.a,{id:r}):i.a.createElement("span",null,n," [".concat(void 0===a?"":a,"]"))},t)))}function Wo(e){return(Wo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Do(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Lo(e,t){return(Lo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Ho(e){return(Ho=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var zo,Mo,Vo,qo=function(e){var t=r;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Lo(t,e);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ho(e);n=t?(n=Ho(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),r=this;if(n&&("object"===Wo(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==r)return r;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(r);function r(){var e=this,t=r;if(e instanceof t)return n.apply(this,arguments);throw new TypeError("Cannot call a class as a function")}return t=r,(e=[{key:"render",value:function(){var e=this.props.color||"#ffffff",t=this.props.backgroundColor||Or.a.mainTint,n=this.props.fontSize||"14px",r=this.props.noBezel?[Co.a.buttonNoBezel]:[Co.a.button],o=this.props.tooltipTitle||"",a=(r=(this.props.isActive&&r.push(Co.a.active),v.a.apply(void 0,r)),this.props.shortcut||"");n={fontSize:n,color:e,backgroundColor:t};return this.props.align&&(n.textAlign=this.props.align),i.a.createElement(No,{tooltipName:o,shortcut:a,on:this.props.disabled},i.a.createElement("button",{style:n,className:r,onClick:this.props.onClick,disabled:this.props.disabled},this.props.icon&&i.a.createElement("div",{className:Co.a.icon},this.props.icon),this.props.title&&i.a.createElement("span",{className:Co.a.title},this.props.title),this.props.accessoryType&&i.a.createElement(Po,{type:this.props.accessoryType})))}}])&&Do(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),r}(i.a.Component);function Fo(){return(Fo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Uo(e){return i.a.createElement("svg",Fo({viewBox:"0 0 30 40",fill:"currentColor"},e),zo=zo||i.a.createElement("path",{d:"M3 0h24v15H3z"}),Mo=Mo||i.a.createElement("path",{stroke:"currentColor",strokeWidth:3,d:"M0 20h8M11 20h8M22 20h8"}),Vo=Vo||i.a.createElement("path",{d:"M3 25h24v15H3z"}))}An=n(1064);var Qo,Ko,Go,$o,Yo=n.n(An);function Jo(){return(Jo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Xo(e){return i.a.createElement("svg",Jo({viewBox:"0 0 24 24"},e),Qo=Qo||i.a.createElement("path",{d:"M3 18h12v-2H3v2zM3 6v2h18V6H3zm0 7h18v-2H3v2z"}),Ko=Ko||i.a.createElement("path",{fill:"none",d:"M0 0h24v24H0V0z"}))}function Zo(){return(Zo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function ei(e){return i.a.createElement("svg",Zo({viewBox:"0 0 24 24",fill:"currentColor"},e),Go=Go||i.a.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),$o=$o||i.a.createElement("path",{d:"M21 6h-2v9H6v2c0 .55.45 1 1 1h11l4 4V7c0-.55-.45-1-1-1zm-4 6V3c0-.55-.45-1-1-1H3c-.55 0-1 .45-1 1v14l4-4h10c.55 0 1-.45 1-1z"}))}function ti(e){return(ti="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ni(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ri(e,t){return(ri=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function oi(e){return(oi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ii=function(e){var t=r;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ri(t,e);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=oi(e);n=t?(n=oi(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),r=this;if(n&&("object"===ti(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==r)return r;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(r);function r(){if(this instanceof r)return n.call(this);throw new TypeError("Cannot call a class as a function")}return t=r,(e=[{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.keyHandler)}},{key:"render",value:function(){var e=null!=this.props.addPageBreak,t=null!=this.props.addLineBreak;return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:Yo.a.header},i.a.createElement(qo,{noBezel:!0,icon:i.a.createElement(Xo,{width:15,height:15,style:{fill:"#fff"}}),backgroundColor:"transparent",onClick:this.props.addNote,disabled:!this.props.addNote,align:"center",tooltipTitle:"Note",shortcut:"n"}),i.a.createElement(qo,{noBezel:!0,icon:i.a.createElement(ei,{width:15,height:15,style:{fill:"#fff"}}),onClick:this.props.addQuestion,disabled:!this.props.addQuestion,align:"left",backgroundColor:"transparent",tooltipTitle:"Question",shortcut:"q"}),i.a.createElement(qo,{noBezel:!0,color:"#fff",fontSize:"".concat(15,"px"),icon:"¶",onClick:this.props.addLineBreak,disabled:!t,align:"left",backgroundColor:"transparent",tooltipTitle:"LineBreak",shortcut:"l"}),i.a.createElement(qo,{noBezel:!0,icon:i.a.createElement(Uo,{width:15,height:15,style:{fill:"#fff"}}),onClick:this.props.addPageBreak,disabled:!e,align:"left",backgroundColor:"transparent",tooltipTitle:"PageBreak",shortcut:"p"}),i.a.createElement(qo,{onClick:this.props.editAnnotationHandler,backgroundColor:"transparent",noBezel:!0,icon:i.a.createElement(_r,{width:15,height:15,style:{fill:"#fff"}}),tooltipTitle:"Edit",shortcut:"e"})))}}])&&ni(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),r}(i.a.Component);function ai(e){return(ai="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function li(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ci(e,t){return(ci=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function si(e){return(si=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}An=function(e){var t=r;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ci(t,e);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=si(e);n=t?(n=si(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),r=this;if(n&&("object"===ai(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==r)return r;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(r);function r(e){if(this instanceof r)return(e=n.call(this,e)).controls=null,e.arrow=null,e.arrowDs=null,e;throw new TypeError("Cannot call a class as a function")}return t=r,(e=[{key:"componentDidMount",value:function(){this.updatePosition()}},{key:"componentDidUpdate",value:function(){setTimeout(this.updatePosition.bind(this),0)}},{key:"updatePosition",value:function(){var e=this.getMeasurements();if(this.props.inline&&this.controls&&this.arrow&&e){var t=this.controls,n=t.offsetHeight,r=t.offsetWidth,o=this.arrow,i=e.bottomGap,a=i<0||n<i,l=e.top,c=e.viewPortWidth||0,s=e.left,u=s+e.width;if(o.style.display="none",this.props.selectedElementIds)for(var f=0,d=0,p=0;p<this.props.selectedElementIds.length;p++){var h,m,y=this.props.selectedElementIds[p];(y=document.getElementById(y))&&(m=(h=y.offsetLeft)+y.offsetWidth,h<f?(y.offsetTop,y.offsetHeight,s=h,u=d=m):d<m&&(d=m),h<s&&(s=h),u<m&&(u=m),f=h)}var b=u-s,g=3,v=!1,w=0;(v=!a&&i<n||v)?(o.className=Wr.a.arrowLeft,g=s-r-o.offsetWidth<0?4:2):(s-(a=r/2-b/2)<0&&(w=Math.abs(s-a)),c<u+a&&(w=c-(u+a))),3===g?(a=c=0,this.arrow&&(this.arrow.className=Wr.a.arrowTop,a=r/2-this.arrow.offsetWidth/2-w,this.arrow.style.left=(a=a<0?0:a)+"px",c=this.arrow.offsetHeight,this.arrow.style.top=0-c+"px"),t.style.top=l-e.height-10+"px",t.style.left=e.left+"px"):v?(o.className=Wr.a.arrowRight,w=o.offsetHeight,a=e.top+e.height/2-w/2,e.top+e.height+i-a<n&&(a=e.top+e.height+i-n),2===g?(o.style.left=r-2+"px",t.style.left=s-r-o.offsetWidth+"px"):(o.className=Wr.a.arrowLeft,o.style.left=-o.offsetWidth+"px",t.style.left=s+b+o.offsetWidth+"px"),o.style.top=e.top-a+e.height/2-w/2+"px",t.style.top=a+"px"):(console.log("last"),t.style.top=l+"px")}}},{key:"getMeasurements",value:function(){var e,t,n,r,o,i,a,l,c,s,u,f;return this.props.selectedElementIds?(e=this.props.selectedElementIds[this.props.selectedElementIds.length-1],e=document.getElementById(e),s=this.props.selectedElementIds[0],s=document.getElementById(s),t=this.props.splitTextRect,n=0,this.props.list&&this.props.list.Grid.state.scrollTop,this.props.pechaImageClass&&(n=document.getElementsByClassName(this.props.pechaImageClass)[0].offsetHeight),s?(n=s.offsetTop+n,r=s.offsetTop,o=s.offsetLeft,i=s.offsetWidth,a=s.offsetHeight,l=n,f=null,u=c=0,s&&t&&(s=s.getBoundingClientRect(),c=t.height-s.top),e&&t&&(s=e.getBoundingClientRect(),u=t.height+t.top-s.bottom,f=t.width),{top:n,textTop:r,rowTop:l,left:o,width:i,height:a,topGap:c,bottomGap:u,viewPortWidth:f}):(console.warn("no valid element found in getMeasurements, elementId: %s",this.props.selectedElementId),{top:0,textTop:0,rowTop:0,left:0,width:1,height:1,topGap:0,bottomGap:0,viewPortWidth:1})):null}},{key:"render",value:function(){var e,t,n=this,r=this.props,i=[],a=[],l=null,c=null,s=r.user.isLoggedIn,u=!1,f=(r.activeAnnotation&&(r.activeAnnotation.isType(vn.a.pageBreak)||r.activeAnnotation.isType(vn.a.lineBreak))&&(u=!0),r.annotationsData?(r.annotationsData.map((function(e){var t,n=!1,l=!1;e.isTemporary?l=n=!0:r.temporaryAnnotation||e.annotation.uniqueId!=r.activeAnnotation.uniqueId||(l=!0),n?(t=o.createElement(Br,{annotationData:e,key:e.annotation.uniqueId,isActive:l,saveAnnotationHandler:function(t){r.saveAnnotation(e.annotation,t)},cancelAnnotationHandler:function(){r.cancelEditAnnotation(e.annotation)},isLoggedIn:s,selectAnnotationHandler:function(){},editAnnotationHandler:function(){}}),a.push(t)):(t=o.createElement(Cr,{annotationData:e,key:e.annotation.uniqueId,isActive:l,selectAnnotationHandler:function(){s&&!n&&r.didSelectAnnotation(e.annotation)},editAnnotationHandler:function(){s&&!n&&r.editAnnotation(e.annotation)},isLoggedIn:s}),i.push(t))}),this),r.user.isLoggedIn||(l=o.createElement("div",{className:Wr.a.anonymousMessage,style:{position:"relative",width:"fit-content",border:"1px solid gray",paddingInline:10}},o.createElement(D.a,{id:"annotations.loginMessage",values:{loginLink:o.createElement(o.Fragment,null,o.createElement(D.a,{id:"annotations.loginLink"}))}})))):c=o.createElement("div",{className:Wr.a.nothingSelected},"Nothing Selected"),null),d=!this.props.selectedWitness.isWorking,p=null,h=!this.props.selectedWitness.isWorking,m=(s&&!this.props.selectedWitness.isWorking&&(e=[],t=[],this.props.availableAnnotations&&(e=this.props.availableAnnotations.filter((function(e){return e.type===vn.a.pageBreak&&e.creatorWitness.id===n.props.selectedWitness.id})),t=this.props.availableAnnotations.filter((function(e){return e.type===vn.a.lineBreak&&e.creatorWitness.id===n.props.selectedWitness.id}))),0<e.length&&(f=o.createElement("div",{className:Wr.a.breakButtons},o.createElement(qo,{title:"Page Break",accessoryType:"DELETE",icon:o.createElement(Uo,{width:20,height:20}),onClick:function(){n.props.deleteAnnotation(e[0])},isActive:!0,backgroundColor:Or.a.activeButton})),d=!1),0<t.length&&(p=o.createElement("div",{className:Wr.a.breakButtons},o.createElement(qo,{title:"Line Break",accessoryType:"DELETE",icon:"¶",onClick:function(){n.props.deleteAnnotation(t[0])},isActive:!0,backgroundColor:Or.a.activeButton})),h=!1),(h=!!d&&h)||(d=!1)),null),y={},b=(r.temporaryNotes&&0<r.temporaryNotes.length&&(m=r.temporaryNotes.map((function(e){var t="NOTE_"+e.uniqueId;return e.basedOn&&(y[e.basedOn.uniqueId]=e.uniqueId),o.createElement($r,{note:e,key:t,saveNote:r.saveAnnotation,cancel:function(){return r.cancelEditAnnotation(e)}})}))),null),g=(r.notes&&0<r.notes.length&&(b=r.notes.filter((function(e){return!y.hasOwnProperty(e.uniqueId)})).map((function(e){var t="NOTE_"+e.uniqueId;return o.createElement(ko,{note:e,key:t,delete:n.props.deleteAnnotation,edit:n.props.editNote})}))),null),w={},O=(r.temporaryQuestions&&0<r.temporaryQuestions.length&&r.questionQuote&&(g=r.temporaryQuestions.map((function(e){w[e.uniqueId]=e.uniqueId;var t="QUESTION_"+e.uniqueId;return o.createElement(bo,{question:e,questionQuote:r.questionQuote,defaultTitle:r.selectedWitness.text.name,key:t,saveQuestion:r.saveQuestion,cancel:function(){return r.cancelEditAnnotation(e)}})}))),[]),x=!1;if(r.questions&&0<r.questions.length){for(var S=[],E=0;E<r.questions.length;E++){var T=r.questions[E];!w.hasOwnProperty(T.uniqueId)&&r.questionsData.hasOwnProperty(T.uniqueId)&&(r.questionsData[T.uniqueId].loading&&(x=!0),S=S.concat(r.questionsData[T.uniqueId].questions))}O=S.map((function(e,t){return e.annotationUniqueId,o.createElement(uo,{question:e,key:"question_"+e.annotationUniqueId,delete:function(){return n.props.deleteAnnotation(n.props.questions[t])}})}))}var j=null,I=(0<O.length&&(j=o.createElement("h3",{className:Wr.a.sectionHeading},"Questions")),null),A=(x&&(I=o.createElement(So,null)),0===(null==(A=r.questions)?void 0:A.length)&&0===r.temporaryQuestions.length),P=[Wr.a.annotationControls],k=(r.inline&&P.push(Wr.a.inline),!0);(l||u)&&(k=!1),l=yn.a.createPortal(o.createElement("div",{className:Wr.a.annotationContent},l,c,!u&&i,f,p,m,b,j,g,I,O),document.getElementById("annotation-portal"));return o.createElement("div",{className:v.a.apply(void 0,P),ref:function(e){return n.controls=e}},k&&o.createElement(ii,{addPageBreak:d?r.addPageBreak:null,addLineBreak:h?r.addLineBreak:null,addNote:s&&!m?function(){return r.addNote()}:null,addQuestion:A?r.addQuestion:null,closeAnnotation:r.closeAnnotation,editAnnotationHandler:function(){var e=document.getElementById("editBtn");null!=e&&e.click()},userLoggedIn:s}),!u&&a,l,o.createElement("div",{className:Wr.a.arrow,ref:function(e){return n.arrow=e}}))}}])&&li(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),r}(o.Component);var ui=n(934),fi=n.n(ui);function di(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function pi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?di(Object(n),!0).forEach((function(t){var r,o;r=e,o=n[t=t],t in r?Object.defineProperty(r,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[t]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):di(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function hi(e){return function(e){if(Array.isArray(e))return bi(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||yi(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function mi(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||yi(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function yi(e,t){var n;if(e)return"string"==typeof e?bi(e,t):"Map"===(n="Object"===(n=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?bi(e,t):void 0}function bi(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function gi(e,t,n,r){var o=[],i=t.filter((function(e){return e.isWorking||e.isBase})).map((function(e){return e.name}));if(e){for(var a={},l=0;l<e.length;l++)!function(t){var n=e[t];t=n.content+n.start;n.isTemporary?(a[vi]={name:n.getSourceName(),content:n.content,id:n.uniqueId,isTemporary:!0,annotation:n},i=i.filter((function(e){return e!==n.getSourceName()})),t=vi):i=a[t]?(a[t].name+=" "+Object(S.a)(n.getSourceName()),i.filter((function(e){return e!==n.getSourceName()}))):(a[t]={name:Object(S.a)(n.getSourceName()),content:n.content,id:n.uniqueId,userCreated:n.userCreated,annotation:n},i.filter((function(e){return e!==n.getSourceName()}))),!n.userCreated&&n.creatorWitness.isWorking?a[t].isWorking=!0:a[t].isWorking=!1}(l);i.unshift(n);var c=i;"བྱང་ཆུབ་སེམས་དཔའི་སྤྱོད་པ་ལ་འཇུག་པ་བཞུགས་སོ།"!==(null==r?void 0:r.name)&&(c=i.filter((function(e){return"Dominant"!==e}))),o=Object.keys(a).reduce((function(e,t){return(t=a[t]).isWorking&&(t.name=c.reduce((function(e,t){return e+" "+Object(S.a)(t,";")}),"")),e.push(t),e}),[])}return o}var vi=-3,wi=Object(a.connect)((function(e,t){var n=b.ib(e),r=b.I(e),o=t.activeAnnotation,a=t.inline,l=b.K(e);if(l||r&&(l=b.ob(e,r.id)),!o||!l)return{annotationsData:null,activeAnnotation:null,baseAnnotation:null,availableAnnotations:null,user:n,temporaryAnnotation:null,inline:null,firstSelectedSegment:null,splitTextRect:null,selectedWitness:null};var c=function(e,t,n,r,o){return 0<(e=b.T(e,n.id,r,o,t)).length?e[0]:null}(e,vn.a.variant,l,o.start,o.length),s=function(e,t,n,r){var o=[];n&&t.naturalId===n.naturalId||o.push(t),n&&o.push(n);var i=(a=mi(e.getPositionOfAnnotation(t),2))[0],a=a[1];if(i){a=i+a;var l,c=[];t.isInsertion?((l=r["i"+i])&&(c=c.concat(l)),(l=r[String(i)])&&(c=c.concat(l))):((l=r[String(i)])&&(c=l),(i=r[String(a)])&&(c=c.concat(i)));for(var s=0;s<c.length;s++){var u=c[s];u.start===t.start&&u.length===t.length?n&&u.naturalId===n.naturalId||o.push(u):e.activeWitness.isWorking||u.type!==vn.a.pageBreak&&u.type!==vn.a.lineBreak||o.push(u)}o=it()(o,(function(e,t){return e.id===t.id}))}return o}(t.annotatedText,o,c,t.annotationPositions),u=gi(u=s.filter((function(e){return e.type===vn.a.variant})),d=b.R(e),x=b.hb(e,"annotation.workingEdition","Working"),r),f=(r=null,o.id==en.a?r=o:(S=(f=mi(t.annotatedText.getPositionOfAnnotation(o),2))[0],f=f[1],u=null===S||null===f?null:(S=gi([r=t.annotatedText.getBaseAnnotation(S,f)],d,x),[].concat(hi(S),hi(u)))),u&&u.sort((function(e,t){return e.isTemporary?-1:t.isTemporary?1:e.userCreated?-1:!t.userCreated&&e.annotation.id&&t.annotation.id?e.annotation.id-t.annotation.id:1})),s.filter((function(e){return e.type===vn.a.note}))),d=b.T(e,l.id,o.start,o.length,vn.a.note),p=s.filter((function(e){return e.type===vn.a.question})),h={};if(0<p.length)for(var m=0;m<p.length;m++){var y=p[m],g=(h[y.uniqueId]={},b.xb(e,y));g=(h[y.uniqueId].loading=g,b.v(e,y.uniqueId));h[y.uniqueId].questions=g}var v,w,O,x,S=null,E=(0<(x=b.T(e,l.id,o.start,o.length,vn.a.question)).length&&(E=x[0],w=(E=mi(t.annotatedText.getPositionOfAnnotation(E),2))[0],E=E[1],w&&(E=(w=mi(t.annotatedText.segmentedText.extractTextAroundPosition(w,E=E||w+1,["།"," "]),3))[0],v=w[1],w=w[2],O=document.location.href,S=i.a.createElement("blockquote",null,E,i.a.createElement("a",{href:O},v),w))),Object(b.Y)(e));return{annotationsData:u,activeAnnotation:o,baseAnnotation:r,availableAnnotations:s,user:n,temporaryAnnotation:c,inline:a,firstSelectedSegment:t.firstSelectedSegment,splitTextRect:t.splitTextRect,selectedWitness:l,notes:f,temporaryNotes:d,questions:p,temporaryQuestions:x,questionsData:h,questionQuote:S,fontSize:E}}),null,(function(e,t,n){var r=t.dispatch;if(0<e.questions.length)for(var o=0;o<e.questions.length;o++){var i=e.questions[o],a=!0;(a=!(e.questionsData.hasOwnProperty(i.uniqueId)&&0<e.questionsData[i.uniqueId].questions.length&&!e.questionsData[i.uniqueId].loading)&&a)&&r(new y.kc(i))}function l(t){var o=1<arguments.length&&void 0!==arguments[1]&&arguments[1];return function(){var i=n.activeAnnotation,a=(i=new vn.c(null,i.witness,i.end+1,0,null,t,e.selectedWitness,e.user),b.d(e.selectedWitness)),l=[];l.push(y.dc(i)),l.push(y.Hb(i.uniqueId,a)),l.push(o?y.Vb(i):y.Vb(null)),r(Object(Q.batchActions)(l))}}function c(t,n){var o,i,a;t.isTemporary?(o=e.selectedWitness,o=b.d(o),(n=new vn.c(t.id,t.witness,t.start,t.length,n,t.type,t.creatorWitness,e.user,t.uniqueId,t.basedOn)).isSaved=t.isSaved,i=[],a=null,a=n.isSaved?y.Xc:y.dc,i.push(a(n)),i.push(y.Ec(t)),i.push(y.Hb(n.uniqueId,o)),n.type===vn.a.variant&&i.push(y.Vb(n)),r(Object(Q.batchActions)(i))):console.warn("Tried to save a non-temporary annotation: %o",t)}return pi(pi(pi({},e),n),{},{closeAnnotation:function(){var t;e.activeAnnotation&&(t=y.Vb(null),r(t))},didSelectAnnotation:function(t){var n=t.id==en.a?e.baseAnnotation:mr()(e.availableAnnotations,(function(e){return e.uniqueId==t.uniqueId}))||null,o=[],i=e.selectedWitness,a=b.d(i);t.uniqueId!=e.activeAnnotation.uniqueId&&(i.isWorking?(t.id!=en.a&&o.push(y.Hb(n.uniqueId,a)),e.activeAnnotation.id!=en.a&&o.push(y.Cc(e.activeAnnotation.uniqueId,a))):e.activeAnnotation.creatorWitness.id===i.id?(o.push(y.Dc(e.activeAnnotation.uniqueId,a)),n.id!==en.a&&o.push(y.Hb(n.uniqueId,a))):(n.creatorWitness.id===i.id?o.push(y.Ib(n.uniqueId,a)):n.id!==en.a&&o.push(y.Hb(n.uniqueId,a)),e.activeAnnotation.id!==en.a&&o.push(y.Cc(e.activeAnnotation.uniqueId,a))),o.push(y.Vb(n)),r(Object(Q.batchActions)(o)))},editAnnotation:function(t){var n=t.isWorkingAnnotation||t.userCreated||t.id===en.a?null:t;n=new vn.b(n,t.witness,t.start,t.length,t.content,t.type,e.selectedWitness,e.user);t.userCreated&&(n.uniqueId=t.uniqueId,n.isSaved=t.isSaved),r(y.Gb(n,!0))},saveAnnotation:c,cancelEditAnnotation:function(e){var t;e.isTemporary?(t=y.Ec(e),r(t)):console.warn("Tried to call cancelEditAnnotation on a non-temporary annotation: %o",e)},deleteAnnotation:function(t){var n=e.selectedWitness,o=b.d(n),i=[];i=t.userCreated?[y.fc(t,n),y.Cc(t.uniqueId,o)]:[y.Dc(t.uniqueId,o)],e.activeAnnotation.uniqueId===t.uniqueId&&i.push(y.Vb(null)),r(Object(Q.batchActions)(i))},addNote:function(){var t=n.activeAnnotation;t=new vn.b(null,t.witness,t.start,t.length,"",vn.a.note,e.selectedWitness,e.user);r(y.Gb(t,!0))},editNote:function(t){t=new vn.b(t,t.witness,t.start,t.length,t.content,vn.a.note,e.selectedWitness,e.user),r(y.Gb(t,!0))},addPageBreak:l(vn.a.pageBreak),addLineBreak:l(vn.a.lineBreak),addQuestion:function(){var t=n.activeAnnotation;t=new vn.b(null,t.witness,t.start,t.length,"",vn.a.question,e.selectedWitness,e.user);r(y.Gb(t,!0))},saveQuestion:function(t,o,i){var a=((a=mi(n.annotatedText.getPositionOfAnnotation(t),2))[0],a[1],fi.a.renderToStaticMarkup(e.questionQuote)+i);c(t,i),i=y.ec(t,o,a);r(i)}})}))(An);function Oi(e){return function(e){if(Array.isArray(e))return xi(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){var n;if(e)return"string"==typeof e?xi(e,t):"Map"===(n="Object"===(n=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?xi(e,t):void 0}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xi(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Si=Object(o.memo)(Object(c.c)((function(e){var t=[],n="",r="",o=[];return e.witnesses&&e.activeWitness&&(r=e.witnesses.findIndex((function(t){return t.id===e.activeWitness.id})),(t=e.witnesses.map((function(e){return e}))).sort((function(e,t){return e.isWorking?-1:t.isWorking?1:e.isBase?-1:t.isBase?1:0})),t=t.sort((function(e,t){return e.id-t.id}))),0===t.length?null:i.a.createElement(Be.a,{onChange:function(n){Re()(t)||e.onSelectedWitness(t[n.target.value])},className:ut.a.selectVersion,value:r,label:"Version",classes:{root:ut.a.selectEmpty,select:ut.a.selectOptions}},t.map((function(t,r){return t.id===e.activeWitness.id&&o.push(ut.a.selected),n=t.source.name,t.isWorking&&(n="en"===e.intl.locale?"User"===(null==(t=e.user)?void 0:t.name)?"Working":"My Edition":"མཉམ་འབྲེལ་པར་མ།"),i.a.createElement("option",{key:"versionSelect-".concat(r),value:r,className:ut.a.selectOptions},n)})))})));function Ei(e){return function(e){if(Array.isArray(e))return Ii(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ji(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ti(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||ji(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ji(e,t){var n;if(e)return"string"==typeof e?Ii(e,t):"Map"===(n="Object"===(n=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ii(e,t):void 0}function Ii(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}ui=i.a.memo((function(e){var t=Object(o.useRef)(e.texts),n=(s=Ti(Object(o.useState)(t.current),2))[0],r=s[1],a=(s=Ti(Object(o.useState)(null),2))[0],l=s[1],c=e.onSelectedText,s=e.selectedText,u=(e=Ti(Object(o.useState)(!1),2))[0],d=e[1],p=(e=null==s?void 0:s.name,Object(o.useRef)(new pt.c({fixedHeight:!0,defaultHeight:40}))),h=[ht.a.textlist],m=(Object(o.useEffect)((function(){var e;""===a&&r(Ei(t.current)),null!==a&&""!==a&&(e=t.current.filter((function(e){return e.name.includes(a)})),r(Ei(e)))}),[a]),i.a.useCallback((function(e){var t=e.key,r=e.index,o=e.style,a=(e=e.parent,n[r]);return i.a.createElement(pt.b,{key:"optionvalues-".concat(t),cache:p.current,parent:e,columnIndex:0,rowIndex:r},i.a.createElement("div",{style:o,onClick:function(){d(!1),c(a)}},i.a.createElement(z.a,{sx:{overflow:"hidden",textOverflow:"ellipsis",width:"13rem",paddingLeft:2,fontSize:{lg:12,md:11,sm:10,xs:10},color:"text.primary"},component:"div"},i.a.createElement(te.a,{noWrap:!0},Object(S.a)(a.name)))))}),[n]));return i.a.createElement(mt.a,{onClickAway:function(){return d(!1)}},i.a.createElement("div",{style:{position:"relative",marginLeft:10}},i.a.createElement(f.a,{onClick:function(){d((function(e){return!e})),!1===u&&h.push(ht.a.open)},component:"div",variant:"outlined",sx:{textOverflow:"ellipsis",width:"10rem",height:"100%",color:"text.primary"}},i.a.createElement(te.a,{noWrap:!0},e||"select Text here")),i.a.createElement(yt.a,{in:u},i.a.createElement(z.a,{className:v()(h),sx:{position:"absolute",bgcolor:"heading.main",zIndex:1}},i.a.createElement(bt.a,{onChange:function(e){e=e.target.value,l(e)},id:"standard-basic",label:"Search",variant:"standard",style:{width:"100%"}}),i.a.createElement(pt.a,null,(function(e){var t=e.width;e=e.height;return i.a.createElement(pt.d,{width:t,height:e,rowHeight:30,deferredMeasurementCache:p.current,rowCount:n.length,rowRenderer:m})}))))))})),An=Object(a.connect)((function(e){return{texts:b.fb(e),selectedText:b.I(e)}}),(function(e){return{onSelectedText:function(t){e(y.Mc(t))}}}))(ui);var Ai=i.a.memo(An);function Pi(e){return e=e.handleWindowSearch,i.a.createElement(Ne.a,{size:"small",variant:"text",onClick:e},i.a.createElement(p.a,null))}function ki(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||function(e,t){var n;if(e)return"string"==typeof e?Ci(e,t):"Map"===(n="Object"===(n=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ci(e,t):void 0}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ci(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ri(e){var t=ki(Object(o.useState)(!1),2),n=t[0],r=t[1],a=(t=ki(Object(be.a)("WindowOneFont","Tibetan"),2))[0],l=t[1];return Object(o.useEffect)((function(){document.body.style.setProperty("--tibetan-fonts",a)}),[]),i.a.createElement(mt.a,{onClickAway:function(){return r(!1)}},i.a.createElement(z.a,{position:"relative"},i.a.createElement(Ne.a,{onClick:function(){r((function(e){return!e}))},size:"small",variant:"text"},i.a.createElement(Tt,{height:20,width:20,fill:"currentColor"})),i.a.createElement(yt.a,{in:n},i.a.createElement(Pt.a,{dense:!0,sx:{position:"absolute",right:0,zIndex:2,top:40,bgcolor:"heading.main"}},i.a.createElement(jt,{fontSize:e.textFontSize,onChange:e.onChangedFontSize}),i.a.createElement(kt.a,null),i.a.createElement(_i,{selectFont:function(e){l(e),document.body.style.setProperty("--tibetan-fonts","".concat(e)),setTimeout((function(){}),1e3),r(!1)},selectedfont:a}),i.a.createElement(Ct.a,{onClick:function(){return e.onExport()}},i.a.createElement(te.a,{variant:"subtitle2"},"Export Document"))))))}var _i=function(e){var t=e.selectFont,n=(e=e.selectedfont,u.c||[]);return i.a.createElement(z.a,{textAlign:"center"},i.a.createElement("span",null,"Font:")," ",i.a.createElement("select",{onChange:function(e){return t(e.target.value)},value:e},n.map((function(e,t){return i.a.createElement("option",{key:t+"-fontselect",value:e},e)}))))};function Bi(e){var t=e.changeShowTableContent,n=e.showTableContent;return i.a.createElement(i.a.Fragment,null,i.a.createElement(Ne.a,{onClick:function(){t(!n)}},n?i.a.createElement(Dt.a,null):i.a.createElement(Oe.a,null)))}function Ni(e){return(Ni="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Wi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Di(e,t){return(Di=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Li(e){return(Li=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Hi=function(e){var t=r;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Di(t,e);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Li(e);n=t?(n=Li(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),r=this;if(n&&("object"===Ni(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==r)return r;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(r);function r(e){if(this instanceof r)return n.call(this,e);throw new TypeError("Cannot call a class as a function")}return t=r,(e=[{key:"render",value:function(){var e=this,t=this.props.string,n=t,r=this.props.stringClass||"";if(this.props.searchTerm){var i=this.props.searchTerm,a=(new T.a).splitGraphemes(t),l=t.indexOf(i),c=l+i.length,s=0,u="";if(-1<l)for(var f=0;f<a.length;f++){var d=a[f];l<=s&&s<c&&(u+=d),s+=d.length}0<u.length&&(n=j()(t,u,(function(t,n){return o.createElement("span",{className:e.props.highlightClass,key:"highlight-".concat(n)},t)})))}return o.createElement("span",{className:r},n)}}])&&Wi(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),r}(o.Component),zi=(c=n(1067),n.n(c));function Mi(e){function t(e){var t=e.key,o=e.index,c=e.parent,u=(e=e.style,a[o]);return i.a.createElement(pt.b,{key:"listkeys2-".concat(t),cache:s.current,parent:c,columnIndex:0,rowIndex:o},i.a.createElement("div",{className:zi.a.searchListItem,onClick:function(){return n(l,u[0],r.length,l)},style:e},i.a.createElement(Hi,{string:u[1],highlightClass:zi.a.highlight,searchTerm:r})))}var n=e.onSelectedSearchResult,r=e.searchValue,a=e.results,l=e.selectedText,c=Object(o.useRef)(),s=Object(o.useRef)(new pt.c({fixedWidth:!0,defaultHeight:100}));return a?i.a.createElement(i.a.Fragment,null,i.a.createElement(pt.a,null,(function(e){var n=e.height;e=e.width;return i.a.createElement(pt.d,{ref:c,height:n,rowCount:null==a?void 0:a.length,rowHeight:s.current.rowHeight,deferredMeasurementCache:s.current,rowRenderer:t,width:e,overscanRowCount:1})}))):null}function Vi(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}function qi(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||function(e,t){var n;if(e)return"string"==typeof e?Fi(e,t):"Map"===(n="Object"===(n=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Fi(e,t):void 0}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Fi(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ui(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function Qi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ui(Object(n),!0).forEach((function(t){Ki(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ui(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ki(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}ui=i.a.memo((function(e){var t=(s=qi(Object(o.useState)(""),2))[0],n=s[1],r=(s=qi(Object(o.useState)(!1),2))[0],a=s[1],l=(s=qi(Object(o.useState)(!1),2))[0],c=s[1],s=Object(o.useRef)(),u=Object(o.useRef)(),d=i.a.useRef(ct()((function(t){e.searchChanged(t)}),1e3)).current,p=Object(o.useCallback)((function(e){e.preventDefault(),d(t),c(!0)}),[t]),h=Object(o.useCallback)((function(){!1===r&&d(null),a(!r)}),[r]),m=(Object(o.useEffect)((function(){!0===r&&u.current.focus(),!1===r&&d(null)}),[r]),Object(o.useCallback)((function(){c(!1),d(null),n("")}),[])),y=Object(o.useMemo)((function(){return lt()(e.searchResults)&&e.searchResults.hasOwnProperty(e.selectedText.id)}),[e.searchResults,e.selectedText]),b=y?e.searchResults[e.selectedText.id].results:[];return i.a.createElement(Ht.a,{ref:s,direction:"column",spacing:1,sx:{paddingInline:{md:1,xs:0},paddingBlock:{md:1,xs:0},bgcolor:"heading.main",color:"text.primary"}},i.a.createElement(Ht.a,{direction:"row",spacing:1,justifyContent:"space-between"},i.a.createElement(z.a,{sx:{display:"flex",gap:{md:2,sx:0},flexDirection:{md:"row",xs:"column"}}},i.a.createElement(Ai,null),i.a.createElement(Si,{witnesses:e.witnesses,activeWitness:e.selectedWitness,onSelectedWitness:e.onSelectedWitness,user:e.user})),i.a.createElement(zt.a,{size:"small",sx:{position:"relative",display:"flex",height:"fit-content",alignItems:"center",justifyContent:"center",width:"fit-content",border:function(e){return"1px solid ".concat(e.palette.divider)},borderRadius:1,bgcolor:"background.paper",color:"text.secondary","& svg":{m:1},"& hr":{mx:.5}},className:st.a.button_group_menu},i.a.createElement(kt.a,{orientation:"vertical",variant:"middle",flexItem:!0}),i.a.createElement(Pi,{handleWindowSearch:h}),i.a.createElement(Ri,{textFontSize:e.textFontSize,onChangedFontSize:e.onChangedFontSize,onExport:e.onExport}),i.a.createElement(Bi,{changeShowTableContent:e.changeShowTableContent,showTableContent:e.showTableContent}))),i.a.createElement(We.a,{in:r,mountOnEnter:!0,unmountOnExit:!0},i.a.createElement("form",{onSubmit:p},i.a.createElement(Ht.a,{direction:"row",spacing:2,position:"relative"},i.a.createElement(bt.a,{hiddenLabel:!0,id:"filled-hidden-label-small",inputProps:{style:{height:25,padding:"0 14px"}},style:{height:25,flex:1},fullWidth:!0,inputRef:u,value:t,onChange:function(e){return n(e.target.value)}}),i.a.createElement(f.a,{variant:"outlined",size:"small",onClick:p,style:{height:25}},"Search"),e.searchResults&&l&&i.a.createElement(z.a,{sx:(Vi(s={position:"absolute",top:35,right:0,zIndex:1,bgcolor:"heading.main",height:350,width:350,boxShadow:3,overflowX:"hidden"},"boxShadow",3),Vi(s,"display",0===b.length?"none":"block"),s)},y&&0<b.length&&i.a.createElement(Mi,{onSelectedSearchResult:e.onSelectedSearchResult,searchValue:e.searchValue,results:b,selectedText:e.selectedText}),i.a.createElement(Ne.a,{"aria-label":"closeButton",onClick:m,size:"small",sx:{right:15,top:0,position:"absolute"}},i.a.createElement(xe.a,{fontSize:"inherit"})))))))}));var Gi=Object(a.connect)((function(e){var t,n,r=b.I(e),o=b.J(e),i=[],a=!1,l=(r&&(i=b.db(e,r.id),(l=b.M(e,r.id))?(t=b.kb(e,l),a=b.q(e,l)):t=b.ob(e,r.id)),o&&(n=(l=b.N(e,o.id))?b.lb(e,l):b.pb(e,o.id)),b.Y(e)),c=b.A(e);return{witnesses:i,selectedText:r,selectedText2:o,selectedWitness:t,selectedWitness2:n,textFontSize:l,exportingWitness:a,searchValue:c,showTableContent:b.P(e),searchResults:b.y(e,c)}}),null,(function(e,t,n){var r=t.dispatch,o=e.selectedText;return Qi(Qi(Qi({},n),e),{},(Ki(n={navigationButtonClicked:function(){t.dispatch(y.bc(!e.textListIsVisible))},onSelectedWitness:function(e){r(y.Oc(null==o?void 0:o.id,null==e?void 0:e.id))},onChangedFontSize:function(e){r(y.Zb(e))},onChangeWindowOpen:function(e){r(y.Vc(e))},onExport:function(){r(y.gc(e.selectedWitness.id,"docx"))}},"navigationButtonClicked",(function(){r(y.bc(!e.textListIsVisible))})),Ki(n,"changeIsAnnotating",(function(e){r(y.Lb(e)),!1===e&&(e=y.Vb(null),r(e),r(y.Vb(null)))})),Ki(n,"searchChanged",(function(e){r(y.Wb(e))})),Ki(n,"changeShowTableContent",(function(e){r(y.Tc(e))})),Ki(n,"onSelectedSearchResult",(function(e,t,n,o){o&&o.id===e.id?r(y.Kc(e.id,t,n)):r(batchActions([y.Kc(e.id,t,n),y.Mc(e)]))})),n))}))(ui),$i=(An=n(1068),n.n(An)),Yi=Object(a.connect)((function(e){var t=b.u(e),n=b.i(e);return{alignmentData:n,selectedMedia:t,text:b.U(e,n.target)}}),(function(e){return{changeMediaSelection:function(t){return e(y.Bc(t))},onChangeWindowOpen:function(t){e(y.Vc(t))},onSelectedSearchResult:function(t,n,r){e(y.Kc(t,n,r))},selectSecondWindowText:function(t){e(y.Vc(!0)),e(y.Nc(t))}}}))((function(e){var t=e.alignmentData,n=(e.text,e.selectSecondWindowText);return t.target,(e=(null==t?void 0:t.alignments.text)||[]).length?i.a.createElement(z.a,null,i.a.createElement(te.a,{variant:"h6",gutterBottom:!0,component:"div"},"Commentary"),e.map((function(e,t){return i.a.createElement("ul",{style:{paddingLeft:18},key:"commentary-".concat(t)},i.a.createElement("li",{style:{cursor:"pointer"},onClick:function(){n({id:2,name:"བྱང་ཆུབ་སེམས་དཔའི་སྤྱོད་པ་ལ་འཇུག་པ་བཞུགས་པའི་འགྲེལ་པ།"})}},e.target))}))):null}));function Ji(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Xi=Object(ae.a)("div")((function(e){return Ji({position:"relative",borderRadius:(e=e.theme).shape.borderRadius,backgroundColor:Object(ln.a)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object(ln.a)(e.palette.common.white,.25)},marginLeft:0,width:"100%"},e.breakpoints.up("sm"),{marginLeft:e.spacing(1),width:"auto"})})),Zi=Object(ae.a)("div")((function(e){return{padding:e.theme.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"}})),ea=Object(ae.a)(d.c)((function(e){return{color:"inherit","& .MuiInputBase-input":Ji({padding:(e=e.theme).spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(e.spacing(4),")"),transition:e.transitions.create("width"),width:"100%"},e.breakpoints.up("sm"),{width:"0",cursor:"pointer","&:focus":{width:"20ch"}})}}));var ta=i.a.memo((function(){return i.a.createElement(z.a,{className:$i.a.TableContent,sx:{bgcolor:"heading.main",color:"text.primary",width:"100%",height:"100%",paddingInline:2}},i.a.createElement(Yi,null),i.a.createElement(cn.a,{sx:{justifyContent:"space-between",paddingLeft:"0 !important",margin:0}},i.a.createElement(te.a,{textTransform:"uppercase",component:"h6"},"Table Of Content"),i.a.createElement(Xi,null,i.a.createElement(Zi,null,i.a.createElement(p.a,null)),i.a.createElement(ea,{placeholder:"Search…",inputProps:{"aria-label":"search"}}))),i.a.createElement(z.a,null,[{Id:1,Title:"chapter 1",segment_id:0},{Id:2,Title:"chapter 2",segment_id:400}].map((function(e,t){return i.a.createElement(z.a,{key:"TableContent-"+t,sx:{cursor:"pointer",width:"fit-content","&:hover":{fontWeight:"bold"}}},e.Title)}))))})),na=n(1069);function ra(e){return e=e.children,i.a.createElement(na.MapInteractionCSS,null,e)}function oa(e){return(oa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ia(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||function(e,t){var n;if(e)return"string"==typeof e?aa(e,t):"Map"===(n="Object"===(n=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?aa(e,t):void 0}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function aa(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function la(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function ca(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?la(Object(n),!0).forEach((function(t){var r,o;r=e,o=n[t=t],t in r?Object.defineProperty(r,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[t]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):la(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function sa(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ua(e,t){return(ua=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function fa(e){return(fa=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function da(e){return"s_"+e.start}function pa(e){return"ds_"+e.start}function ha(e){return"i_"+e.start}function ma(e){return"p_"+(e.end+1)}function ya(e){return"l_"+(e.end+1)}var ba=String.fromCharCode(182),ga=fi.a.renderToStaticMarkup(i.a.createElement(Uo,null)),va=(c=function(e){var t=r;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ua(t,e);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=fa(e);n=t?(n=fa(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),r=this;if(n&&("object"===oa(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==r)return r;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(r);function r(e){var t;if(this instanceof r)return(t=n.call(this,e)).textAlignmentById=[],t.state={segmentedText:e.segmentedText},t.textAlignmentById=t.props.textAlignmentById,t._renderedSegments=null,t._renderedHtml=null,t.rangeSelect=[],t.theme=e.theme,t;throw new TypeError("Cannot call a class as a function")}return t=r,(e=[{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.setState((function(t,n){return ca(ca({},t),{},{segmentedText:e.segmentedText})}))}},{key:"annotationsForSegment",value:function(e){var t=[],n=this.props.annotationPositions[String(e.start)],r=this.props.annotationPositions[en.c+e.start]||[],o=this.props.annotationPositions[en.b+e.start]||[],i=this.props.annotationPositions[en.e+(e.end+1)]||[];e=this.props.annotationPositions[en.d+(e.end+1)]||[];return(t=n||t).concat(r,o,i,e)}},{key:"segmentsContainSegment",value:function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(r.start===t.start&&r.text===t.text)return!0}return!1}},{key:"selectedElement",value:function(e){if("DIV"===e.tagName)this.props.selectedSegmentId("");else{var t=[],n=[],r=document.getSelection(),o=parseInt(e.id.replace("s_",""));if(this.props.changeSyncIdOnClick(o),null!=e&&e.id.includes("s_")&&this.props.condition){this.props.changeScrollToId({id:null,from:null});var i=parseInt(e.id.replace("s_","")),a=mr()(this.textAlignmentById,(function(e){return i>=e.start&&i<e.end}));if(a){for(var l=a.start;l<a.end;l++)t.push(l);for(var c=a.TStart;c<a.TEnd;c++)n.push(c);this.props.changeSelectedRange({source:t,target:n})}}r&&"Range"===r.type||(this.props.selectedSegmentId(e.id),e.id||this.props.changeSelectedRange({source:[],target:[]}))}}},{key:"generateHtml",value:function(e,t){var n=t.segmentedText.segments,r=bn.a.textLine,o='<p class="'+r+'">';if(0===n.length)return{__html:o};for(var i=bn.a.insertion,a=n[n.length-1].end+1,l=(e.annotationPositions[en.c+a]&&(t=new gn.a(a,""),n.push(t)),e.annotationPositions[en.e+a]&&(t=new gn.a(a,""),n.push(t)),e.annotationPositions[en.d+a]&&(t=new gn.a(a,""),n.push(t)),e.activeAnnotations||{}),c=bn.a.highlight,s=bn.a.activeHighlight,u=null,f={},d=0;d<n.length;d++){var p=n[d],h="",m=[],y=this.annotationsForSegment(p),b=null,g=!1,w=!1,O=!1,x=!1,S=null;if(y){for(var E,T=[],j=[],I=[],A=[],P=0,k=y.length;P<k;P++){var C,R=y[P];R.isInsertion?R.uniqueId in l?T.push(R):(C=R.start,f.hasOwnProperty(C)||(j.push(R),f[C]=R)):R.isDeletion?R.uniqueId in l&&A.push(R):R.type!==vn.a.pageBreak||e.activeWitness.isWorking?R.type!==vn.a.lineBreak||e.activeWitness.isWorking?I.push(R):x=R:S=R}0===T.length&&0<j.length&&(_=j[0],E=ha(p),B=i,e.activeAnnotation&&e.activeAnnotation.isInsertion&&e.activeAnnotation.start===_.start&&(B+=" "+bn.a.selectedAnnotation),o+="<span id="+E+" key="+E+' class="'+B+'">'+_.content+"</span>"),0<A.length&&(b=e.getBaseAnnotation(E=A[0]).content,e.activeAnnotation&&e.activeAnnotation.isDeletion&&e.activeAnnotation.start===E.start&&e.activeAnnotation.length===E.length&&0===p.length&&(g=!0)),S&&e.activeAnnotation&&e.activeAnnotation.uniqueId===S.uniqueId&&(w=!0),x&&e.activeAnnotation&&e.activeAnnotation.uniqueId===x.uniqueId&&(O=!0),(0<I.length||0<T.length)&&(I.some((function(e){return"P"===e.type}))&&m.push(bn.a.P_annotation),I.some((function(e){return"Q"===e.type}))&&m.push(bn.a.Q_annotation),I.some((function(e){return"N"===e.type}))&&m.push(bn.a.N_annotation),I.some((function(e){return"V"===e.type}))&&m.push(bn.a.V_annotation))}if(p.start===a)break;var _,B=null,N=(0===p.length?(B=pa(p),m.push(bn.a.removedByAnnotation),b&&(p=new gn.a(p.start,b))):B=da(p),(this.segmentsContainSegment(e.selectedAnnotatedSegments,p)||g)&&m.push(bn.a.selectedAnnotation),e.selectedSourceRange.includes(p.start)&&e.condition&&(_="light"===e.theme.palette.mode?bn.a.selectedRangelight:bn.a.selectedRangeDark,m.push(_)),0<m.length&&(h='class="'+v.a.apply(void 0,m)+'"'),p.text);if(e.searchStringPositions){var W=p.start,D=W,L=(N="",c);e.selectedSearchResult&&e.selectedSearchResult.start<=D&&e.selectedSearchResult.start+e.selectedSearchResult.length>D&&(L=s);for(var H=0;H<p.text.length;H++){var z,M,V,q=p.text.charAt(H);D=W+H;u?((z=ia(u,2))[0],0===H&&(N+='<span class="'+L+'">'),D===z[1]?(N+=q+"</span>",u=null):H===p.text.length-1?N+=q+"</span>":N+=q):D in e.searchStringPositions?(M=(z=ia(e.searchStringPositions[D],2))[0],V=z[1],N+='<span class="'+L+'">'+q,H!==p.text.length-1&&D!==V||(N+="</span>"),D<V&&(u=[M,V])):N+=q}}o+="<span id="+B+" key="+B+" "+h+">"+N+"</span>",S&&(b=[bn.a.pageBreak],w&&b.push(bn.a.selectedAnnotation),g=' class="'+b.join(" ")+'" ',o+="<span id="+ma(p)+" key="+ma(p)+g+">"+ga+"</span>"),x&&(m=[bn.a.lineBreak],O&&m.push(bn.a.selectedAnnotation),h=' class="'+m.join(" ")+'" ',o=o+"<span id="+ya(p)+" key="+ya(p)+h+">"+ba+'</span></p><p class="'+r+'">')}return this._renderedSegments=n,{__html:o+="</p>"}}},{key:"shouldComponentUpdate",value:function(e,t){return this.textAlignmentById=this.props.textAlignmentById,t=this.generateHtml(e,t),this.props.fontSize!==e.fontSize||(!this._renderedHtml||t.__html!==this._renderedHtml.__html)&&(this._renderedHtml=t,!0)}},{key:"render",value:function(){var e=this,t=[bn.a.text],n=(0===this.props.row&&t.push(bn.a.textFirstRow),this._renderedHtml||this.generateHtml(this.props,this.state));return this._renderedHtml||(this._renderedHtml=n),i.a.createElement("div",{className:bn.a.textContainer},i.a.createElement("div",{className:v.a.apply(void 0,t),id:"text1",dangerouslySetInnerHTML:n,style:{fontSize:this.props.fontSize,fontFamily:"var(--tibetan-fonts)"},onClick:function(t){e.selectedElement(t.target)}}))}}])&&sa(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),r}(i.a.Component),Object(hn.a)(c));function wa(e){return(wa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Oa(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function xa(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Oa(Object(n),!0).forEach((function(t){Sa(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Oa(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Sa(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ea(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||function(e,t){var n;if(e)return"string"==typeof e?Ta(e,t):"Map"===(n="Object"===(n=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ta(e,t):void 0}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ta(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ja(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ia(e,t){return(Ia=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Aa(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Pa(e){return(Pa=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}parseInt(Wr.a.inlineWidth);var ka="bdrcimg_pre",Ca={},Ra=function(e){var t=r;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ia(t,e);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Pa(e);n=t?(n=Pa(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),r=this;if(n&&("object"===wa(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return Aa(r)}}(r);function r(e){var t;if(this instanceof r)return(t=n.call(this,e)).textAlignmentById=[],t.list=null,t.splitText=null,t.cache=new O.b({fixedWidth:!0}),t.splitTextRef=o.createRef(null),t.rowRenderer=t.rowRenderer.bind(Aa(t)),t.textListVisible=e.textListVisible,t.editMenuVisible=e.editMenuVisible,t.isPanelLinked=e.isPanelLinked,t.activeSelection=null,t.selectedNodes=null,t._mouseDown=!1,t._activeWitness=null,t._didSetInitialScrollPosition=!1,t._modifyingSelection=!1,t.imageHeight=null,t.imageWidth=null,t.calculatedImageHeight=null,t.processProps(e),t.changeScrollToId=e.changeScrollToId,t.changeSyncIdOnClick=e.changeSyncIdOnClick,t.closeAnnotation=e.closeAnnotation,t.scrollJump=e.scrollJump,t.textAlignmentById=[],t.scrollEvent=t.scrollEvent.bind(Aa(t)),t.selectedWindow=e.selectedWindow,t.imageData=e.imageData,t.condition=e.condition,t;throw new TypeError("Cannot call a class as a function")}return t=r,(e=[{key:"scrollEvent",value:function(e){if(2===this.selectedWindow)return null;var t;1===this.selectedWindow&&(t=[],this.textAlignmentById.map((function(e){var n=document.getElementById("s_"+e.start);n&&102<n.getBoundingClientRect().top&&t.push({id:e.id,start:e.start,target:e.TStart})})),Re()(t)&&Re()([])||1===this.selectedWindow&&this.debouncedScroll(t))}},{key:"updateList",value:function(){var e=!(0<arguments.length&&void 0!==arguments[0])||arguments[0],t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;if(this.props.showImages&&!this.calculatedImageHeight&&this.imageHeight&&this.imageWidth&&(this.calculatedImageHeight=this.calculateImageHeight()),this.list){var n=this.list;if(e)if(null!==t)if(Array.isArray(t)){if(Array.isArray(t))for(var r=0;r<t.length;r++){var o=t[r];this.cache.clear(o)}}else this.cache.clear(t);else this.cache.clearAll(),n.measureAllRows(),n.recomputeRowHeights(0);n.forceUpdateGrid()}}},{key:"mouseDown",value:function(){this._mouseDown=!0}},{key:"mouseUp",value:function(){var e;this._mouseDown=!1,this.activeSelection&&(e=(e=this.processSelection(this.activeSelection))||[],this.props.didSelectSegmentIds(e),this.activeSelection=null)}},{key:"handleSelection",value:function(e){this._modifyingSelection?(e.stopPropagation(),this._modifyingSelection=!1):(this.activeSelection=document.getSelection(),this._mouseDown||this.mouseUp())}},{key:"processSelection",value:function(e){if(0===e.rangeCount||e.isCollapsed||"Caret"===e.type)return this.selectedNodes=null;var t=(e=e.getRangeAt(0)).startContainer;if(!(t=this.getNodeSegmentSpan(t))||!t.parentNode)return null;var n=this.getRangeNodes(e,t.parentNode),r=(0<n.length&&(r=n[0],e.startOffset===r.textContent.length&&n.shift()),e.endContainer);return(r=this.getNodeSegmentSpan(r))&&r.parentNode?(r&&t.parentNode!==r.parentNode?n=n.concat(this.getRangeNodes(e,r.parentNode)):0===e.endOffset&&n.pop(),t=[],(this.selectedNodes=n).reduce((function(e,t){return t instanceof Element&&e.push(t.id),e}),t),t):null}},{key:"getNodeSegmentSpan",value:function(e){for(var t=e,n=null,r=/^(i|s|ds)_/;!n&&t.parentNode;)t instanceof Element&&r.test(t.id)&&(n=t),t=t.parentNode;return n}},{key:"getRangeNodes",value:function(e,t){for(var n=[],r=0,o=t.childNodes.length;r<o;r++){var i=t.childNodes[r];e.intersectsNode(i)&&n.push(i)}return n}},{key:"getControlsMeasurements",value:function(e){if(!this.splitText)return null;var t=this.splitText,n=null,r=null,o=null,i=null,a=null,l=[],c=0;if(e.activeAnnotation){var s=e.activeAnnotation;if(null===(c=Ea(e.splitText.annotatedText.getPositionOfAnnotation(s),1)[0]))return console.warn("No startPos in getControlsMeasurements"),null;s.type===vn.a.pageBreak&&--c,s.type===vn.a.lineBreak&&--c,s.length,s.length,n=e.splitText.getTextIndexOfPosition(c),i=t.getBoundingClientRect()}var u=[];if(e.selectedAnnotatedSegments&&0<e.selectedAnnotatedSegments.length){u=e.selectedAnnotatedSegments;for(var f=0;f<u.length;f++){var d=u[f];if(null===r&&d instanceof gn.a){r=d;break}}r&&(a=0===r.length&&e.activeAnnotation&&e.activeAnnotation.isInsertion?(o=ha(r),ha):(o=da(r),da))}else e.activeAnnotation&&(e.activeAnnotation.isDeletion?(o=pa(s=new gn.a(c,"")),a=pa,u=[r=s]):e.activeAnnotation.isInsertion?(t=Ea(e.splitText.annotatedText.getPositionOfAnnotation(e.activeAnnotation),1)[0])&&(o=ha(s=new gn.a(t,"")),a=ha,u=[r=s]):e.activeAnnotation.type===vn.a.pageBreak?(u=[r=new gn.a(c+1,"")],l=[o=ma(new gn.a(c,""))]):e.activeAnnotation.type===vn.a.lineBreak&&(u=[r=new gn.a(c+1,"")],l=[o=ya(new gn.a(c,""))]));if(a)for(var p=0;p<u.length;p++){var h=u[p];h instanceof gn.a&&(h=a(h),l.push(h))}return null!=n&&r&&o&&i?{selectedTextIndex:n,firstSelectedSegment:r,selectedElementId:o,splitTextRect:i,selectedElementIds:l}:null}},{key:"shouldResetListCache",value:function(e,t){var n=!1;return!(e.showImages===t.showImages&&!this.pageBreaksChanged(e,t))||n}},{key:"pageBreaksChanged",value:function(e,t){return e=e.splitText.getTextsFinalPositions(),t=t.splitText.getTextsFinalPositions(),e.length!==t.length||JSON.stringify(e)!==JSON.stringify(t)}},{key:"lineBreaksChanges",value:function(e,t){var n=e.activeAnnotation,r=t.activeAnnotation,o=!1;return n&&n.isType(vn.a.lineBreak)&&t.activeAnnotations&&!t.activeAnnotations.hasOwnProperty(n.uniqueId)&&(o=!0),!(!(r&&r.isType(vn.a.lineBreak)&&e.activeAnnotations)||e.activeAnnotations.hasOwnProperty(r.uniqueId))||o}},{key:"selectedListRow",value:function(e){var t=null;return e.activeAnnotation?e.splitText.getTextIndexOfPosition(e.activeAnnotation.start):t}},{key:"processProps",value:function(e){var t=this,n=!1;if((o=((!this.props.selectedWitness||e.selectedWitness&&e.selectedWitness.id!==this.props.selectedWitness.id)&&(this._didSetInitialScrollPosition=!(n=!0)),!e.selectedSearchResult||this.props.selectedSearchResult&&e.selectedSearchResult.start===this.props.selectedSearchResult.start&&e.selectedSearchResult.textId===this.props.selectedSearchResult.textId||(console.log("resetting scroll position from search result"),this._didSetInitialScrollPosition=!1),this._filteredSelectedAnnotatedSegments=e.selectedAnnotatedSegments.reduce((function(e,t){return t instanceof gn.a&&e.push(t),e}),[]),this.getControlsMeasurements(e)))&&(this.selectedTextIndex=o.selectedTextIndex,this.firstSelectedSegment=o.firstSelectedSegment,this.splitTextRect=o.splitTextRect,this.selectedElementId=o.selectedElementId,this.selectedElementIds=o.selectedElementIds),e.textListVisible!==this.textListVisible||e.editMenuVisible!==this.editMenuVisible)setTimeout((function(){t.textListVisible=e.textListVisible,t.editMenuVisible=e.editMenuVisible,t.updateList(!0)}),500);else if(n)this.updateList(!0);else if(this.pageBreaksChanged(this.props,e)){var r=null,o=this.selectedListRow(this.props);n=this.selectedListRow(e);if(o&&n){r=[];for(var i=n<o?n:o,a=this.props.splitText.texts.length;i<a;i++)r.push(i)}this.updateList(!0,r)}else if(this.lineBreaksChanges(this.props,e)){n=(n=this.selectedListRow(e))||this.selectedListRow(this.props),o=this.props.splitText.texts;var l=[];if(null!==n){for(var c=n,s=o.length;c<s;c++)l.push(c);this.updateList(!0,l)}}else this.props.fontSize!==e.fontSize?this.updateList(!0):this.props.activeAnnotation&&e.activeAnnotation&&this.annotationsInSameLocation(this.props.activeAnnotation,e.activeAnnotation)?this.updateList(!0,this.selectedListRow(e)):this.updateList(this.shouldResetListCache(this.props,e))}},{key:"annotationsInSameLocation",value:function(e,t){return e.start===t.start&&e.length===t.length}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.processProps(e)}},{key:"scrollToIndex",value:function(e){var t=this.list;setTimeout((function(){t.scrollToRow(e),setTimeout((function(){t.scrollToPosition(t.props.scrollTop-300)}),0)}),100)}},{key:"componentDidMount",value:function(){var e=this;this.resizeHandler=mn()((function(){e.calculatedImageHeight=null,e.updateList()}),600).bind(this),this.processProps(this.props),this.debouncedScroll=ct()((function(t){t.length&&e.changeScrollToId({id:null==(t=t[0])?void 0:t.start,from:1})}),1e3),window.addEventListener("resize",this.resizeHandler),this.selectionHandler=ct()((function(t){e.handleSelection(t)}),200).bind(this),setTimeout((function(){window.dispatchEvent(new Event("resize"))}),2e3),document.addEventListener("selectionchange",this.selectionHandler),document.addEventListener("mousedown",this.mouseDown.bind(this),!0),document.addEventListener("mouseup",this.mouseUp.bind(this),!0),this.componentDidUpdate()}},{key:"componentDidUpdate",value:function(e){var t,n,r,o,i,a,l=this,c=(e=(this.imageData=this.props.imageData,this.imageData!==(null==e?void 0:e.imageData)&&(this.calculatedImageHeight=null,this.updateList(!0)),this.props.textAlignment),this.condition=this.props.condition,this.props.scrollToId),s=this.list;this.props.isAnnotating||(this.activeSelection=null),this.textAlignmentById=this.props.textAlignmentById,this.selectedWindow=this.props.selectedWindow,this.targetId=this.props.syncIdOnClick,this.selectedNodes&&0<this.selectedNodes.length&&(t=this.selectedNodes,n=this.props.selectedAnnotatedSegments,setTimeout((function(){var e=document.createRange(),r=t[0],o=t[t.length-1],i=n[n.length-1];i instanceof gn.a&&(i=document.getElementById(da(i)))&&(o=i),r instanceof Element&&o instanceof Element&&(r=document.getElementById(r.id),o=document.getElementById(o.id),r&&o&&(e.setStart(r,0),e.setEnd(o,o.childNodes.length),(i=document.getSelection())&&(l._modifyingSelection=!0,i.removeAllRanges(),i.addRange(e),l.selectedNodes=null)))}),0)),!this._didSetInitialScrollPosition&&this.list&&(r=this.list,(this.props.activeAnnotation||this.props.selectedSearchResult)&&(o=this.getSelectedTextIndex(),setTimeout((function(){r.scrollToRow(o),setTimeout((function(){r.scrollToPosition(r.props.scrollTop-300)}),0)}),100)),this._didSetInitialScrollPosition=!0),"video"==c.from&&c.id&&(a=c.id,i=this.props.splitText.getTextIndexOfPosition(a),setTimeout((function(){s.scrollToRow(i),setTimeout((function(){s.scrollToPosition(s.props.scrollTop-300)}),0)}),100)),2===this.selectedWindow&&2==c.from&&this.condition&&null!==c.id&&(this.textAlignmentById=this.props.textAlignmentById||[],e&&null!==(a=null==(a=this.textAlignmentById.find((function(e){return e.TStart===c.id})))?void 0:a.start)&&(a=this.props.splitText.getTextIndexOfPosition(a),this.scrollToIndex(a))),this.targetId&&"ua"===c.from&&2===this.selectedWindow&&"ua"===c.id&&this.condition&&(a=null==(a=e.alignment.find((function(e){return l.targetId>=e.target_segment.start&&l.targetId<e.target_segment.end})))||null==(e=a.source_segment)?void 0:e.start,e=this.props.splitText.getTextIndexOfPosition(a),this.scrollToIndex(e))}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousedown",this),document.removeEventListener("mouseup",this),window.removeEventListener("resize",this.resizeHandler),document.removeEventListener("selectionchange",this.selectionHandler)}},{key:"calculateImageHeight",value:function(){var e,t,n=null;return this.imageHeight&&this.imageWidth&&(e=this.imageWidth/this.imageHeight,t=kn.a.pechaImage,0<(t=document.getElementsByClassName(t)).length&&(n=t[0].offsetWidth/e)),n}},{key:"getSelectedTextIndex",value:function(){var e,t=0,n=null;return this.props.activeAnnotation?n=Ea(this.props.splitText.annotatedText.getPositionOfAnnotation(this.props.activeAnnotation),1)[0]:this.props.selectedSearchResult&&((e=this.props.splitText.annotatedText.segmentAtOriginalPosition(this.props.selectedSearchResult.start))instanceof gn.a?n=e.start:"number"==typeof e&&(n=e)),n?this.props.splitText.getTextIndexOfPosition(n):t}},{key:"getBaseAnnotation",value:function(e){var t=Ea(this.props.splitText.annotatedText.getPositionOfAnnotation(e),1)[0];return this.props.splitText.annotatedText.getBaseAnnotation(t=null===t?0:t,e.content.length)}},{key:"render",value:function(){var e=this,t=this.props,n=this.rowRenderer,r=this.cache,i=t.selectedWitness?t.selectedWitness.id:0;return o.createElement("div",{className:kn.a.splitText,ref:function(t){return e.splitText=t},key:i},o.createElement(w.a,{disableWidth:!0},(function(i){return i=i.height,o.createElement(x.a,{width:1,ref:function(t){return e.list=t},height:i,rowCount:t.splitText.texts.length,rowHeight:r.rowHeight,rowRenderer:n,overscanRowCount:3,deferredMeasurementCache:r,onScroll:e.scrollEvent,scrollToAlignment:"start",containerStyle:{width:"100%",maxWidth:"100%"},style:{width:"100%",paddingTop:30,paddingInline:50}})})))}},{key:"getImageUrl",value:function(e){var t,n,r;return this.props.selectedWitness&&this.props.selectedWitness.properties?(t=(r=this.props.selectedWitness.properties)[ka],n=r.bdrcimg_number,r=r.bdrcimg_suffix,"//iiif.bdrc.io/"+t+(Number(n)+e)+"."+r+"/full/full/0/default.jpg"):""}},{key:"getStringPositions",value:function(e,t,n){var r=this.props.splitText.annotatedText.getUniqueId();if((Ca=Ca.hasOwnProperty(r)?Ca:Sa({},r,{}))[r].hasOwnProperty(t)||(Ca[r]=Sa({},t,{})),Ca[r][t].hasOwnProperty(n))return Ca[r][t][n];for(var o=new T.a,i=e.getText(),a=null==(e=e.segments[0])?void 0:e.start,l=[],c=i.indexOf(t);-1!==c;)l.push(c),c=i.indexOf(t,c+1);var s={};if(0<l.length)for(var u=o.splitGraphemes(i),f=0,d=null,p=0;p<u.length;p++){var h=u[p],m=f+(h.length-1);null!==d?d+(t.length-1)<=m&&(s[d+a]=[d+a,m+a],d=null):-1!==l.indexOf(f)?t.length===h.length?s[f+a]=[f+a,m+a]:t.length>h.length&&(d=f):d=null,f+=h.length}return Ca[r][t][n]=s}},{key:"rowRenderer",value:function(e){var t=e.key,n=e.index,r=e.parent,i=(e=e.style,this.props),a=this.cache,l=this,c=i.showImages?kn.a.pechaImage:null,s="",u=(i.selectedWitness&&i.selectedWitness.properties&&i.selectedWitness.properties.hasOwnProperty(ka)&&(s=this.getImageUrl(n)),{}),f=this.props.searchValue,d=(f&&0<f.length&&i.splitText&&(u=this.getStringPositions(i.splitText.texts[n],f,n)),e.height,{});i.showImages&&c&&this.calculatedImageHeight&&(d.height=this.calculatedImageHeight+"px"),e=xa(xa({},e),{},{height:e.height+10,cursor:this.props.isAnnotating?"text":"pointer"});return o.createElement(O.a,{columnIndex:0,parent:r,rowIndex:n,cache:a,key:t},o.createElement("div",{key:t,style:e,className:kn.a.splitTextRow,ref:this.splitTextRef,id:"index_".concat(n)},o.createElement("div",{className:kn.a.splitTextRowContent},i.showImages&&o.createElement("div",{className:c,style:d},o.createElement(ra,null,o.createElement("img",{alt:"Text related Image",className:kn.a.image,src:s,width:"100%",height:"100%",loading:"lazy",decoding:"async",onLoad:function(e){e.target&&null===l.imageWidth&&(l.imageWidth=e.target.naturalWidth,l.imageHeight=e.target.naturalHeight,l.calculatedImageHeight=null,window.setTimeout(l.updateList.bind(l),0))}}))),o.createElement(va,{segmentedText:i.splitText.texts[n],annotations:i.annotations,activeAnnotations:i.activeAnnotations,activeAnnotation:i.activeAnnotation,row:n,selectedSegmentId:i.selectedSegmentId,annotationPositions:i.annotationPositions,selectedAnnotatedSegments:this._filteredSelectedAnnotatedSegments,getBaseAnnotation:this.getBaseAnnotation.bind(this),activeWitness:this.props.selectedWitness,searchValue:f,selectedSearchResult:this.props.selectedSearchResult,searchStringPositions:u,fontSize:i.fontSize,changeSyncIdOnClick:this.props.changeSyncIdOnClick,changeScrollToId:this.props.changeScrollToId,textAlignmentById:this.props.textAlignmentById,selectedSourceRange:this.props.selectedSourceRange,selectedTargetRange:this.props.selectedTargetRange,changeSelectedRange:this.props.changeSelectedRange,condition:this.condition})),this.props.isAnnotating&&this.selectedTextIndex===n&&this.props.activeAnnotation&&o.createElement(wi,{annotationPositions:i.annotationPositions,annotatedText:i.splitText.annotatedText,activeAnnotation:i.activeAnnotation,inline:!0,firstSelectedSegment:this.firstSelectedSegment,splitTextRect:this.splitTextRect,selectedElementId:this.selectedElementId,pechaImageClass:c,splitText:i.splitText,selectedElementIds:this.selectedElementIds,list:this.list})))}}])&&ja(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),r}(o.PureComponent);function _a(e){return(_a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ba(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Na(e,t){return(Na=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Wa(e){return(Wa=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Da,La,Ha,za,Ma=0,Va=(ui=function(e){var t=r;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Na(t,e);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Wa(e);n=t?(n=Wa(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),r=this;if(n&&("object"===_a(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==r)return r;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(r);function r(){var e;if(this instanceof r)return(e=n.call(this)).key=Ma++,e.ref=i.a.createRef(),e.selectedWindow=null,e;throw new TypeError("Cannot call a class as a function")}return t=r,(e=[{key:"mouseEnter",value:function(){2===this.selectedWindow&&this.props.text.name&&this.props.changeSelectedWindow(1)}},{key:"componentDidMount",value:function(){this.ref.current.addEventListener("mouseenter",this.mouseEnter.bind(this))}},{key:"componentDidUpdate",value:function(){this.selectedWindow=this.props.selectedWindow}},{key:"render",value:function(){this.props.text&&this.props.text;var e,t,n=null;n=[this.props.annotatedText&&this.props.text&&!this.props.loading?(e=this.props.paginated?(e=this.props.pageBreaks,0===(t=Oi(e))[0]&&t.shift(),function(e){return t}):Object(rn.a)(1e3,/^།[\s]+(?!།[\s]+)/,2,5),n=new nn(this.props.annotatedText,e),i.a.createElement(Ra,{splitText:n,annotations:this.props.annotations,activeAnnotations:this.props.activeAnnotations,activeAnnotation:this.props.activeAnnotation,limitWidth:!1,didSelectSegmentIds:this.props.didSelectSegmentIds,selectedSegmentId:this.props.selectedSegmentId,annotationPositions:this.props.annotationPositions,selectedAnnotatedSegments:this.props.selectedAnnotatedSegments,isAnnotating:this.props.isAnnotating,syncIdOnClick:this.props.syncIdOnClick,textListVisible:this.props.textListVisible,showImages:this.props.pageImagesVisible,imagesBaseUrl:this.props.imagesBaseUrl,selectedWitness:this.props.selectedWitness,key:this.key,selectedSearchResult:this.props.selectedSearchResult,searchValue:this.props.searchValue,fontSize:this.props.fontSize,isSecondWindowOpen:this.props.isSecondWindowOpen,changeScrollToId:this.props.changeScrollToId,changeSyncIdOnClick:this.props.changeSyncIdOnClick,imageData:this.props.imageData,isPanelLinked:this.props.isPanelLinked,selectedImage:this.props.selectedImage,changeSelectedImage:this.props.changeSelectedImage,closeAnnotation:this.props.closeAnnotation,textAlignment:this.props.textAlignment,textAlignmentById:this.props.textAlignmentById,isPanelVisible:this.props.isPanelVisible,scrollToId:this.props.scrollToId,selectedWindow:this.selectedWindow,selectedSourceRange:this.props.selectedSourceRange,selectedTargetRange:this.props.selectedTargetRange,changeSelectedRange:this.props.changeSelectedRange,searchResults:this.props.searchResults,showTableContent:this.props.showTableContent,selectedText:this.props.text,condition:this.props.condition})):i.a.createElement("div",{key:this.key})];return i.a.createElement(z.a,{sx:{bgcolor:"navbar.main",color:"texts.main"},className:v()(on.a.textDetail,Ce.a.flex,Ce.a.flexColumn),key:this.key,ref:this.ref},i.a.createElement(Gi,null),i.a.createElement(kt.a,null),i.a.createElement(l.a,{loaded:!this.props.loading,zIndex:5}),i.a.createElement(z.a,{style:{display:"flex",height:"100%",width:"100%"}},i.a.createElement(z.a,{className:v()(on.a.textContainer,Ce.a.flex)},this.props.loading?i.a.createElement("div",null):n),i.a.createElement(an.a,{direction:"left",in:this.props.showTableContent,container:this.ref.current,unmountOnExit:!0,mountOnEnter:!0},i.a.createElement(z.a,{sx:{position:"absolute",height:"100%",minWidth:"50%",right:0}},i.a.createElement(ta,null)))))}}])&&Ba(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),r}(i.a.Component),n(117));function qa(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function Fa(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qa(Object(n),!0).forEach((function(t){var r,o;r=e,o=n[t=t],t in r?Object.defineProperty(r,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[t]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qa(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ua(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||Qa(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Qa(e,t){var n;if(e)return"string"==typeof e?Ka(e,t):"Map"===(n="Object"===(n=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ka(e,t):void 0}function Ka(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ga(e){return[e.start,e.length].join("-")}var $a=null,Ya=Object(a.connect)((function(e){var t=Object(b.ib)(e),n=e.data.loadingWitnesses||e.data.loadingAnnotations,r=Object(b.ab)(e),o=b.X(e);if(n)return{text:null,witnesses:null,baseWitness:null,annotations:null,loading:n,paginated:null,pageImagesVisible:!0,annotatedText:null,selectedAnnotatedSegments:null,annotationPositions:null,activeAnnotations:null,activeAnnotation:null,user:t,textListVisible:r,fontSize:u.a,textAlignmentById:o};var i,a,l,c=Object(b.I)(e),s={},f=(c&&(i=Object(b.ob)(e,c.id),a=Object(b.n)(e,c.id)),Object(b.E)(e)),d={},p=[],h=null,m=Object(b.h)(e),y=[],g={},v=[],w="",O=Object(b.A)(e),x=!1,S=!1,E=Object(b.Y)(e);if(i&&c&&e.data.witnessAnnotationsById.hasOwnProperty(i.id)){s=Object(b.db)(e,c.id),h=((l=(T=Object(b.M)(e,c.id))?Object(b.kb)(e,T):l)||(l=i).id,l.id!==i.id&&(x=!0,S=Object(b.yb)(e)),Va.d(e,l.id)),g=(T=Ua(Va.c(e,l,i),2))[0],p=T[1];if(h&&(d=function(e,t){if(e===Da&&t===La&&e.version===za)return Ha;for(var n={},r={},o=0;o<t.length;o++)!function(o){var i=t[o],a=(o=Ua(e.getPositionOfAnnotation(i),2))[0],l=o[1];if(null!=a)if(0===l){if(i.isInsertion){if(o=Ga(i),o=r[o])return o.map((function(e){return n[e].push(i)}));a=en.c+a}i.isDeletion&&0<i.length&&(a=en.b+a),i.type===vn.a.pageBreak&&(a=en.e+a),i.type===vn.a.lineBreak&&(a=en.d+a),void 0===n[a]&&(n[a]=[]),-1===n[a].indexOf(i)&&n[a].push(i)}else{for(var c=[],s=a;s<a+l;s++)void 0===n[s]&&(n[s]=[]),-1===n[s].indexOf(i)&&n[s].push(i),c.push(s);i.isInsertion&&(o=Ga(i),r[o]=c)}}(o);return La=t,Ha=n,za=(Da=e).version,n}(h,Object.values(p))),m&&h&&(m=$a&&$a.id===l.id?m:h.getAnnotation(m.start,m.length))&&(y=h.segmentsForAnnotation(m)),l&&a&&h){var T=h.getAnnotationsOfType(vn.a.pageBreak)||{},j=null;l.id!==a.id&&(j=Object(b.m)(e,i.id,vn.a.pageBreak,a.id));for(var I=0,A=(v=function(e,t){var n=[];if(dr()(e,(function(e){return n.push(e.start)})),n=n.sort((function(e,t){return e-t})),t){var r=[];if(dr()(t,(function(e){return r.push(e.start)})),r=r.sort((function(e,t){return e-t})),0===n.length)return r;if(n.length/r.length<.9)for(var o=n[n.length-1],i=0,a=r.length;i<a;i++){var l=r[i];o<l&&n.push(l)}console.log(n)}return n}(T,j)).length;I<A;I++){var P=v[I];(P=h.segmentAtOriginalPosition(P))instanceof gn.a?v[I]=P.start:P instanceof Number&&(v[I]=P)}x&&(w="/static/images/texts/"+c.name+"/"+l.source.name+"/")}}$a=l;T=b.x(e),j=b.vb(e);var k=b.W(e),C=b.S(e),R=b.O(e),_=(b.L(e),b.u(e)),B=Object(b.r)(e),N=b.wb(e),W=b.p(e);return{text:c,witnesses:s,workingWitness:i,baseWitness:a,annotations:p,loading:n,paginated:x,pageImagesVisible:S,annotatedText:h,selectedAnnotatedSegments:y,annotationPositions:d,activeAnnotations:Fa({},g),activeAnnotation:m,pageBreaks:v,imagesBaseUrl:w,user:t,textListVisible:r,selectedWitness:l,selectedSearchResult:f,searchValue:O,fontSize:E,isSecondWindowOpen:N,imageData:B,selectedImage:Object(b.C)(e),isImagePortrait:Object(b.ub)(e),isAnnotating:b.tb(e),textAlignment:k,textAlignmentById:o,scrollToId:T,syncIdOnClick:C,selectedWindow:R,selectedSourceRange:Object(b.G)(e),selectedTargetRange:Object(b.H)(e),searchResults:Object(b.y)(e,O),showTableContent:Object(b.P)(e),selectedMedia:_,condition:W&&j&&N}}),null,(function(e,t,n){function r(e,t,n){var r=[],o=[],i=[];(e=f[e])&&(r=e.filter((function(e){return e.type===vn.a.variant})),o=e.filter((function(e){return e.type===vn.a.pageBreak})),i=e.filter((function(e){return e.type===vn.a.lineBreak}))),e=at()(r.concat(o,i),u.annotations,(function(e,t){return e.toString()==t.toString()})),o=null,o=0<e.length?e[0]:r&&0<r.length?(i=function(e){for(var t=null,n=0;n<e.length;n++){var r=e[n];(!t||r.length>t.length)&&(t=r)}return t}(r),r=(e=Ua(u.getPositionOfAnnotation(i),2))[0],e=e[1],i&&i.isInsertion&&(e=0),u.getBaseAnnotation(r,e)):u.getBaseAnnotation(t,n);s(Object(y.Vb)(o))}function o(e){return-1!==e.indexOf("i_")}function i(e){return-1!==e.indexOf("ds_")}function a(e){return-1!==e.indexOf("p_")}function l(e){return-1!==e.indexOf("l_")}function c(e){return!o(e)&&i(e)?e.substr(3):e.substr(2)}var s=t.dispatch,u=e.annotatedText,f=e.annotationPositions;return Fa(Fa(Fa({},e),n),{},{didSelectSegmentIds:function(t){if(0!==t.length){var n,r=[],a=[],l=function(e,t){var n,r,o,i,a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(a)return r=!(n=!0),{s:function(){a=a.call(e)},n:function(){var e=a.next();return n=e.done,e},e:function(e){r=!0,o=e},f:function(){try{n||null==a.return||a.return()}finally{if(r)throw o}}};if(Array.isArray(e)||(a=Qa(e))||t&&e&&"number"==typeof e.length)return a&&(e=a),i=0,{s:t=function(){},n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(t);try{for(l.s();!(n=l.n()).done;){var d,p,h,m=n.value;i(m)||o(m)||(d=c(m),p=u.segmentedText.segmentAtPosition(d),a.push(p),(h=f[p.start])&&(r=r.concat(h)))}}catch(t){l.e(t)}finally{l.f()}r=it()(r,(function(e,t){return e.toString()==t.toString()}));var b,g,v=at()(r,u.annotations,(function(e,t){return e.toString()==t.toString()})),w=function(e,t,n,r){if(0===e.length)return null;for(var o=e[0],i=(e=e[e.length-1],o.start),a=e.end,l=null,c=null,s=0;s<n.length;s++){var u=n[s],f=null,d=(p=Ua(r.getPositionOfAnnotation(u),2))[0],p=p[1];-1!==t.indexOf(u)?(d&&d<i&&(i=d,l=u),(f=d+p-1)&&a<f&&(c=a=f)):a<(f=d+p-1)&&(a=f)}return{start:i,length:a-i+1,annotation:l&&c&&l===c?l:null}}(a,v,r,e.annotatedText);w?(b=u.getBaseAnnotation(w.start,w.length),null,g=w.annotation||(0<v.length?(v=u.segmentedText.segmentsInRange(w.start,w.length).reduce((function(e,t){return e+t.text}),""),e.selectedWitness||console.log("no stateProps.selectedWitness: %o",e.selectedWitness),new vn.c(en.f,function(e){var t=new pr.b(en.f,pr.a);return e=new hr.a(e.id,e.name),new ft.a(en.f,e,t,"",!1)}(e.text),b.start,b.length,v,vn.a.variant,e.selectedWitness,e.user)):b),s(Object(y.Vb)(g))):console.warn("No range for selected segment ids: %o",t)}},selectedSegmentId:function(t){var n,d=c(t),p=d;o(t)?p=en.c+d:i(t)?p=en.b+d:a(t)?p=en.e+d:l(t)&&(p=en.d+d),f[p],""===t?e.activeAnnotation&&(n=y.Vb(null),s(n)):o(t)||i(t)||a(t)||l(t)?r(p,d,0):(n=Number(c(t)),(p=u.segmentedText.segmentAtPosition(n))&&r(p.start,p.start,p.length))},changeScrollToId:function(e){return s(y.Nb(e))},changeSyncIdOnClick:function(e){return s(y.Qb(e))},changeSelectedImage:function(e){s(y.Gc(e))},changeSelectedWindow:function(e){s(y.Pb(e))},changeSelectedRange:function(e){s(y.Ob(e))},changeShowTableContent:function(e){s(y.Tc(e))},closeAnnotation:function(){var e=y.Vb(null);s(e)}})}))(ui);function Ja(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}function Xa(e,t,n){var r,o=3<arguments.length&&void 0!==arguments[3]&&arguments[3],i=b.K(e),a=b.h(e);!a||a.isType(vn.a.pageBreak)||a.isType(vn.a.lineBreak)||(r=null,i&&(r=Va.d(e,i.id)),e=b.ib(e),a&&i&&r&&e&&(a=new vn.c(null,a.witness,a.end+1,0,null,n,i,e),el(r,a)||(n=b.d(i),(e=[]).push(y.dc(a)),e.push(y.Hb(a.uniqueId,n)),e.push(o?y.Vb(a):y.Vb(null)),t(Object(Q.batchActions)(e)))))}function Za(e,t,n){var r,o=e.getAnnotationsOfType(t);for(r in o)if(o.hasOwnProperty(r)&&n===o[r].start)return!0;return!1}var el=function(e,t){return Za(e,vn.a.pageBreak,t.start)||Za(e,vn.a.lineBreak,t.start)},tl=(Ja(An={Escape:function(e,t){b.h(e)&&t(y.Vb(null))}},"shift-Enter",(function(e,t){Xa(e,t,vn.a.pageBreak)})),Ja(An,"Enter",(function(e,t){Xa(e,t,vn.a.lineBreak)})),Ja(An,"ArrowLeft",(function(e,t){var n,r,o,i=b.K(e),a=b.h(e),l=null;i&&(l=Va.d(e,i.id)),i&&a&&l&&0!==a.start&&(n=a.start-1,(n=l.segmentAtOriginalPosition(n))&&n instanceof gn.a?o=n.start:n&&"number"==typeof n&&(l.annotationsForPosition(n),0<(r=l.segmentsForAnnotation(a)).length&&(o="number"==typeof r[0]?r[0]:r[0].start)),void 0===o?console.warn("Can't get previous segment before %o",a):(r=null,!(r=0<(a=l.annotationsForPosition(o)).length&&(r=a[0]).isDeletion&&n&&n instanceof gn.a?null:r)&&n&&n instanceof gn.a&&(a=l.getBaseAnnotation(o,n.length),l=b.ob(e,i.text.id),o=b.ib(e),a&&l&&o&&n&&(r=new vn.c(en.f,l,a.start,a.length,n.text,vn.a.variant,i,o))),r&&t(y.Vb(r))))})),Ja(An,"ArrowRight",(function(e,t){var n,r,o,i=b.K(e),a=b.h(e),l=null;i&&(l=Va.d(e,i.id)),i&&a&&l&&(a.isDeletion?(r=a.end+1,(r=l.segmentAtOriginalPosition(r))&&r instanceof gn.a&&(o=r.start)):o=("number"==typeof(r=l.segmentsForAnnotation(a))[0]?r[0]:r[0].start)+a.content.length,void 0===o?console.warn("Can't get next segment after %o",a):(r=l.annotationsForPosition(o),n=null,0<(r=a.isDeletion?r.filter((function(e){a.uniqueId,e.uniqueId})):r).length?n=r[0]:(r=l.segmentedText.segmentAtPosition(o))&&(l=l.getBaseAnnotation(o,r.length),o=b.ob(e,i.text.id),e=b.ib(e),l&&o&&e&&r&&(n=new vn.c(en.f,o,l.start,l.length,r.text,vn.a.variant,i,e))),n&&t(y.Vb(n))))})),Ja(An,"shift-ArrowRight",(function(e,t){var n,r,o,i=b.K(e),a=b.h(e),l=null;i&&(l=Va.d(e,i.id)),i&&a&&l&&(a.isDeletion||(o=("number"==typeof(o=l.segmentsForAnnotation(a))[0]?o[0]:o[0].start)+a.content.length,n=null,0<(r=l.annotationsForPosition(o)).length?n=r[0]:(r=l.segmentedText.segmentAtPosition(o))&&(l=l.getBaseAnnotation(o,r.length),o=b.ob(e,i.text.id),e=b.ib(e),l&&o&&e&&r&&(n=new vn.c(en.f,o,l.start,l.length,r.text,vn.a.variant,i,e))),n&&(o=new vn.c(en.f,n.witness,a.start,a.length+n.length,a.content+n.content,a.type,a.creatorWitness,a.creatorUser),t(y.Vb(o)))))})),Ja(An,"shift-ArrowLeft",(function(e,t){var n=b.K(e),r=b.h(e),o=null;n&&(o=Va.d(e,n.id)),n&&r&&!r.isSaved&&o&&(r.isDeletion||1!==(e=o.segmentsForAnnotation(r)).length&&(e.pop(),n=e.reduce((function(e,t){return t instanceof gn.a&&(e+=t.text),e}),""),o=new vn.c(en.f,r.witness,r.start,n.length,n,r.type,r.creatorWitness,r.creatorUser),t(y.Vb(o))))})),An);function nl(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function rl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nl(Object(n),!0).forEach((function(t){var r,o;r=e,o=n[t=t],t in r?Object.defineProperty(r,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[t]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ol=Object(a.connect)((function(e){var t=b.wb(e),n=b.u(e);return{state:e,selectedText:b.I(e),isSecondWindowOpen:t,Media:n}}),null,(function(e,t,n){return rl(rl({dispatch:t.dispatch},n),e)}))((function(e){var t=Object(o.useRef)(null);return i.a.createElement(z.a,{ref:t,sx:{display:"flex",flexDirection:"column",width:"100%",height:e.bodyHeight,position:"relative"},onKeyDown:function(t){var n=e.state,r=e.dispatch;t=function(e){var t=e.key;return e.shiftKey?"shift-"+t:t}(t),tl.hasOwnProperty(t)&&tl[t](n,r)}},i.a.createElement(ot.a,{size:e.isSecondWindowOpen&&e.selectedText?"50%":"100%",pane1Style:{display:"flex",justifyContent:"center"},resizerStyle:{display:e.isSecondWindowOpen?"block":"none"},onDragFinished:function(e){0<e&&window.dispatchEvent(new Event("resize"))}},i.a.createElement(rt,null,i.a.createElement(Ya,null)),e.isSecondWindowOpen&&e.selectedText?i.a.createElement(rt,null,i.a.createElement(fr,null)):i.a.createElement("div",null)),e.Media.isPanelVisible&&i.a.createElement(rt,null,i.a.createElement(Xe,null)))})),il=n(1119),al=n(1120),ll=n(1131),cl=n(1118),sl=n(1117),ul=n(1108),fl=n(1109),dl=n(1110),pl=n(1111);function hl(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ml=Object(a.connect)((function(e){var t,n,r=b.I(e),o=b.J(e);return r&&(b.db(e,r.id),t=(t=b.M(e,r.id))?b.kb(e,t):b.ob(e,r.id)),o&&(b.eb(e,o.id),n=(n=b.N(e,o.id))?b.lb(e,n):b.pb(e,o.id)),-1===!e.user.userId&&(user=e.user),{selectedText:r,selectedWitness:t,selectedText2:o,selectedWitness2:n,title:b.hb(e,"header.title"),page:e.page,isAnnotating:b.tb(e),isSecondWindowOpen:b.wb(e),theme:b.gb(e),isPanelLinked:b.vb(e),textListIsVisible:b.ab(e)}}),(function(e){return{onChangedTextWidth:function(t){e(y.cc(t))},onChangedTextListVisible:function(t){e(y.bc(t))},changeIsAnnotating:function(t){e(y.Lb(t)),!1===t&&(t=y.Vb(null),e(t),e(y.Vb(null)))},onChangeWindowOpen:function(t){e(y.Vc(t))},onChangePanelLink:function(t){e(y.Mb(t))}}}))((function(e){function t(e,t){"clickaway"!==t&&l(!1)}var n=[ke.a.listContainer],r=(u.f,u.e,function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||function(e,t){var n;if(e)return"string"==typeof e?hl(e,t):"Map"===(n="Object"===(n=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?hl(e,t):void 0}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(Object(o.useState)(!1),2)),a=r[0],l=r[1];return u.b,e.textListWidth,e.textListIsVisible?n.push(ke.a.showListContainer):n.push(ke.a.hideListContainer),r="calc(100vh - "+$.a.headerHeight+")",n=[{icon:i.a.createElement(ul.a,{htmlColor:e.isAnnotating?"#ff7961":void 0}),name:"Annotate",condition:e.isAnnotating,function:function(){return e.changeIsAnnotating(!e.isAnnotating)}},{icon:i.a.createElement(fl.a,{htmlColor:e.isPanelLinked?"#ff7961":void 0}),name:"Link Panel",condition:e.isPanelLinked,function:function(){return e.onChangePanelLink(!e.isPanelLinked)}},{icon:i.a.createElement(dl.a,null),name:"Share",function:function(){var t=e.selectedText,n=e.selectedText2,r=e.selectedWitness,o=e.selectedWitness2,i=n&&o?window.location.origin+"/texts/".concat(t.id,"/witnesses/").concat(null==r?void 0:r.id,"/texts2/").concat(n.id,"/witnesses2/").concat(o.id):window.location.origin+"/texts/".concat(t.id,"/witnesses/").concat(null==r?void 0:r.id);navigator.clipboard.writeText(i).then().catch((function(e){return console.log(e.message)})).finally((function(){return l(!0)}))}},{icon:i.a.createElement(pl.a,{htmlColor:e.isSecondWindowOpen?"#ff7961":void 0}),name:"Split Window",condition:e.isSecondWindowOpen,function:function(){return e.onChangeWindowOpen(!e.isSecondWindowOpen,140)}}],Object(o.useEffect)((function(){var e=setTimeout((function(){window.dispatchEvent(new Event("resize"))}),1e3);return function(){return clearTimeout(e)}}),[e.textListIsVisible]),i.a.createElement("div",{className:v()(ke.a.interface,Ce.a.flex)},i.a.createElement(Ie,null),i.a.createElement(ol,{bodyHeight:r}),i.a.createElement(il.a,{ariaLabel:"SpeedDial basic",sx:{position:"absolute",bottom:60,right:16},icon:i.a.createElement(al.a,null)},n.map((function(e){return i.a.createElement(ll.a,{key:e.name,icon:e.icon,tooltipTitle:e.name,onClick:e.function,open:e.condition})}))),i.a.createElement(cl.a,{open:a,autoHideDuration:6e3,onClose:t},i.a.createElement(sl.a,{onClose:t,severity:"success",sx:{width:"100%"}},"The Url Copied to Clipboard !")))})),yl=n(412),bl=n(1116),gl=n(842);function vl(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function wl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vl(Object(n),!0).forEach((function(t){var r,o;r=e,o=n[t=t],t in r?Object.defineProperty(r,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[t]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ol(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n(1070);var xl=[{annotationId:"234241weq",annotationContent:"sad",voteCount:20},{annotationId:"12312weq",annotationContent:"happy",voteCount:40}],Sl=Object(a.connect)((function(e){return console.log(e),{user:"hi"}}))((function(e){var t=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||function(e,t){var n;if(e)return"string"==typeof e?Ol(e,t):"Map"===(n="Object"===(n=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ol(e,t):void 0}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(i.a.useState(xl),2),n=t[0],r=t[1];return i.a.createElement(z.a,{sx:{display:"flex",flexDirection:"column",gap:2,marginTop:2}},n.map((function(e,t){return i.a.createElement(z.a,{sx:{display:"flex",alignItems:"center"},key:e.annotationId},i.a.createElement(bl.a,{badgeContent:e.voteCount,color:"primary"},i.a.createElement(gl.a,{label:e.annotationContent,onClick:function(){var t,o;t=e.annotationId,o=n.map((function(e){return e.annotationId===t?wl(wl({},e),{},{voteCount:e.voteCount+1}):e})),r(o)}})))})))})),El=function(){return i.a.createElement(yl.a,null)},Tl=function(){return i.a.createElement(ml,null)},jl=function(){return i.a.createElement(Sl,null)},Il=function(){return i.a.createElement("h3",null,"404")},Al=["page","direction"];function Pl(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],0<=t.indexOf(n)||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(e),i=0;i<o.length;i++)n=o[i],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}t.default=Object(a.connect)((function(e){var t=e.page;return e.direction,{page:t,isLoading:!Pl(e,Al).data.loadedInitialData}}))((function(e){var t=e.page;return e.isLoading,i.a.createElement(r[t],null)}))},866:function(e,t,n){e.exports={"green-tint":"#88af8e","blue-tint":"#024279","active-button":"#00746b",mainTint:"#024279",activeButton:"#00746b",inlineWidth:"280px",annotationControls:"AnnotationControls---annotationControls",annotationContent:"AnnotationControls---annotationContent",subTitle:"AnnotationControls---subTitle",title:"AnnotationControls---title",sectionHeading:"AnnotationControls---sectionHeading",text:"AnnotationControls---text",padding:"AnnotationControls---padding",arrowTop:"AnnotationControls---arrowTop",arrowLeft:"AnnotationControls---arrowLeft",arrowRight:"AnnotationControls---arrowRight",inline:"AnnotationControls---inline",arrow:"AnnotationControls---arrow",arrowDs:"AnnotationControls---arrowDs",nothingSelected:"AnnotationControls---nothingSelected",anonymousMessage:"AnnotationControls---anonymousMessage",noNotes:"AnnotationControls---noNotes",breakButtons:"AnnotationControls---breakButtons"}},869:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(0);function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||function(e,t){var n;if(e)return"string"==typeof e?i(e,t):"Map"===(n="Object"===(n=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function a(e,t){var n=(i=o(Object(r.useState)((function(){return n=e,r=t,(n=JSON.parse(localStorage.getItem(n)))||r;var n,r})),2))[0],i=i[1];return Object(r.useEffect)((function(){localStorage.setItem(e,JSON.stringify(n))}),[n]),[n,i]}},872:function(e,t,n){e.exports={"green-tint":"#88af8e","blue-tint":"#024279","active-button":"#00746b",mainTint:"#024279",activeButton:"#00746b",save:"Button---save",cancel:"Button---cancel",buttonContainer:"Button---buttonContainer"}},877:function(e,t,n){e.exports={"green-tint":"#88af8e","blue-tint":"#024279","active-button":"#00746b","header-height":"40px",mainTint:"#024279",activeButton:"#00746b",headerHeight:"40px",header:"Header---header",logo:"Header---logo",navigationButton:"Header---navigationButton",loginButton:"Header---loginButton",ButtonText:"Header---ButtonText",buttonLink:"Header---buttonLink",controls:"Header---controls"}},879:function(e,t,n){e.exports={"green-tint":"#88af8e","blue-tint":"#024279","active-button":"#00746b",mainTint:"#024279",activeButton:"#00746b"}},887:function(e,t,n){e.exports={"green-tint":"#88af8e","blue-tint":"#024279","active-button":"#00746b","ThirdWindow-Height":"300px","header-Height":"35px",mainTint:"#024279",activeButton:"#00746b",ThirdWindowHeight:"250px",ThirdWindow:"Image---ThirdWindow",ThirdWindowPortrait:"Image---ThirdWindowPortrait",header:"Image---header",listOfImages:"Image---listOfImages",ImageStyle:"Image---ImageStyle",imageSection:"Image---imageSection"}},898:function(e,t,n){e.exports={"green-tint":"#88af8e","blue-tint":"#024279","active-button":"#00746b",mainTint:"#024279",activeButton:"#00746b",textList:"TextList---textList",textListRow:"TextList---textListRow",selectedRow:"TextList---selectedRow",textNameRow:"TextList---textNameRow",textName:"TextList---textName",highlight:"TextList---highlight",searchResults:"TextList---searchResults",searchResult:"TextList---searchResult",selectedSearchResult:"TextList---selectedSearchResult",searchTotal:"TextList---searchTotal",textListLoader:"TextList---textListLoader",searching:"TextList---searching",loadMore:"TextList---loadMore"}},917:function(e,t,n){e.exports={"green-tint":"#88af8e","blue-tint":"#024279","active-button":"#00746b",mainTint:"#024279",activeButton:"#00746b",button_group_menu:"TextDetailHeading---button_group_menu"}},918:function(e,t,n){e.exports={"green-tint":"#88af8e","blue-tint":"#024279","active-button":"#00746b",mainTint:"#024279",activeButton:"#00746b",selectVersion:"SelectVersion---selectVersion",selectEmpty:"SelectVersion---selectEmpty",selectOptions:"SelectVersion---selectOptions","styled-select":"SelectVersion---styled-select"}},921:function(e,t,n){e.exports={textlist:"TextList---textlist",open:"TextList---open"}},924:function(e,t,n){e.exports={"green-tint":"#88af8e","blue-tint":"#024279","active-button":"#00746b",mainTint:"#024279",activeButton:"#00746b",textDetail:"TextDetail---textDetail",textContainer:"TextDetail---textContainer",tableContent:"TextDetail---tableContent"}},926:function(e,t,n){e.exports={"green-tint":"#88af8e","blue-tint":"#024279","active-button":"#00746b",mainTint:"#024279",activeButton:"#00746b",paddingSide:"20px",maxWidth:"600px",text:"Text---text",syncIdClass:"Text---syncIdClass",textFirstRow:"Text---textFirstRow",textLine:"Text---textLine",textline:"Text---textline",limitWidth:"Text---limitWidth",textContainer:"Text---textContainer",N_annotation:"Text---N_annotation",V_annotation:"Text---V_annotation",Q_annotation:"Text---Q_annotation",P_annotation:"Text---P_annotation",selectedAnnotation:"Text---selectedAnnotation",removedByAnnotation:"Text---removedByAnnotation",insertion:"Text---insertion",highlight:"Text---highlight",activeHighlight:"Text---activeHighlight",lineBreak:"Text---lineBreak",pageBreak:"Text---pageBreak",selectedRangelight:"Text---selectedRangelight",selectedRangeDark:"Text---selectedRangeDark",selectedImage:"Text---selectedImage"}},927:function(e,t,n){e.exports={"green-tint":"#88af8e","blue-tint":"#024279","active-button":"#00746b",mainTint:"#024279",activeButton:"#00746b",inlineWidth:"280px",annotationControls:"SplitText---annotationControls",annotationContent:"SplitText---annotationContent",subTitle:"SplitText---subTitle",title:"SplitText---title",sectionHeading:"SplitText---sectionHeading",text:"SplitText---text",padding:"SplitText---padding",arrowTop:"SplitText---arrowTop",arrowLeft:"SplitText---arrowLeft",arrowRight:"SplitText---arrowRight",inline:"SplitText---inline",arrow:"SplitText---arrow",arrowDs:"SplitText---arrowDs",nothingSelected:"SplitText---nothingSelected",anonymousMessage:"SplitText---anonymousMessage",noNotes:"SplitText---noNotes",breakButtons:"SplitText---breakButtons",splitText:"SplitText---splitText",splitTextRowContent:"SplitText---splitTextRowContent",splitTextRow:"SplitText---splitTextRow",pechaImage:"SplitText---pechaImage",image:"SplitText---image",controlsPlaceholder:"SplitText---controlsPlaceholder",hide:"SplitText---hide",pageNumber:"SplitText---pageNumber","image-loading":"SplitText---image-loading"}},929:function(e,t,n){e.exports={"green-tint":"#88af8e","blue-tint":"#024279","active-button":"#00746b",mainTint:"#024279",activeButton:"#00746b",annotationDetail:"AnnotationDetail---annotationDetail",active:"AnnotationDetail---active",annotationHeader:"AnnotationDetail---annotationHeader",activeIcon:"AnnotationDetail---activeIcon",editing:"AnnotationDetail---editing",contentOptions:"AnnotationDetail---contentOptions",actionButtons:"AnnotationDetail---actionButtons",edit:"AnnotationDetail---edit",editImage:"AnnotationDetail---editImage",save:"AnnotationDetail---save",cancel:"AnnotationDetail---cancel"}},941:function(e,t,n){var r={".":867,"./":867,"./index":867,"./index.js":867};function o(e){return e=i(e),n(e)}function i(e){if(n.o(r,e))return r[e];throw(e=new Error("Cannot find module '"+e+"'")).code="MODULE_NOT_FOUND",e}o.keys=function(){return Object.keys(r)},o.resolve=i,(e.exports=o).id=941},948:function(e,t,n){e.exports={textsSearchContainer:"TextsSearch---textsSearchContainer",textsSearch:"TextsSearch---textsSearch",minify:"TextsSearch---minify"}},963:function(e,t,n){e.exports={container:"LoadMore---container"}},964:function(e,t,n){e.exports={tab:"TextListTab---tab",showTab:"TextListTab---showTab",hideTab:"TextListTab---hideTab"}},965:function(e,t,n){e.exports={"green-tint":"#88af8e","blue-tint":"#024279","active-button":"#00746b",mainTint:"#024279",activeButton:"#00746b",Resources:"Sidebar---Resources",ResourceDetail:"Sidebar---ResourceDetail",optionlist:"Sidebar---optionlist","css-heg063-MuiTabs-flexContainer":"Sidebar---css-heg063-MuiTabs-flexContainer",listContainer:"Sidebar---listContainer",sidebar:"Sidebar---sidebar",menu_title:"Sidebar---menu_title",sidebar_header:"Sidebar---sidebar_header"}},966:function(e,t,n){},968:function(e,t,n){},974:function(e,t,n){e.exports={Dictionary:"ResourceOption---Dictionary"}},979:function(e,t,n){e.exports={container:"EditorContainer---container",interface:"EditorContainer---interface",listContainer:"EditorContainer---listContainer",showListContainer:"EditorContainer---showListContainer",hideListContainer:"EditorContainer---hideListContainer"}}}]);