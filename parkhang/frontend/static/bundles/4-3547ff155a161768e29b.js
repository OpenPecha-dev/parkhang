(window.webpackJsonpparkhang=window.webpackJsonpparkhang||[]).push([[4],{1005:function(e,t,n){e.exports={button_group_menu:"textDetailHeading---button_group_menu"}},1006:function(e,t,n){e.exports={"green-tint":"#88af8e","blue-tint":"#024279","active-button":"#00746b",mainTint:"#024279",activeButton:"#00746b",selectVersion:"SelectVersion---selectVersion",selectEmpty:"SelectVersion---selectEmpty",selectOptions:"SelectVersion---selectOptions","styled-select":"SelectVersion---styled-select"}},1015:function(e,t,n){e.exports={textlist:"TextList---textlist",open:"TextList---open"}},1016:function(e,t,n){e.exports={highlight:"SearchStyle---highlight",searchListItem:"SearchStyle---searchListItem"}},1017:function(e,t,n){e.exports={"green-tint":"#88af8e","blue-tint":"#024279","active-button":"#00746b",mainTint:"#024279",activeButton:"#00746b",textDetail2:"TextDetail---textDetail2",textContainer2:"TextDetail---textContainer2"}},1018:function(e,t,n){e.exports={"green-tint":"#88af8e","blue-tint":"#024279","active-button":"#00746b",mainTint:"#024279",activeButton:"#00746b",paddingSide:"20px",maxWidth:"600px",text:"Text2---text",textFirstRow:"Text2---textFirstRow",textLine:"Text2---textLine",textline:"Text2---textline",limitWidth:"Text2---limitWidth",textContainer:"Text2---textContainer",annotation:"Text2---annotation",selectedAnnotation:"Text2---selectedAnnotation",removedByAnnotation:"Text2---removedByAnnotation",insertion:"Text2---insertion",highlight:"Text2---highlight",activeHighlight:"Text2---activeHighlight",lineBreak:"Text2---lineBreak",pageBreak:"Text2---pageBreak",syncIdClass:"Text2---syncIdClass",selectedRange:"Text2---selectedRange"}},1019:function(e,t,n){e.exports={"green-tint":"#88af8e","blue-tint":"#024279","active-button":"#00746b",mainTint:"#024279",activeButton:"#00746b",inlineWidth:"280px",annotationControls:"SplitText---annotationControls",annotationContent:"SplitText---annotationContent",subTitle:"SplitText---subTitle",title:"SplitText---title",sectionHeading:"SplitText---sectionHeading",text:"SplitText---text",padding:"SplitText---padding",arrowTop:"SplitText---arrowTop",arrowLeft:"SplitText---arrowLeft",arrowRight:"SplitText---arrowRight",inline:"SplitText---inline",arrow:"SplitText---arrow",arrowDs:"SplitText---arrowDs",nothingSelected:"SplitText---nothingSelected",anonymousMessage:"SplitText---anonymousMessage",noNotes:"SplitText---noNotes",breakButtons:"SplitText---breakButtons",splitText2:"SplitText---splitText2",splitTextRowContent:"SplitText---splitTextRowContent",splitTextRow:"SplitText---splitTextRow",pechaImage:"SplitText---pechaImage",controlsPlaceholder:"SplitText---controlsPlaceholder",pageNumber:"SplitText---pageNumber"}},1058:function(e,t,n){"use strict";n.r(t);var r=n(972),i=n.n(r),o=(r=n(980),n.n(r)),a=(r=n(91),n.n(r)),l=n(0),s=n.n(l),c=(r=n(34),n(277)),u=n.n(c),d=(c=n(326),n.n(c)),f=(c=n(1005),n.n(c)),p=(c=n(49),n(1006)),h=n.n(p),g=(n(104),n(949)),m=Object(l.memo)(Object(c.c)((function(e){var t=[],n="",r="",i=[];return e.witnesses&&(t=e.witnesses.map((function(e){return e})),e.activeWitness&&(r=e.witnesses.findIndex((function(t){return t.id===e.activeWitness.id}))),t.sort((function(e,t){return e.isWorking?-1:t.isWorking?1:e.isBase?-1:t.isBase?1:0})),t=t.sort((function(e,t){return e.id-t.id}))),a()(t)&&!e.activeWitness?null:s.a.createElement(g.a,{onChange:function(n){a()(t)||e.onSelectedWitness(t[n.target.value])},className:h.a.selectVersion,value:r,label:"Version2",classes:{root:h.a.selectEmpty,select:h.a.selectOptions}},t.map((function(t,r){var o;return t.id===(null==(o=e.activeWitness)?void 0:o.id)&&i.push(h.a.selected),n=t.source.name,t.isWorking&&(n="en"===e.intl.locale?"User"===e.user.name?"Working":"My Edition":"མཉམ་འབྲེལ་པར་མ།"),s.a.createElement("option",{key:"versionSelect2-".concat(r),value:r,className:h.a.selectOptions},n)})))}))),y=n(970),b=n(968),v=(p=n(54),n.n(p)),x=(c=n(1015),n.n(c)),S=n(231),w=n(950),O=n(956),T=n(959),E=n(942),I=n(961),j=n(952);function P(e){return function(e){if(Array.isArray(e))return R(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||k(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,i=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw i}}return o}}(e,t)||k(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(e,t){if(e){if("string"==typeof e)return R(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?R(e,t):void 0}}function R(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}p=s.a.memo((function(e){var t,n=Object(l.useRef)(e.texts),r=(t=A(Object(l.useState)(n.current),2))[0],i=t[1],o=(t=A(Object(l.useState)(null),2))[0],a=t[1],c=e.onSelectedText,u=e.selectedText,d=(t=A(Object(l.useState)(!1),2))[0],f=t[1],p=(e=Object(l.useMemo)((function(){return(u||r[0]).name}),[u,r]),Object(l.useEffect)((function(){var e;""===o&&i(P(n.current)),null!==o&&""!==o&&(e=n.current.filter((function(e){return e.name.includes(o)})),i(P(e)))}),[o]),Object(l.useRef)(new b.c({fixedHeight:!0,defaultHeight:40}))),h=[x.a.textlist];return s.a.createElement(w.a,{onClickAway:function(){return f(!1)}},s.a.createElement("div",{style:{position:"relative",marginLeft:10}},s.a.createElement(O.a,{onClick:function(){f((function(e){return!e})),!1===d&&h.push(x.a.open)},component:"div",variant:"outlined",sx:{overflow:"hidden",textOverflow:"ellipsis",width:"10rem",height:"100%",color:"text.primary"}},s.a.createElement(T.a,{noWrap:!0},e)),s.a.createElement(E.a,{in:d},s.a.createElement(I.a,{className:v()(h),sx:{position:"absolute",bgcolor:"heading.main",zIndex:1}},s.a.createElement(j.a,{onChange:function(e){e=e.target.value,a(e)},id:"standard-basic",label:"filter",variant:"standard",style:{width:"100%"}}),s.a.createElement(b.a,null,(function(e){var t=e.width;e=e.height;return s.a.createElement(b.d,{width:t,height:e,rowHeight:40,deferredMeasurementCache:p.current,rowCount:r.length,rowRenderer:function(e){var t=e.key,n=e.index,i=e.style,o=(e=e.parent,r[n]);return s.a.createElement(b.b,{key:"optionvalues-".concat(t),cache:p.current,parent:e,columnIndex:0,rowIndex:n},s.a.createElement("div",{style:i,onClick:function(){f(!1),c(o)}},s.a.createElement(I.a,{sx:{overflow:"hidden",textOverflow:"ellipsis",width:"13rem",paddingLeft:2,fontSize:{lg:12,md:11,sm:10,xs:10},color:"text.primary"},component:"div"},s.a.createElement(T.a,{noWrap:!0},Object(S.a)(o.name)))))}})}))))))}));var C=n(3),_=n(8),L=(n(16),n(79),Object(r.connect)((function(e){var t=_.B(e),n=_.z(e,t),r=_.F(e),i=!1,o=e.data.texts;return{texts:o=0<t.length?null===n?(i=!0,[]):o.filter((function(e){return n.hasOwnProperty(e.id)})):o,selectedText:Object(_.J)(e),searchTerm:t,searchResults:n,selectedSearchResult:r,searching:i}}),(function(e){return{onSelectedText:function(t){e(C.Pc(t))}}}))(p)),W=n(974),N=n(330),B=(c=n(983),n.n(c)),D=n(957),z=n(963),F=n(943),H=n(958),M=n(71);function V(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,i=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw i}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return U(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?U(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function U(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Y(e){var t=V(Object(l.useState)(!1),2),n=t[0],r=t[1],i=(t=V(Object(N.a)("WindowTwoFont","Tibetan"),2))[0],o=t[1];return Object(l.useEffect)((function(){document.body.style.setProperty("--tibetan-fonts2",i)}),[]),s.a.createElement(w.a,{onClickAway:function(){return r(!1)}},s.a.createElement(I.a,{position:"relative"},s.a.createElement(D.a,{onClick:function(){r((function(e){return!e}))},size:"small",variant:"text"},s.a.createElement(W.a,{height:20,width:20,fill:"currentColor"})),s.a.createElement(E.a,{in:n},s.a.createElement(z.a,{dense:!0,sx:{position:"absolute",right:0,zIndex:2,top:40,bgcolor:"heading.main"}},s.a.createElement(y.a,{max:20,min:7,initialvalue:e.textFontSize,changeSize:e.onChangedFontSize}),s.a.createElement(F.a,null),s.a.createElement(K,{selectFont:function(e){o(e),document.body.style.setProperty("--tibetan-fonts2","".concat(e));var t=document.getElementById("updateList2"),n=1,i=setInterval((function(){t.click(),n++,console.log("ran"),4<n&&clearInterval(i)}),800);r(!1)},selectedfont:i}),s.a.createElement(H.a,{onClick:function(){return e.onExport()}},"Export Document",e.exportingWitness&&s.a.createElement(B.a,null))))))}var K=function(e){var t=e.selectFont,n=(e=e.selectedfont,M.c||[]);return s.a.createElement(I.a,{textAlign:"center"},s.a.createElement("span",null,"Font:")," ",s.a.createElement("select",{onChange:function(e){return t(e.target.value)},value:e},n.map((function(e,t){return s.a.createElement("option",{key:t+"-fontselect",value:e},e)}))))},q=(p=n(971),n.n(p));function $(e){return e=e.handleWindowSearch,s.a.createElement(D.a,{size:"small",variant:"text",onClick:e},s.a.createElement(q.a,null))}c=n(985);var G=n.n(c),J=(p=n(984),n.n(p));function X(e){return s.a.createElement(s.a.Fragment,{key:"right"},s.a.createElement(D.a,{onClick:function(){e.changeShowTableContent(!e.showTableContent)}},e.showTableContent?s.a.createElement(J.a,null):s.a.createElement(G.a,null)))}c=n(987);var Q=n.n(c),Z=n(945),ee=n(1059),te=n(965),ne=(p=n(986),n.n(p));function re(e){e=e.isSecondWindowOpen;var t=Object(l.useCallback)((function(){var e=document.getElementById("updateList2");e&&e.click()}),[e]);return Object(l.useEffect)((function(){var e=setTimeout((function(){t()}),500);return function(){return clearTimeout(e)}}),[e]),s.a.createElement(D.a,{variant:"text",size:"small",onClick:t},s.a.createElement(ne.a,null))}c=n(327);var ie=n.n(c),oe=(p=n(331),n.n(p));function ae(e){return(ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function le(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function se(e,t){return(se=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ce(e){return(ce=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ue=function(e){var t=r;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&se(t,e);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ce(e);n=t?(n=ce(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),r=this;if(n&&("object"===ae(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==r)return r;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(r);function r(e){if(this instanceof r)return n.call(this,e);throw new TypeError("Cannot call a class as a function")}return t=r,(e=[{key:"render",value:function(){var e=this,t=this.props.string,n=t,r=this.props.stringClass||"";if(this.props.searchTerm){var i=this.props.searchTerm,o=(new ie.a).splitGraphemes(t),a=t.indexOf(i),s=a+i.length,c=0,u="";if(-1<a)for(var d=0;d<o.length;d++){var f=o[d];a<=c&&c<s&&(u+=f),c+=f.length}0<u.length&&(n=oe()(t,u,(function(t,n){return l.createElement("span",{className:e.props.highlightClass,key:"highlight-".concat(n)},t)})))}return l.createElement("span",{className:r},n)}}])&&le(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),r}(l.Component),de=(c=n(1016),n.n(c));function fe(e){function t(e){var t=e.key,o=e.index,l=e.parent,c=(e=e.style,i[o]);return s.a.createElement(b.b,{key:"listkeys2-".concat(t),cache:a.current,parent:l,columnIndex:0,rowIndex:o},s.a.createElement("div",{style:e},0<i.length&&s.a.createElement("div",{className:de.a.searchListItem,onClick:function(){return n(c[0])}},s.a.createElement(ue,{string:c[1],highlightClass:de.a.highlight,searchTerm:r}))))}var n=e.handleListItemClick,r=e.searchValue,i=e.results,o=(e.selectedText,Object(l.useRef)()),a=Object(l.useRef)(new b.c({fixedWidth:!0,defaultHeight:100}));return i?s.a.createElement(s.a.Fragment,null,s.a.createElement(b.a,null,(function(e){var n=e.height;e=e.width;return s.a.createElement(b.d,{ref:o,height:n,rowCount:null==i?void 0:i.length,rowHeight:a.current.rowHeight,deferredMeasurementCache:a.current,rowRenderer:t,width:e,overscanRowCount:1})}))):null}function pe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,i=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw i}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return he(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?he(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function he(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ge(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function me(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ge(Object(n),!0).forEach((function(t){var r,i;r=e,i=n[t=t],t in r?Object.defineProperty(r,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[t]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ge(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ye=Object(r.connect)((function(e){var t,n=_.jb(e),r=_.J(e),i=[],o=(r&&(i=_.fb(e,r.id),t=(t=_.M(e,r.id))?_.mb(e,t):_.qb(e,r.id)),_.ab(e)),a=Object(_.P)(e),l=_.C(e);return{witnesses:i,selectedText:r,selectedWitness:t,textListIsVisible:Object(_.bb)(e),accountOverlayVisible:Object(_.e)(e),textFontSize:o,user:n,searchValue:l,showTableContent:a,searchResults:_.A(e,l)}}),null,(function(e,t,n){var r=t.dispatch,i=e.selectedText;return me(me(me({},n),e),{},{navigationButtonClicked:function(){t.dispatch(C.ec(!e.textListIsVisible))},onSelectedWitness:function(e){r(C.Rc(null==i?void 0:i.id,null==e?void 0:e.id))},onChangedFontSize:function(e){r(C.dc(e))},changeShowTableContent:function(e){r(C.Wc(e))},searchChanged:function(e){r(C.ac(e))},changeSelectSyncId:function(e){r(C.Ub(e))}})}))((function(e){var t=(p=pe(Object(l.useState)(""),2))[0],n=p[1],r=(p=pe(Object(l.useState)(!1),2))[0],i=p[1],o=(p=pe(Object(l.useState)(!1),2))[0],a=p[1],c=Object(l.useRef)(),p=Object(l.useRef)(),h=s.a.useRef(d()((function(t){e.searchChanged(t)}),1e3)).current,g=Object(l.useCallback)((function(e){e.preventDefault(),h(t),a(!0)}),[t]),y=Object(l.useCallback)((function(){i(!r)}),[r]),b=(Object(l.useEffect)((function(){!0===r&&c.current.focus(),!1===r&&h(null)}),[r]),u()(e.searchResults)&&e.searchResults.hasOwnProperty(e.selectedText.id)),v=b?e.searchResults[e.selectedText.id].results:[];return s.a.createElement(Z.a,{direction:"column",ref:p,spacing:1,sx:{paddingInline:{md:2,xs:0},paddingBlock:{md:1,xs:0},borderTop:{md:0,xs:"1px solid gray"},bgcolor:"heading.main",color:"text.primary"}}," ",s.a.createElement(Z.a,{direction:"row",spacing:1,justifyContent:"space-between"},s.a.createElement(I.a,{sx:{display:"flex",gap:{md:2,sx:0},flexDirection:{md:"row",xs:"column"}}},s.a.createElement(L,null),s.a.createElement(m,{witnesses:e.witnesses,activeWitness:e.selectedWitness,onSelectedWitness:e.onSelectedWitness,user:e.user})),s.a.createElement(ee.a,{size:"small","aria-label":"small button group",sx:{position:"relative",display:"flex",alignItems:"center",justifyContent:"center",height:"fit-content",width:"fit-content",border:function(e){return"1px solid ".concat(e.palette.divider)},borderRadius:1,bgcolor:"background.paper",color:"text.secondary","& svg":{m:1.5},"& hr":{mx:.5}},className:f.a.button_group_menu},s.a.createElement(re,{isSecondWindowOpen:e.isSecondWindowOpen}),s.a.createElement($,{handleWindowSearch:y}),s.a.createElement(Y,{textFontSize:e.textFontSize,onChangedFontSize:e.onChangedFontSize,onExport:e.onExport,isPanelLinked:e.isPanelLinked}),s.a.createElement(X,{changeShowTableContent:e.changeShowTableContent,showTableContent:e.showTableContent}))),s.a.createElement(te.a,{in:r},s.a.createElement("form",{onSubmit:g},s.a.createElement(Z.a,{direction:"row",spacing:2,position:"relative"},s.a.createElement(j.a,{hiddenLabel:!0,id:"filled-hidden-label-small",inputProps:{style:{height:25,padding:"0 14px"}},style:{height:25,flex:1},fullWidth:!0,inputRef:c,value:t,onChange:function(e){return n(e.target.value)}}),s.a.createElement(O.a,{variant:"outlined",size:"small",onClick:g,style:{height:25}},"Search"),e.searchResults&&o&&s.a.createElement(I.a,{sx:((p="boxShadow")in(g={position:"absolute",top:35,right:0,zIndex:1,bgcolor:"heading.main",width:350,height:350,boxShadow:y=3,overflowX:"hidden"})?Object.defineProperty(g,p,{value:y,enumerable:!0,configurable:!0,writable:!0}):g[p]=y,g)},0===v.length&&s.a.createElement("p",null,"no such word present"),b&&0<v.length&&s.a.createElement(fe,{handleListItemClick:function(t){e.changeSelectSyncId(t)},searchValue:e.searchValue,results:v,selectedText:e.selectedText}),s.a.createElement(D.a,{"aria-label":"closeButton",onClick:function(){a(!1),h(null),n("")},size:"small",sx:{right:15,top:0,position:"absolute"}},s.a.createElement(Q.a,{fontSize:"inherit"})))))))})),be=n(966),ve=(p=n(275),n.n(p)),xe=n(333),Se=(c=n(1017),n.n(c)),we=n(947),Oe=(p=n(4),n(881)),Te=(c=n(62),n(1060));function Ee(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ie=Object(p.a)("div")((function(e){return Ee({position:"relative",borderRadius:(e=e.theme).shape.borderRadius,backgroundColor:Object(Oe.a)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object(Oe.a)(e.palette.common.white,.25)},marginLeft:0,width:"100%"},e.breakpoints.up("sm"),{marginLeft:e.spacing(1),width:"auto"})})),je=Object(p.a)("div")((function(e){return{padding:e.theme.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"}})),Pe=Object(p.a)(c.c)((function(e){return{color:"inherit","& .MuiInputBase-input":Ee({padding:(e=e.theme).spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(e.spacing(4),")"),transition:e.transitions.create("width"),width:"100%"},e.breakpoints.up("sm"),{width:"0",cursor:"pointer","&:focus":{width:"20ch"}})}}));function Ae(){var e=[{Id:1,Title:"chapter 1",segment_id:0},{Id:2,Title:"chapter 2",segment_id:400}];return e.length,s.a.createElement(I.a,{sx:{bgcolor:"heading.main",color:"text.primary",width:"100%",height:"100%",paddingInline:2}},s.a.createElement(Te.a,{sx:{justifyContent:"space-between",paddingLeft:"0 !important",margin:0}},s.a.createElement(T.a,{textTransform:"uppercase",component:"h6"},"Table Of Content"),s.a.createElement(Ie,null,s.a.createElement(je,null,s.a.createElement(q.a,null)),s.a.createElement(Pe,{placeholder:"Search…",inputProps:{"aria-label":"search"}}))),s.a.createElement(I.a,null,e.map((function(e,t){return s.a.createElement(I.a,{key:"TableContent-"+t,sx:{cursor:"pointer",width:"fit-content","&:hover":{fontWeight:"bold"}}},e.Title)}))))}p=n(217);var ke=n.n(p),Re=(c=n(181),n.n(c)),Ce=(p=n(988),n.n(p)),_e=(n(70),n(329)),Le=n(276),We=(c=(n(465),n(1018)),n.n(c)),Ne=n(51),Be=n(68),De=(n(189),n(27));function ze(e){return(ze="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Fe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,i=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw i}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return He(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?He(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function He(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Me(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function Ve(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Me(Object(n),!0).forEach((function(t){var r,i;r=e,i=n[t=t],t in r?Object.defineProperty(r,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[t]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Me(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ue(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ye(e,t){return(Ye=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ke(e){return(Ke=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var qe=function(e){var t=r;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ye(t,e);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ke(e);n=t?(n=Ke(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),r=this;if(n&&("object"===ze(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==r)return r;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(r);function r(e){var t;if(this instanceof r)return(t=n.call(this,e)).state={segmentedText:e.segmentedText},t.textAlignmentById=t.props.textAlignmentById,t._renderedSegments=null,t._renderedHtml=null,t;throw new TypeError("Cannot call a class as a function")}return t=r,(e=[{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.setState((function(t,n){return Ve(Ve({},t),{},{segmentedText:e.segmentedText})}))}},{key:"selectedElement",value:function(e){var t=[],n=[],r=document.getSelection();if(null!=e&&e.id.includes("s2_")&&this.props.isPanelLinked&&this.props.condition){var i=parseInt(e.id.replace("s2_","")),o=(this.props.changeSyncIdOnClick(i),this.props.changeScrollToId({id:"ua",from:"ua"}),parseInt(e.id.replace("s2_",""))),a=this.textAlignmentById.find((function(e){return o>=e.TStart&&o<e.TEnd}));if(a){for(var l=a.start;l<a.end;l++)t.push(l);for(var s=a.TStart;s<a.TEnd;s++)n.push(s);this.props.changeSelectedRange({source:t,target:n})}}r&&"Range"===r.type||(this.props.selectedSegmentId(e.id),e.id||this.props.changeSelectedRange({source:[],target:[]}))}},{key:"generateHtml",value:function(e,t){var n=t.segmentedText.segments,r='<p class="'+We.a.textLine+'">';if(0===n.length)return{__html:r};for(var i=n[n.length-1].end+1,o=We.a.highlight,a=We.a.activeHighlight,l=null,s=0;s<n.length;s++){var c,u=n[s],d="",f=[];if(u.start===i)break;var p=null,h=(0!==u.length&&(p="s2_"+u.start),null!=(c=e.selectedTargetRange)&&c.includes(u.start)&&e.condition&&f.push(We.a.selectedRange),0<f.length&&(d='class="'+v.a.apply(void 0,f)+'"'),u.text);if(e.searchStringPositions){var g=u.start,m=g,y=(h="",o);e.selectedSearchResult&&e.selectedSearchResult.start<=m&&e.selectedSearchResult.start+e.selectedSearchResult.length>m&&(y=a);for(var b=0;b<u.text.length;b++){var x,S,w,O=u.text.charAt(b);m=g+b;l?((x=Fe(l,2))[0],0===b&&(h+='<span class="'+y+'">'),m===x[1]?(h+=O+"</span>",l=null):b===u.text.length-1?h+=O+"</span>":h+=O):m in e.searchStringPositions?(S=(x=Fe(e.searchStringPositions[m],2))[0],w=x[1],h+='<span class="'+y+'">'+O,b!==u.text.length-1&&m!==w||(h+="</span>"),m<w&&(l=[S,w])):h+=O}}r+="<span id="+p+" key="+p+" "+d+">"+h+"</span>"}return this._renderedSegments=n,{__html:r+="</p>"}}},{key:"shouldComponentUpdate",value:function(e,t){return t=this.generateHtml(e,t),this.props.fontSize!==e.fontSize||(!this._renderedHtml||t.__html!==this._renderedHtml.__html)&&this._renderedHtml!==t&&(this._renderedHtml=t,!0)}},{key:"componentDidUpdate",value:function(){this.textAlignmentById=this.props.textAlignmentById}},{key:"render",value:function(){var e=this,t=[We.a.text],n=(0===this.props.row&&t.push(We.a.textFirstRow),this._renderedHtml||this.generateHtml(this.props,this.state));return this._renderedHtml||(this._renderedHtml=n),s.a.createElement("div",{className:We.a.textContainer},s.a.createElement("div",{className:v.a.apply(void 0,t),dangerouslySetInnerHTML:n,onClick:function(t){return e.selectedElement(t.target)},style:{fontSize:this.props.fontSize,fontFamily:"var(--tibetan-fonts2)"}}))}}])&&Ue(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),r}(s.a.Component),$e=(p=n(1019),n.n(p));function Ge(e){return(Ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Je(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function Xe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Je(Object(n),!0).forEach((function(t){Qe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Je(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Qe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ze(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,i=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw i}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return et(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?et(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function et(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function tt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function nt(e,t){return(nt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function rt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function it(e){return(it=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ot={},at=function(e){var t=r;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&nt(t,e);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=it(e);n=t?(n=it(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),r=this;if(n&&("object"===Ge(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return rt(r)}}(r);function r(e){var t;if(this instanceof r)return(t=n.call(this,e)).textAlignmentById=[],t.changeScrollToId=e.changeScrollToId,t.list=null,t.splitText=null,t.cache=new Le.b({fixedWidth:!0}),t.rowRenderer=t.rowRenderer.bind(rt(t)),t.isPanelLinked=t.props.isPanelLinked,t.activeSelection=null,t.selectedNodes=null,t._mouseDown=!1,t._activeWitness=null,t._didSetInitialScrollPosition=!1,t._modifyingSelection=!1,t.imageHeight=null,t.imageWidth=null,t.calculatedImageHeight=null,t.selectedWindow=t.props.selectedWindow,t.scrollEvent=t.scrollEvent.bind(rt(t)),t.scrollTop=0,t;throw new TypeError("Cannot call a class as a function")}return t=r,(e=[{key:"scrollEvent",value:function(e){if(1===this.selectedWindow)return null;var t;2===this.selectedWindow&&this.isPanelLinked&&(t=[],this.textAlignmentById.map((function(e){var n=document.getElementById("s2_"+e.TStart);n&&90<n.getBoundingClientRect().top&&t.push({id:e.id,start:e.start,TStart:e.TStart,end:e.end,TEnd:e.TEnd})})),a()(t)||2===this.selectedWindow&&this.debouncedScroll(t))}},{key:"selectedListRow",value:function(e){var t=null;return e.activeAnnotation?e.splitText.getTextIndexOfPosition(e.activeAnnotation.start):t}},{key:"handleSelection",value:function(e){this._modifyingSelection?(e.stopPropagation(),this._modifyingSelection=!1):(this.activeSelection=document.getSelection(),this._mouseDown||this.mouseUp())}},{key:"mouseDown",value:function(){this._mouseDown=!0}},{key:"mouseUp",value:function(){this._mouseDown=!1,this.activeSelection&&(this.activeSelection=null)}},{key:"getNodeSegmentSpan",value:function(e){for(var t=e,n=null,r=/^(i|s|ds)_/;!n&&t.parentNode;)t instanceof Element&&r.test(t.id)&&(n=t),t=t.parentNode;return n}},{key:"updateList",value:function(){var e=!(0<arguments.length&&void 0!==arguments[0])||arguments[0],t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;if(this.props.showImages&&!this.calculatedImageHeight&&this.imageHeight&&this.imageWidth&&(this.calculatedImageHeight=this.calculateImageHeight()),this.list){var n=this.list;if(e)if(null!==t)if(Array.isArray(t)){if(Array.isArray(t))for(var r=0;r<t.length;r++){var i=t[r];this.cache.clear(i)}}else this.cache.clear(t);else this.cache.clearAll(),n.measureAllRows(),n.recomputeRowHeights(0);n.forceUpdateGrid()}}},{key:"processProps",value:function(e){var t=this,n=!1;if((i=((!this.props.selectedWitness||e.selectedWitness&&e.selectedWitness.id!==this.props.selectedWitness.id)&&(this._didSetInitialScrollPosition=!(n=!0)),!e.selectedSearchResult||this.props.selectedSearchResult&&e.selectedSearchResult.start===this.props.selectedSearchResult.start&&e.selectedSearchResult.textId===this.props.selectedSearchResult.textId||(console.log("resetting scroll position from search result"),this._didSetInitialScrollPosition=!1),this.getControlsMeasurements(e)))&&(this.selectedTextIndex=i.selectedTextIndex,this.firstSelectedSegment=i.firstSelectedSegment,this.splitTextRect=i.splitTextRect,this.selectedElementId=i.selectedElementId,this.selectedElementIds=i.selectedElementIds),e.textListVisible!==this.textListVisible||e.editMenuVisible!==this.editMenuVisible)setTimeout((function(){t.textListVisible=e.textListVisible,t.editMenuVisible=e.editMenuVisible,t.updateList(!0)}),500);else if(n)this.updateList(!0);else if(this.pageBreaksChanged(this.props,e)){var r=null,i=this.selectedListRow(this.props);n=this.selectedListRow(e);if(i&&n){r=[];for(var o=n<i?n:i,a=this.props.splitText.texts.length;o<a;o++)r.push(o)}this.updateList(!0,r)}else if(this.lineBreaksChanges(this.props,e)){n=(n=this.selectedListRow(e))||this.selectedListRow(this.props),i=this.props.splitText.texts;var l=[];if(null!==n){for(var s=n,c=i.length;s<c;s++)l.push(s);this.updateList(!0,l)}}else this.props.fontSize!==e.fontSize?this.updateList(!0):this.props.activeAnnotation&&e.activeAnnotation&&this.annotationsInSameLocation(this.props.activeAnnotation,e.activeAnnotation)?this.updateList(!0,this.selectedListRow(e)):this.updateList(this.shouldResetListCache(this.props,e))}},{key:"pageBreaksChanged",value:function(e,t){return e=e.splitText.getTextsFinalPositions(),t=t.splitText.getTextsFinalPositions(),e.length!==t.length||JSON.stringify(e)!==JSON.stringify(t)}},{key:"lineBreaksChanges",value:function(e,t){var n=e.activeAnnotation,r=t.activeAnnotation,i=!1;return n&&n.isType(ANNOTATION_TYPES.lineBreak)&&t.activeAnnotations&&!t.activeAnnotations.hasOwnProperty(n.uniqueId)&&(i=!0),!(!(r&&r.isType(ANNOTATION_TYPES.lineBreak)&&e.activeAnnotations)||e.activeAnnotations.hasOwnProperty(r.uniqueId))||i}},{key:"shouldResetListCache",value:function(e,t){var n=!1;return!(e.showImages===t.showImages&&!this.pageBreaksChanged(e,t))||n}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.processProps(e)}},{key:"componentDidMount",value:function(){var e=this;this.resizeHandler=Ce()((function(){e.calculatedImageHeight=null,e.updateList()}),500).bind(this),window.addEventListener("resize",this.resizeHandler),this.debouncedScroll=d()((function(t){e.changeScrollToId({id:t[0].TStart,from:2})}),1e3),this.selectionHandler=d()((function(t){e.handleSelection(t)}),200).bind(this),document.addEventListener("selectionchange",this.selectionHandler),document.addEventListener("mousedown",this.mouseDown.bind(this),!0),document.addEventListener("mouseup",this.mouseUp.bind(this),!0),this.processProps(this.props),this.componentDidUpdate(),this.timer=setTimeout((function(){e.resizeHandler()}),2e3)}},{key:"componentDidUpdate",value:function(e,t){var n,r,i,o,a,l=this,s=this.props.scrollToId,c=(this.targetId2=this.props.syncIdOnClick,this.isPanelLinked=this.props.isPanelLinked,this.selectedWindow=this.props.selectedWindow,this.props.syncIdOnSearch||null),u=this.list,d=this.props.searchResults,f=this.props.textAlignment;this.condition=(null==f||null==(i=f.target)?void 0:i.witness)===this.props.selectedWitness.id,((null==e?void 0:e.searchResults)!==(null==(i=this.props)?void 0:i.searchResults)||(null==e?void 0:e.syncIdOnSearch)!==(null==(i=this.props)?void 0:i.syncIdOnSearch))&&d&&c&&(n=this.props.splitText.getTextIndexOfPosition(c),setTimeout((function(){u.scrollToRow(n),setTimeout((function(){u.scrollToPosition(u.props.scrollTop-300)}),0)}),100)),1===this.selectedWindow&&1===s.from&&this.isPanelLinked&&this.condition&&null!==s.id&&(r=this.list,this.textAlignmentById=this.props.textAlignmentById||[],this.splitText.style.scrollBehavior="smooth",f&&this.isPanelLinked&&null!==(i=null==(e=this.textAlignmentById.find((function(e){return e.start===s.id})))?void 0:e.TStart)&&(o=this.props.splitText.getTextIndexOfPosition(i),setTimeout((function(){r.scrollToRow(o),setTimeout((function(){r.scrollToPosition(r.props.scrollTop-300)}),0)}),100))),this.targetId2&&null===s.from&&1===this.selectedWindow&&null===s.id&&this.condition&&(e=null==(d=f.alignment.find((function(e){return l.targetId2>=e.source_segment.start&&l.targetId2<e.source_segment.end})))||null==(c=d.target_segment)?void 0:c.start,a=this.props.splitText.getTextIndexOfPosition(e),setTimeout((function(){u.scrollToRow(a),setTimeout((function(){u.scrollToPosition(u.props.scrollTop-300)}),0)}),100))}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousedown",this),document.removeEventListener("mouseup",this),window.removeEventListener("resize",this.resizeHandler),document.removeEventListener("selectionchange",this.selectionHandler),clearTimeout(this.timer)}},{key:"getSelectedTextIndex",value:function(){var e,t=0,n=null;return this.props.activeAnnotation?n=Ze(this.props.splitText.annotatedText.getPositionOfAnnotation(this.props.activeAnnotation),1)[0]:this.props.selectedSearchResult&&((e=this.props.splitText.annotatedText.segmentAtOriginalPosition(this.props.selectedSearchResult.start))instanceof Ne.a?n=e.start:"number"==typeof e&&(n=e)),n?this.props.splitText.getTextIndexOfPosition(n):t}},{key:"getControlsMeasurements",value:function(e){if(!this.splitText)return null;var t=this.splitText,n=null,r=null,i=null,o=null,a=null,l=[],s=0;if(e.activeAnnotation){var c=e.activeAnnotation;if(null===(s=Ze(e.splitText.annotatedText.getPositionOfAnnotation(c),1)[0]))return console.warn("No startPos in getControlsMeasurements"),null;c.type===ANNOTATION_TYPES.pageBreak&&--s,c.type===ANNOTATION_TYPES.lineBreak&&--s;var u=s+c.length;0<c.length&&--u,n=e.splitText.getTextIndexOfPosition(u),o=t.getBoundingClientRect()}var d=[];if(e.selectedAnnotatedSegments&&0<e.selectedAnnotatedSegments.length){d=e.selectedAnnotatedSegments;for(var f=0;f<d.length;f++){var p=d[f];if(null===r&&p instanceof Ne.a){r=p;break}}r&&(a=0===r.length&&e.activeAnnotation&&e.activeAnnotation.isInsertion?(i=idForInsertion(r),idForInsertion):(i=idForSegment(r),idForSegment))}else e.activeAnnotation&&(e.activeAnnotation.isDeletion?(c=new Ne.a(s,""),i=idForDeletedSegment(c),a=idForDeletedSegment,d=[r=c]):e.activeAnnotation.isInsertion?(u=Ze(e.splitText.annotatedText.getPositionOfAnnotation(e.activeAnnotation),1)[0])&&(t=new Ne.a(u,""),i=idForInsertion(t),a=idForInsertion,d=[r=t]):e.activeAnnotation.type===ANNOTATION_TYPES.pageBreak?(c=new Ne.a(s+1,""),u=new Ne.a(s,""),d=[r=c],l=[i=idForPageBreak(u)]):e.activeAnnotation.type===ANNOTATION_TYPES.lineBreak&&(t=new Ne.a(s+1,""),c=new Ne.a(s,""),d=[r=t],l=[i=idForLineBreak(c)]));if(a)for(var h=0;h<d.length;h++){var g=d[h];g instanceof Ne.a&&(g=a(g),l.push(g))}return null!=n&&r&&i&&o?{selectedTextIndex:n,firstSelectedSegment:r,selectedElementId:i,splitTextRect:o,selectedElementIds:l}:null}},{key:"render",value:function(){var e=this,t=this.props,n=this.rowRenderer,r=this.cache,i=t.selectedWitness?t.selectedWitness.id:0;return l.createElement("div",{className:$e.a.splitText2,ref:function(t){return e.splitText=t},key:i,style:{cursor:"pointer"}},l.createElement("button",{id:"updateList2",style:{display:"none"},onClick:function(){return e.updateList(!0)}}),l.createElement(_e.a,{disableWidth:!0},(function(i){return i=i.height,l.createElement(b.d,{ref:function(t){return e.list=t},height:i,rowCount:t.splitText.texts.length,rowHeight:r.rowHeight,rowRenderer:n,width:1,overscanRowCount:1,deferredMeasurementCache:r,onScroll:e.scrollEvent,scrollToAlignment:"start",containerStyle:{width:"100%",maxWidth:"100%"},style:{width:"100%"}})})))}},{key:"getStringPositions",value:function(e,t,n){var r=this.props.splitText.annotatedText.getUniqueId();if((ot=ot.hasOwnProperty(r)?ot:Qe({},r,{}))[r].hasOwnProperty(t)||(ot[r]=Qe({},t,{})),ot[r][t].hasOwnProperty(n))return ot[r][t][n];for(var i=new ie.a,o=e.getText(),a=e.segments[0].start,l=[],s=o.indexOf(t);-1!==s;)l.push(s),s=o.indexOf(t,s+1);var c={};if(0<l.length)for(var u=i.splitGraphemes(o),d=0,f=null,p=0;p<u.length;p++){var h=u[p],g=d+(h.length-1);null!==f?f+(t.length-1)<=g&&(c[f+a]=[f+a,g+a],f=null):-1!==l.indexOf(d)?t.length===h.length?c[d+a]=[d+a,g+a]:t.length>h.length&&(f=d):f=null,d+=h.length}return ot[r][t][n]=c}},{key:"rowRenderer",value:function(e){var t=e.key,n=e.index,r=e.parent,i=(e=e.style,this.props),o=this.cache,a={},s=((s=this.props.searchValue)&&0<s.length&&i.splitText&&(a=this.getStringPositions(i.splitText.texts[n],s,n)),Xe(Xe({},e),{},{height:e.height+10}));return l.createElement(Le.a,{columnIndex:0,key:t,parent:r,rowIndex:n,cache:o},l.createElement("div",{key:t,style:s,ref:this.splitTextRef,id:"index2_".concat(n),className:$e.a.splitTextRow},l.createElement("div",{className:$e.a.splitTextRowContent},l.createElement(qe,{segmentedText:i.splitText.texts[n],row:n,selectedSegmentId:i.selectedSegmentId,searchStringPositions:a,textAlignmentById:i.textAlignmentById,fontSize:i.fontSize,isPanelLinked:this.props.isPanelLinked,selectedSourceRange:i.selectedSourceRange,selectedTargetRange:i.selectedTargetRange,changeSelectedRange:i.changeSelectedRange,changeSyncIdOnClick:this.props.changeSyncIdOnClick,changeScrollToId:this.props.changeScrollToId,condition:this.condition}))))}}])&&tt(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),r}(l.PureComponent);c=n(174);var lt=n.n(c),st=n(176);function ct(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ut(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function dt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ut(Object(n),!0).forEach((function(t){var r,i;r=e,i=n[t=t],t in r?Object.defineProperty(r,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[t]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ut(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ft,pt,ht,gt,mt={},yt={},bt=function(e,t){if(!(t=_.mb(e,t)))return console.warn("no witness"),null;var n=t.text,r=_.qb(e,n.id);n=_.o(e,n.id);return r&&n?(e=(n=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,i=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw i}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ct(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ct(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(function(e,t,n){if(yt.hasOwnProperty(t.id))return[yt[t.id].appliedAnnotations,yt[t.id].allAnnotations];t.text;var r=_.m(e,n.id),i=function(e,t,n){if(!_.tb(e,t))return{};var r=_.f(e,t);if(!r)return{};var i,o,a={};for(i in r)!r.hasOwnProperty(i)||(o=_.k(e,n,i))&&(a[o.unique_id]=o);return vt(e,a)}(e,t.id,n.id),o=null,a={};if(t.id!==n.id){o=_.x(e,t.id);var l,s,c={};for(l in r)r.hasOwnProperty(l)&&((s=r[l]).creator_witness!==t.id||o.hasOwnProperty(s.unique_id)?s.creator_witness===t.id&&(a[s.unique_id]=s):c[s.unique_id]=s);i=dt(dt({},vt(e,c)),i),r=c}return n=vt(e,r),a=vt(e,a),0<Object.keys(a).length&&(n=dt(dt({},n),a)),n=dt(dt({},i),n),n=lt()(n,(function(e,n){return!(t&&e.type===De.a.lineBreak&&e.creatorWitness.id!==t.id)})),_.sb(e,t.id)&&_.tb(e,t.id)&&(yt[t.id]={appliedAnnotations:i,allAnnotations:n}),[i,n]}(e,t,r),2))[0],n[1],n=function(e){return xt[e.id]||(xt[e.id]=Object(st.a)(e.content||"")),xt[e.id]}(r),new Be.g(n,Object.values(e),(function(e){return Object(st.a)(e).segments}),r,t)):null},vt=function(e,t){var n,r,i={};for(n in t)t.hasOwnProperty(n)&&(r=t[n],(r=_.b(e,r))&&(i[n]=r));return i},xt={};function St(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function wt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?St(Object(n),!0).forEach((function(t){var r,i;r=e,i=n[t=t],t in r?Object.defineProperty(r,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[t]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):St(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ot(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,i=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw i}}return o}}(e,t)||Tt(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Tt(e,t){if(e){if("string"==typeof e)return Et(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Et(e,t):void 0}}function Et(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function It(e){return[e.start,e.length].join("-")}p=Object(r.connect)((function(e){var t,n={},r=_.ab(e),i=_.J(e),o={},l=(i&&(t=_.qb(e,i.id)||{},(l=_.M(e,i.id))&&(n=_.mb(e,l)),a()(n)&&a()(t),n=t),t=function(e,t){var n=null;return t&&(n=bt(e,t))&&(mt[t]=n),n}(e,null==(l=n)?void 0:l.id),e.data2.loadingWitnesses),s=(t&&(o=function(e,t){if(e===ft&&t===pt&&e.version===gt)return ht;for(var n={},r={},i=0;i<t.length;i++)!function(i){var o=t[i],a=(i=Ot(e.getPositionOfAnnotation(o),2))[0],l=i[1];if(null!=a)if(0===l){if(o.isInsertion){if(i=It(o),i=r[i])return i.map((function(e){return n[e].push(o)}));a=INSERTION_KEY+a}o.isDeletion&&0<o.length&&(a=DELETION_KEY+a),o.type===ANNOTATION_TYPES.pageBreak&&(a=PAGE_BREAK_KEY+a),o.type===ANNOTATION_TYPES.lineBreak&&(a=LINE_BREAK_KEY+a),void 0===n[a]&&(n[a]=[]),-1===n[a].indexOf(o)&&n[a].push(o)}else{for(var s=[],c=a;c<a+l;c++)void 0===n[c]&&(n[c]=[]),-1===n[c].indexOf(o)&&n[c].push(o),s.push(c);o.isInsertion&&(i=It(o),r[i]=s)}}(i);return pt=t,ht=n,gt=(ft=e).version,n}(t,Object.values([]))),_.wb(e)),c=_.y(e),u=_.R(e),d=_.X(e),f=_.N(e),p=_.C(e);return{text:i,textFontSize:r,annotatedText:t,selectedWitness:n,loading:l,annotationPositions:o,isSecondWindowOpen:Object(_.yb)(e),imageData:Object(_.r)(e),isPanelLinked:s,selectedImage:Object(_.D)(e),isImagePortrait:Object(_.vb)(e),isPanelVisible:Object(_.xb)(e),scrollToId:c,syncIdOnClick:u,textAlignment:d,textAlignmentById:_.Y(e),selectedWindow:f,selectedSourceRange:Object(_.G)(e),selectedTargetRange:Object(_.H)(e),showTableContent:_.P(e),searchResults:Object(_.A)(e,p),searchValue:p,syncIdOnSearch:_.T(e)}}),null,(function(e,t,n){function r(e){return-1!==e.indexOf("ds2_")}function a(e){return-1!==e.indexOf("i2_")}function l(e){return!a(e)&&r(e)?e.substr(3):e.substr(2)}var s=e.annotatedText,c=e.annotationPositions,u=t.dispatch;return wt(wt(wt({},n),e),{},{onChangedFontSize:function(e){u(C.cc(e))},didSelectSegmentIds:function(t){if(0!==t.length){var n,u=[],d=[],f=function(e,t){var n,r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=Tt(e))||t&&e&&"number"==typeof e.length)return r&&(e=r),n=0,{s:t=function(){},n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,a=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){a=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(a)throw i}}}}(t);try{for(f.s();!(n=f.n()).done;){var p,h,g,m=n.value;r(m)||a(m)||(p=l(m),h=s.segmentedText.segmentAtPosition(p),d.push(h),(g=c[h.start])&&(u=u.concat(g)))}}catch(t){f.e(t)}finally{f.f()}u=i()(u,(function(e,t){return e.toString()==t.toString()}));var y,b=o()(u,s.annotations,(function(e,t){return e.toString()==t.toString()})),v=getSegmentsRange(d,b,u,e.annotatedText);v?(y=s.getBaseAnnotation(v.start,v.length),v.annotation||0<b.length&&(b=s.segmentedText.segmentsInRange(v.start,v.length).reduce((function(e,t){return e+t.text}),""),e.selectedWitness||console.log("no stateProps.selectedWitness: %o",e.selectedWitness),new Annotation(WORKING_VERSION_ANNOTATION_ID,getTextWorkingWitness(e.text),y.start,y.length,b,ANNOTATION_TYPES.variant,e.selectedWitness,e.user))):console.warn("No range for selected segment ids: %o",t)}},changeScrollToId:function(e){return u(C.Pb(e))},changeSyncIdOnClick:function(e){u(C.Sb(e))},changeSelectedWindow:function(e){u(C.Rb(e))},changeSelectedRange:function(e){u(C.Qb(e))},changeShowTableContent:function(e){u(C.Wc(e))},selectedSegmentId:function(t){var n=l(t),i=n;a(t)?i=INSERTION_KEY+n:r(t)?i=DELETION_KEY+n:-1!==t.indexOf("p2_")?i=PAGE_BREAK_KEY+n:-1!==t.indexOf("l2_")&&(i=LINE_BREAK_KEY+n),c[i],e.activeAnnotation&&e.activeAnnotation&&(t=C.Yb(null),u(t))}})}))((function(e){var t=Object(l.useRef)();function n(){e.changeSelectedWindow(2)}e.text&&e.text,Object(l.useEffect)((function(){var e=t.current;return e.addEventListener("mouseenter",n),function(){e.removeEventListener("mouseenter",n)}}),[]);var r=null,i=[e.annotatedText&&e.text&&!e.loading?(i=e.paginated?positionSplitter(e.pageBreaks):Object(xe.a)(800,/^།[\s]+(?!།[\s]+)/,2,5),r=new be.a(e.annotatedText,i),s.a.createElement(at,{splitText:r,limitWidth:!1,selectedSegmentId:e.selectedSegmentId,annotationPositions:e.annotationPositions,selectedAnnotatedSegments:null==e?void 0:e.selectedAnnotatedSegments,selectedWitness:e.selectedWitness,key:12,fontSize:e.textFontSize,scrollToId:e.scrollToId,syncIdOnClick:e.syncIdOnClick,textAlignment:e.textAlignment,textAlignmentById:e.textAlignmentById,isPanelLinked:e.isPanelLinked,changeScrollToId:e.changeScrollToId,changeSyncIdOnClick:e.changeSyncIdOnClick,selectedWindow:e.selectedWindow,selectedSourceRange:e.selectedSourceRange,selectedTargetRange:e.selectedTargetRange,changeSelectedRange:e.changeSelectedRange,searchResults:e.searchResults,searchValue:e.searchValue,selectedText:e.text,syncIdOnSearch:e.syncIdOnSearch})):s.a.createElement("div",{key:"key-".concat(Math.random())})];return Re.a.ThirdWindowHeight,s.a.createElement(I.a,{ref:t,className:Se.a.textDetail2,sx:{height:"100%",flex:1,bgcolor:"navbar.main",color:"text.primary"}},s.a.createElement(ye,null),s.a.createElement(F.a,null),s.a.createElement(ve.a,{loaded:!e.loading}),s.a.createElement(I.a,{style:{display:"flex",height:"100%",width:"100%",position:"relative"}},s.a.createElement(I.a,{style:{flex:1},className:v()(Se.a.textContainer2,ke.a.flex)},s.a.createElement(l.Suspense,{fallback:s.a.createElement("div",null)},e.loading?s.a.createElement("div",null):i)),s.a.createElement(we.a,{direction:"left",in:e.showTableContent,container:t.current},s.a.createElement(I.a,{sx:{position:"absolute",height:"100%",minWidth:"50%",right:0}},s.a.createElement(Ae,null)))))})),t.default=s.a.memo(p)},966:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(189);function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n(68);var o=function(){function e(t,n){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.annotatedText=t,this.splitter=n,this._texts=null,this._textsId=null,this._textsFinalPositions=[]}var t,n;return t=e,(n=[{key:"texts",get:function(){if(!this.annotatedText)return[];if(!this._texts||this._textsId!==this.annotatedText.getUniqueId()){this._textsFinalPositions=[];var e=this.annotatedText.segmentedText,t=e.getText(),n=this.splitter(t).filter((function(e){return 0!==e}));if(0===n.length)return this._textsFinalPositions.push(t.length),[e];n[n.length-1]+1<t.length&&n.push(t.length-1);for(var i=e.segments,o=0,a=[],l=0;l<n.length;l++){var s=n[l],c=(s=e.indexOfSegmentAtPosition(s-1),void 0);c=l==n.length-1?i.slice(o):i.slice(o,s+1),c=new r.a(c);a.push(c),o=s+1,0<=s&&(c=i[s],this._textsFinalPositions.push(c.end))}this._texts=a.filter((function(e){return 0<e.segments.length})),this._textsId=this.annotatedText.getUniqueId()}return this._texts||[]}},{key:"getTextsFinalPositions",value:function(){return this.texts,this._textsFinalPositions}},{key:"getTextIndexOfPosition",value:function(e){for(var t=this.getTextsFinalPositions(),n=0,r=null,i=0;i<t.length;i++){var o=t[i];if(n<=e&&e<=o){r=i;break}n=o}return null===r&&(console.warn("no index for position %d",e),r=t.length-1),r}}])&&i(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}()},970:function(e,t,n){"use strict";var r=n(326),i=n.n(r),o=n(0),a=n.n(o),l=(r=n(973),n.n(r));function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,i=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw i}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}t.a=function(e){var t=e.max,n=(e.min,e.initialvalue),r=void 0===(e=e.changeSize)?function(e){return console.log(e)}:e,c=(e=n/t*100,(e=s(Object(o.useState)(e),2))[0]),u=e[1];e=i()((function(e){r(Math.floor(parseInt(c/100*t)))}),500);return a.a.createElement("div",{className:l.a.inputRanges},a.a.createElement("span",{style:{fontSize:13,top:"-5px"},onClick:function(){return r(n-2)}},"ཀ"),a.a.createElement("input",{type:"range",style:{width:"70%"},className:l.a.inputRange,min:40,max:100,smooth:"yes",step:1,value:c,onChange:function(e){return u(e.target.value)},onMouseUp:e,onTouchEnd:e}),a.a.createElement("span",{style:{fontSize:18,top:"-10px"},onClick:function(){return r(n+2)}},"ཀ"))}},973:function(e,t,n){e.exports={inputRanges:"Slider---inputRanges",inputRange:"Slider---inputRange"}},974:function(e,t,n){"use strict";var r=n(0),i=n.n(r);function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var a=i.a.createElement("path",{d:"M507.73 109.1c-2.24-9.03-13.54-12.09-20.12-5.51l-74.36 74.36-67.88-11.31-11.31-67.88 74.36-74.36c6.62-6.62 3.43-17.9-5.66-20.16-47.38-11.74-99.55.91-136.58 37.93-39.64 39.64-50.55 97.1-34.05 147.2L18.74 402.76c-24.99 24.99-24.99 65.51 0 90.5 24.99 24.99 65.51 24.99 90.5 0l213.21-213.21c50.12 16.71 107.47 5.68 147.37-34.22 37.07-37.07 49.7-89.32 37.91-136.73zM64 472c-13.25 0-24-10.75-24-24 0-13.26 10.75-24 24-24s24 10.74 24 24c0 13.25-10.75 24-24 24z"});t.a=function(e){return i.a.createElement("svg",o({viewBox:"0 0 512 512"},e),a)}},983:function(e,t,n){"use strict";var r=n(47);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r=r(n(53)),n=n(2),r=(0,r.default)((0,n.jsx)("path",{d:"M9 16.17 4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"}),"Check");t.default=r}}]);