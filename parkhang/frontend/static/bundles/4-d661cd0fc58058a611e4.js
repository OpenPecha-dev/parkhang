(window.webpackJsonpparkhang=window.webpackJsonpparkhang||[]).push([[4],{1e3:function(e,t,n){e.exports={"green-tint":"#88af8e","blue-tint":"#024279","active-button":"#00746b",mainTint:"#024279",activeButton:"#00746b",selectVersion:"SelectVersion---selectVersion",selectEmpty:"SelectVersion---selectEmpty",selectOptions:"SelectVersion---selectOptions","styled-select":"SelectVersion---styled-select"}},1001:function(e,t,n){e.exports={inputRanges:"Slider---inputRanges",inputRange:"Slider---inputRange"}},1010:function(e,t,n){e.exports={textlist:"TextList---textlist",open:"TextList---open"}},1011:function(e,t,n){e.exports={highlight:"SearchStyle---highlight",searchListItem:"SearchStyle---searchListItem"}},1012:function(e,t,n){e.exports={"green-tint":"#88af8e","blue-tint":"#024279","active-button":"#00746b",mainTint:"#024279",activeButton:"#00746b",textDetail2:"TextDetail---textDetail2",textContainer2:"TextDetail---textContainer2"}},1013:function(e,t,n){e.exports={placeholder:"Placeholder---placeholder",example:"Placeholder---example"}},1015:function(e,t,n){e.exports={"green-tint":"#88af8e","blue-tint":"#024279","active-button":"#00746b",mainTint:"#024279",activeButton:"#00746b",paddingSide:"20px",maxWidth:"600px",text:"Text2---text",textFirstRow:"Text2---textFirstRow",textLine:"Text2---textLine",textline:"Text2---textline",limitWidth:"Text2---limitWidth",textContainer:"Text2---textContainer",annotation:"Text2---annotation",removedByAnnotation:"Text2---removedByAnnotation",insertion:"Text2---insertion",highlight:"Text2---highlight",activeHighlight:"Text2---activeHighlight",lineBreak:"Text2---lineBreak",pageBreak:"Text2---pageBreak",syncIdClass:"Text2---syncIdClass",selectedRangelight:"Text2---selectedRangelight",selectedRangeDark:"Text2---selectedRangeDark"}},1016:function(e,t,n){e.exports={"green-tint":"#88af8e","blue-tint":"#024279","active-button":"#00746b",mainTint:"#024279",activeButton:"#00746b",inlineWidth:"280px",annotationControls:"SplitText---annotationControls",annotationContent:"SplitText---annotationContent",subTitle:"SplitText---subTitle",title:"SplitText---title",sectionHeading:"SplitText---sectionHeading",text:"SplitText---text",padding:"SplitText---padding",arrowTop:"SplitText---arrowTop",arrowLeft:"SplitText---arrowLeft",arrowRight:"SplitText---arrowRight",inline:"SplitText---inline",arrow:"SplitText---arrow",arrowDs:"SplitText---arrowDs",nothingSelected:"SplitText---nothingSelected",anonymousMessage:"SplitText---anonymousMessage",noNotes:"SplitText---noNotes",breakButtons:"SplitText---breakButtons",splitText2:"SplitText---splitText2",splitTextRowContent:"SplitText---splitTextRowContent",splitTextRow:"SplitText---splitTextRow",pechaImage:"SplitText---pechaImage",controlsPlaceholder:"SplitText---controlsPlaceholder",pageNumber:"SplitText---pageNumber"}},1027:function(e,t,n){e.exports={heading:"AnnotationControlsHeading---heading",title:"AnnotationControlsHeading---title",button:"AnnotationControlsHeading---button"}},1028:function(e,t,n){e.exports={"green-tint":"#88af8e","blue-tint":"#024279","active-button":"#00746b",mainTint:"#024279",activeButton:"#00746b",button:"AddButton---button"}},1029:function(e,t,n){e.exports={"green-tint":"#88af8e","blue-tint":"#024279","active-button":"#00746b",mainTint:"#024279",activeButton:"#00746b",editorContainer:"NoteEditor---editorContainer",textEditor:"NoteEditor---textEditor"}},1030:function(e,t,n){e.exports={question:"QuestionView---question",threadLink:"QuestionView---threadLink"}},1031:function(e,t,n){e.exports={name:"AnswerView---name",answer:"AnswerView---answer"}},1032:function(e,t,n){e.exports={"green-tint":"#88af8e","blue-tint":"#024279","active-button":"#00746b",mainTint:"#024279",activeButton:"#00746b",editorContainer:"QuestionEditor---editorContainer",textEditor:"QuestionEditor---textEditor"}},1033:function(e,t,n){e.exports={loading:"QuestionsLoading---loading"}},1034:function(e,t,n){e.exports={"green-tint":"#88af8e","blue-tint":"#024279","active-button":"#00746b",mainTint:"#024279",activeButton:"#00746b",note:"Note---note",header:"Note---header",info:"Note---info",content:"Note---content",delete:"Note---delete"}},1036:function(e,t,n){e.exports={"green-tint":"#88af8e","blue-tint":"#024279","active-button":"#00746b",mainTint:"#024279",activeButton:"#00746b",header:"AnnotationControlsHeader---header",Anotation_closeBtn:"AnnotationControlsHeader---Anotation_closeBtn",edit:"AnnotationControlsHeader---edit"}},1039:function(e,t,n){e.exports={"green-tint":"#88af8e","blue-tint":"#024279","active-button":"#00746b",mainTint:"#024279",activeButton:"#00746b",textDetail:"TextDetail---textDetail",textContainer:"TextDetail---textContainer",tableContent:"TextDetail---tableContent"}},1040:function(e,t,n){e.exports={"green-tint":"#88af8e","blue-tint":"#024279","active-button":"#00746b",mainTint:"#024279",activeButton:"#00746b",button_group_menu:"textDetailHeading---button_group_menu"}},1041:function(e,t,n){e.exports={"green-tint":"#88af8e","blue-tint":"#024279","active-button":"#00746b",mainTint:"#024279",activeButton:"#00746b",selectVersion:"SelectVersion---selectVersion",selectEmpty:"SelectVersion---selectEmpty",selectOptions:"SelectVersion---selectOptions","styled-select":"SelectVersion---styled-select"}},1042:function(e,t,n){e.exports={textlist:"TextList---textlist",open:"TextList---open"}},1043:function(e,t,n){e.exports={highlight:"SearchStyle---highlight",searchListItem:"SearchStyle---searchListItem"}},1044:function(e,t,n){e.exports={TableContent:"TableOfContent---TableContent"}},1045:function(e,t,n){e.exports={"green-tint":"#88af8e","blue-tint":"#024279","active-button":"#00746b",mainTint:"#024279",activeButton:"#00746b",paddingSide:"20px",maxWidth:"600px",text:"Text---text",syncIdClass:"Text---syncIdClass",textFirstRow:"Text---textFirstRow",textLine:"Text---textLine",textline:"Text---textline",limitWidth:"Text---limitWidth",textContainer:"Text---textContainer",annotation:"Text---annotation",selectedAnnotation:"Text---selectedAnnotation",removedByAnnotation:"Text---removedByAnnotation",insertion:"Text---insertion",highlight:"Text---highlight",activeHighlight:"Text---activeHighlight",lineBreak:"Text---lineBreak",pageBreak:"Text---pageBreak",selectedRangelight:"Text---selectedRangelight",selectedRangeDark:"Text---selectedRangeDark",selectedImage:"Text---selectedImage"}},1046:function(e,t,n){e.exports={"green-tint":"#88af8e","blue-tint":"#024279","active-button":"#00746b",mainTint:"#024279",activeButton:"#00746b",inlineWidth:"280px",annotationControls:"SplitText---annotationControls",annotationContent:"SplitText---annotationContent",subTitle:"SplitText---subTitle",title:"SplitText---title",sectionHeading:"SplitText---sectionHeading",text:"SplitText---text",padding:"SplitText---padding",arrowTop:"SplitText---arrowTop",arrowLeft:"SplitText---arrowLeft",arrowRight:"SplitText---arrowRight",inline:"SplitText---inline",arrow:"SplitText---arrow",arrowDs:"SplitText---arrowDs",nothingSelected:"SplitText---nothingSelected",anonymousMessage:"SplitText---anonymousMessage",noNotes:"SplitText---noNotes",breakButtons:"SplitText---breakButtons",splitText:"SplitText---splitText",splitTextRowContent:"SplitText---splitTextRowContent",splitTextRow:"SplitText---splitTextRow",pechaImage:"SplitText---pechaImage",image:"SplitText---image",controlsPlaceholder:"SplitText---controlsPlaceholder",hide:"SplitText---hide",pageNumber:"SplitText---pageNumber","image-loading":"SplitText---image-loading"}},1077:function(e,t,n){"use strict";function r(e){var t={};return t.backgroundColor=e.backgroundColor||"",t.color=e.color||"#fff",i.a.createElement("div",{className:p.a.accessory,title:e.title,onClick:e.onClick,style:t},h[e.type])}n.r(t),n.d(t,"default",(function(){return sl}));var o=n(0),i=n.n(o),a=(t=n(69),n(919)),l=n.n(a),c=n(86),s=(a=n(42),n(273)),u=n.n(s),f=(s=n(843),n.n(s)),d=(s=n(920),n.n(s)),p=(s=n(921),n.n(s)),h={ADD:"+",DELETE:"×"},m=n(174),y=n(805);function g(e){var t=e.children,n=e.tooltipName,r=void 0===(r=e.format)?null:r,o=e.className,a=e.shortcut;e=e.on;return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{"data-tip":!0,"data-for":n,className:void 0===o?"":o,style:{width:"100%"}},void 0!==e&&e?t:i.a.createElement(y.a,{placement:"top",followCursor:!0,title:r?i.a.createElement(m.a,{id:r}):i.a.createElement("span",null,n," [".concat(void 0===a?"":a,"]"))},t)))}function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function x(e,t){return(x=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var O=function(e){var t=o;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&x(t,e);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=w(e);n=t?(n=w(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),r=this;if(n&&("object"===b(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==r)return r;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(o);function o(){var e=this,t=o;if(e instanceof t)return n.apply(this,arguments);throw new TypeError("Cannot call a class as a function")}return t=o,(e=[{key:"render",value:function(){var e=this.props.color||"#ffffff",t=this.props.backgroundColor||f.a.mainTint,n=this.props.fontSize||"14px",o=this.props.noBezel?[d.a.buttonNoBezel]:[d.a.button],a=this.props.tooltipTitle||"",l=(o=(this.props.isActive&&o.push(d.a.active),u.a.apply(void 0,o)),this.props.shortcut||"");n={fontSize:n,color:e,backgroundColor:t};return this.props.align&&(n.textAlign=this.props.align),i.a.createElement(g,{tooltipName:a,shortcut:l,on:this.props.disabled},i.a.createElement("button",{style:n,className:o,onClick:this.props.onClick,disabled:this.props.disabled},this.props.icon&&i.a.createElement("div",{className:d.a.icon},this.props.icon),this.props.title&&i.a.createElement("span",{className:d.a.title},this.props.title),this.props.accessoryType&&i.a.createElement(r,{type:this.props.accessoryType})))}}])&&v(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),o}(i.a.Component);function S(){return(S=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function E(e){return i.a.createElement("svg",S({width:24,height:24},e),T)}var T=i.a.createElement("path",{d:"M9 2C5.146 2 2 5.146 2 9s3.146 7 7 7a6.959 6.959 0 004.574-1.719l.426.426V16l6 6 2-2-6-6h-1.293l-.426-.426A6.959 6.959 0 0016 9c0-3.854-3.146-7-7-7zm0 2c2.773 0 5 2.227 5 5s-2.227 5-5 5-5-2.227-5-5 2.227-5 5-5z"});function I(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}s=Object(a.c)((function(e){function t(t){var r;t.preventDefault(),n.current instanceof HTMLInputElement&&(r=n.current.value,a((function(){e.searchChanged(r)})))}var n=i.a.createRef(),r=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return I(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?I(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(Object(o.useTransition)(),2),a=(r[0],r[1]);return console.log(e.textListWidth),i.a.createElement("div",{className:l.a.textsSearchContainer,style:{maxWidth:e.textListWidth}},i.a.createElement("div",{className:l.a.textsSearch},i.a.createElement("form",{onSubmit:t},i.a.createElement("input",{onChange:function(t){a((function(){""===t.target.value?e.searchChanged(null):e.searchChanged(t.target.value)}))},style:{outline:"none",width:150},type:"text",id:"textSearchInput",placeholder:e.intl.formatMessage({id:"leftbar.search"}),ref:n}),i.a.createElement(O,{backgroundColor:"#35BF5C",onClick:t,noBezel:!0,icon:i.a.createElement(E,null)}))))}));var j=n(2),A=n(7),P=(Object(t.connect)((function(e){return{searchTerm:A.C(e),searchValue:e.ui.searchValue,textListWidth:A.eb(e)}}),(function(e){return{searchChanged:function(t){e(Object(j.bc)(t))}}}))(s),n(839)),k=n(829),C=(n(848),n(838)),R=(n(12),n(281)),_=(s=n(864),n.n(s)),B=(s=n(827),n.n(s)),W=(s=n(828),n.n(s)),N=(s=n(850),n.n(s));function L(e){return(L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function D(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function H(e,t){return(H=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function z(e){return(z=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var M=function(e){var t=r;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&H(t,e);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=z(e);n=t?(n=z(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),r=this;if(n&&("object"===L(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==r)return r;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(r);function r(e){if(this instanceof r)return n.call(this,e);throw new TypeError("Cannot call a class as a function")}return t=r,(e=[{key:"render",value:function(){var e=this,t=this.props.string,n=t,r=this.props.stringClass||"";if(this.props.searchTerm){var i=this.props.searchTerm,a=(new W.a).splitGraphemes(t),l=t.indexOf(i),c=l+i.length,s=0,u="";if(-1<l)for(var f=0;f<a.length;f++){var d=a[f];l<=s&&s<c&&(u+=d),s+=d.length}0<u.length&&(n=N()(t,u,(function(t,n){return o.createElement("span",{className:e.props.highlightClass,key:"highlight-".concat(n)},t)})))}return o.createElement("span",{className:r},n)}}])&&D(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),r}(o.Component);function q(e){return(q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function V(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function F(e,t){return(F=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function U(e){return(U=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Q=function(e){var t=r;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&F(t,e);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=U(e);n=t?(n=U(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),r=this;if(n&&("object"===q(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==r)return r;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(r);function r(e){if(this instanceof r)return n.call(this,e);throw new TypeError("Cannot call a class as a function")}return t=r,(e=[{key:"render",value:function(){var e=this.props.count;return this.props.extra&&(e+="+"),o.createElement("span",{className:_.a.searchTotal},e)}}])&&V(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),r}(o.Component),J=(s=n(936),n.n(s));function $(e){return e=e.loading?i.a.createElement("span",null,i.a.createElement(m.a,{id:"leftbar.loading"})):i.a.createElement("span",null,i.a.createElement(m.a,{id:"leftbar.loadMore"})),i.a.createElement("div",{className:J.a.container},e)}function K(e){return(K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function G(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Y(e,t){return(Y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Z(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function X(e){return(X=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}s=function(e){var t=r;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Y(t,e);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=X(e);n=t?(n=X(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),r=this;if(n&&("object"===K(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return Z(r)}}(r);function r(e){if(this instanceof r)return(e=n.call(this,e)).cache=new k.b({fixedWidth:!0,defaultHeight:60,minHeight:60}),e.rowRenderer=e.rowRenderer.bind(Z(e)),e;throw new TypeError("Cannot call a class as a function")}return t=r,(e=[{key:"componentDidUpdate",value:function(e){this.cache.clearAll(),this.list&&this.list.forceUpdateGrid()}},{key:"componentDidMount",value:function(){}},{key:"rowRenderer",value:function(e){var t=this,n=e.key,r=e.index,o=e.parent,a=(e=e.style,this.props.selectedText),l=a?a.id:-1,c=this.props.selectedSearchResult,s=this.props.texts,f=this.props.onSelectedText,d=this.props.onSelectedSearchResult,p=this.props.searchTerm,h=this.props.searchResults,m=_.a.textListRow,y=s[r],g=(l=(y.id===l&&(m=u()(m,_.a.selectedRow)),Object(R.a)(y.name)),i.a.createElement("span",{className:_.a.textName},l)),b=[],v=null,x=!1,w=!1,O=(l=(0<p.length&&(g=i.a.createElement(M,{string:l,stringClass:_.a.textName,highlightClass:_.a.highlight,searchTerm:p}),h.hasOwnProperty(y.id)&&(b=h[y.id].results,x=h[y.id].extra,w=h[y.id].loading,v=i.a.createElement(Q,{count:h[y.id].total,extra:x}))),this.cache),[]);return 0<b.length&&(O=b.map((function(e){var t=(t=c&&c.textId===y.id&&c.start===e[0])?_.a.selectedSearchResult:_.a.searchResult;return i.a.createElement("div",{key:y.id+"_"+e[0],onClick:function(){d(y,e[0],p.length,a)},className:t},i.a.createElement(M,{string:e[1],highlightClass:_.a.highlight,searchTerm:p}))}))),null!==h?i.a.createElement(k.a,{columnIndex:0,key:n,parent:o,rowIndex:r,cache:l},i.a.createElement("div",{key:"listkeys-".concat(n),style:e,className:m},p&&i.a.createElement("div",{className:_.a.textNameRow,onClick:function(){f(s[r])}},g," ",v),0<b.length&&i.a.createElement("div",{className:_.a.searchResults},O),x&&i.a.createElement("div",{className:_.a.loadMore,onClick:function(){t.props.onSearchText(y,p)}},i.a.createElement($,{loading:w})))):null}},{key:"findRowHeight",value:function(e){return e.searchTerm?null:40}},{key:"render",value:function(){var e=this,t=this.props.texts.length;return i.a.createElement("div",{className:_.a.textList},this.props.texts&&0<this.props.texts.length?i.a.createElement(P.a,null,(function(n){var r=n.height;n=n.width;return i.a.createElement(C.a,{ref:function(t){return e.list=t},height:r,rowCount:t,rowHeight:e.findRowHeight(e.props)||e.cache.rowHeight,rowRenderer:e.rowRenderer,width:n,overscanRowCount:1,deferredMeasurementCache:e.cache})})):this.props.searching?i.a.createElement("div",{className:_.a.textListLoader},i.a.createElement(B.a,{loaded:!this.props.searching,scale:.5}),i.a.createElement("p",{className:_.a.searching},"Searching…")):i.a.createElement("ul",{className:"textList"}))}}])&&G(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),r}(i.a.Component);var ee=n(85),te=(s=(Object(t.connect)((function(e){var t=A.C(e),n=A.A(e,t),r=A.G(e),o=!1,i=e.data.texts;return{texts:i=0<t.length?null===n?(o=!0,[]):i.filter((function(e){return n.hasOwnProperty(e.id)})):i,selectedText:Object(A.J)(e),searchTerm:t,searchResults:n,selectedSearchResult:r,searching:o}}),(function(e){return{onSelectedText:function(t){e(j.Rc(t))},onSelectedSearchResult:function(t,n,r,o){o&&o.id===t.id?e(j.Qc(t.id,n,r)):e(Object(ee.batchActions)([j.Qc(t.id,n,r),j.Rc(t)]))},onSearchText:function(t,n){e(j.Lc(t.id,n))}}}))(s),n(937)),n.n(s)),ne=(s=(Object(t.connect)((function(e){return{textListIsVisible:Object(A.db)(e)}}),(function(e){return{tabClicked:function(){e(Object(j.gc)(!0))}}}))((function(e){var t=[te.a.tab];return e.textListIsVisible?t.push(te.a.hideTab):t.push(te.a.showTab),i.a.createElement("div",{className:u.a.apply(void 0,t),onClick:e.tabClicked},"Text List")})),n.p,n(841)),n.n(s)),re=(s=n(938),n.n(s)),oe=(s=n(946),n.n(s)),ie=(s=n(947),n.n(s)),ae=(s=n(948),n.n(s)),le=(s=n(949),n.n(s)),ce=(n(939),n(809)),se=n(1087),ue=n(1088),fe=n(1089),de=(n(940),n(1066)),pe=(s=Object(t.connect)((function(e){return{Textdata:A.fb(e),selectedText:A.J(e)}}),(function(e){return{}}))((function(e){var t=e.Textdata,n=e.selectedText;return n?(e=t.detail.find((function(e){return e.text===n.id})))?i.a.createElement(i.a.Fragment,null,i.a.createElement(ce.a,{variant:"h4",component:"div",mb:3},i.a.createElement(m.a,{id:"Resource.About"})),i.a.createElement(se.a,{TransitionProps:{unmountOnExit:!0}},i.a.createElement(ue.a,{sx:{fontWeight:"bold"},expandIcon:i.a.createElement(de.a,null)},i.a.createElement(m.a,{id:"text.title"})),i.a.createElement(fe.a,null,e.title)),i.a.createElement(se.a,{TransitionProps:{unmountOnExit:!0}},i.a.createElement(ue.a,{expandIcon:i.a.createElement(de.a,null)},i.a.createElement(m.a,{id:"text.description"})),i.a.createElement(fe.a,null,e.description))):i.a.createElement("div",null,"No about info"):i.a.createElement("div",null,"no selected Text available")})),n(941),n(942)),he=n.n(pe),me=(pe=n(943),n.n(pe)),ye=(pe=n(944),n.n(pe)),ge=n(814),be=n(1090),ve=n(1064),xe=n(1067),we=(pe=Object(t.connect)((function(e){var t=A.w(e);return{alignmentData:A.i(e),selectedMedia:t,showPageImages:A.Bb(e)}}),(function(e){return{changedShowPageImages:function(t){e(j.dc(t))},changeMediaSelection:function(t){return e(j.Hc(t))},onSelectedSearchResult:function(t,n,r){e(j.Qc(t,n,r))}}}))((function(e){function t(t){e.changeMediaSelection(t)}return i.a.createElement(i.a.Fragment,null,i.a.createElement(ce.a,{variant:"h6",gutterBottom:!0,component:"div"},"Media"),i.a.createElement(ge.a,{sx:{width:"100%",maxWidth:360,bgcolor:"background.paper"}},i.a.createElement(be.a,{selected:e.showPageImages,onClick:function(){return e.changedShowPageImages(!e.showPageImages)}},i.a.createElement(ve.a,null,i.a.createElement(he.a,null)),i.a.createElement(xe.a,{primary:"Image"})),i.a.createElement(be.a,{selected:e.selectedMedia.isVideoVisible,onClick:function(){return t("VIDEO")}},i.a.createElement(ve.a,null,i.a.createElement(me.a,null)),i.a.createElement(xe.a,{primary:"Video"})),i.a.createElement(be.a,{selected:e.selectedMedia.isAudioVisible,onClick:function(){return t("AUDIO")}},i.a.createElement(ve.a,null,i.a.createElement(ye.a,null)),i.a.createElement(xe.a,{primary:"Audio"}))))})),n(800)),Oe=Object(t.connect)((function(e){var t=A.w(e),n=A.i(e);return{alignmentData:n,selectedMedia:t,text:A.X(e,n.target)}}),(function(e){return{changeMediaSelection:function(t){return e(j.Hc(t))},onChangeWindowOpen:function(t){e(j.ad(t))},onSelectedSearchResult:function(t,n,r){e(j.Qc(t,n,r))},selectSecondWindowText:function(t){e(j.Sc(t))}}}))((function(e){var t=e.alignmentData,n=(e.text,e.selectSecondWindowText);t.target,e=(null==t?void 0:t.alignments.text)||[];return i.a.createElement(we.a,null,i.a.createElement(ce.a,{variant:"h6",gutterBottom:!0,component:"div"},"Commentary"),0<e.length&&e.map((function(e,t){return i.a.createElement("ul",{style:{paddingLeft:18},key:"commentary-".concat(t)},i.a.createElement("li",{style:{cursor:"pointer"},onClick:function(){n({id:140,name:"བྱང་ཆུབ་སེམས་དཔའི་སྤྱོད་པ་ལ་འཇུག་པ་བཞུགས་པའི་འགྲེལ་པ།"})}},e.target))})))}));n(945);var Se={About:s,Resources:pe,Commentary:Oe,Dictionary:function(){return i.a.createElement(i.a.Fragment,null,i.a.createElement(ce.a,{variant:"h6",gutterBottom:!0,component:"div"},"Dictionary"),i.a.createElement(we.a,{p:2},i.a.createElement("input",{type:"text",placeholder:"search Terms"})))}},Ee=n(284),Te=n(847),Ie=n(835),je=n(1079),Ae=n(1091),Pe=n(751),ke=["children","value","index"];function Ce(){return(Ce=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Re(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _e(){var e=(n=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Re(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Re(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(Object(Ie.a)("selectedResources",0),2))[0],t=n[1],n=Object(Pe.a)();return i.a.createElement(we.a,{sx:{width:"100%",display:"flex",flexDirection:"column",bgcolor:"background.default",height:"100%",maxWidth:"250px",zIndex:10,position:"relative",borderRight:"light"===n.palette.mode?"2px solid lightgray":"0"}},i.a.createElement(we.a,{sx:{borderBottom:1,borderColor:"divider",display:"flex"},className:re.a.optionlist},i.a.createElement(je.a,{value:e,style:{flex:1},onChange:function(e,n){t(n)},"aria-label":"basic tabs example"},i.a.createElement(Ae.a,Ce({style:{minWidth:0,flex:1},icon:i.a.createElement(oe.a,null)},Be(0))),i.a.createElement(Ae.a,Ce({style:{minWidth:0,flex:1},icon:i.a.createElement(ie.a,null)},Be(1))),i.a.createElement(Ae.a,Ce({style:{minWidth:0,flex:1},icon:i.a.createElement(ae.a,null)},Be(2))),i.a.createElement(Ae.a,Ce({style:{minWidth:0,flex:1},icon:i.a.createElement(le.a,null)},Be(3))))),i.a.createElement(i.a.Fragment,null,i.a.createElement(We,{value:e,index:0},i.a.createElement(Se.About,null)),i.a.createElement(We,{value:e,index:1},i.a.createElement(Se.Resources,null)),i.a.createElement(We,{value:e,index:2},i.a.createElement(Se.Dictionary,null)),i.a.createElement(We,{value:e,index:3},i.a.createElement(Se.Commentary,null))),i.a.createElement(we.a,{alignSelf:"center",sx:{position:"absolute",bottom:0}},i.a.createElement(Ee.NavLink,{to:"/"},i.a.createElement("div",{className:re.a.logo},i.a.createElement("img",{src:Te.a,alt:"lopenling-logo",height:37,width:172})))))}function Be(e){return{id:"simple-tab-".concat(e),"aria-controls":"simple-tabpanel-".concat(e)}}function We(e){var t=e.children,n=e.value,r=e.index;e=function(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],0<=t.indexOf(n)||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(e),i=0;i<o.length;i++)n=o[i],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}(e,ke);return i.a.createElement("div",Ce({role:"tabpanel",hidden:n!==r,id:"simple-tabpanel-".concat(r),"aria-labelledby":"simple-tab-".concat(r)},e,{style:{paddingInline:5}}),n===r&&i.a.createElement(we.a,{pt:2},t))}var Ne=n(869),Le=(s=n(952),n.n(s)),De=(pe=n(228),n.n(pe)),He=(Oe=n(184),n.n(Oe)),ze=(s=n(852),n.n(s)),Me=(n(870),n(953),n(811),n(1068)),qe=n(815);n(955),n(954),n(817),n(871);var Ve=n(816),Fe=n(956),Ue=n(62);function Qe(e){var t=Object(Ue.a)(),n=i.a.useRef(null);return i.a.createElement(Ve.a,{in:e.open},i.a.createElement(Fe.a,{profile:"top_progress",src:["https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3"],isDark:"dark"===t.palette.mode,onLoad:function(e){console.log(e)},speedPanel:"bottom",ref:n,onPlay:function(e){console.log(e)}}))}pe=n(958);var Je=n.n(pe);function $e(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function Ke(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$e(Object(n),!0).forEach((function(t){var r,o;r=e,o=n[t=t],t in r?Object.defineProperty(r,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[t]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$e(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ge(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Ye(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ye(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ye(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ze(e){return 60*+(e=(0<arguments.length&&void 0!==e?e:"").split(":"))[0]*60+60*+e[1]+ +e[2]}function Xe(e){var t,n=e.alignmentData.text,r=null==e||null==(r=e.videoData)||null==(r=r.source)?void 0:r.text,a=(null==e||null==(l=e.videoData)?void 0:l.alignment)||[],l=Ge(Object(o.useState)({}),2),c=l[0],s=l[1],u=[],f=e.syncIdOnClick,d=(l=Ge(Object(o.useState)({played:0,duration:0,playing:!0}),2))[0],p=l[1],h=(He()(a)||(u=a.map((function(e){return[parseInt(e.source_segment.start),parseInt(e.source_segment.end)]}))),Object(o.useEffect)((function(){var r,o;n===e.selectedText.id&&(r=f,(t=u.find((function(e){var t=(e=Ge(e,2))[0];e=e[1];return t<r&&r<e})))&&(o=a.find((function(e){return e.source_segment.start===(null==(e=t[0])?void 0:e.toString())})),He()(o)||y(o.target_segment.start)))}),[f]),Object(o.useCallback)((function(){var t=c;if(n===e.selectedText.id)for(var r=t.start;r<t.end;r++){var o=document.getElementById("s_".concat(r));o&&(o.style.fontWeight="bold")}}),[c.start])),m=(Object(o.useEffect)((function(){var t=setTimeout((function(){return h()}),800),n=c;return c.start&&e.changeScrollToId({id:n.start||null,from:"video"}),function(){clearTimeout(t);for(var e=n.start;e<n.end;e++){var r=document.getElementById("s_".concat(e));r&&(r.style.fontWeight="normal")}}}),[c.start]),Object(o.useRef)()),y=function(e){t=d.duration,e=Ze(e=e)/t;var t=parseFloat(e);m.current.seekTo(parseFloat(t))};return 0===a.length||r!==e.selectedText.id?i.a.createElement("div",null):i.a.createElement(Ve.a,{in:e.open},i.a.createElement(Je.a,{url:"https://www.youtube.com/watch?v=2MMM_ggekfE",style:{maxWidth:"100%"},ref:m,controls:!0,onDuration:function(e){return p(Ke(Ke({},d),{},{duration:e}))},light:!0,playing:!0,onPlay:function(){return p(Ke(Ke({},d),{},{playing:!0}))},onPause:function(){return p(Ke(Ke({},d),{},{playing:!1}))},onProgress:function(e){var t=e.playedSeconds;e=a.find((function(e){return Ze(e.target_segment.start)<t&&Ze(e.target_segment.end)>t}));He()(e)||(e=e.source_segment,h(),s(Ke({},e)))},onError:function(){return console.log("error in media sec")}}))}n(977);Oe=n(853);var et=n.n(Oe),tt=(s=n(842),n.n(s)),nt=n(812);function rt(){return(rt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function ot(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function it(e){return i.a.createElement(et.a,{handle:"#draggable-dialog-title",bounds:"parent"},i.a.createElement(nt.a,e))}n(981);var at=Object(t.connect)((function(e){var t=A.z(e),n=A.T(e),r=A.s(e),o=A.mb(e),i=A.w(e),a=A.J(e);return{scrollToId:t,syncIdOnClick:n,imageData:r,videoData:o,selectedMedia:i,selectedText:a,isImagePortrait:A.xb(e),alignmentData:A.i(e),witness:A.N(e,a.id),witnesses:A.gb(e,a.id),ImageVersion:A.F(e),selectedImage:A.E(e),imageScrollId:A.t(e),imageAlignmentById:A.r(e)}}),(function(e){return{toggleImage:function(t){return e(j.dc(t))},onSelectedSearchResult:function(t,n,r,o){o&&o.id===t.id?e(j.Qc(t.id,n,r)):e(batchActions([j.Qc(t.id,n,r),j.Rc(t)]))},changeMediaSelection:function(t){return e(j.Hc(t))},changeIsImagePortrait:function(t){return e(j.Vc(t))},changeImageVersion:function(t){return e(j.Nc(t))},changeSelectedImage:function(t){return e(j.Mc(t))},changeSelectedRange:function(t){e(j.Rb(t))},changeScrollToId:function(t){return e(j.Qb(t))}}}))((function(e){var t=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ot(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ot(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(i.a.useState(!0),2),n=t[0],r=t[1];return e.selectedMedia.isImageVisible?null:i.a.createElement(it,{sx:{position:"absolute",zIndex:1,right:0}},i.a.createElement("div",{className:"Resizable-media-div"},i.a.createElement("div",{style:{cursor:"move",paddingInline:20,paddingTop:10,display:"flex",justifyContent:"space-between",alignItems:"center"},id:"draggable-dialog-title"},i.a.createElement("h3",null,e.selectedMedia.isVideoVisible&&"VIDEO"),i.a.createElement("h3",null,e.selectedMedia.isAudioVisible&&"AUDIO"),i.a.createElement("div",{className:"buttons-hide-close"},i.a.createElement(qe.a,{onClick:function(){r((function(e){return!e}))},disableRipple:!0},n?"-":"+"),i.a.createElement(qe.a,{onClick:function(){e.changeMediaSelection(null)},disableRipple:!0},i.a.createElement(tt.a,null)))),i.a.createElement(i.a.Fragment,null,e.selectedMedia.isVideoVisible&&i.a.createElement(Xe,rt({},e,{open:n,setOpen:r})),e.selectedMedia.isAudioVisible&&i.a.createElement(Qe,{open:n,setOpen:r}))))}));function lt(e){return(lt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ct(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function st(e,t){return(st=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ut(e){return(ut=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ft=function(e){var t=o;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&st(t,e);var n,r=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ut(e);n=t?(n=ut(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),r=this;if(n&&("object"===lt(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==r)return r;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(o);function o(e){if(this instanceof o)return(e=r.call(this,e)).state={hasError:!1},e;throw new TypeError("Cannot call a class as a function")}return t=o,e=[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0}}}],(n=[{key:"componentDidCatch",value:function(e,t){console.log(e,t)}},{key:"render",value:function(){return this.state.hasError?i.a.createElement("h1",null,"Something went wrong."):this.props.children}}])&&ct(t.prototype,n),e&&ct(t,e),Object.defineProperty(t,"prototype",{writable:!1}),o}(i.a.Component),dt=(pe=n(984),n.n(pe)),pt=(Oe=n(855),n.n(Oe)),ht=(s=n(884),n.n(s)),mt=(pe=n(279),n.n(pe)),yt=(Oe=n(832),n.n(Oe)),gt=(s=n(999),n.n(s)),bt=(pe=n(1e3),n.n(pe)),vt=n(81),xt=Object(o.memo)(Object(a.c)((function(e){var t=[],n="",r="",o=[];return e.witnesses&&(t=e.witnesses.map((function(e){return e})),e.activeWitness&&(r=e.witnesses.findIndex((function(t){return t.id===e.activeWitness.id}))),t.sort((function(e,t){return e.isWorking?-1:t.isWorking?1:e.isBase?-1:t.isBase?1:0})),t=t.sort((function(e,t){return e.id-t.id}))),He()(t)&&!e.activeWitness?null:i.a.createElement(Me.a,{onChange:function(n){He()(t)||e.onSelectedWitness(t[n.target.value])},className:bt.a.selectVersion,value:r,label:"Version2",classes:{root:bt.a.selectEmpty,select:bt.a.selectOptions}},t.map((function(t,r){var a;return t.id===(null==(a=e.activeWitness)?void 0:a.id)&&o.push(bt.a.selected),n=t.source.name,t.isWorking&&(n="en"===e.intl.locale?"User"===e.user.name?"Working":"My Edition":"མཉམ་འབྲེལ་པར་མ།"),i.a.createElement("option",{key:"versionSelect2-".concat(r),value:r,className:bt.a.selectOptions},n)})))}))),wt=(Oe=n(1001),n.n(Oe));function Ot(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function St(e){var t=e.max,n=(e.min,e.initialvalue),r=void 0===(e=e.changeSize)?function(e){return console.log(e)}:e,a=(e=n/t*100,(e=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Ot(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ot(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(Object(o.useState)(e),2))[0]),l=e[1];e=yt()((function(e){r(Math.floor(parseInt(a/100*t)))}),500);return i.a.createElement("div",{className:wt.a.inputRanges},i.a.createElement("span",{style:{fontSize:13,top:"-5px"},onClick:function(){return r(n-2)}},"ཀ"),i.a.createElement("input",{type:"range",style:{width:"70%"},className:wt.a.inputRange,min:40,max:100,smooth:"yes",step:1,value:a,onChange:function(e){return l(e.target.value)},onMouseUp:e,onTouchEnd:e}),i.a.createElement("span",{style:{fontSize:18,top:"-10px"},onClick:function(){return r(n+2)}},"ཀ"))}var Et=n(837),Tt=(s=n(1010),n.n(s)),It=n(1069),jt=n(1086),At=n(804),Pt=n(806);function kt(e){return function(e){if(Array.isArray(e))return _t(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Rt(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ct(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||Rt(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Rt(e,t){if(e){if("string"==typeof e)return _t(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_t(e,t):void 0}}function _t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}pe=i.a.memo((function(e){var t=Object(o.useRef)(e.texts),n=(s=Ct(Object(o.useState)(t.current),2))[0],r=s[1],a=(s=Ct(Object(o.useState)(null),2))[0],l=s[1],c=e.onSelectedText,s=e.selectedText,f=(p=Ct(Object(o.useState)(!1),2))[0],d=p[1],p=null==s?void 0:s.name,h=(s=e.selectedText1,Object(o.useEffect)((function(){var e;""===a&&r(kt(t.current)),null!==a&&""!==a&&(e=t.current.filter((function(e){return e.name.includes(a)})),r(kt(e)))}),[a]),Object(o.useRef)(new Et.c({fixedHeight:!0,defaultHeight:40}))),m=[Tt.a.textlist],y=i.a.useCallback((function(e){var t=e.key,r=e.index,o=e.style,a=(e=e.parent,n[r]);return i.a.createElement(Et.b,{key:"optionvalues-".concat(t),cache:h.current,parent:e,columnIndex:0,rowIndex:r},i.a.createElement("div",{style:o,onClick:function(){d(!1),c(a)}},i.a.createElement(we.a,{sx:{overflow:"hidden",textOverflow:"ellipsis",width:"13rem",paddingLeft:2,fontSize:{lg:12,md:11,sm:10,xs:10},color:"text.primary"},component:"div"},i.a.createElement(ce.a,{noWrap:!0},Object(R.a)(a.name)))))}),[n]);return i.a.createElement(It.a,{onClickAway:function(){return d(!1)}},i.a.createElement("div",{style:{position:"relative",marginLeft:10}},i.a.createElement(jt.a,{onClick:function(){d((function(e){return!e})),!1===f&&m.push(Tt.a.open)},component:"div",variant:"outlined",sx:{overflow:"hidden",textOverflow:"ellipsis",width:"10rem",height:"100%",color:"text.primary"},disabled:null===s},i.a.createElement(ce.a,{noWrap:!0},p||"select Text here")),i.a.createElement(At.a,{in:f},i.a.createElement(we.a,{className:u()(m),sx:{position:"absolute",bgcolor:"heading.main",zIndex:1}},i.a.createElement(Pt.a,{onChange:function(e){e=e.target.value,l(e)},id:"standard-basic",label:"filter",variant:"standard",style:{width:"100%"}}),i.a.createElement(Et.a,null,(function(e){var t=e.width;e=e.height;return i.a.createElement(Et.d,{width:t,height:e,rowHeight:40,deferredMeasurementCache:h.current,rowCount:n.length,rowRenderer:y})}))))))}));var Bt=Object(t.connect)((function(e){var t=A.C(e),n=A.A(e,t),r=A.G(e),o=!1,i=e.data.texts;return{texts:i=0<t.length?null===n?(o=!0,[]):i.filter((function(e){return n.hasOwnProperty(e.id)})):i,selectedText1:Object(A.J)(e),selectedText:Object(A.K)(e),searchTerm:t,searchResults:n,selectedSearchResult:r,searching:o}}),(function(e){return{onSelectedText:function(t){e(j.Sc(t))}}}))(pe);function Wt(){return(Wt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Nt(e){return i.a.createElement("svg",Wt({viewBox:"0 0 512 512"},e),Lt)}var Lt=i.a.createElement("path",{d:"M507.73 109.1c-2.24-9.03-13.54-12.09-20.12-5.51l-74.36 74.36-67.88-11.31-11.31-67.88 74.36-74.36c6.62-6.62 3.43-17.9-5.66-20.16-47.38-11.74-99.55.91-136.58 37.93-39.64 39.64-50.55 97.1-34.05 147.2L18.74 402.76c-24.99 24.99-24.99 65.51 0 90.5 24.99 24.99 65.51 24.99 90.5 0l213.21-213.21c50.12 16.71 107.47 5.68 147.37-34.22 37.07-37.07 49.7-89.32 37.91-136.73zM64 472c-13.25 0-24-10.75-24-24 0-13.26 10.75-24 24-24s24 10.74 24 24c0 13.25-10.75 24-24 24z"}),Dt=(Oe=n(887),n.n(Oe)),Ht=n(813),zt=n(1063),Mt=n(1085);function qt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Vt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Vt(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Vt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ft(e){var t=qt(Object(o.useState)(!1),2),n=t[0],r=t[1],a=(t=qt(Object(Ie.a)("WindowTwoFont","Tibetan"),2))[0],l=t[1];return Object(o.useEffect)((function(){document.body.style.setProperty("--tibetan-fonts2",a)}),[]),i.a.createElement(It.a,{onClickAway:function(){return r(!1)}},i.a.createElement(we.a,{position:"relative"},i.a.createElement(qe.a,{onClick:function(){r((function(e){return!e}))},size:"small",variant:"text"},i.a.createElement(Nt,{height:20,width:20,fill:"currentColor"})),i.a.createElement(At.a,{in:n},i.a.createElement(Ht.a,{dense:!0,sx:{position:"absolute",right:0,zIndex:2,top:40,bgcolor:"heading.main"}},i.a.createElement(St,{max:20,min:7,initialvalue:e.textFontSize,changeSize:e.onChangedFontSize}),i.a.createElement(zt.a,null),i.a.createElement(Ut,{selectFont:function(e){l(e),document.body.style.setProperty("--tibetan-fonts2","".concat(e));var t=document.getElementById("updateList2"),n=1,o=setInterval((function(){t.click(),n++,console.log("ran"),4<n&&clearInterval(o)}),800);r(!1)},selectedfont:a}),i.a.createElement(Mt.a,{onClick:function(){return e.onExport()}},"Export Document",e.exportingWitness&&i.a.createElement(Dt.a,null))))))}var Ut=function(e){var t=e.selectFont,n=(e=e.selectedfont,c.d||[]);return i.a.createElement(we.a,{textAlign:"center"},i.a.createElement("span",null,"Font:")," ",i.a.createElement("select",{onChange:function(e){return t(e.target.value)},value:e},n.map((function(e,t){return i.a.createElement("option",{key:t+"-fontselect",value:e},e)}))))},Qt=(s=n(845),n.n(s));function Jt(e){return e=e.handleWindowSearch,i.a.createElement(qe.a,{size:"small",variant:"text",onClick:e},i.a.createElement(Qt.a,null))}pe=n(889);var $t=n.n(pe),Kt=(Oe=n(888),n.n(Oe));function Gt(e){return i.a.createElement(i.a.Fragment,{key:"right"},i.a.createElement(qe.a,{onClick:function(){e.changeShowTableContent(!e.showTableContent)}},e.showTableContent?i.a.createElement(Kt.a,null):i.a.createElement($t.a,null)))}var Yt=n(799),Zt=n(1092),Xt=(s=n(890),n.n(s));function en(e){e=e.isSecondWindowOpen;var t=Object(o.useCallback)((function(){var e=document.getElementById("updateList2");e&&e.click()}),[e]);return Object(o.useEffect)((function(){var e=setTimeout((function(){t()}),500);return function(){return clearTimeout(e)}}),[e]),i.a.createElement(qe.a,{variant:"text",size:"small",onClick:t},i.a.createElement(Xt.a,null))}function tn(e){return(tn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function nn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function rn(e,t){return(rn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function on(e){return(on=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var an=function(e){var t=r;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&rn(t,e);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=on(e);n=t?(n=on(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),r=this;if(n&&("object"===tn(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==r)return r;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(r);function r(e){if(this instanceof r)return n.call(this,e);throw new TypeError("Cannot call a class as a function")}return t=r,(e=[{key:"render",value:function(){var e=this,t=this.props.string,n=t,r=this.props.stringClass||"";if(this.props.searchTerm){var i=this.props.searchTerm,a=(new W.a).splitGraphemes(t),l=t.indexOf(i),c=l+i.length,s=0,u="";if(-1<l)for(var f=0;f<a.length;f++){var d=a[f];l<=s&&s<c&&(u+=d),s+=d.length}0<u.length&&(n=N()(t,u,(function(t,n){return o.createElement("span",{className:e.props.highlightClass,key:"highlight-".concat(n)},t)})))}return o.createElement("span",{className:r},n)}}])&&nn(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),r}(o.Component),ln=(pe=n(1011),n.n(pe));function cn(e){function t(e){var t=e.key,o=e.index,l=e.parent,s=(e=e.style,a[o]);return i.a.createElement(Et.b,{key:"listkeys2-".concat(t),cache:c.current,parent:l,columnIndex:0,rowIndex:o},i.a.createElement("div",{style:e},0<a.length&&i.a.createElement("div",{className:ln.a.searchListItem,onClick:function(){return n(s[0])}},i.a.createElement(an,{string:s[1],highlightClass:ln.a.highlight,searchTerm:r}))))}var n=e.handleListItemClick,r=e.searchValue,a=e.results,l=(e.selectedText,Object(o.useRef)()),c=Object(o.useRef)(new Et.c({fixedWidth:!0,defaultHeight:100}));return a?i.a.createElement(i.a.Fragment,null,i.a.createElement(Et.a,null,(function(e){var n=e.height;e=e.width;return i.a.createElement(Et.d,{ref:l,height:n,rowCount:null==a?void 0:a.length,rowHeight:c.current.rowHeight,deferredMeasurementCache:c.current,rowRenderer:t,width:e,overscanRowCount:1})}))):null}function sn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return un(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?un(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function un(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function fn(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function dn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fn(Object(n),!0).forEach((function(t){var r,o;r=e,o=n[t=t],t in r?Object.defineProperty(r,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[t]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var pn=Object(t.connect)((function(e){var t,n=A.lb(e),r=A.K(e),o=[],i=(r&&(o=A.hb(e,r.id),t=(t=A.O(e,r.id))?A.ob(e,t):A.sb(e,r.id)),A.cb(e)),a=Object(A.R)(e),l=A.D(e);return{witnesses:o,selectedText:r,selectedWitness:t,textListIsVisible:Object(A.db)(e),accountOverlayVisible:Object(A.e)(e),textFontSize:i,user:n,searchValue:l,showTableContent:a,searchResults:A.B(e,l)}}),null,(function(e,t,n){var r=t.dispatch,o=e.selectedText;return dn(dn(dn({},n),e),{},{navigationButtonClicked:function(){t.dispatch(j.gc(!e.textListIsVisible))},onSelectedWitness:function(e){r(j.Uc(null==o?void 0:o.id,null==e?void 0:e.id))},onChangedFontSize:function(e){r(j.fc(e))},changeShowTableContent:function(e){r(j.Zc(e))},searchChanged:function(e){r(j.cc(e))},changeSelectSyncId:function(e){r(j.Vb(e))}})}))((function(e){var t=(u=sn(Object(o.useState)(""),2))[0],n=u[1],r=(u=sn(Object(o.useState)(!1),2))[0],a=u[1],l=(u=sn(Object(o.useState)(!1),2))[0],c=u[1],s=Object(o.useRef)(),u=Object(o.useRef)(),f=i.a.useRef(yt()((function(t){e.searchChanged(t)}),1e3)).current,d=Object(o.useCallback)((function(e){e.preventDefault(),f(t),c(!0)}),[t]),p=Object(o.useCallback)((function(){a(!r)}),[r]),h=(Object(o.useEffect)((function(){!0===r&&s.current.focus(),!1===r&&f(null)}),[r]),mt()(e.searchResults)&&e.searchResults.hasOwnProperty(e.selectedText.id)),m=h?e.searchResults[e.selectedText.id].results:[];return i.a.createElement(Yt.a,{direction:"column",ref:u,spacing:1,sx:{paddingInline:{md:1,xs:0},paddingBlock:{md:1,xs:0},borderTop:{md:0,xs:"1px solid gray"},bgcolor:"heading.main",color:"text.primary"}},i.a.createElement(Yt.a,{direction:"row",spacing:1,justifyContent:"space-between"},i.a.createElement(we.a,{sx:{display:"flex",gap:{md:2,sx:0},flexDirection:{md:"row",xs:"column"}}},i.a.createElement(Bt,null),i.a.createElement(xt,{witnesses:e.witnesses,activeWitness:e.selectedWitness,onSelectedWitness:e.onSelectedWitness,user:e.user})),i.a.createElement(Zt.a,{size:"small","aria-label":"small button group",sx:{position:"relative",display:"flex",alignItems:"center",justifyContent:"center",height:"fit-content",width:"fit-content",border:function(e){return"1px solid ".concat(e.palette.divider)},borderRadius:1,bgcolor:"background.paper",color:"text.secondary","& svg":{m:1},"& hr":{mx:.5}},className:gt.a.button_group_menu},i.a.createElement(en,{isSecondWindowOpen:e.isSecondWindowOpen}),i.a.createElement(Jt,{handleWindowSearch:p}),i.a.createElement(Ft,{textFontSize:e.textFontSize,onChangedFontSize:e.onChangedFontSize,onExport:e.onExport}),i.a.createElement(Gt,{changeShowTableContent:e.changeShowTableContent,showTableContent:e.showTableContent}))),i.a.createElement(Ve.a,{in:r,mountOnEnter:!0,unmountOnExit:!0},i.a.createElement("form",{onSubmit:d},i.a.createElement(Yt.a,{direction:"row",spacing:2,position:"relative"},i.a.createElement(Pt.a,{hiddenLabel:!0,id:"filled-hidden-label-small",inputProps:{style:{height:25,padding:"0 14px"}},style:{height:25,flex:1},fullWidth:!0,inputRef:s,value:t,onChange:function(e){return n(e.target.value)}}),i.a.createElement(jt.a,{variant:"outlined",size:"small",onClick:d,style:{height:25}},"Search"),e.searchResults&&l&&i.a.createElement(we.a,{sx:((u="boxShadow")in(d={position:"absolute",top:35,right:0,zIndex:1,bgcolor:"heading.main",width:350,height:350,boxShadow:p=3,overflowX:"hidden"})?Object.defineProperty(d,u,{value:p,enumerable:!0,configurable:!0,writable:!0}):d[u]=p,d)},0===m.length&&i.a.createElement("p",null,"no such word present"),h&&0<m.length&&i.a.createElement(cn,{handleListItemClick:function(t){e.changeSelectSyncId(t)},searchValue:e.searchValue,results:m,selectedText:e.selectedText}),i.a.createElement(qe.a,{"aria-label":"closeButton",onClick:function(){c(!1),f(null),n("")},size:"small",sx:{right:15,top:0,position:"absolute"}},i.a.createElement(tt.a,{fontSize:"inherit"})))))))})),hn=n(148),mn=n(54);function yn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var gn=function(){function e(t,n){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.annotatedText=t,this.splitter=n,this._texts=null,this._textsId=null,this._textsFinalPositions=[]}var t,n;return t=e,(n=[{key:"texts",get:function(){if(!this.annotatedText)return[];if(!this._texts||this._textsId!==this.annotatedText.getUniqueId()){this._textsFinalPositions=[];var e=this.annotatedText.segmentedText,t=e.getText(),n=this.splitter(t).filter((function(e){return 0!==e}));if(0===n.length)return this._textsFinalPositions.push(t.length),[e];n[n.length-1]+1<t.length&&n.push(t.length-1);for(var r=e.segments,o=0,i=[],a=0;a<n.length;a++){var l=n[a],c=(l=e.indexOfSegmentAtPosition(l-1),void 0);c=a==n.length-1?r.slice(o):r.slice(o,l+1),c=new hn.a(c);i.push(c),o=l+1,0<=l&&(c=r[l],this._textsFinalPositions.push(c.end))}this._texts=i.filter((function(e){return 0<e.segments.length})),this._textsId=this.annotatedText.getUniqueId()}return this._texts||[]}},{key:"getTextsFinalPositions",value:function(){return this.texts,this._textsFinalPositions}},{key:"getTextIndexOfPosition",value:function(e){for(var t=this.getTextsFinalPositions(),n=0,r=null,o=0;o<t.length;o++){var i=t[o];if(n<=e&&e<=i){r=o;break}n=i}return null===r&&(console.warn("no index for position %d",e),r=t.length-1),r}}])&&yn(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),bn=n(285),vn=(Oe=n(1012),n.n(Oe)),xn=n(1071),wn=(s=n(11),n(797)),On=(pe=n(53),n(1093));function Sn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var En=Object(s.a)("div")((function(e){return Sn({position:"relative",borderRadius:(e=e.theme).shape.borderRadius,backgroundColor:Object(wn.a)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object(wn.a)(e.palette.common.white,.25)},marginLeft:0,width:"100%"},e.breakpoints.up("sm"),{marginLeft:e.spacing(1),width:"auto"})})),Tn=Object(s.a)("div")((function(e){return{padding:e.theme.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"}})),In=Object(s.a)(pe.c)((function(e){return{color:"inherit","& .MuiInputBase-input":Sn({padding:(e=e.theme).spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(e.spacing(4),")"),transition:e.transitions.create("width"),width:"100%"},e.breakpoints.up("sm"),{width:"0",cursor:"pointer","&:focus":{width:"20ch"}})}}));function jn(){var e=[{Id:1,Title:"chapter 1",segment_id:0},{Id:2,Title:"chapter 2",segment_id:400}];return e.length,i.a.createElement(we.a,{sx:{bgcolor:"heading.main",color:"text.primary",width:"100%",height:"100%",paddingInline:2}},i.a.createElement(On.a,{sx:{justifyContent:"space-between",paddingLeft:"0 !important",margin:0}},i.a.createElement(ce.a,{textTransform:"uppercase",component:"h6"},"Table Of Content"),i.a.createElement(En,null,i.a.createElement(Tn,null,i.a.createElement(Qt.a,null)),i.a.createElement(In,{placeholder:"Search…",inputProps:{"aria-label":"search"}}))),i.a.createElement(we.a,null,e.map((function(e,t){return i.a.createElement(we.a,{key:"TableContent-"+t,sx:{cursor:"pointer",width:"fit-content","&:hover":{fontWeight:"bold"}}},e.Title)}))))}Oe=n(1013);var An=n.n(Oe),Pn=(Oe=n(1014),n.n(Oe));var kn=i.a.memo((function(){return i.a.createElement("div",{className:An.a.placeholder},i.a.createElement(Pn.a,{color:"inherit"}))})),Cn=(Oe=n(891),n.n(Oe)),Rn=(Oe=(n(82),n(1015)),n.n(Oe)),_n=n(43),Bn=n(24);Oe=n(1070);function Wn(e){return(Wn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Nn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Ln(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ln(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ln(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Dn(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function Hn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Dn(Object(n),!0).forEach((function(t){var r,o;r=e,o=n[t=t],t in r?Object.defineProperty(r,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[t]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Dn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function zn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Mn(e,t){return(Mn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function qn(e){return(qn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Vn=function(e){var t=r;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Mn(t,e);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=qn(e);n=t?(n=qn(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),r=this;if(n&&("object"===Wn(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==r)return r;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(r);function r(e){var t;if(this instanceof r)return(t=n.call(this,e)).state={segmentedText:e.segmentedText},t.textAlignmentById=t.props.textAlignmentById,t._renderedSegments=null,t._renderedHtml=null,t;throw new TypeError("Cannot call a class as a function")}return t=r,(e=[{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.setState((function(t,n){return Hn(Hn({},t),{},{segmentedText:e.segmentedText})}))}},{key:"selectedElement",value:function(e){var t=[],n=[],r=document.getSelection();if(null!=e&&e.id.includes("s2_")&&this.props.condition){var o=parseInt(e.id.replace("s2_","")),i=(this.props.changeSyncIdOnClick(o),this.props.changeScrollToId({id:"ua",from:"ua"}),parseInt(e.id.replace("s2_",""))),a=this.textAlignmentById.find((function(e){return i>=e.TStart&&i<e.TEnd}));if(a){for(var l=a.start;l<a.end;l++)t.push(l);for(var c=a.TStart;c<a.TEnd;c++)n.push(c);this.props.changeSelectedRange({source:t,target:n})}}r&&"Range"===r.type||(this.props.selectedSegmentId(e.id),e.id||this.props.changeSelectedRange({source:[],target:[]}))}},{key:"generateHtml",value:function(e,t){var n=t.segmentedText.segments,r='<p class="'+Rn.a.textLine+'">';if(0===n.length)return{__html:r};for(var o=n[n.length-1].end+1,i=Rn.a.highlight,a=Rn.a.activeHighlight,l=null,c=0;c<n.length;c++){var s=n[c],f="",d=[];if(s.start===o)break;var p,h=null,m=(0!==s.length&&(h="s2_"+s.start),null!=(p=e.selectedTargetRange)&&p.includes(s.start)&&e.condition&&(p="light"===e.theme.palette.mode?Rn.a.selectedRangelight:Rn.a.selectedRangeDark,d.push(p)),0<d.length&&(f='class="'+u.a.apply(void 0,d)+'"'),s.text);if(e.searchStringPositions){var y=s.start,g=y,b=(m="",i);e.selectedSearchResult&&e.selectedSearchResult.start<=g&&e.selectedSearchResult.start+e.selectedSearchResult.length>g&&(b=a);for(var v=0;v<s.text.length;v++){var x,w,O,S=s.text.charAt(v);g=y+v;l?((x=Nn(l,2))[0],0===v&&(m+='<span class="'+b+'">'),g===x[1]?(m+=S+"</span>",l=null):v===s.text.length-1?m+=S+"</span>":m+=S):g in e.searchStringPositions?(w=(x=Nn(e.searchStringPositions[g],2))[0],O=x[1],m+='<span class="'+b+'">'+S,v!==s.text.length-1&&g!==O||(m+="</span>"),g<O&&(l=[w,O])):m+=S}}r+="<span id="+h+" key="+h+" "+f+">"+m+"</span>"}return this._renderedSegments=n,{__html:r+="</p>"}}},{key:"shouldComponentUpdate",value:function(e,t){return t=this.generateHtml(e,t),this.props.fontSize!==e.fontSize||(!this._renderedHtml||t.__html!==this._renderedHtml.__html)&&this._renderedHtml!==t&&(this._renderedHtml=t,!0)}},{key:"componentDidUpdate",value:function(){this.textAlignmentById=this.props.textAlignmentById}},{key:"render",value:function(){var e=this,t=[Rn.a.text],n=(0===this.props.row&&t.push(Rn.a.textFirstRow),this._renderedHtml||this.generateHtml(this.props,this.state));return this._renderedHtml||(this._renderedHtml=n),i.a.createElement("div",{className:Rn.a.textContainer},i.a.createElement("div",{className:u.a.apply(void 0,t),dangerouslySetInnerHTML:n,onClick:function(t){return e.selectedElement(t.target)},style:{fontSize:this.props.fontSize,fontFamily:"var(--tibetan-fonts2)"}}))}}])&&zn(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),r}(i.a.Component),Fn=Object(Oe.a)(Vn),Un=(Vn=n(1016),n.n(Vn));function Qn(e){return(Qn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Jn(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function $n(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Jn(Object(n),!0).forEach((function(t){Kn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Jn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Kn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Gn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Yn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Yn(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Yn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Zn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Xn(e,t){return(Xn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function er(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function tr(e){return(tr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var nr={},rr=function(e){var t=r;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Xn(t,e);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=tr(e);n=t?(n=tr(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),r=this;if(n&&("object"===Qn(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return er(r)}}(r);function r(e){var t;if(this instanceof r)return(t=n.call(this,e)).textAlignmentById=[],t.changeScrollToId=e.changeScrollToId,t.condition=e.condition,t.list=null,t.splitText=null,t.cache=new k.b({fixedWidth:!0}),t.rowRenderer=t.rowRenderer.bind(er(t)),t.activeSelection=null,t.selectedNodes=null,t._mouseDown=!1,t._activeWitness=null,t._didSetInitialScrollPosition=!1,t._modifyingSelection=!1,t.imageHeight=null,t.imageWidth=null,t.calculatedImageHeight=null,t.selectedWindow=t.props.selectedWindow,t.scrollEvent=t.scrollEvent.bind(er(t)),t.scrollTop=0,t;throw new TypeError("Cannot call a class as a function")}return t=r,(e=[{key:"scrollEvent",value:function(e){if(1===this.selectedWindow)return null;var t;2===this.selectedWindow&&(t=[],this.textAlignmentById.map((function(e){var n=document.getElementById("s2_"+e.TStart);n&&90<n.getBoundingClientRect().top&&t.push({id:e.id,start:e.start,TStart:e.TStart,end:e.end,TEnd:e.TEnd})})),He()(t)||2===this.selectedWindow&&this.debouncedScroll(t))}},{key:"selectedListRow",value:function(e){var t=null;return e.activeAnnotation?e.splitText.getTextIndexOfPosition(e.activeAnnotation.start):t}},{key:"handleSelection",value:function(e){this._modifyingSelection?(e.stopPropagation(),this._modifyingSelection=!1):(this.activeSelection=document.getSelection(),this._mouseDown||this.mouseUp())}},{key:"mouseDown",value:function(){this._mouseDown=!0}},{key:"mouseUp",value:function(){this._mouseDown=!1,this.activeSelection&&(this.activeSelection=null)}},{key:"getNodeSegmentSpan",value:function(e){for(var t=e,n=null,r=/^(i|s|ds)_/;!n&&t.parentNode;)t instanceof Element&&r.test(t.id)&&(n=t),t=t.parentNode;return n}},{key:"updateList",value:function(){var e=!(0<arguments.length&&void 0!==arguments[0])||arguments[0],t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;if(this.props.showImages&&!this.calculatedImageHeight&&this.imageHeight&&this.imageWidth&&(this.calculatedImageHeight=this.calculateImageHeight()),this.list){var n=this.list;if(e)if(null!==t)if(Array.isArray(t)){if(Array.isArray(t))for(var r=0;r<t.length;r++){var o=t[r];this.cache.clear(o)}}else this.cache.clear(t);else this.cache.clearAll(),n.measureAllRows(),n.recomputeRowHeights(0);n.forceUpdateGrid()}}},{key:"processProps",value:function(e){var t=this,n=!1;if((o=((!this.props.selectedWitness||e.selectedWitness&&e.selectedWitness.id!==this.props.selectedWitness.id)&&(this._didSetInitialScrollPosition=!(n=!0)),!e.selectedSearchResult||this.props.selectedSearchResult&&e.selectedSearchResult.start===this.props.selectedSearchResult.start&&e.selectedSearchResult.textId===this.props.selectedSearchResult.textId||(console.log("resetting scroll position from search result"),this._didSetInitialScrollPosition=!1),this.getControlsMeasurements(e)))&&(this.selectedTextIndex=o.selectedTextIndex,this.firstSelectedSegment=o.firstSelectedSegment,this.splitTextRect=o.splitTextRect,this.selectedElementId=o.selectedElementId,this.selectedElementIds=o.selectedElementIds),e.textListVisible!==this.textListVisible||e.editMenuVisible!==this.editMenuVisible)setTimeout((function(){t.textListVisible=e.textListVisible,t.editMenuVisible=e.editMenuVisible,t.updateList(!0)}),500);else if(n)this.updateList(!0);else if(this.pageBreaksChanged(this.props,e)){var r=null,o=this.selectedListRow(this.props);n=this.selectedListRow(e);if(o&&n){r=[];for(var i=n<o?n:o,a=this.props.splitText.texts.length;i<a;i++)r.push(i)}this.updateList(!0,r)}else if(this.lineBreaksChanges(this.props,e)){n=(n=this.selectedListRow(e))||this.selectedListRow(this.props),o=this.props.splitText.texts;var l=[];if(null!==n){for(var c=n,s=o.length;c<s;c++)l.push(c);this.updateList(!0,l)}}else this.props.fontSize!==e.fontSize?this.updateList(!0):this.props.activeAnnotation&&e.activeAnnotation&&this.annotationsInSameLocation(this.props.activeAnnotation,e.activeAnnotation)?this.updateList(!0,this.selectedListRow(e)):this.updateList(this.shouldResetListCache(this.props,e))}},{key:"pageBreaksChanged",value:function(e,t){return e=e.splitText.getTextsFinalPositions(),t=t.splitText.getTextsFinalPositions(),e.length!==t.length||JSON.stringify(e)!==JSON.stringify(t)}},{key:"lineBreaksChanges",value:function(e,t){var n=e.activeAnnotation,r=t.activeAnnotation,o=!1;return n&&n.isType(ANNOTATION_TYPES.lineBreak)&&t.activeAnnotations&&!t.activeAnnotations.hasOwnProperty(n.uniqueId)&&(o=!0),!(!(r&&r.isType(ANNOTATION_TYPES.lineBreak)&&e.activeAnnotations)||e.activeAnnotations.hasOwnProperty(r.uniqueId))||o}},{key:"shouldResetListCache",value:function(e,t){var n=!1;return!(e.showImages===t.showImages&&!this.pageBreaksChanged(e,t))||n}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.processProps(e)}},{key:"componentDidMount",value:function(){var e=this;this.resizeHandler=Cn()((function(){e.calculatedImageHeight=null,e.updateList()}),500).bind(this),window.addEventListener("resize",this.resizeHandler),this.debouncedScroll=yt()((function(t){e.changeScrollToId({id:t[0].TStart,from:2})}),1e3),this.selectionHandler=yt()((function(t){e.handleSelection(t)}),200).bind(this),document.addEventListener("selectionchange",this.selectionHandler),document.addEventListener("mousedown",this.mouseDown.bind(this),!0),document.addEventListener("mouseup",this.mouseUp.bind(this),!0),this.processProps(this.props),this.componentDidUpdate(),this.splitText.style.scrollBehavior="smooth",this.timer=setTimeout((function(){e.resizeHandler()}),2e3)}},{key:"scrollToIndex",value:function(e){var t=this.list;setTimeout((function(){t.scrollToRow(e),setTimeout((function(){t.scrollToPosition(t.props.scrollTop-300)}),0)}),100)}},{key:"componentDidUpdate",value:function(e,t){var n,r=this,o=this.props.scrollToId,i=(this.targetId2=this.props.syncIdOnClick,this.selectedWindow=this.props.selectedWindow,this.props.syncIdOnSearch||null),a=(this.list,this.props.searchResults),l=this.props.textAlignment;this.condition=this.props.condition,((null==e?void 0:e.searchResults)!==(null==(n=this.props)?void 0:n.searchResults)||(null==e?void 0:e.syncIdOnSearch)!==(null==(n=this.props)?void 0:n.syncIdOnSearch))&&a&&i&&(e=this.props.splitText.getTextIndexOfPosition(i),this.scrollToIndex(e)),1===this.selectedWindow&&1===o.from&&this.condition&&null!==o.id&&(this.textAlignmentById=this.props.textAlignmentById||[],l&&null!==(a=null==(n=this.textAlignmentById.find((function(e){return e.start===o.id})))?void 0:n.TStart)&&(i=this.props.splitText.getTextIndexOfPosition(a),this.scrollToIndex(i))),this.targetId2&&null===o.from&&1===this.selectedWindow&&null===o.id&&this.condition&&(a=null==(e=l.alignment.find((function(e){return r.targetId2>=e.source_segment.start&&r.targetId2<e.source_segment.end})))||null==(n=e.target_segment)?void 0:n.start,i=this.props.splitText.getTextIndexOfPosition(a),this.scrollToIndex(i))}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousedown",this),document.removeEventListener("mouseup",this),window.removeEventListener("resize",this.resizeHandler),document.removeEventListener("selectionchange",this.selectionHandler),clearTimeout(this.timer)}},{key:"getSelectedTextIndex",value:function(){var e,t=0,n=null;return this.props.activeAnnotation?n=Gn(this.props.splitText.annotatedText.getPositionOfAnnotation(this.props.activeAnnotation),1)[0]:this.props.selectedSearchResult&&((e=this.props.splitText.annotatedText.segmentAtOriginalPosition(this.props.selectedSearchResult.start))instanceof _n.a?n=e.start:"number"==typeof e&&(n=e)),n?this.props.splitText.getTextIndexOfPosition(n):t}},{key:"getControlsMeasurements",value:function(e){if(!this.splitText)return null;var t=this.splitText,n=null,r=null,o=null,i=null,a=null,l=[],c=0;if(e.activeAnnotation){var s=e.activeAnnotation;if(null===(c=Gn(e.splitText.annotatedText.getPositionOfAnnotation(s),1)[0]))return console.warn("No startPos in getControlsMeasurements"),null;s.type===ANNOTATION_TYPES.pageBreak&&--c,s.type===ANNOTATION_TYPES.lineBreak&&--c;var u=c+s.length;0<s.length&&--u,n=e.splitText.getTextIndexOfPosition(u),i=t.getBoundingClientRect()}var f=[];if(e.selectedAnnotatedSegments&&0<e.selectedAnnotatedSegments.length){f=e.selectedAnnotatedSegments;for(var d=0;d<f.length;d++){var p=f[d];if(null===r&&p instanceof _n.a){r=p;break}}r&&(a=0===r.length&&e.activeAnnotation&&e.activeAnnotation.isInsertion?(o=idForInsertion(r),idForInsertion):(o=idForSegment(r),idForSegment))}else e.activeAnnotation&&(e.activeAnnotation.isDeletion?(s=new _n.a(c,""),o=idForDeletedSegment(s),a=idForDeletedSegment,f=[r=s]):e.activeAnnotation.isInsertion?(u=Gn(e.splitText.annotatedText.getPositionOfAnnotation(e.activeAnnotation),1)[0])&&(t=new _n.a(u,""),o=idForInsertion(t),a=idForInsertion,f=[r=t]):e.activeAnnotation.type===ANNOTATION_TYPES.pageBreak?(s=new _n.a(c+1,""),u=new _n.a(c,""),f=[r=s],l=[o=idForPageBreak(u)]):e.activeAnnotation.type===ANNOTATION_TYPES.lineBreak&&(t=new _n.a(c+1,""),s=new _n.a(c,""),f=[r=t],l=[o=idForLineBreak(s)]));if(a)for(var h=0;h<f.length;h++){var m=f[h];m instanceof _n.a&&(m=a(m),l.push(m))}return null!=n&&r&&o&&i?{selectedTextIndex:n,firstSelectedSegment:r,selectedElementId:o,splitTextRect:i,selectedElementIds:l}:null}},{key:"render",value:function(){var e=this,t=this.props,n=this.rowRenderer,r=this.cache,i=t.selectedWitness?t.selectedWitness.id:0;return o.createElement("div",{className:Un.a.splitText2,ref:function(t){return e.splitText=t},key:i,style:{cursor:"pointer"}},o.createElement("button",{id:"updateList2",style:{display:"none"},onClick:function(){return e.updateList(!0)}}),o.createElement(P.a,{disableWidth:!0},(function(i){return i=i.height,o.createElement(Et.d,{ref:function(t){return e.list=t},height:i,rowCount:t.splitText.texts.length,rowHeight:r.rowHeight,rowRenderer:n,width:1,overscanRowCount:1,deferredMeasurementCache:r,onScroll:e.scrollEvent,scrollToAlignment:"start",containerStyle:{width:"100%",maxWidth:"100%"},style:{width:"100%"}})})))}},{key:"getStringPositions",value:function(e,t,n){var r=this.props.splitText.annotatedText.getUniqueId();if((nr=nr.hasOwnProperty(r)?nr:Kn({},r,{}))[r].hasOwnProperty(t)||(nr[r]=Kn({},t,{})),nr[r][t].hasOwnProperty(n))return nr[r][t][n];for(var o=new W.a,i=e.getText(),a=e.segments[0].start,l=[],c=i.indexOf(t);-1!==c;)l.push(c),c=i.indexOf(t,c+1);var s={};if(0<l.length)for(var u=o.splitGraphemes(i),f=0,d=null,p=0;p<u.length;p++){var h=u[p],m=f+(h.length-1);null!==d?d+(t.length-1)<=m&&(s[d+a]=[d+a,m+a],d=null):-1!==l.indexOf(f)?t.length===h.length?s[f+a]=[f+a,m+a]:t.length>h.length&&(d=f):d=null,f+=h.length}return nr[r][t][n]=s}},{key:"rowRenderer",value:function(e){var t=e.key,n=e.index,r=e.parent,i=(e=e.style,this.props),a=this.cache,l={},c=((c=this.props.searchValue)&&0<c.length&&i.splitText&&(l=this.getStringPositions(i.splitText.texts[n],c,n)),$n($n({},e),{},{height:e.height+10}));return o.createElement(k.a,{columnIndex:0,key:t,parent:r,rowIndex:n,cache:a},o.createElement("div",{key:t,style:c,ref:this.splitTextRef,id:"index2_".concat(n),className:Un.a.splitTextRow},o.createElement("div",{className:Un.a.splitTextRowContent},o.createElement(Fn,{segmentedText:i.splitText.texts[n],row:n,selectedSegmentId:i.selectedSegmentId,searchStringPositions:l,textAlignmentById:i.textAlignmentById,fontSize:i.fontSize,isPanelLinked:this.props.isPanelLinked,selectedSourceRange:i.selectedSourceRange,selectedTargetRange:i.selectedTargetRange,changeSelectedRange:i.changeSelectedRange,changeSyncIdOnClick:this.props.changeSyncIdOnClick,changeScrollToId:this.props.changeScrollToId,condition:this.condition}))))}}])&&Zn(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),r}(o.PureComponent);Vn=n(139);var or=n.n(Vn),ir=n(140);function ar(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function lr(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function cr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?lr(Object(n),!0).forEach((function(t){var r,o;r=e,o=n[t=t],t in r?Object.defineProperty(r,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[t]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var sr,ur,fr,dr,pr={},hr={},mr=function(e,t){if(!(t=A.ob(e,t)))return console.warn("no witness"),null;var n=t.text,r=A.sb(e,n.id);n=A.o(e,n.id);return r&&n?(e=(n=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ar(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ar(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(function(e,t,n){if(hr.hasOwnProperty(t.id))return[hr[t.id].appliedAnnotations,hr[t.id].allAnnotations];t.text;var r=A.m(e,n.id),o=function(e,t,n){if(!A.vb(e,t))return{};var r=A.f(e,t);if(!r)return{};var o,i,a={};for(o in r)!r.hasOwnProperty(o)||(i=A.k(e,n,o))&&(a[i.unique_id]=i);return yr(e,a)}(e,t.id,n.id),i=null,a={};if(t.id!==n.id){i=A.y(e,t.id);var l,c,s={};for(l in r)r.hasOwnProperty(l)&&((c=r[l]).creator_witness!==t.id||i.hasOwnProperty(c.unique_id)?c.creator_witness===t.id&&(a[c.unique_id]=c):s[c.unique_id]=c);o=cr(cr({},yr(e,s)),o),r=s}return n=yr(e,r),a=yr(e,a),0<Object.keys(a).length&&(n=cr(cr({},n),a)),n=cr(cr({},o),n),n=or()(n,(function(e,n){return!(t&&e.type===Bn.a.lineBreak&&e.creatorWitness.id!==t.id)})),A.ub(e,t.id)&&A.vb(e,t.id)&&(hr[t.id]={appliedAnnotations:o,allAnnotations:n}),[o,n]}(e,t,r),2))[0],n[1],n=function(e){return gr[e.id]||(gr[e.id]=Object(ir.a)(e.content||"")),gr[e.id]}(r),new mn.g(n,Object.values(e),(function(e){return Object(ir.a)(e).segments}),r,t)):null},yr=function(e,t){var n,r,o={};for(n in t)t.hasOwnProperty(n)&&(r=t[n],(r=A.b(e,r))&&(o[n]=r));return o},gr={};function br(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function vr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?br(Object(n),!0).forEach((function(t){var r,o;r=e,o=n[t=t],t in r?Object.defineProperty(r,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[t]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):br(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function xr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||wr(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function wr(e,t){if(e){if("string"==typeof e)return Or(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Or(e,t):void 0}}function Or(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Sr(e){return[e.start,e.length].join("-")}Vn=Object(t.connect)((function(e){var t,n={},r=A.cb(e),o=A.K(e),i={},a=(o&&(t=A.sb(e,o.id)||{},(a=A.O(e,o.id))&&(n=A.ob(e,a)),He()(n)&&He()(t),n=t),t=function(e,t){var n=null;return t&&(n=mr(e,t))&&(pr[t]=n),n}(e,null==(a=n)?void 0:a.id),e.data2.loadingWitnesses),l=(t&&(i=function(e,t){if(e===sr&&t===ur&&e.version===dr)return fr;for(var n={},r={},o=0;o<t.length;o++)!function(o){var i=t[o],a=(o=xr(e.getPositionOfAnnotation(i),2))[0],l=o[1];if(null!=a)if(0===l){if(i.isInsertion){if(o=Sr(i),o=r[o])return o.map((function(e){return n[e].push(i)}));a=INSERTION_KEY+a}i.isDeletion&&0<i.length&&(a=DELETION_KEY+a),i.type===ANNOTATION_TYPES.pageBreak&&(a=PAGE_BREAK_KEY+a),i.type===ANNOTATION_TYPES.lineBreak&&(a=LINE_BREAK_KEY+a),void 0===n[a]&&(n[a]=[]),-1===n[a].indexOf(i)&&n[a].push(i)}else{for(var c=[],s=a;s<a+l;s++)void 0===n[s]&&(n[s]=[]),-1===n[s].indexOf(i)&&n[s].push(i),c.push(s);i.isInsertion&&(o=Sr(i),r[o]=c)}}(o);return ur=t,fr=n,dr=(sr=e).version,n}(t,Object.values([]))),A.yb(e)),c=A.z(e),s=A.T(e),u=A.Z(e),f=A.P(e),d=A.D(e),p=A.zb(e),h=A.p(e);return{text:o,textFontSize:r,annotatedText:t,selectedWitness:n,loading:a,annotationPositions:i,imageData:Object(A.s)(e),selectedImage:Object(A.E)(e),isImagePortrait:Object(A.xb)(e),scrollToId:c,syncIdOnClick:s,textAlignment:u,textAlignmentById:A.ab(e),selectedWindow:f,selectedSourceRange:Object(A.H)(e),selectedTargetRange:Object(A.I)(e),showTableContent:A.R(e),searchResults:Object(A.B)(e,d),searchValue:d,syncIdOnSearch:A.V(e),condition:h&&l&&p}}),null,(function(e,t,n){function r(e){return-1!==e.indexOf("ds2_")}function o(e){return-1!==e.indexOf("i2_")}function i(e){return!o(e)&&r(e)?e.substr(3):e.substr(2)}var a=e.annotatedText,l=e.annotationPositions,c=t.dispatch;return vr(vr(vr({},n),e),{},{onChangedFontSize:function(e){c(j.ec(e))},didSelectSegmentIds:function(t){if(0!==t.length){var n,c=[],s=[],u=function(e,t){var n,r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=wr(e))||t&&e&&"number"==typeof e.length)return r&&(e=r),n=0,{s:t=function(){},n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,a=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){a=!0,o=e},f:function(){try{i||null==r.return||r.return()}finally{if(a)throw o}}}}(t);try{for(u.s();!(n=u.n()).done;){var f,d,p,h=n.value;r(h)||o(h)||(f=i(h),d=a.segmentedText.segmentAtPosition(f),s.push(d),(p=l[d.start])&&(c=c.concat(p)))}}catch(t){u.e(t)}finally{u.f()}c=pt()(c,(function(e,t){return e.toString()==t.toString()}));var m,y=ht()(c,a.annotations,(function(e,t){return e.toString()==t.toString()})),g=getSegmentsRange(s,y,c,e.annotatedText);g?(m=a.getBaseAnnotation(g.start,g.length),g.annotation||0<y.length&&(y=a.segmentedText.segmentsInRange(g.start,g.length).reduce((function(e,t){return e+t.text}),""),e.selectedWitness||console.log("no stateProps.selectedWitness: %o",e.selectedWitness),new Annotation(WORKING_VERSION_ANNOTATION_ID,getTextWorkingWitness(e.text),m.start,m.length,y,ANNOTATION_TYPES.variant,e.selectedWitness,e.user))):console.warn("No range for selected segment ids: %o",t)}},changeScrollToId:function(e){return c(j.Qb(e))},changeSyncIdOnClick:function(e){c(j.Tb(e))},changeSelectedWindow:function(e){c(j.Sb(e))},changeSelectedRange:function(e){c(j.Rb(e))},changeShowTableContent:function(e){c(j.Zc(e))},selectedSegmentId:function(t){var n=i(t),a=n;o(t)?a=INSERTION_KEY+n:r(t)?a=DELETION_KEY+n:-1!==t.indexOf("p2_")?a=PAGE_BREAK_KEY+n:-1!==t.indexOf("l2_")&&(a=LINE_BREAK_KEY+n),l[a],e.activeAnnotation&&e.activeAnnotation&&(t=j.ac(null),c(t))}})}))((function(e){var t=Object(o.useRef)(),n={name:""};function r(){n.name&&e.changeSelectedWindow(2)}e.text&&(n=e.text),Object(o.useEffect)((function(){var e=t.current;return e.addEventListener("mouseenter",r),function(){e.removeEventListener("mouseenter",r)}}),[]);var a=null,l=e.selectedWindow,c=[e.annotatedText&&e.text&&!e.loading?(c=e.paginated?positionSplitter(e.pageBreaks):Object(bn.a)(800,/^།[\s]+(?!།[\s]+)/,2,5),a=new gn(e.annotatedText,c),i.a.createElement(rr,{splitText:a,limitWidth:!1,selectedSegmentId:e.selectedSegmentId,annotationPositions:e.annotationPositions,selectedAnnotatedSegments:null==e?void 0:e.selectedAnnotatedSegments,selectedWitness:e.selectedWitness,key:12,fontSize:e.textFontSize,scrollToId:e.scrollToId,syncIdOnClick:e.syncIdOnClick,textAlignment:e.textAlignment,textAlignmentById:e.textAlignmentById,isPanelLinked:e.isPanelLinked,changeScrollToId:e.changeScrollToId,changeSyncIdOnClick:e.changeSyncIdOnClick,selectedWindow:l,selectedSourceRange:e.selectedSourceRange,selectedTargetRange:e.selectedTargetRange,changeSelectedRange:e.changeSelectedRange,searchResults:e.searchResults,searchValue:e.searchValue,selectedText:e.text,syncIdOnSearch:e.syncIdOnSearch,condition:e.condition})):i.a.createElement("div",{key:Math.random()},i.a.createElement(kn,null))];return ze.a.ThirdWindowHeight,i.a.createElement(we.a,{ref:t,className:vn.a.textDetail2,sx:{height:"100%",flex:1,bgcolor:"navbar.main",color:"texts.main"}},i.a.createElement(pn,null),i.a.createElement(zt.a,null),i.a.createElement(B.a,{loaded:!e.loading}),i.a.createElement(we.a,{style:{display:"flex",height:"100%",width:"100%",position:"relative"}},i.a.createElement(we.a,{style:{flex:1},className:u()(vn.a.textContainer2,De.a.flex)},e.loading?i.a.createElement("div",null):c),i.a.createElement(xn.a,{direction:"left",in:e.showTableContent,container:t.current,unmountOnExit:!0,mountOnEnter:!0},i.a.createElement(we.a,{sx:{position:"absolute",height:"100%",minWidth:"50%",right:0}},i.a.createElement(jn,null)))))}));var Er=i.a.memo(Vn),Tr=(Vn=n(1017),n.n(Vn)),Ir=n(116),jr=n(117),Ar=(Vn=n(892),n.n(Vn)),Pr=(Vn=n(893),n.n(Vn));function kr(){return(kr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Cr(e){return i.a.createElement("svg",kr({viewBox:"0 0 24 24"},e),Rr,_r)}var Rr=i.a.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),_r=i.a.createElement("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"});function Br(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Wr(e){(t=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Br(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Br(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(Object(o.useState)(null),2))[0],t[1];var t=i.a.createElement("p",null,"<",i.a.createElement(m.a,{id:"annotation.delete"}),">"),n=(""!==(n=e.annotationData.content).trim()&&(250<n.length&&(n=n.substr(0,250)+"…"),t=i.a.createElement("p",null,n)),[Pr.a.annotationDetail]);e.isActive&&n.push(Pr.a.active),n=u.a.apply(void 0,n);return i.a.createElement("div",{className:n,onClick:e.selectAnnotationHandler},i.a.createElement("div",{className:Pr.a.annotationHeader},e.isActive&&i.a.createElement("div",{className:Pr.a.activeIcon},i.a.createElement(Cr,{style:{fill:f.a.activeButton},width:15,height:15})),i.a.createElement("h3",null,e.annotationData.name),e.isLoggedIn&&e.isActive&&i.a.createElement("button",{style:{display:"none"},className:Pr.a.edit,onClick:e.editAnnotationHandler,id:"editBtn"})),!e.isWorkingSection&&t)}function Nr(e){var t=e.annotationData.content,n=[Pr.a.annotationDetail],r=null;e.isActive&&n.push(Pr.a.active),n=u.a.apply(void 0,n);return i.a.createElement("div",{className:n},i.a.createElement("h3",null,e.annotationData.name),i.a.createElement("div",{className:Pr.a.editing},i.a.createElement("textarea",{defaultValue:t,autoFocus:!0,onInput:function(e){r.style.height="5px",r.style.height=r.scrollHeight+"px"},ref:function(e){return r=e}}),i.a.createElement("div",{className:Pr.a.actionButtons},i.a.createElement("div",{className:Pr.a.save,onClick:function(){r&&e.saveAnnotationHandler(r.value)}},i.a.createElement(m.a,{id:"annotation.save"})),i.a.createElement("div",{className:Pr.a.cancel,onClick:e.cancelAnnotationHandler},i.a.createElement(m.a,{id:"annotation.cancel"})))))}function Lr(e){return i.a.createElement("div",{className:zr.a.button,title:e.title,onClick:e.onClick},"+")}Vn=n(833);var Dr=n.n(Vn),Hr=(Vn=(n(75),n(1027)),n.n(Vn)),zr=(Vn=n(1028),n.n(Vn));function Mr(e){return(Mr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Vr(e,t){return(Vr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Fr(e){return(Fr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Vn=function(e){var t=r;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Vr(t,e);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Fr(e);n=t?(n=Fr(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),r=this;if(n&&("object"===Mr(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==r)return r;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(r);function r(){var e=this,t=r;if(e instanceof t)return n.apply(this,arguments);throw new TypeError("Cannot call a class as a function")}return t=r,(e=[{key:"render",value:function(){var e,t=null;return this.props.buttonOnClick&&(e=this.props.buttonTitleId?this.props.intl.formatMessage({id:this.props.buttonTitleId}):"",t=i.a.createElement(Lr,{title:e,onClick:this.props.buttonOnClick})),i.a.createElement("h3",{className:Hr.a.heading},i.a.createElement("span",{className:Hr.a.title},i.a.createElement(m.a,{id:this.props.titleId})),t&&i.a.createElement("div",{className:Hr.a.button},t))}}])&&qr(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),r}(i.a.Component),Object(a.c)(Vn),Vn=n(1029);var Ur=n.n(Vn),Qr=(Vn=n(836),n.n(Vn));function Jr(e){return(Jr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Kr(e,t){return(Kr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Gr(e){return(Gr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Yr=function(e){var t=r;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Kr(t,e);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Gr(e);n=t?(n=Gr(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),r=this;if(n&&("object"===Jr(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==r)return r;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(r);function r(e){var t;if(this instanceof r)return(t=n.call(this,e)).state={content:e.note.content},t;throw new TypeError("Cannot call a class as a function")}return t=r,(e=[{key:"save",value:function(){var e=this.textarea?this.textarea.value:"";this.props.saveNote(this.props.note,e)}},{key:"cancel",value:function(){this.props.cancel()}},{key:"handleChange",value:function(e){var t=e.target instanceof HTMLTextAreaElement?e.target.value:"";this.setState((function(e,n){return{content:t}}))}},{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:Ur.a.editorContainer},i.a.createElement("textarea",{className:Ur.a.textEditor,ref:function(t){return e.textarea=t},value:this.state.content,onChange:this.handleChange.bind(this)}),i.a.createElement("div",{className:Qr.a.buttonContainer},i.a.createElement("div",{className:Qr.a.save,onClick:this.save.bind(this)},i.a.createElement(m.a,{id:"annotation.save"})),i.a.createElement("div",{className:Qr.a.cancel,onClick:this.cancel.bind(this)},i.a.createElement(m.a,{id:"annotation.cancel"}))))}}])&&$r(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),r}(i.a.Component),Zr=(Vn=n(1030),n.n(Vn)),Xr=(Vn=(n(227),n(1031)),n.n(Vn)),eo=(n(171),n(274));function to(e){return(to="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function no(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ro(e,t){return(ro=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function oo(e){return(oo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var io=function(e){var t=r;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ro(t,e);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=oo(e);n=t?(n=oo(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),r=this;if(n&&("object"===to(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==r)return r;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(r);function r(){var e=this,t=r;if(e instanceof t)return n.apply(this,arguments);throw new TypeError("Cannot call a class as a function")}return t=r,(e=[{key:"render",value:function(){return i.a.createElement("div",{className:Xr.a.answer},i.a.createElement("p",{className:Dr.a.text,dangerouslySetInnerHTML:{__html:this.props.answer.content}}),i.a.createElement("p",{className:Dr.a.subTitle},i.a.createElement(m.a,{id:"question.answeredBy"})," ",this.props.answer.name,","," ",i.a.createElement(eo.FormattedDate,{value:this.props.answer.created})))}}])&&no(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),r}(i.a.Component);function ao(e){return(ao="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function lo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function co(e,t){return(co=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function so(e){return(so=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var uo=function(e){var t=r;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&co(t,e);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=so(e);n=t?(n=so(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),r=this;if(n&&("object"===ao(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==r)return r;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(r);function r(){var e=this,t=r;if(e instanceof t)return n.apply(this,arguments);throw new TypeError("Cannot call a class as a function")}return t=r,(e=[{key:"render",value:function(){for(var e=c.h+this.props.question.topicId,t=[],n=this.props.question.answers,r=0;r<n.length;r++){var o=n[r];t.push(i.a.createElement(io,{answer:o,key:"answer_"+o.created}))}var a=0<this.props.question.name.length?this.props.question.name:this.props.question.username;return i.a.createElement(we.a,{className:u()(Zr.a.question,Dr.a.padding),sx:{boxShadow:2}},i.a.createElement("p",{className:Dr.a.text,dangerouslySetInnerHTML:{__html:this.props.question.content}}),i.a.createElement("span",{className:u()(Zr.a.threadLink,Dr.a.text)},i.a.createElement("a",{href:e,target:"_blank"},i.a.createElement(m.a,{id:"question.viewThread"}))),i.a.createElement("p",{className:Dr.a.subTitle},a,i.a.createElement(eo.FormattedDate,{value:this.props.question.created})),t)}}])&&lo(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),r}(i.a.Component),fo=(Vn=n(1032),n.n(Vn));function po(e){return(po="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ho(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function mo(e,t){return(mo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function yo(e){return(yo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var go=function(e){var t=r;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&mo(t,e);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=yo(e);n=t?(n=yo(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),r=this;if(n&&("object"===po(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==r)return r;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(r);function r(e){var t;if(this instanceof r)return(t=n.call(this,e)).state={content:e.question.content},t;throw new TypeError("Cannot call a class as a function")}return t=r,(e=[{key:"save",value:function(){var e=this.textarea?this.textarea.value:"";this.props.saveQuestion(this.props.question,this.props.defaultTitle,e)}},{key:"cancel",value:function(){this.props.cancel()}},{key:"handleChange",value:function(e){var t=e.target instanceof HTMLTextAreaElement?e.target.value:"";this.setState((function(e,n){return{content:t}}))}},{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:fo.a.editorContainer},i.a.createElement("div",null,this.props.questionQuote),i.a.createElement("textarea",{className:fo.a.textEditor,ref:function(t){return e.textarea=t},value:this.state.content,onChange:this.handleChange.bind(this)}),i.a.createElement("div",{className:Qr.a.buttonContainer},i.a.createElement("div",{className:Qr.a.save,onClick:this.save.bind(this)},i.a.createElement(m.a,{id:"annotation.save"})),i.a.createElement("div",{className:Qr.a.cancel,onClick:this.cancel.bind(this)},i.a.createElement(m.a,{id:"annotation.cancel"}))))}}])&&ho(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),r}(i.a.Component),bo=(Vn=n(1033),n.n(Vn));function vo(e){return(vo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function wo(e,t){return(wo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Oo(e){return(Oo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var So=function(e){var t=r;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&wo(t,e);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Oo(e);n=t?(n=Oo(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),r=this;if(n&&("object"===vo(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==r)return r;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(r);function r(){var e=this,t=r;if(e instanceof t)return n.apply(this,arguments);throw new TypeError("Cannot call a class as a function")}return t=r,(e=[{key:"render",value:function(){return i.a.createElement("div",{className:u()(bo.a.loading,Dr.a.text)},i.a.createElement(B.a,{loaded:!1,scale:.25,position:"relative",top:"50%",left:"50%",lines:9,width:8,length:8,radius:14}),"Loading questions...")}}])&&xo(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),r}(i.a.Component),Eo=(Vn=n(1034),n.n(Vn)),To=(Vn=n(1035),n.n(Vn));function Io(e){return(Io="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function jo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ao(e,t){return(Ao=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Po(e){return(Po=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ko=function(e){var t=r;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ao(t,e);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Po(e);n=t?(n=Po(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),r=this;if(n&&("object"===Io(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==r)return r;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(r);function r(){var e=this,t=r;if(e instanceof t)return n.apply(this,arguments);throw new TypeError("Cannot call a class as a function")}return t=r,(e=[{key:"delete",value:function(){this.props.delete&&this.props.delete(this.props.note)}},{key:"edit",value:function(){this.props.edit&&this.props.edit(this.props.note)}},{key:"render",value:function(){return i.a.createElement(we.a,{className:Eo.a.note,sx:{boxShadow:2}},i.a.createElement("p",null,"Note:"),i.a.createElement("div",{className:Eo.a.header},i.a.createElement("h4",{className:Eo.a.info},this.props.note.creatorUser.name),this.props.delete&&i.a.createElement("div",{className:Eo.a.delete,onClick:this.delete.bind(this)},i.a.createElement(qe.a,{"aria-label":"delete",size:"small"},i.a.createElement(To.a,{fontSize:"inherit"})))),i.a.createElement("div",{className:Eo.a.content,onClick:this.edit.bind(this)},this.props.note.content))}}])&&jo(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),r}(i.a.Component);function Co(){return(Co=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Ro(e){return i.a.createElement("svg",Co({viewBox:"0 0 30 40",fill:"currentColor"},e),_o,Bo,Wo)}var _o=i.a.createElement("path",{d:"M3 0h24v15H3z"}),Bo=i.a.createElement("path",{stroke:"currentColor",strokeWidth:3,d:"M0 20h8M11 20h8M22 20h8"}),Wo=i.a.createElement("path",{d:"M3 25h24v15H3z"}),No=(Vn=n(1036),n.n(Vn));function Lo(){return(Lo=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Do(e){return i.a.createElement("svg",Lo({viewBox:"0 0 24 24"},e),Ho,zo)}var Ho=i.a.createElement("path",{d:"M3 18h12v-2H3v2zM3 6v2h18V6H3zm0 7h18v-2H3v2z"}),zo=i.a.createElement("path",{fill:"none",d:"M0 0h24v24H0V0z"});function Mo(){return(Mo=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function qo(e){return i.a.createElement("svg",Mo({viewBox:"0 0 24 24",fill:"currentColor"},e),Vo,Fo)}var Vo=i.a.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),Fo=i.a.createElement("path",{d:"M21 6h-2v9H6v2c0 .55.45 1 1 1h11l4 4V7c0-.55-.45-1-1-1zm-4 6V3c0-.55-.45-1-1-1H3c-.55 0-1 .45-1 1v14l4-4h10c.55 0 1-.45 1-1z"});function Uo(){return(Uo=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Qo(e){return i.a.createElement("svg",Uo({viewBox:"0 0 512 512"},e),Jo)}var Jo=i.a.createElement("path",{d:"M497.9 142.1l-46.1 46.1c-4.7 4.7-12.3 4.7-17 0l-111-111c-4.7-4.7-4.7-12.3 0-17l46.1-46.1c18.7-18.7 49.1-18.7 67.9 0l60.1 60.1c18.8 18.7 18.8 49.1 0 67.9zM284.2 99.8L21.6 362.4.4 483.9c-2.9 16.4 11.4 30.6 27.8 27.8l121.5-21.3 262.6-262.6c4.7-4.7 4.7-12.3 0-17l-111-111c-4.8-4.7-12.4-4.7-17.1 0zM124.1 339.9c-5.5-5.5-5.5-14.3 0-19.8l154-154c5.5-5.5 14.3-5.5 19.8 0s5.5 14.3 0 19.8l-154 154c-5.5 5.5-14.3 5.5-19.8 0zM88 424h48v36.3l-64.5 11.3-31.1-31.1L51.7 376H88v48z"});function $o(e){return($o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ko(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Go(e,t){return(Go=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Yo(e){return(Yo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Zo=function(e){var t=r;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Go(t,e);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Yo(e);n=t?(n=Yo(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),r=this;if(n&&("object"===$o(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==r)return r;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(r);function r(){if(this instanceof r)return n.call(this);throw new TypeError("Cannot call a class as a function")}return t=r,(e=[{key:"componentDidMount",value:function(){var e=this;this.keyHandler=function(t){var n=window.event?event:t,r=n.ctrlKey;r&&67!=n.keyCode&&t.preventDefault(),r&&69==n.keyCode&&e.props.editAnnotationHandler(),r&&81==n.keyCode&&null!=(t=e.props)&&t.addQuestion(),r&&76==n.keyCode&&null!=(t=e.props)&&t.addLineBreak(),r&&78==n.keyCode&&null!=(t=e.props)&&t.addNote(),r&&80==n.keyCode&&null!=(t=e.props)&&t.addPageBreak()},document.addEventListener("keydown",this.keyHandler,{once:!1})}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.keyHandler)}},{key:"render",value:function(){var e=null!=this.props.addPageBreak,t=null!=this.props.addLineBreak;return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:No.a.header},i.a.createElement(O,{noBezel:!0,icon:i.a.createElement(Do,{width:15,height:15,style:{fill:"#fff"}}),backgroundColor:"transparent",onClick:this.props.addNote,disabled:!this.props.addNote,align:"center",tooltipTitle:"Note",shortcut:"n"}),i.a.createElement(O,{noBezel:!0,icon:i.a.createElement(qo,{width:15,height:15,style:{fill:"#fff"}}),onClick:this.props.addQuestion,disabled:!this.props.addQuestion,align:"left",backgroundColor:"transparent",tooltipTitle:"Question",shortcut:"q"}),i.a.createElement(O,{noBezel:!0,color:"#fff",fontSize:"".concat(15,"px"),icon:"¶",onClick:this.props.addLineBreak,disabled:!t,align:"left",backgroundColor:"transparent",tooltipTitle:"LineBreak",shortcut:"l"}),i.a.createElement(O,{noBezel:!0,icon:i.a.createElement(Ro,{width:15,height:15,style:{fill:"#fff"}}),onClick:this.props.addPageBreak,disabled:!e,align:"left",backgroundColor:"transparent",tooltipTitle:"PageBreak",shortcut:"p"}),i.a.createElement(O,{onClick:this.props.editAnnotationHandler,backgroundColor:"transparent",noBezel:!0,icon:i.a.createElement(Qo,{width:15,height:15,style:{fill:"#fff"}}),tooltipTitle:"Edit",shortcut:"e"})))}}])&&Ko(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),r}(i.a.Component);function Xo(e){return(Xo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ei(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ti(e,t){return(ti=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ni(e){return(ni=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Vn=function(e){var t=r;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ti(t,e);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ni(e);n=t?(n=ni(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),r=this;if(n&&("object"===Xo(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==r)return r;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(r);function r(e){if(this instanceof r)return(e=n.call(this,e)).controls=null,e.arrow=null,e.arrowDs=null,e;throw new TypeError("Cannot call a class as a function")}return t=r,(e=[{key:"componentDidMount",value:function(){this.updatePosition()}},{key:"componentDidUpdate",value:function(){setTimeout(this.updatePosition.bind(this),0)}},{key:"updatePosition",value:function(){var e=this.getMeasurements();if(this.props.inline&&this.controls&&this.arrow&&e){var t=this.controls,n=t.offsetHeight,r=t.offsetWidth,o=this.arrow,i=e.bottomGap,a=i<0||n<i,l=e.top,c=e.viewPortWidth||0,s=e.left,u=s+e.width;if(o.style.display="none",this.props.selectedElementIds)for(var f=0,d=0,p=0;p<this.props.selectedElementIds.length;p++){var h,m,y=this.props.selectedElementIds[p];(y=document.getElementById(y))&&(m=(h=y.offsetLeft)+y.offsetWidth,h<f?(y.offsetTop,y.offsetHeight,s=h,u=d=m):d<m&&(d=m),h<s&&(s=h),u<m&&(u=m),f=h)}var g=u-s,b=3,v=!1,x=0;(v=!a&&i<n||v)?(o.className=Dr.a.arrowLeft,b=s-r-o.offsetWidth<0?4:2):(s-(a=r/2-g/2)<0&&(x=Math.abs(s-a)),c<u+a&&(x=c-(u+a))),3===b?(a=c=0,this.arrow&&(this.arrow.className=Dr.a.arrowTop,a=r/2-this.arrow.offsetWidth/2-x,this.arrow.style.left=(a=a<0?0:a)+"px",c=this.arrow.offsetHeight,this.arrow.style.top=0-c+"px"),t.style.top=l+e.height+c+"px",t.style.left=s+g/2-r/2+x+"px"):v?(o.className=Dr.a.arrowRight,a=o.offsetHeight,c=e.top+e.height/2-a/2,e.top+e.height+i-c<n&&(c=e.top+e.height+i-n),2===b?(o.style.left=r-2+"px",t.style.left=s-r-o.offsetWidth+"px"):(o.className=Dr.a.arrowLeft,o.style.left=-o.offsetWidth+"px",t.style.left=s+g+o.offsetWidth+"px"),o.style.top=e.top-c+e.height/2-a/2+"px",t.style.top=c+"px"):t.style.top=l+"px"}}},{key:"getMeasurements",value:function(){if(!this.props.selectedElementIds)return null;var e=this.props.selectedElementIds[this.props.selectedElementIds.length-1],t=(e=document.getElementById(e),this.props.selectedElementIds[0]),n=(t=document.getElementById(t),this.props.splitTextRect),r=0;if(this.props.list&&this.props.list.Grid.state.scrollTop,this.props.pechaImageClass&&(r=document.getElementsByClassName(this.props.pechaImageClass)[0].offsetHeight),!e)return console.warn("no valid element found in getMeasurements, elementId: %s",this.props.selectedElementId),{top:0,textTop:0,rowTop:0,left:0,width:1,height:1,topGap:0,bottomGap:0,viewPortWidth:1};r=e.offsetTop+r;var o=e.offsetTop,i=e.offsetLeft,a=e.offsetWidth,l=e.offsetHeight,c=r,s=null,u=0,f=0;return e&&n&&(e=e.getBoundingClientRect(),f=n.height+n.top-e.bottom,s=n.width),t&&n&&(e=t.getBoundingClientRect(),u=n.height-e.top),{top:r,textTop:o,rowTop:c,left:i,width:a,height:l,topGap:u,bottomGap:f,viewPortWidth:s}}},{key:"render",value:function(){var e,t,n=this,r=this.props,i=[],a=[],l=null,s=null,d=r.user.isLoggedIn||c.c,p=!1,h=(r.activeAnnotation&&(r.activeAnnotation.isType(Bn.a.pageBreak)||r.activeAnnotation.isType(Bn.a.lineBreak))&&(p=!0),r.annotationsData?(r.annotationsData.map((function(e){var t,l=!1,c=!1;e.isTemporary?c=l=!0:r.temporaryAnnotation||e.annotation.uniqueId!=r.activeAnnotation.uniqueId||(c=!0),l?(t=o.createElement(Nr,{annotationData:e,key:e.annotation.uniqueId,isActive:c,saveAnnotationHandler:function(t){r.saveAnnotation(e.annotation,t)},cancelAnnotationHandler:function(){r.cancelEditAnnotation(e.annotation)},isLoggedIn:d,selectAnnotationHandler:function(){},editAnnotationHandler:function(){}}),a.push(t)):(t=o.createElement(Wr,{isWorkingSection:!1,fontSize:r.fontSize,annotationData:e,key:e.annotation.uniqueId,isActive:c,selectAnnotationHandler:function(){d&&!l&&r.didSelectAnnotation(e.annotation)},editAnnotationHandler:function(){d&&!l&&(n.annotation=e.annotation,r.editAnnotation(e.annotation))},isLoggedIn:d}),i.push(t))}),this),!r.user.isLoggedIn==!c.c&&(l=o.createElement("div",{className:Dr.a.anonymousMessage,style:{position:"relative",width:"fit-content",border:"1px solid gray",paddingInline:10}},o.createElement(m.a,{id:"annotations.loginMessage",values:{loginLink:o.createElement(o.Fragment,null,o.createElement(m.a,{id:"annotations.loginLink"}))}})))):s=o.createElement("div",{className:Dr.a.nothingSelected},"Nothing Selected"),null),y=!this.props.selectedWitness.isWorking,g=null,b=!this.props.selectedWitness.isWorking,v=(d&&!this.props.selectedWitness.isWorking&&(e=[],t=[],this.props.availableAnnotations&&(e=this.props.availableAnnotations.filter((function(e){return e.type===Bn.a.pageBreak&&e.creatorWitness.id===n.props.selectedWitness.id})),t=this.props.availableAnnotations.filter((function(e){return e.type===Bn.a.lineBreak&&e.creatorWitness.id===n.props.selectedWitness.id}))),0<e.length&&(h=o.createElement("div",{className:Dr.a.breakButtons},o.createElement(O,{title:"Page Break",accessoryType:"DELETE",icon:o.createElement(Ro,{width:20,height:20}),onClick:function(){n.props.deleteAnnotation(e[0])},isActive:!0,backgroundColor:f.a.activeButton})),y=!1),0<t.length&&(g=o.createElement("div",{className:Dr.a.breakButtons},o.createElement(O,{title:"Line Break",accessoryType:"DELETE",icon:"¶",onClick:function(){n.props.deleteAnnotation(t[0])},isActive:!0,backgroundColor:f.a.activeButton})),b=!1),(b=!!y&&b)||(y=!1)),null),x={},w=(r.temporaryNotes&&0<r.temporaryNotes.length&&(v=r.temporaryNotes.map((function(e){var t="NOTE_"+e.uniqueId;return e.basedOn&&(x[e.basedOn.uniqueId]=e.uniqueId),o.createElement(Yr,{note:e,key:t,saveNote:r.saveAnnotation,cancel:function(){return r.cancelEditAnnotation(e)}})}))),null),S=(r.notes&&0<r.notes.length&&(w=r.notes.filter((function(e){return!x.hasOwnProperty(e.uniqueId)})).map((function(e){var t="NOTE_"+e.uniqueId;return o.createElement(ko,{note:e,key:t,delete:n.props.deleteAnnotation,edit:n.props.editNote})}))),null),E={},T=(r.temporaryQuestions&&0<r.temporaryQuestions.length&&r.questionQuote&&(S=r.temporaryQuestions.map((function(e){E[e.uniqueId]=e.uniqueId;var t="QUESTION_"+e.uniqueId;return o.createElement(go,{question:e,questionQuote:r.questionQuote,defaultTitle:r.selectedWitness.text.name,key:t,saveQuestion:r.saveQuestion,cancel:function(){return r.cancelEditAnnotation(e)}})}))),[]),I=!1;if(r.questions&&0<r.questions.length){for(var j=[],A=0;A<r.questions.length;A++){var P=r.questions[A];!E.hasOwnProperty(P.uniqueId)&&r.questionsData.hasOwnProperty(P.uniqueId)&&(r.questionsData[P.uniqueId].loading&&(I=!0),j=j.concat(r.questionsData[P.uniqueId].questions))}T=j.map((function(e){return e.annotationUniqueId,o.createElement(uo,{question:e,key:"question_"+e.annotationUniqueId})}))}var k=null,C=(0<T.length&&(k=o.createElement("h3",{className:Dr.a.sectionHeading},"Questions")),null),R=(I&&(C=o.createElement(So,null)),0===(null==(R=r.questions)?void 0:R.length)&&0===r.temporaryQuestions.length),_=[Dr.a.annotationControls],B=(r.inline&&_.push(Dr.a.inline),!0);return(l||p)&&(B=!1),o.createElement("div",{className:u.a.apply(void 0,_),ref:function(e){return n.controls=e}},B&&o.createElement(Zo,{addPageBreak:y?r.addPageBreak:null,addLineBreak:b?r.addLineBreak:null,addNote:d&&!v?function(){return r.addNote()}:null,addQuestion:R?r.addQuestion:null,closeAnnotation:r.closeAnnotation,editAnnotationHandler:function(){var e=document.getElementById("editBtn");null!=e&&e.click()},userLoggedIn:d}),o.createElement("div",{className:Dr.a.annotationContent},l,s,!p&&a,!p&&i,h,g,v,w,k,S,C,T),o.createElement("div",{className:Dr.a.arrow,ref:function(e){return n.arrow=e}}))}}])&&ei(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),r}(o.Component),Vn=o.memo(Vn);var ri=n(894),oi=n.n(ri);function ii(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function ai(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ii(Object(n),!0).forEach((function(t){var r,o;r=e,o=n[t=t],t in r?Object.defineProperty(r,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[t]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ii(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function li(e){return function(e){if(Array.isArray(e))return ui(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||si(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ci(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||si(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function si(e,t){if(e){if("string"==typeof e)return ui(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ui(e,t):void 0}}function ui(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function fi(e,t,n,r){var o=[],i=t.filter((function(e){return e.isWorking||e.isBase})).map((function(e){return e.name}));if(e){for(var a={},l=0;l<e.length;l++)!function(t){var n=e[t];t=n.content+n.start;n.isTemporary?(a[di]={name:n.getSourceName(),content:n.content,id:n.uniqueId,isTemporary:!0,annotation:n},i=i.filter((function(e){return e!==n.getSourceName()})),t=di):i=a[t]?(a[t].name+=" "+Object(R.a)(n.getSourceName()),i.filter((function(e){return e!==n.getSourceName()}))):(a[t]={name:Object(R.a)(n.getSourceName()),content:n.content,id:n.uniqueId,userCreated:n.userCreated,annotation:n},i.filter((function(e){return e!==n.getSourceName()}))),!n.userCreated&&n.creatorWitness.isWorking?a[t].isWorking=!0:a[t].isWorking=!1}(l);i.unshift(n);var c=i;"བྱང་ཆུབ་སེམས་དཔའི་སྤྱོད་པ་ལ་འཇུག་པ་བཞུགས་སོ།"!==(null==r?void 0:r.name)&&(c=i.filter((function(e){return"Dominant"!==e}))),o=Object.keys(a).reduce((function(e,t){return(t=a[t]).isWorking&&(t.name=c.reduce((function(e,t){return e+" "+Object(R.a)(t,";")}),"")),e.push(t),e}),[])}return o}var di=-3,pi=Object(t.connect)((function(e,t){var n=A.lb(e),r=A.J(e),o=t.activeAnnotation,a=t.inline,l=A.L(e);if(l||r&&(l=A.rb(e,r.id)),!o||!l)return{annotationsData:null,activeAnnotation:null,baseAnnotation:null,availableAnnotations:null,user:n,temporaryAnnotation:null,inline:null,firstSelectedSegment:null,splitTextRect:null,selectedWitness:null};var c=function(e,t,n,r,o){return 0<(e=A.W(e,n.id,r,o,t)).length?e[0]:null}(e,Bn.a.variant,l,o.start,o.length),s=function(e,t,n,r){var o=[];n&&t.naturalId===n.naturalId||o.push(t),n&&o.push(n);var i=(a=ci(e.getPositionOfAnnotation(t),2))[0],a=a[1];if(i){a=i+a;var l,c=[];t.isInsertion?((l=r["i"+i])&&(c=c.concat(l)),(l=r[String(i)])&&(c=c.concat(l))):((l=r[String(i)])&&(c=l),(i=r[String(a)])&&(c=c.concat(i)));for(var s=0;s<c.length;s++){var u=c[s];u.start===t.start&&u.length===t.length?n&&u.naturalId===n.naturalId||o.push(u):e.activeWitness.isWorking||u.type!==Bn.a.pageBreak&&u.type!==Bn.a.lineBreak||o.push(u)}o=pt()(o,(function(e,t){return e.id===t.id}))}return o}(t.annotatedText,o,c,t.annotationPositions),u=fi(u=s.filter((function(e){return e.type===Bn.a.variant})),d=A.S(e),w=A.kb(e,"annotation.workingEdition","Working"),r),f=(r=null,o.id==mn.a?r=o:(O=(f=ci(t.annotatedText.getPositionOfAnnotation(o),2))[0],f=f[1],u=null===O||null===f?null:(O=fi([r=t.annotatedText.getBaseAnnotation(O,f)],d,w),[].concat(li(O),li(u)))),u&&u.sort((function(e,t){return e.isTemporary?-1:t.isTemporary?1:e.userCreated?-1:!t.userCreated&&e.annotation.id&&t.annotation.id?e.annotation.id-t.annotation.id:1})),s.filter((function(e){return e.type===Bn.a.note}))),d=A.W(e,l.id,o.start,o.length,Bn.a.note),p=s.filter((function(e){return e.type===Bn.a.question})),h={};if(0<p.length)for(var m=0;m<p.length;m++){var y=p[m],g=(h[y.uniqueId]={},A.Ab(e,y));g=(h[y.uniqueId].loading=g,A.x(e,y.uniqueId));h[y.uniqueId].questions=g}var b,v,x,w,O=null,S=(0<(w=A.W(e,l.id,o.start,o.length,Bn.a.question)).length&&(S=w[0],v=(S=ci(t.annotatedText.getPositionOfAnnotation(S),2))[0],S=S[1],v&&(S=(v=ci(t.annotatedText.segmentedText.extractTextAroundPosition(v,S=S||v+1,["།"," "]),3))[0],b=v[1],v=v[2],x=document.location.href,O=i.a.createElement("blockquote",null,S,i.a.createElement("a",{href:x},b),v))),Object(A.bb)(e));return{annotationsData:u,activeAnnotation:o,baseAnnotation:r,availableAnnotations:s,user:n,temporaryAnnotation:c,inline:a,firstSelectedSegment:t.firstSelectedSegment,splitTextRect:t.splitTextRect,selectedWitness:l,notes:f,temporaryNotes:d,questions:p,temporaryQuestions:w,questionsData:h,questionQuote:O,fontSize:S}}),null,(function(e,t,n){var r=t.dispatch;if(0<e.questions.length)for(var o=0;o<e.questions.length;o++){var i=e.questions[o],a=!0;(a=(!e.questionsData.hasOwnProperty(i.uniqueId)||!(0<e.questionsData[i.uniqueId].questions.length||e.questionsData[i.uniqueId].loading))&&a)&&r(new j.pc(i))}function l(t){var o=1<arguments.length&&void 0!==arguments[1]&&arguments[1];return function(){var i=n.activeAnnotation,a=(i=new Bn.c(null,i.witness,i.end+1,0,null,t,e.selectedWitness,e.user),A.d(e.selectedWitness)),l=[];l.push(j.ic(i)),l.push(j.Jb(i.uniqueId,a)),o?l.push(j.ac(i)):l.push(j.ac(null)),r(Object(ee.batchActions)(l))}}function c(t,n){var o,i,a;t.isTemporary?(o=e.selectedWitness,o=A.d(o),(n=new Bn.c(t.id,t.witness,t.start,t.length,n,t.type,t.creatorWitness,e.user,t.uniqueId,t.basedOn)).isSaved=t.isSaved,i=[],a=null,a=n.isSaved?j.cd:j.ic,i.push(a(n)),i.push(j.Kc(t)),i.push(j.Jb(n.uniqueId,o)),n.type===Bn.a.variant&&i.push(j.ac(n)),r(Object(ee.batchActions)(i))):console.warn("Tried to save a non-temporary annotation: %o",t)}return ai(ai(ai({},e),n),{},{closeAnnotation:function(){var t;e.activeAnnotation&&(t=j.ac(null),r(t))},didSelectAnnotation:function(t){var n=t.id==mn.a?e.baseAnnotation:Ar()(e.availableAnnotations,(function(e){return e.uniqueId==t.uniqueId}))||null,o=[],i=e.selectedWitness,a=A.d(i);t.uniqueId!=e.activeAnnotation.uniqueId&&(i.isWorking?(t.id!=mn.a&&o.push(j.Jb(n.uniqueId,a)),e.activeAnnotation.id!=mn.a&&o.push(j.Ic(e.activeAnnotation.uniqueId,a))):e.activeAnnotation.creatorWitness.id===i.id?(o.push(j.Jc(e.activeAnnotation.uniqueId,a)),n.id!==mn.a&&o.push(j.Jb(n.uniqueId,a))):(n.creatorWitness.id===i.id?o.push(j.Kb(n.uniqueId,a)):n.id!==mn.a&&o.push(j.Jb(n.uniqueId,a)),e.activeAnnotation.id!==mn.a&&o.push(j.Ic(e.activeAnnotation.uniqueId,a))),o.push(j.ac(n)),r(Object(ee.batchActions)(o)))},editAnnotation:function(t){var n=t.isWorkingAnnotation||t.userCreated||t.id===mn.a?null:t;n=new Bn.b(n,t.witness,t.start,t.length,t.content,t.type,e.selectedWitness,e.user);t.userCreated&&(n.uniqueId=t.uniqueId,n.isSaved=t.isSaved),r(j.Ib(n,!0))},saveAnnotation:c,cancelEditAnnotation:function(e){var t;e.isTemporary?(t=j.Kc(e),r(t)):console.warn("Tried to call cancelEditAnnotation on a non-temporary annotation: %o",e)},deleteAnnotation:function(t){var n=e.selectedWitness,o=A.d(n),i=[];i=t.userCreated?[j.kc(t,n),j.Ic(t.uniqueId,o)]:[j.Jc(t.uniqueId,o)],e.activeAnnotation.uniqueId===t.uniqueId&&i.push(j.ac(null)),r(Object(ee.batchActions)(i))},addNote:function(){var t=n.activeAnnotation;t=new Bn.b(null,t.witness,t.start,t.length,"",Bn.a.note,e.selectedWitness,e.user);r(j.Ib(t,!0))},editNote:function(t){t=new Bn.b(t,t.witness,t.start,t.length,t.content,Bn.a.note,e.selectedWitness,e.user),r(j.Ib(t,!0))},addPageBreak:l(Bn.a.pageBreak),addLineBreak:l(Bn.a.lineBreak),addQuestion:function(){var t=n.activeAnnotation;t=new Bn.b(null,t.witness,t.start,t.length,"",Bn.a.question,e.selectedWitness,e.user);r(j.Ib(t,!0))},saveQuestion:function(t,o,i){var a=((a=ci(n.annotatedText.getPositionOfAnnotation(t),2))[0],a[1],oi.a.renderToStaticMarkup(e.questionQuote)+i);c(t,i),i=j.jc(t,o,a);r(i)}})}))(Vn);function hi(e){return function(e){if(Array.isArray(e))return mi(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return mi(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?mi(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function mi(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}ri=n(1039);var yi=n.n(ri),gi=(Vn=n(1040),n.n(Vn)),bi=(ri=n(1041),n.n(ri)),vi=Object(o.memo)(Object(a.c)((function(e){var t=[],n="",r="",o=[];return e.witnesses&&e.activeWitness&&(r=e.witnesses.findIndex((function(t){return t.id===e.activeWitness.id})),(t=e.witnesses.map((function(e){return e}))).sort((function(e,t){return e.isWorking?-1:t.isWorking?1:e.isBase?-1:t.isBase?1:0})),t=t.sort((function(e,t){return e.id-t.id}))),0===t.length?null:i.a.createElement(Me.a,{onChange:function(n){He()(t)||e.onSelectedWitness(t[n.target.value])},className:bi.a.selectVersion,value:r,label:"Version",classes:{root:bi.a.selectEmpty,select:bi.a.selectOptions}},t.map((function(t,r){return t.id===e.activeWitness.id&&o.push(bi.a.selected),n=t.source.name,t.isWorking&&(n="en"===e.intl.locale?"User"===(null==(t=e.user)?void 0:t.name)?"Working":"My Edition":"མཉམ་འབྲེལ་པར་མ།"),i.a.createElement("option",{key:"versionSelect-".concat(r),value:r,className:bi.a.selectOptions},n)})))}))),xi=(Vn=n(1042),n.n(Vn));function wi(e){return function(e){if(Array.isArray(e))return Ei(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Si(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Oi(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||Si(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Si(e,t){if(e){if("string"==typeof e)return Ei(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ei(e,t):void 0}}function Ei(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}ri=i.a.memo((function(e){var t=Object(o.useRef)(e.texts),n=(s=Oi(Object(o.useState)(t.current),2))[0],r=s[1],a=(s=Oi(Object(o.useState)(null),2))[0],l=s[1],c=e.onSelectedText,s=e.selectedText,f=(e=Oi(Object(o.useState)(!1),2))[0],d=e[1],p=(e=null==s?void 0:s.name,Object(o.useRef)(new Et.c({fixedHeight:!0,defaultHeight:40}))),h=[xi.a.textlist],m=(Object(o.useEffect)((function(){var e;""===a&&r(wi(t.current)),null!==a&&""!==a&&(e=t.current.filter((function(e){return e.name.includes(a)})),r(wi(e)))}),[a]),i.a.useCallback((function(e){var t=e.key,r=e.index,o=e.style,a=(e=e.parent,n[r]);return i.a.createElement(Et.b,{key:"optionvalues-".concat(t),cache:p.current,parent:e,columnIndex:0,rowIndex:r},i.a.createElement("div",{style:o,onClick:function(){d(!1),c(a)}},i.a.createElement(we.a,{sx:{overflow:"hidden",textOverflow:"ellipsis",width:"13rem",paddingLeft:2,fontSize:{lg:12,md:11,sm:10,xs:10},color:"text.primary"},component:"div"},i.a.createElement(ce.a,{noWrap:!0},Object(R.a)(a.name)))))}),[n]));return i.a.createElement(It.a,{onClickAway:function(){return d(!1)}},i.a.createElement("div",{style:{position:"relative",marginLeft:10}},i.a.createElement(jt.a,{onClick:function(){d((function(e){return!e})),!1===f&&h.push(xi.a.open)},component:"div",variant:"outlined",sx:{textOverflow:"ellipsis",width:"10rem",height:"100%",color:"text.primary"}},i.a.createElement(ce.a,{noWrap:!0},e||"select Text here")),i.a.createElement(At.a,{in:f},i.a.createElement(we.a,{className:u()(h),sx:{position:"absolute",bgcolor:"heading.main",zIndex:1}},i.a.createElement(Pt.a,{onChange:function(e){e=e.target.value,l(e)},id:"standard-basic",label:"Search",variant:"standard",style:{width:"100%"}}),i.a.createElement(Et.a,null,(function(e){var t=e.width;e=e.height;return i.a.createElement(Et.d,{width:t,height:e,rowHeight:30,deferredMeasurementCache:p.current,rowCount:n.length,rowRenderer:m})}))))))})),a=Object(t.connect)((function(e){return{texts:A.ib(e),selectedText:A.J(e)}}),(function(e){return{onSelectedText:function(t){e(j.Rc(t))}}}))(ri);var Ti=i.a.memo(a);function Ii(e){e=e.isSecondWindowOpen;var t=Object(o.useCallback)((function(){var e=document.getElementById("updateList");e&&e.click()}),[e]);return Object(o.useEffect)((function(){var e=setTimeout((function(){t()}),500);return function(){return clearTimeout(e)}}),[e]),i.a.createElement(qe.a,{variant:"text",size:"small",disableRipple:!0,onClick:t},i.a.createElement(Xt.a,null))}function ji(e){return e=e.handleWindowSearch,i.a.createElement(qe.a,{size:"small",variant:"text",onClick:e},i.a.createElement(Qt.a,null))}function Ai(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Pi(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Pi(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Pi(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ki(e){var t=Ai(Object(o.useState)(!1),2),n=t[0],r=t[1],a=(t=Ai(Object(Ie.a)("WindowOneFont","Tibetan"),2))[0],l=t[1];return Object(o.useEffect)((function(){document.body.style.setProperty("--tibetan-fonts",a)}),[]),i.a.createElement(It.a,{onClickAway:function(){return r(!1)}},i.a.createElement(we.a,{position:"relative"},i.a.createElement(qe.a,{onClick:function(){r((function(e){return!e}))},size:"small",variant:"text"},i.a.createElement(Nt,{height:20,width:20,fill:"currentColor"})),i.a.createElement(At.a,{in:n},i.a.createElement(Ht.a,{dense:!0,sx:{position:"absolute",right:0,zIndex:2,top:40,bgcolor:"heading.main"}},i.a.createElement(St,{max:20,min:7,initialvalue:e.textFontSize,changeSize:e.onChangedFontSize}),i.a.createElement(zt.a,null),i.a.createElement(Ci,{selectFont:function(e){l(e),document.body.style.setProperty("--tibetan-fonts","".concat(e));var t=document.getElementById("updateList");setTimeout((function(){t.click()}),800),r(!1)},selectedfont:a}),i.a.createElement(Mt.a,{onClick:function(){return e.onExport()}},i.a.createElement(ce.a,{variant:"subtitle2"},"Export Document"))))))}var Ci=function(e){var t=e.selectFont,n=(e=e.selectedfont,c.d||[]);return i.a.createElement(we.a,{textAlign:"center"},i.a.createElement("span",null,"Font:")," ",i.a.createElement("select",{onChange:function(e){return t(e.target.value)},value:e},n.map((function(e,t){return i.a.createElement("option",{key:t+"-fontselect",value:e},e)}))))};function Ri(e){var t=e.changeShowTableContent,n=e.showTableContent;return i.a.createElement(i.a.Fragment,null,i.a.createElement(qe.a,{onClick:function(){t(!n)}},n?i.a.createElement(Kt.a,null):i.a.createElement($t.a,null)))}function _i(e){return(_i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Bi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Wi(e,t){return(Wi=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ni(e){return(Ni=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Li=function(e){var t=r;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Wi(t,e);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ni(e);n=t?(n=Ni(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),r=this;if(n&&("object"===_i(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==r)return r;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(r);function r(e){if(this instanceof r)return n.call(this,e);throw new TypeError("Cannot call a class as a function")}return t=r,(e=[{key:"render",value:function(){var e=this,t=this.props.string,n=t,r=this.props.stringClass||"";if(this.props.searchTerm){var i=this.props.searchTerm,a=(new W.a).splitGraphemes(t),l=t.indexOf(i),c=l+i.length,s=0,u="";if(-1<l)for(var f=0;f<a.length;f++){var d=a[f];l<=s&&s<c&&(u+=d),s+=d.length}0<u.length&&(n=N()(t,u,(function(t,n){return o.createElement("span",{className:e.props.highlightClass,key:"highlight-".concat(n)},t)})))}return o.createElement("span",{className:r},n)}}])&&Bi(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),r}(o.Component),Di=(Vn=n(1043),n.n(Vn));function Hi(e){function t(e){var t=e.key,o=e.index,l=e.parent,s=(e=e.style,a[o]);return i.a.createElement(Et.b,{key:"listkeys2-".concat(t),cache:c.current,parent:l,columnIndex:0,rowIndex:o},i.a.createElement("div",{style:e},0<a.length&&i.a.createElement("div",{className:Di.a.searchListItem,onClick:function(){return n(s[0])}},i.a.createElement(Li,{string:s[1],highlightClass:Di.a.highlight,searchTerm:r}))))}var n=e.handleListItemClick,r=e.searchValue,a=e.results,l=(e.selectedText,Object(o.useRef)()),c=Object(o.useRef)(new Et.c({fixedWidth:!0,defaultHeight:100}));return a?i.a.createElement(i.a.Fragment,null,i.a.createElement(Et.a,null,(function(e){var n=e.height;e=e.width;return i.a.createElement(Et.d,{ref:l,height:n,rowCount:null==a?void 0:a.length,rowHeight:c.current.rowHeight,deferredMeasurementCache:c.current,rowRenderer:t,width:e,overscanRowCount:1})}))):null}function zi(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Mi(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Mi(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Mi(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function qi(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function Vi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qi(Object(n),!0).forEach((function(t){Fi(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Fi(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}ri=i.a.memo((function(e){var t=(s=zi(Object(o.useState)(""),2))[0],n=s[1],r=(s=zi(Object(o.useState)(!1),2))[0],a=s[1],l=(s=zi(Object(o.useState)(!1),2))[0],c=s[1],s=Object(o.useRef)(),u=Object(o.useRef)(),f=i.a.useRef(yt()((function(t){e.searchChanged(t)}),1e3)).current,d=Object(o.useCallback)((function(e){e.preventDefault(),f(t),c(!0)}),[t]),p=Object(o.useCallback)((function(){!1===r&&f(null),a(!r)}),[r]),h=(Object(o.useEffect)((function(){!0===r&&u.current.focus(),!1===r&&f(null)}),[r]),Object(o.useCallback)((function(){c(!1),f(null),n("")}),[])),m=Object(o.useMemo)((function(){return mt()(e.searchResults)&&e.searchResults.hasOwnProperty(e.selectedText.id)}),[e.searchResults,e.selectedText]),y=m?e.searchResults[e.selectedText.id].results:[];return i.a.createElement(Yt.a,{ref:s,direction:"column",spacing:1,sx:{paddingInline:{md:1,xs:0},paddingBlock:{md:1,xs:0},bgcolor:"heading.main",color:"text.primary"}},i.a.createElement(Yt.a,{direction:"row",spacing:1,justifyContent:"space-between"},i.a.createElement(we.a,{sx:{display:"flex",gap:{md:2,sx:0},flexDirection:{md:"row",xs:"column"}}},i.a.createElement(Ti,null),i.a.createElement(vi,{witnesses:e.witnesses,activeWitness:e.selectedWitness,onSelectedWitness:e.onSelectedWitness,user:e.user})),i.a.createElement(Zt.a,{size:"small",sx:{position:"relative",display:"flex",height:"fit-content",alignItems:"center",justifyContent:"center",width:"fit-content",border:function(e){return"1px solid ".concat(e.palette.divider)},borderRadius:1,bgcolor:"background.paper",color:"text.secondary","& svg":{m:1},"& hr":{mx:.5}},className:gi.a.button_group_menu},i.a.createElement(Ii,{isSecondWindowOpen:e.isSecondWindowOpen}),i.a.createElement(zt.a,{orientation:"vertical",variant:"middle",flexItem:!0}),i.a.createElement(ji,{handleWindowSearch:p}),i.a.createElement(ki,{textFontSize:e.textFontSize,onChangedFontSize:e.onChangedFontSize,onExport:e.onExport}),i.a.createElement(Ri,{changeShowTableContent:e.changeShowTableContent,showTableContent:e.showTableContent}))),i.a.createElement(Ve.a,{in:r,mountOnEnter:!0,unmountOnExit:!0},i.a.createElement("form",{onSubmit:d},i.a.createElement(Yt.a,{direction:"row",spacing:2,position:"relative"},i.a.createElement(Pt.a,{hiddenLabel:!0,id:"filled-hidden-label-small",inputProps:{style:{height:25,padding:"0 14px"}},style:{height:25,flex:1},fullWidth:!0,inputRef:u,value:t,onChange:function(e){return n(e.target.value)}}),i.a.createElement(jt.a,{variant:"outlined",size:"small",onClick:d,style:{height:25}},"Search"),e.searchResults&&l&&i.a.createElement(we.a,{sx:((s="boxShadow")in(d={position:"absolute",top:35,right:0,zIndex:1,bgcolor:"heading.main",height:350,width:350,boxShadow:p=3,overflowX:"hidden"})?Object.defineProperty(d,s,{value:p,enumerable:!0,configurable:!0,writable:!0}):d[s]=p,d)},0===y.length&&i.a.createElement("p",null,"no such word present"),m&&0<y.length&&i.a.createElement(Hi,{handleListItemClick:function(t){e.changeSelectSyncId(t)},searchValue:e.searchValue,results:y,selectedText:e.selectedText}),i.a.createElement(qe.a,{"aria-label":"closeButton",onClick:h,size:"small",sx:{right:15,top:0,position:"absolute"}},i.a.createElement(tt.a,{fontSize:"inherit"})))))))}));var Ui=Object(t.connect)((function(e){var t,n,r=A.J(e),o=A.K(e),i=[],a=!1,l=(r&&(i=A.gb(e,r.id),(l=A.N(e,r.id))?(t=A.nb(e,l),a=A.q(e,l)):t=A.rb(e,r.id)),o&&(n=(l=A.O(e,o.id))?A.ob(e,l):A.sb(e,o.id)),A.bb(e)),c=A.C(e);return{witnesses:i,selectedText:r,selectedText2:o,selectedWitness:t,selectedWitness2:n,textFontSize:l,exportingWitness:a,searchValue:c,showTableContent:A.Q(e),searchResults:A.A(e,c)}}),null,(function(e,t,n){var r=t.dispatch,o=e.selectedText;return Vi(Vi(Vi({},n),e),{},(Fi(n={navigationButtonClicked:function(){t.dispatch(j.gc(!e.textListIsVisible))},onSelectedWitness:function(e){r(j.Tc(null==o?void 0:o.id,null==e?void 0:e.id))},onChangedFontSize:function(e){r(j.ec(e))},onChangeWindowOpen:function(e,t){r(j.ad(e,t))},onExport:function(){r(j.lc(e.selectedWitness.id,"docx"))}},"navigationButtonClicked",(function(){r(j.gc(!e.textListIsVisible))})),Fi(n,"changeIsAnnotating",(function(e){r(j.Ob(e)),!1===e&&(e=j.ac(null),r(e),r(j.ac(null)))})),Fi(n,"searchChanged",(function(e){r(j.bc(e))})),Fi(n,"changeShowTableContent",(function(e){r(j.Yc(e))})),Fi(n,"changeSelectSyncId",(function(e){r(j.Ub(e))})),n))}))(ri),Qi=(a=n(1044),n.n(a));function Ji(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var $i=Object(s.a)("div")((function(e){return Ji({position:"relative",borderRadius:(e=e.theme).shape.borderRadius,backgroundColor:Object(wn.a)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object(wn.a)(e.palette.common.white,.25)},marginLeft:0,width:"100%"},e.breakpoints.up("sm"),{marginLeft:e.spacing(1),width:"auto"})})),Ki=Object(s.a)("div")((function(e){return{padding:e.theme.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"}})),Gi=Object(s.a)(pe.c)((function(e){return{color:"inherit","& .MuiInputBase-input":Ji({padding:(e=e.theme).spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(e.spacing(4),")"),transition:e.transitions.create("width"),width:"100%"},e.breakpoints.up("sm"),{width:"0",cursor:"pointer","&:focus":{width:"20ch"}})}}));var Yi=i.a.memo((function(){var e=[{Id:1,Title:"chapter 1",segment_id:0},{Id:2,Title:"chapter 2",segment_id:400}];return e.length,i.a.createElement(we.a,{className:Qi.a.TableContent,sx:{bgcolor:"heading.main",color:"text.primary",width:"100%",height:"100%",paddingInline:2}},i.a.createElement(On.a,{sx:{justifyContent:"space-between",paddingLeft:"0 !important",margin:0}},i.a.createElement(ce.a,{textTransform:"uppercase",component:"h6"},"Table Of Content"),i.a.createElement($i,null,i.a.createElement(Ki,null,i.a.createElement(Qt.a,null)),i.a.createElement(Gi,{placeholder:"Search…",inputProps:{"aria-label":"search"}}))),i.a.createElement(we.a,null,e.map((function(e,t){return i.a.createElement(we.a,{key:"TableContent-"+t,sx:{cursor:"pointer",width:"fit-content","&:hover":{fontWeight:"bold"}}},e.Title)}))))})),Zi=(Vn=n(1045),n.n(Vn));function Xi(e){return(Xi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ea(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ta(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ta(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ta(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function na(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function ra(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?na(Object(n),!0).forEach((function(t){var r,o;r=e,o=n[t=t],t in r?Object.defineProperty(r,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[t]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):na(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function oa(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ia(e,t){return(ia=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function aa(e){return(aa=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function la(e){return"s_"+e.start}function ca(e){return"ds_"+e.start}function sa(e){return"i_"+e.start}function ua(e){return"p_"+(e.end+1)}function fa(e){return"l_"+(e.end+1)}var da=String.fromCharCode(182),pa=oi.a.renderToStaticMarkup(i.a.createElement(Ro,null)),ha=(ri=function(e){var t=r;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ia(t,e);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=aa(e);n=t?(n=aa(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),r=this;if(n&&("object"===Xi(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==r)return r;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(r);function r(e){var t;if(this instanceof r)return(t=n.call(this,e)).textAlignmentById=[],t.state={segmentedText:e.segmentedText},t.textAlignmentById=t.props.textAlignmentById,t._renderedSegments=null,t._renderedHtml=null,t.rangeSelect=[],t.theme=e.theme,t;throw new TypeError("Cannot call a class as a function")}return t=r,(e=[{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.setState((function(t,n){return ra(ra({},t),{},{segmentedText:e.segmentedText})}))}},{key:"annotationsForSegment",value:function(e){var t=[],n=this.props.annotationPositions[String(e.start)],r=this.props.annotationPositions[mn.c+e.start]||[],o=this.props.annotationPositions[mn.b+e.start]||[],i=this.props.annotationPositions[mn.e+(e.end+1)]||[];e=this.props.annotationPositions[mn.d+(e.end+1)]||[];return(t=n||t).concat(r,o,i,e)}},{key:"segmentsContainSegment",value:function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(r.start===t.start&&r.text===t.text)return!0}return!1}},{key:"selectedElement",value:function(e){if("DIV"===e.tagName)this.props.selectedSegmentId("");else{var t=[],n=[],r=document.getSelection(),o=parseInt(e.id.replace("s_",""));if(this.props.changeSyncIdOnClick(o),null!=e&&e.id.includes("s_")&&this.props.condition){this.props.changeScrollToId({id:null,from:null});var i=parseInt(e.id.replace("s_","")),a=Ar()(this.textAlignmentById,(function(e){return i>=e.start&&i<e.end}));if(a){for(var l=a.start;l<a.end;l++)t.push(l);for(var c=a.TStart;c<a.TEnd;c++)n.push(c);this.props.changeSelectedRange({source:t,target:n})}}r&&"Range"===r.type||(this.props.selectedSegmentId(e.id),e.id||this.props.changeSelectedRange({source:[],target:[]}))}}},{key:"generateHtml",value:function(e,t){var n=t.segmentedText.segments,r=Zi.a.textLine,o='<p class="'+r+'">';if(0===n.length)return{__html:o};for(var i=Zi.a.insertion,a=n[n.length-1].end+1,l=(e.annotationPositions[mn.c+a]&&(t=new _n.a(a,""),n.push(t)),e.annotationPositions[mn.e+a]&&(t=new _n.a(a,""),n.push(t)),e.annotationPositions[mn.d+a]&&(t=new _n.a(a,""),n.push(t)),e.activeAnnotations||{}),c=Zi.a.highlight,s=Zi.a.activeHighlight,f=null,d={},p=0;p<n.length;p++){var h=n[p],m="",y=[],g=this.annotationsForSegment(h),b=null,v=!1,x=!1,w=!1,O=!1,S=null;if(g){for(var E,T=[],I=[],j=[],A=[],P=0,k=g.length;P<k;P++){var C,R=g[P];R.isInsertion?R.uniqueId in l?T.push(R):(C=R.start,d.hasOwnProperty(C)||(I.push(R),d[C]=R)):R.isDeletion?R.uniqueId in l&&A.push(R):R.type!==Bn.a.pageBreak||e.activeWitness.isWorking?R.type!==Bn.a.lineBreak||e.activeWitness.isWorking?j.push(R):O=R:S=R}0===T.length&&0<I.length&&(_=I[0],E=sa(h),B=i,e.activeAnnotation&&e.activeAnnotation.isInsertion&&e.activeAnnotation.start===_.start&&(B+=" "+Zi.a.selectedAnnotation),o+="<span id="+E+" key="+E+' class="'+B+'">'+_.content+"</span>"),0<A.length&&(E=A[0],b=e.getBaseAnnotation(E).content,e.activeAnnotation&&e.activeAnnotation.isDeletion&&e.activeAnnotation.start===E.start&&e.activeAnnotation.length===E.length&&0===h.length&&(v=!0)),S&&e.activeAnnotation&&e.activeAnnotation.uniqueId===S.uniqueId&&(x=!0),O&&e.activeAnnotation&&e.activeAnnotation.uniqueId===O.uniqueId&&(w=!0),(0<j.length||0<T.length)&&y.push(Zi.a.annotation)}if(h.start===a)break;var _,B=null,W=(0===h.length?(B=ca(h),y.push(Zi.a.removedByAnnotation),b&&(h=new _n.a(h.start,b))):B=la(h),(this.segmentsContainSegment(e.selectedAnnotatedSegments,h)||v)&&y.push(Zi.a.selectedAnnotation),e.selectedSourceRange.includes(h.start)&&e.condition&&(_="light"===e.theme.palette.mode?Zi.a.selectedRangelight:Zi.a.selectedRangeDark,y.push(_)),0<y.length&&(m='class="'+u.a.apply(void 0,y)+'"'),h.text);if(e.searchStringPositions){var N=h.start,L=N,D=(W="",c);e.selectedSearchResult&&e.selectedSearchResult.start<=L&&e.selectedSearchResult.start+e.selectedSearchResult.length>L&&(D=s);for(var H=0;H<h.text.length;H++){var z,M,q,V=h.text.charAt(H);L=N+H;f?((z=ea(f,2))[0],0===H&&(W+='<span class="'+D+'">'),L===z[1]?(W+=V+"</span>",f=null):H===h.text.length-1?W+=V+"</span>":W+=V):L in e.searchStringPositions?(M=(z=ea(e.searchStringPositions[L],2))[0],q=z[1],W+='<span class="'+D+'">'+V,H!==h.text.length-1&&L!==q||(W+="</span>"),L<q&&(f=[M,q])):W+=V}}o+="<span id="+B+" key="+B+" "+m+">"+W+"</span>",S&&(b=[Zi.a.pageBreak],x&&b.push(Zi.a.selectedAnnotation),v=' class="'+b.join(" ")+'" ',o+="<span id="+ua(h)+" key="+ua(h)+v+">"+pa+"</span>"),O&&(y=[Zi.a.lineBreak],w&&y.push(Zi.a.selectedAnnotation),m=' class="'+y.join(" ")+'" ',o=o+"<span id="+fa(h)+" key="+fa(h)+m+">"+da+'</span></p><p class="'+r+'">')}return this._renderedSegments=n,{__html:o+="</p>"}}},{key:"shouldComponentUpdate",value:function(e,t){return t=this.generateHtml(e,t),this.props.fontSize!==e.fontSize||(!this._renderedHtml||t.__html!==this._renderedHtml.__html)&&(this._renderedHtml=t,!0)}},{key:"componentDidUpdate",value:function(){this.textAlignmentById=this.props.textAlignmentById}},{key:"render",value:function(){var e=this,t=[Zi.a.text],n=(0===this.props.row&&t.push(Zi.a.textFirstRow),this._renderedHtml||this.generateHtml(this.props,this.state));return this._renderedHtml||(this._renderedHtml=n),i.a.createElement("div",{className:Zi.a.textContainer},i.a.createElement("div",{className:u.a.apply(void 0,t),id:"text1",dangerouslySetInnerHTML:n,style:{fontSize:this.props.fontSize,fontFamily:"var(--tibetan-fonts)"},onClick:function(t){e.selectedElement(t.target)}}))}}])&&oa(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),r}(i.a.Component),Object(Oe.a)(ri)),ma=(a=n(1046),n.n(a));function ya(e){return(ya="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ga(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function ba(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ga(Object(n),!0).forEach((function(t){va(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ga(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function va(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xa(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return wa(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?wa(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function wa(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Oa(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Sa(e,t){return(Sa=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ea(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ta(e){return(Ta=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n(1047),parseInt(Dr.a.inlineWidth);var Ia="bdrcimg_pre",ja={},Aa=function(e){var t=r;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Sa(t,e);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ta(e);n=t?(n=Ta(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),r=this;if(n&&("object"===ya(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return Ea(r)}}(r);function r(e){var t;if(this instanceof r)return(t=n.call(this,e)).textAlignmentById=[],t.childRef=o.createRef("0"),t.list=null,t.splitText=null,t.cache=new k.b({fixedWidth:!0}),t.imageAlignmentById=t.props.imageAlignmentById,t.changeImageScrollId=t.props.changeImageScrollId,t.splitTextRef=o.createRef(null),t.rowRenderer=t.rowRenderer.bind(Ea(t)),t.textListVisible=e.textListVisible,t.editMenuVisible=e.editMenuVisible,t.isPanelLinked=e.isPanelLinked,t.activeSelection=null,t.selectedNodes=null,t._mouseDown=!1,t._activeWitness=null,t._didSetInitialScrollPosition=!1,t._modifyingSelection=!1,t.imageHeight=null,t.imageWidth=null,t.calculatedImageHeight=null,t.processProps(e),t.changeScrollToId=e.changeScrollToId,t.changeSyncIdOnClick=e.changeSyncIdOnClick,t.closeAnnotation=e.closeAnnotation,t.scrollJump=e.scrollJump,t.textAlignmentById=[],t.scrollEvent=t.scrollEvent.bind(Ea(t)),t.selectedWindow=e.selectedWindow,t.changeImageScrollId=e.changeImageScrollId,t.imageData=e.imageData,t.condition=e.condition,t;throw new TypeError("Cannot call a class as a function")}return t=r,(e=[{key:"scrollEvent",value:function(e){if(2===this.selectedWindow)return null;var t;1===this.selectedWindow&&(t=[],this.textAlignmentById.map((function(e){var n=document.getElementById("s_"+e.start);n&&102<n.getBoundingClientRect().top&&t.push({id:e.id,start:e.start,target:e.TStart})})),He()(t)&&He()([])||1===this.selectedWindow&&this.debouncedScroll(t))}},{key:"updateList",value:function(){var e=!(0<arguments.length&&void 0!==arguments[0])||arguments[0],t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;if(this.props.showImages&&!this.calculatedImageHeight&&this.imageHeight&&this.imageWidth&&(this.calculatedImageHeight=this.calculateImageHeight()),this.list){var n=this.list;if(e)if(null!==t)if(Array.isArray(t)){if(Array.isArray(t))for(var r=0;r<t.length;r++){var o=t[r];this.cache.clear(o)}}else this.cache.clear(t);else this.cache.clearAll(),n.measureAllRows(),n.recomputeRowHeights(0);n.forceUpdateGrid()}}},{key:"mouseDown",value:function(){this._mouseDown=!0}},{key:"mouseUp",value:function(){var e;this._mouseDown=!1,this.activeSelection&&(e=(e=this.processSelection(this.activeSelection))||[],this.props.didSelectSegmentIds(e),this.activeSelection=null)}},{key:"handleSelection",value:function(e){this._modifyingSelection?(e.stopPropagation(),this._modifyingSelection=!1):(this.activeSelection=document.getSelection(),this._mouseDown||this.mouseUp())}},{key:"processSelection",value:function(e){if(0===e.rangeCount||e.isCollapsed||"Caret"===e.type)return this.selectedNodes=null;var t=(e=e.getRangeAt(0)).startContainer;if(!(t=this.getNodeSegmentSpan(t))||!t.parentNode)return null;var n=this.getRangeNodes(e,t.parentNode),r=(0<n.length&&(r=n[0],e.startOffset===r.textContent.length&&n.shift()),e.endContainer);return(r=this.getNodeSegmentSpan(r))&&r.parentNode?(r&&t.parentNode!==r.parentNode?n=n.concat(this.getRangeNodes(e,r.parentNode)):0===e.endOffset&&n.pop(),t=[],(this.selectedNodes=n).reduce((function(e,t){return t instanceof Element&&e.push(t.id),e}),t),t):null}},{key:"getNodeSegmentSpan",value:function(e){for(var t=e,n=null,r=/^(i|s|ds)_/;!n&&t.parentNode;)t instanceof Element&&r.test(t.id)&&(n=t),t=t.parentNode;return n}},{key:"getRangeNodes",value:function(e,t){for(var n=[],r=0,o=t.childNodes.length;r<o;r++){var i=t.childNodes[r];e.intersectsNode(i)&&n.push(i)}return n}},{key:"getControlsMeasurements",value:function(e){if(!this.splitText)return null;var t=this.splitText,n=null,r=null,o=null,i=null,a=null,l=[],c=0;if(e.activeAnnotation){var s=e.activeAnnotation;if(null===(c=xa(e.splitText.annotatedText.getPositionOfAnnotation(s),1)[0]))return console.warn("No startPos in getControlsMeasurements"),null;s.type===Bn.a.pageBreak&&--c,s.type===Bn.a.lineBreak&&--c;var u=c+s.length;0<s.length&&--u,n=e.splitText.getTextIndexOfPosition(u),i=t.getBoundingClientRect()}var f=[];if(e.selectedAnnotatedSegments&&0<e.selectedAnnotatedSegments.length){f=e.selectedAnnotatedSegments;for(var d=0;d<f.length;d++){var p=f[d];if(null===r&&p instanceof _n.a){r=p;break}}r&&(a=0===r.length&&e.activeAnnotation&&e.activeAnnotation.isInsertion?(o=sa(r),sa):(o=la(r),la))}else e.activeAnnotation&&(e.activeAnnotation.isDeletion?(o=ca(s=new _n.a(c,"")),a=ca,f=[r=s]):e.activeAnnotation.isInsertion?(u=xa(e.splitText.annotatedText.getPositionOfAnnotation(e.activeAnnotation),1)[0])&&(o=sa(t=new _n.a(u,"")),a=sa,f=[r=t]):e.activeAnnotation.type===Bn.a.pageBreak?(f=[r=new _n.a(c+1,"")],l=[o=ua(new _n.a(c,""))]):e.activeAnnotation.type===Bn.a.lineBreak&&(f=[r=new _n.a(c+1,"")],l=[o=fa(new _n.a(c,""))]));if(a)for(var h=0;h<f.length;h++){var m=f[h];m instanceof _n.a&&(m=a(m),l.push(m))}return null!=n&&r&&o&&i?{selectedTextIndex:n,firstSelectedSegment:r,selectedElementId:o,splitTextRect:i,selectedElementIds:l}:null}},{key:"shouldResetListCache",value:function(e,t){var n=!1;return!(e.showImages===t.showImages&&!this.pageBreaksChanged(e,t))||n}},{key:"pageBreaksChanged",value:function(e,t){return e=e.splitText.getTextsFinalPositions(),t=t.splitText.getTextsFinalPositions(),e.length!==t.length||JSON.stringify(e)!==JSON.stringify(t)}},{key:"lineBreaksChanges",value:function(e,t){var n=e.activeAnnotation,r=t.activeAnnotation,o=!1;return n&&n.isType(Bn.a.lineBreak)&&t.activeAnnotations&&!t.activeAnnotations.hasOwnProperty(n.uniqueId)&&(o=!0),!(!(r&&r.isType(Bn.a.lineBreak)&&e.activeAnnotations)||e.activeAnnotations.hasOwnProperty(r.uniqueId))||o}},{key:"selectedListRow",value:function(e){var t=null;return e.activeAnnotation?e.splitText.getTextIndexOfPosition(e.activeAnnotation.start):t}},{key:"processProps",value:function(e){var t=this,n=!1;if((o=((!this.props.selectedWitness||e.selectedWitness&&e.selectedWitness.id!==this.props.selectedWitness.id)&&(this._didSetInitialScrollPosition=!(n=!0)),!e.selectedSearchResult||this.props.selectedSearchResult&&e.selectedSearchResult.start===this.props.selectedSearchResult.start&&e.selectedSearchResult.textId===this.props.selectedSearchResult.textId||(console.log("resetting scroll position from search result"),this._didSetInitialScrollPosition=!1),this._filteredSelectedAnnotatedSegments=e.selectedAnnotatedSegments.reduce((function(e,t){return t instanceof _n.a&&e.push(t),e}),[]),this.getControlsMeasurements(e)))&&(this.selectedTextIndex=o.selectedTextIndex,this.firstSelectedSegment=o.firstSelectedSegment,this.splitTextRect=o.splitTextRect,this.selectedElementId=o.selectedElementId,this.selectedElementIds=o.selectedElementIds),e.textListVisible!==this.textListVisible||e.editMenuVisible!==this.editMenuVisible)setTimeout((function(){t.textListVisible=e.textListVisible,t.editMenuVisible=e.editMenuVisible,t.updateList(!0)}),500);else if(n)this.updateList(!0);else if(this.pageBreaksChanged(this.props,e)){var r=null,o=this.selectedListRow(this.props);n=this.selectedListRow(e);if(o&&n){r=[];for(var i=n<o?n:o,a=this.props.splitText.texts.length;i<a;i++)r.push(i)}this.updateList(!0,r)}else if(this.lineBreaksChanges(this.props,e)){n=(n=this.selectedListRow(e))||this.selectedListRow(this.props),o=this.props.splitText.texts;var l=[];if(null!==n){for(var c=n,s=o.length;c<s;c++)l.push(c);this.updateList(!0,l)}}else this.props.fontSize!==e.fontSize?this.updateList(!0):this.props.activeAnnotation&&e.activeAnnotation&&this.annotationsInSameLocation(this.props.activeAnnotation,e.activeAnnotation)?this.updateList(!0,this.selectedListRow(e)):this.updateList(this.shouldResetListCache(this.props,e))}},{key:"annotationsInSameLocation",value:function(e,t){return e.start===t.start&&e.length===t.length}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.processProps(e)}},{key:"scrollToIndex",value:function(e){var t=this.list;setTimeout((function(){t.scrollToRow(e),setTimeout((function(){t.scrollToPosition(t.props.scrollTop-300)}),0)}),100)}},{key:"componentDidMount",value:function(){var e=this;this.resizeHandler=Cn()((function(){e.calculatedImageHeight=null,e.updateList()}),600).bind(this),this.debouncedScroll=yt()((function(t){t.length&&e.changeScrollToId({id:null==(t=t[0])?void 0:t.start,from:1})}),1e3),window.addEventListener("resize",this.resizeHandler),this.selectionHandler=yt()((function(t){e.handleSelection(t)}),200).bind(this),document.addEventListener("selectionchange",this.selectionHandler),document.addEventListener("mousedown",this.mouseDown.bind(this),!0),document.addEventListener("mouseup",this.mouseUp.bind(this),!0),this.processProps(this.props),this.timer=setTimeout((function(){e.resizeHandler()}),2e3),this.splitText.style.scrollBehavior="smooth",this.componentDidUpdate()}},{key:"componentDidUpdate",value:function(e){var t,n,r,o,i,a,l=this,c=(this.imageData=this.props.imageData,this.imageData!==(null==e?void 0:e.imageData)&&(this.calculatedImageHeight=null,this.updateList(!0)),this.props.textAlignment),s=(this.imageAlignmentById=this.props.imageAlignmentById,this.SearchSyncId=this.props.syncIdOnSearch||null,this.condition=this.props.condition,this.props.scrollToId),u=this.list;((null==e?void 0:e.searchResults)!==(null==(a=this.props)?void 0:a.searchResults)||(null==e?void 0:e.syncIdOnSearch)!==(null==(a=this.props)?void 0:a.syncIdOnSearch))&&this.props.searchResults&&this.SearchSyncId&&(e=this.props.splitText.getTextIndexOfPosition(this.SearchSyncId),this.srcollToIndex(e)),this.textAlignmentById=this.props.textAlignmentById,this.selectedWindow=this.props.selectedWindow,this.targetId=this.props.syncIdOnClick,this.selectedNodes&&0<this.selectedNodes.length&&(t=this.selectedNodes,n=this.props.selectedAnnotatedSegments,setTimeout((function(){var e=document.createRange(),r=t[0],o=t[t.length-1],i=n[n.length-1];i instanceof _n.a&&(i=document.getElementById(la(i)))&&(o=i),r instanceof Element&&o instanceof Element&&(r=document.getElementById(r.id),o=document.getElementById(o.id),r&&o&&(e.setStart(r,0),e.setEnd(o,o.childNodes.length),(i=document.getSelection())&&(l._modifyingSelection=!0,i.removeAllRanges(),i.addRange(e),l.selectedNodes=null)))}),0)),!this._didSetInitialScrollPosition&&this.list&&(r=this.list,(this.props.activeAnnotation||this.props.selectedSearchResult)&&(o=this.getSelectedTextIndex(),setTimeout((function(){r.scrollToRow(o),setTimeout((function(){r.scrollToPosition(r.props.scrollTop-300)}),0)}),100)),this._didSetInitialScrollPosition=!0),"video"==s.from&&s.id&&(a=s.id,i=this.props.splitText.getTextIndexOfPosition(a),setTimeout((function(){u.scrollToRow(i),setTimeout((function(){u.scrollToPosition(u.props.scrollTop-300)}),0)}),100)),2===this.selectedWindow&&2==s.from&&this.condition&&null!==s.id&&(this.textAlignmentById=this.props.textAlignmentById||[],c&&null!==(a=null==(e=this.textAlignmentById.find((function(e){return e.TStart===s.id})))?void 0:e.start)&&(e=this.props.splitText.getTextIndexOfPosition(a),this.scrollToIndex(e))),this.targetId&&"ua"===s.from&&2===this.selectedWindow&&"ua"===s.id&&this.condition&&(c=null==(a=c.alignment.find((function(e){return l.targetId>=e.target_segment.start&&l.targetId<e.target_segment.end})))||null==(e=a.source_segment)?void 0:e.start,a=this.props.splitText.getTextIndexOfPosition(c),this.scrollToIndex(a))}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousedown",this),document.removeEventListener("mouseup",this),window.removeEventListener("resize",this.resizeHandler),document.removeEventListener("selectionchange",this.selectionHandler),clearTimeout(this.timer)}},{key:"calculateImageHeight",value:function(){var e,t,n=null;return this.imageHeight&&this.imageWidth&&(e=this.imageWidth/this.imageHeight,t=ma.a.pechaImage,0<(t=document.getElementsByClassName(t)).length&&(n=t[0].offsetWidth/e)),n}},{key:"getSelectedTextIndex",value:function(){var e,t=0,n=null;return this.props.activeAnnotation?n=xa(this.props.splitText.annotatedText.getPositionOfAnnotation(this.props.activeAnnotation),1)[0]:this.props.selectedSearchResult&&((e=this.props.splitText.annotatedText.segmentAtOriginalPosition(this.props.selectedSearchResult.start))instanceof _n.a?n=e.start:"number"==typeof e&&(n=e)),n?this.props.splitText.getTextIndexOfPosition(n):t}},{key:"getBaseAnnotation",value:function(e){var t=xa(this.props.splitText.annotatedText.getPositionOfAnnotation(e),1)[0];return this.props.splitText.annotatedText.getBaseAnnotation(t=null===t?0:t,e.content.length)}},{key:"render",value:function(){var e=this,t=this.props,n=this.rowRenderer,r=this.cache,i=t.selectedWitness?t.selectedWitness.id:0;return o.createElement("div",{className:ma.a.splitText,ref:function(t){return e.splitText=t},key:i},o.createElement("button",{id:"updateList",style:{display:"none"},onClick:this.resizeHandler}),o.createElement(P.a,{disableWidth:!0},(function(i){return i=i.height,o.createElement(C.a,{width:1,ref:function(t){return e.list=t},height:i,rowCount:t.splitText.texts.length,rowHeight:r.rowHeight,rowRenderer:n,overscanRowCount:0,deferredMeasurementCache:r,onScroll:e.scrollEvent,scrollToAlignment:"start",containerStyle:{width:"100%",maxWidth:"100%"},style:{width:"100%"}})})))}},{key:"getImageUrl",value:function(e){if(!this.props.selectedWitness||!this.props.selectedWitness.properties)return"";var t=(r=this.props.selectedWitness.properties)[Ia],n=r.bdrcimg_number,r=r.bdrcimg_suffix;return"//iiif.bdrc.io/"+t+(Number(n)+e)+"."+r+"/full/full/0/default.jpg"}},{key:"getStringPositions",value:function(e,t,n){var r=this.props.splitText.annotatedText.getUniqueId();if((ja=ja.hasOwnProperty(r)?ja:va({},r,{}))[r].hasOwnProperty(t)||(ja[r]=va({},t,{})),ja[r][t].hasOwnProperty(n))return ja[r][t][n];for(var o=new W.a,i=e.getText(),a=null==(e=e.segments[0])?void 0:e.start,l=[],c=i.indexOf(t);-1!==c;)l.push(c),c=i.indexOf(t,c+1);var s={};if(0<l.length)for(var u=o.splitGraphemes(i),f=0,d=null,p=0;p<u.length;p++){var h=u[p],m=f+(h.length-1);null!==d?d+(t.length-1)<=m&&(s[d+a]=[d+a,m+a],d=null):-1!==l.indexOf(f)?t.length===h.length?s[f+a]=[f+a,m+a]:t.length>h.length&&(d=f):d=null,f+=h.length}return ja[r][t][n]=s}},{key:"rowRenderer",value:function(e){var t=e.key,n=e.index,r=e.parent,i=(e=e.style,this.props),a=this.cache,l=this,c=i.showImages?ma.a.pechaImage:null,s="",u=(i.selectedWitness&&i.selectedWitness.properties&&i.selectedWitness.properties.hasOwnProperty(Ia)&&(s=this.getImageUrl(n)),{}),f=this.props.searchValue,d=(f&&0<f.length&&i.splitText&&(u=this.getStringPositions(i.splitText.texts[n],f,n)),{});i.showImages&&c&&this.calculatedImageHeight&&(d.height=this.calculatedImageHeight+"px"),e=ba(ba({},e),{},{height:e.height+10,cursor:this.props.isAnnotating?"text":"pointer"});return o.createElement(k.a,{columnIndex:0,key:t,parent:r,rowIndex:n,cache:a},o.createElement("div",{key:t,style:e,className:ma.a.splitTextRow,ref:this.splitTextRef,id:"index_".concat(n)},o.createElement("div",{className:ma.a.splitTextRowContent},i.showImages&&o.createElement("div",{className:c,style:d},o.createElement("img",{alt:"Text related Image",className:ma.a.image,src:s,width:"100%",height:"100%",loading:"lazy",decoding:"async",onLoad:function(e){e.target&&null===l.imageWidth&&(l.imageWidth=e.target.naturalWidth,l.imageHeight=e.target.naturalHeight,l.calculatedImageHeight=null,window.setTimeout(l.updateList.bind(l),0))}})),o.createElement(ha,{ref:this.childRef,segmentedText:i.splitText.texts[n],annotations:i.annotations,activeAnnotations:i.activeAnnotations,activeAnnotation:i.activeAnnotation,row:n,selectedSegmentId:i.selectedSegmentId,annotationPositions:i.annotationPositions,selectedAnnotatedSegments:this._filteredSelectedAnnotatedSegments,getBaseAnnotation:this.getBaseAnnotation.bind(this),activeWitness:this.props.selectedWitness,searchValue:f,selectedSearchResult:this.props.selectedSearchResult,searchStringPositions:u,fontSize:i.fontSize,changeSyncIdOnClick:this.props.changeSyncIdOnClick,changeScrollToId:this.props.changeScrollToId,textAlignmentById:this.props.textAlignmentById,selectedSourceRange:this.props.selectedSourceRange,selectedTargetRange:this.props.selectedTargetRange,changeSelectedRange:this.props.changeSelectedRange,condition:this.condition})),this.props.isAnnotating&&this.selectedTextIndex===n&&this.props.activeAnnotation&&o.createElement(pi,{annotationPositions:i.annotationPositions,annotatedText:i.splitText.annotatedText,activeAnnotation:i.activeAnnotation,inline:!0,firstSelectedSegment:this.firstSelectedSegment,splitTextRect:this.splitTextRect,selectedElementId:this.selectedElementId,pechaImageClass:c,splitText:i.splitText,selectedElementIds:this.selectedElementIds,list:this.list})))}}])&&Oa(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),r}(o.PureComponent);function Pa(e){return(Pa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ka(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ca(e,t){return(Ca=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ra(e){return(Ra=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var _a,Ba,Wa,Na,La=0,Da=(s=function(e){var t=r;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ca(t,e);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ra(e);n=t?(n=Ra(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments),r=this;if(n&&("object"===Pa(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==r)return r;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(r);function r(){var e;if(this instanceof r)return(e=n.call(this)).key=La++,e.ref=i.a.createRef(),e.selectedWindow=null,e;throw new TypeError("Cannot call a class as a function")}return t=r,(e=[{key:"mouseEnter",value:function(){2===this.selectedWindow&&this.props.text.name&&this.props.changeSelectedWindow(1)}},{key:"componentDidMount",value:function(){this.ref.current.addEventListener("mouseenter",this.mouseEnter.bind(this))}},{key:"componentDidUpdate",value:function(){this.selectedWindow=this.props.selectedWindow}},{key:"render",value:function(){this.props.text&&this.props.text;var e,t,n=null;n=[this.props.annotatedText&&this.props.text&&!this.props.loading?(e=this.props.paginated?(e=this.props.pageBreaks,0===(t=hi(e))[0]&&t.shift(),function(e){return t}):Object(bn.a)(1e3,/^།[\s]+(?!།[\s]+)/,2,5),n=new gn(this.props.annotatedText,e),i.a.createElement(Aa,{splitText:n,annotations:this.props.annotations,activeAnnotations:this.props.activeAnnotations,activeAnnotation:this.props.activeAnnotation,limitWidth:!1,didSelectSegmentIds:this.props.didSelectSegmentIds,selectedSegmentId:this.props.selectedSegmentId,annotationPositions:this.props.annotationPositions,selectedAnnotatedSegments:this.props.selectedAnnotatedSegments,syncIdOnClick:this.props.syncIdOnClick,textListVisible:this.props.textListVisible,showImages:this.props.pageImagesVisible,imagesBaseUrl:this.props.imagesBaseUrl,selectedWitness:this.props.selectedWitness,selectedWitness2:this.props.selectedWitness2,key:this.key,selectedSearchResult:this.props.selectedSearchResult,searchValue:this.props.searchValue,fontSize:this.props.fontSize,isSecondWindowOpen:this.props.isSecondWindowOpen,changeScrollToId:this.props.changeScrollToId,changeSyncIdOnClick:this.props.changeSyncIdOnClick,imageData:this.props.imageData,isPanelLinked:this.props.isPanelLinked,selectedImage:this.props.selectedImage,changeSelectedImage:this.props.changeSelectedImage,isAnnotating:this.props.isAnnotating,closeAnnotation:this.props.closeAnnotation,textAlignment:this.props.textAlignment,textAlignmentById:this.props.textAlignmentById,isPanelVisible:this.props.isPanelVisible,scrollToId:this.props.scrollToId,selectedWindow:this.selectedWindow,selectedSourceRange:this.props.selectedSourceRange,selectedTargetRange:this.props.selectedTargetRange,changeSelectedRange:this.props.changeSelectedRange,searchResults:this.props.searchResults,showTableContent:this.props.showTableContent,selectedText:this.props.text,syncIdOnSearch:this.props.syncIdOnSearch,imageAlignmentById:this.props.imageAlignmentById,changeImageScrollId:this.props.changeImageScrollId,imageScrollId:this.props.imageScrollId,condition:this.props.condition})):i.a.createElement("div",{key:this.key},i.a.createElement(kn,null))];return i.a.createElement(we.a,{sx:{height:"100%",flex:1,bgcolor:"navbar.main",color:"texts.main"},className:u()(yi.a.textDetail,De.a.flex,De.a.flexColumn),key:this.key,ref:this.ref},i.a.createElement(Ui,null),i.a.createElement(zt.a,null),i.a.createElement(B.a,{loaded:!this.props.loading,zIndex:5}),i.a.createElement(we.a,{style:{display:"flex",height:"100%",width:"100%",position:"relative"}},i.a.createElement(we.a,{style:{flex:1},className:u()(yi.a.textContainer,De.a.flex)},this.props.loading?i.a.createElement("div",null):n),i.a.createElement(xn.a,{direction:"left",in:this.props.showTableContent,container:this.ref.current,unmountOnExit:!0,mountOnEnter:!0},i.a.createElement(we.a,{sx:{position:"absolute",height:"100%",minWidth:"50%",right:0}},i.a.createElement(Yi,null)))))}}])&&ka(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),r}(i.a.Component),n(60));function Ha(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function za(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ha(Object(n),!0).forEach((function(t){var r,o;r=e,o=n[t=t],t in r?Object.defineProperty(r,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[t]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ha(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ma(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||qa(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qa(e,t){if(e){if("string"==typeof e)return Va(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Va(e,t):void 0}}function Va(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Fa(e){return[e.start,e.length].join("-")}var Ua=null,Qa=(pe=Object(t.connect)((function(e){var t=Object(A.lb)(e),n=e.data.loadingWitnesses||e.data.loadingAnnotations,r=Object(A.db)(e),o=A.ab(e);if(n)return{text:null,witnesses:null,baseWitness:null,annotations:null,loading:n,paginated:null,pageImagesVisible:!0,annotatedText:null,selectedAnnotatedSegments:null,annotationPositions:null,activeAnnotations:null,activeAnnotation:null,user:t,textListVisible:r,fontSize:c.a,textAlignmentById:o,imageAlignmentById:Object(A.r)(e)};var i,a,l,s=Object(A.J)(e),u={},f=(s&&(i=Object(A.rb)(e,s.id),a=Object(A.n)(e,s.id)),Object(A.G)(e)),d={},p=[],h=null,m=Object(A.h)(e),y=[],g={},b=[],v="",x=Object(A.C)(e),w=!1,O=!1,S=Object(A.bb)(e);if(i&&s&&e.data.witnessAnnotationsById.hasOwnProperty(i.id)){u=Object(A.gb)(e,s.id),h=((l=(E=Object(A.N)(e,s.id))?Object(A.nb)(e,E):l)||(E=(l=i).id),l.id!==i.id&&(w=!0,O=Object(A.Bb)(e)),Da.d(e,l.id)),g=(E=Ma(Da.c(e,l,i),2))[0],p=E[1];if(h&&(d=function(e,t){if(e===_a&&t===Ba&&e.version===Na)return Wa;for(var n={},r={},o=0;o<t.length;o++)!function(o){var i=t[o],a=(o=Ma(e.getPositionOfAnnotation(i),2))[0],l=o[1];if(null!=a)if(0===l){if(i.isInsertion){if(o=Fa(i),o=r[o])return o.map((function(e){return n[e].push(i)}));a=mn.c+a}i.isDeletion&&0<i.length&&(a=mn.b+a),i.type===Bn.a.pageBreak&&(a=mn.e+a),i.type===Bn.a.lineBreak&&(a=mn.d+a),void 0===n[a]&&(n[a]=[]),-1===n[a].indexOf(i)&&n[a].push(i)}else{for(var c=[],s=a;s<a+l;s++)void 0===n[s]&&(n[s]=[]),-1===n[s].indexOf(i)&&n[s].push(i),c.push(s);i.isInsertion&&(o=Fa(i),r[o]=c)}}(o);return Ba=t,Wa=n,Na=(_a=e).version,n}(h,Object.values(p))),m&&h&&(m=Ua&&Ua.id===l.id?m:h.getAnnotation(m.start,m.length))&&(y=h.segmentsForAnnotation(m)),l&&a&&h){var E=h.getAnnotationsOfType(Bn.a.pageBreak)||{},T=null;l.id!==a.id&&(T=Object(A.m)(e,i.id,Bn.a.pageBreak,a.id));for(var I=0,j=(b=function(e,t){var n=[];if(Tr()(e,(function(e){return n.push(e.start)})),n=n.sort((function(e,t){return e-t})),t){var r=[];if(Tr()(t,(function(e){return r.push(e.start)})),r=r.sort((function(e,t){return e-t})),0===n.length)return r;if(n.length/r.length<.9)for(var o=n[n.length-1],i=0,a=r.length;i<a;i++){var l=r[i];o<l&&n.push(l)}console.log(n)}return n}(E,T)).length;I<j;I++){var P=b[I];(P=h.segmentAtOriginalPosition(P))instanceof _n.a?b[I]=P.start:P instanceof Number&&(b[I]=P)}w&&(v="/static/images/texts/"+s.name+"/"+l.source.name+"/")}}Ua=l;E=A.z(e),T=A.yb(e);var k=A.Z(e),C=A.T(e),R=A.P(e),_=(A.M(e),A.w(e)),B=Object(A.s)(e),W=A.zb(e),N=A.p(e);return{text:s,witnesses:u,workingWitness:i,baseWitness:a,annotations:p,loading:n,paginated:w,pageImagesVisible:O,annotatedText:h,selectedAnnotatedSegments:y,annotationPositions:d,activeAnnotations:za({},g),activeAnnotation:m,pageBreaks:b,imagesBaseUrl:v,user:t,textListVisible:r,selectedWitness:l,selectedSearchResult:f,searchValue:x,fontSize:S,isSecondWindowOpen:W,imageData:B,selectedImage:Object(A.E)(e),isImagePortrait:Object(A.xb)(e),isAnnotating:A.wb(e),textAlignment:k,textAlignmentById:o,scrollToId:E,syncIdOnClick:C,selectedWindow:R,selectedSourceRange:Object(A.H)(e),selectedTargetRange:Object(A.I)(e),searchResults:Object(A.A)(e,x),showTableContent:Object(A.Q)(e),syncIdOnSearch:A.U(e),imageAlignmentById:Object(A.r)(e),imageScrollId:Object(A.t)(e),selectedMedia:_,condition:N&&T&&W}}),null,(function(e,t,n){function r(e,t,n){var r=[],o=[],i=[];(e=f[e])&&(r=e.filter((function(e){return e.type===Bn.a.variant})),o=e.filter((function(e){return e.type===Bn.a.pageBreak})),i=e.filter((function(e){return e.type===Bn.a.lineBreak}))),e=ht()(r.concat(o,i),u.annotations,(function(e,t){return e.toString()==t.toString()})),o=null,o=0<e.length?e[0]:r&&0<r.length?(i=function(e){for(var t=null,n=0;n<e.length;n++){var r=e[n];(!t||r.length>t.length)&&(t=r)}return t}(r),r=(e=Ma(u.getPositionOfAnnotation(i),2))[0],e=e[1],i&&i.isInsertion&&(e=0),u.getBaseAnnotation(r,e)):u.getBaseAnnotation(t,n);s(Object(j.ac)(o))}function o(e){return-1!==e.indexOf("i_")}function i(e){return-1!==e.indexOf("ds_")}function a(e){return-1!==e.indexOf("p_")}function l(e){return-1!==e.indexOf("l_")}function c(e){return!o(e)&&i(e)?e.substr(3):e.substr(2)}var s=t.dispatch,u=e.annotatedText,f=e.annotationPositions;return za(za(za({},e),n),{},{didSelectSegmentIds:function(t){if(0!==t.length){var n,r=[],a=[],l=function(e,t){var n,r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=qa(e))||t&&e&&"number"==typeof e.length)return r&&(e=r),n=0,{s:t=function(){},n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,a=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){a=!0,o=e},f:function(){try{i||null==r.return||r.return()}finally{if(a)throw o}}}}(t);try{for(l.s();!(n=l.n()).done;){var d,p,h,m=n.value;i(m)||o(m)||(d=c(m),p=u.segmentedText.segmentAtPosition(d),a.push(p),(h=f[p.start])&&(r=r.concat(h)))}}catch(t){l.e(t)}finally{l.f()}r=pt()(r,(function(e,t){return e.toString()==t.toString()}));var y,g,b=ht()(r,u.annotations,(function(e,t){return e.toString()==t.toString()})),v=function(e,t,n,r){if(0===e.length)return null;for(var o=e[0],i=(e=e[e.length-1],o.start),a=e.end,l=null,c=null,s=0;s<n.length;s++){var u=n[s],f=null,d=(p=Ma(r.getPositionOfAnnotation(u),2))[0],p=p[1];-1!==t.indexOf(u)?(d&&d<i&&(i=d,l=u),(f=d+p-1)&&a<f&&(c=a=f)):a<(f=d+p-1)&&(a=f)}return{start:i,length:a-i+1,annotation:l&&c&&l===c?l:null}}(a,b,r,e.annotatedText);v?(y=u.getBaseAnnotation(v.start,v.length),null,g=v.annotation||(0<b.length?(b=u.segmentedText.segmentsInRange(v.start,v.length).reduce((function(e,t){return e+t.text}),""),e.selectedWitness||console.log("no stateProps.selectedWitness: %o",e.selectedWitness),new Bn.c(mn.f,function(e){var t=new Ir.b(mn.f,Ir.a);return e=new jr.a(e.id,e.name),new vt.a(mn.f,e,t,"",!1)}(e.text),y.start,y.length,b,Bn.a.variant,e.selectedWitness,e.user)):y),s(Object(j.ac)(g))):console.warn("No range for selected segment ids: %o",t)}},selectedSegmentId:function(t){var n,d=c(t),p=d;o(t)?p=mn.c+d:i(t)?p=mn.b+d:a(t)?p=mn.e+d:l(t)&&(p=mn.d+d),f[p],""===t?e.activeAnnotation&&(n=j.ac(null),s(n)):o(t)||i(t)||a(t)||l(t)?r(p,d,0):(n=Number(c(t)),(p=u.segmentedText.segmentAtPosition(n))&&r(p.start,p.start,p.length))},changeScrollToId:function(e){return s(j.Qb(e))},changeSyncIdOnClick:function(e){return s(j.Tb(e))},changeSelectedImage:function(e){s(j.Mc(e))},changeSelectedWindow:function(e){s(j.Sb(e))},changeSelectedRange:function(e){s(j.Rb(e))},changeShowTableContent:function(e){s(j.Yc(e))},closeAnnotation:function(){var e=j.ac(null);s(e)},changeImageScrollId:function(e){s(j.Nb(e))}})}))(s),i.a.memo(pe));function Ja(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function $a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ja(Object(n),!0).forEach((function(t){Ka(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ja(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ka(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ga(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ya=Object(t.connect)((function(e){var t=A.zb(e),n=A.w(e);return{selectedText:A.J(e),isSecondWindowOpen:t,Media:n}}),null,(function(e,t,n){return t.dispatch,$a($a({},n),e)}))((function(e){function t(e){var t=l.current.clientWidth,n=l.current.clientHeight;a(n<t)}var n=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Ga(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ga(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(Object(o.useState)(!0),2),r=n[0],a=n[1],l=Object(o.useRef)(null);return Object(o.useEffect)((function(){return t(),window.addEventListener("resize",t),function(){return window.removeEventListener("resize",t)}}),[]),i.a.createElement("div",{ref:l,style:{display:"flex",flexDirection:"column",width:"100%",height:"100%",overflow:"hidden",position:"relative"}},i.a.createElement(Ne.a,{split:r?"vertical":"horizontal",size:e.isSecondWindowOpen&&e.selectedText?"50%":"100%",resizerClassName:u()(dt.a.Resizer,Ka({},dt.a.vertical,r),Ka({},dt.a.horizontal,!r)),onDragFinished:function(e){0<e&&window.dispatchEvent(new Event("resize"))}},i.a.createElement(ft,null,i.a.createElement(Qa,null)),i.a.createElement(ft,null,e.isSecondWindowOpen&&e.selectedText&&i.a.createElement(Er,null))),e.Media.isPanelVisible&&i.a.createElement(ft,null,i.a.createElement(at,null)))})),Za=n(1082),Xa=n(1083),el=n(1095),tl=n(1081),nl=n(1080),rl=n(1072),ol=n(1073),il=n(1074),al=n(1075),ll=n(1076);function cl(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var sl=Object(t.connect)((function(e){var t,n,r=A.J(e),o=A.K(e);return r&&(A.gb(e,r.id),t=(t=A.N(e,r.id))?A.nb(e,t):A.rb(e,r.id)),o&&(A.hb(e,o.id),n=(n=A.O(e,o.id))?A.ob(e,n):A.sb(e,o.id)),-1===!e.user.userId&&(user=e.user),{selectedText:r,selectedWitness:t,selectedText2:o,selectedWitness2:n,title:A.kb(e,"header.title"),page:e.page,isAnnotating:A.wb(e),isSecondWindowOpen:A.zb(e),theme:A.jb(e),isPanelLinked:A.yb(e),textListIsVisible:A.db(e)}}),(function(e){return{onChangedTextWidth:function(t){e(j.hc(t))},onChangedTextListVisible:function(t){e(j.gc(t))},changeIsAnnotating:function(t){e(j.Ob(t)),!1===t&&(t=j.ac(null),e(t),e(j.ac(null)))},onChangeWindowOpen:function(t,n){e(j.ad(t,n))},onChangePanelLink:function(t){e(j.Pb(t))}}}))((function(e){function t(e,t){"clickaway"!==t&&l(!1)}var n=[Le.a.listContainer],r=(c.g,c.f,function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return cl(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?cl(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(Object(o.useState)(!1),2)),a=r[0],l=r[1];return c.b,e.textListWidth,e.textListIsVisible?n.push(Le.a.showListContainer):n.push(Le.a.hideListContainer),r="calc(100vh - "+ne.a.headerHeight+")",n=[{icon:i.a.createElement(rl.a,{htmlColor:e.isAnnotating?"#ff7961":void 0}),name:"Annotate",condition:e.isAnnotating,function:function(){return e.changeIsAnnotating(!e.isAnnotating)}},{icon:i.a.createElement(ol.a,{htmlColor:e.isPanelLinked?"#ff7961":void 0}),name:"Link Panel",condition:e.isPanelLinked,function:function(){return e.onChangePanelLink(!e.isPanelLinked)}},{icon:i.a.createElement(il.a,null),name:"Share",function:function(){var t=e.selectedText,n=e.selectedText2,r=e.selectedWitness,o=e.selectedWitness2,i=n&&o?window.location.origin+"/texts/".concat(t.id,"/witnesses/").concat(null==r?void 0:r.id,"/texts2/").concat(n.id,"/witnesses2/").concat(o.id):window.location.origin+"/texts/".concat(t.id,"/witnesses/").concat(null==r?void 0:r.id);navigator.clipboard.writeText(i).then().catch((function(e){return console.log(e.message)})).finally((function(){return l(!0)}))}},{icon:i.a.createElement(al.a,{htmlColor:e.isSecondWindowOpen?"#ff7961":void 0}),name:"Split Window",condition:e.isSecondWindowOpen,function:function(){return e.onChangeWindowOpen(!e.isSecondWindowOpen,140)}}],Object(o.useEffect)((function(){var e=setTimeout((function(){window.dispatchEvent(new Event("resize"))}),1e3);return function(){return clearTimeout(e)}}),[e.textListIsVisible]),i.a.createElement("div",{className:u()(Le.a.interface,De.a.flex)},i.a.createElement(Ne.a,{size:"fit-content",onDragFinished:function(e){0<e&&window.dispatchEvent(new Event("resize"))},resizerStyle:{display:"none"},style:{height:"auto",position:"static"}},i.a.createElement(Ve.a,{sx:{height:"100%"},orientation:"horizontal",in:e.textListIsVisible,mountOnEnter:!0,unmountOnExit:!0},i.a.createElement(_e,null)),i.a.createElement(ll.a,{sx:{height:"100vh",width:"100%"}},i.a.createElement(Ya,{bodyHeight:r}))),i.a.createElement(Za.a,{ariaLabel:"SpeedDial basic",sx:{position:"absolute",bottom:60,right:16},icon:i.a.createElement(Xa.a,null)},n.map((function(e){return i.a.createElement(el.a,{key:e.name,icon:e.icon,tooltipTitle:e.name,onClick:e.function,open:e.condition})}))),i.a.createElement(tl.a,{open:a,autoHideDuration:6e3,onClose:t},i.a.createElement(nl.a,{onClose:t,severity:"success",sx:{width:"100%"}},"The Url Copied to Clipboard !")))}))},833:function(e,t,n){e.exports={"green-tint":"#88af8e","blue-tint":"#024279","active-button":"#00746b",mainTint:"#024279",activeButton:"#00746b",inlineWidth:"280px",annotationControls:"AnnotationControls---annotationControls",annotationContent:"AnnotationControls---annotationContent",subTitle:"AnnotationControls---subTitle",title:"AnnotationControls---title",sectionHeading:"AnnotationControls---sectionHeading",text:"AnnotationControls---text",padding:"AnnotationControls---padding",arrowTop:"AnnotationControls---arrowTop",arrowLeft:"AnnotationControls---arrowLeft",arrowRight:"AnnotationControls---arrowRight",inline:"AnnotationControls---inline",arrow:"AnnotationControls---arrow",arrowDs:"AnnotationControls---arrowDs",nothingSelected:"AnnotationControls---nothingSelected",anonymousMessage:"AnnotationControls---anonymousMessage",noNotes:"AnnotationControls---noNotes",breakButtons:"AnnotationControls---breakButtons"}},835:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(0);function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function a(e,t){var n=(i=o(Object(r.useState)((function(){return n=e,r=t,(n=JSON.parse(localStorage.getItem(n)))||r;var n,r})),2))[0],i=i[1];return Object(r.useEffect)((function(){localStorage.setItem(e,JSON.stringify(n))}),[n]),[n,i]}},836:function(e,t,n){e.exports={"green-tint":"#88af8e","blue-tint":"#024279","active-button":"#00746b",mainTint:"#024279",activeButton:"#00746b",save:"Button---save",cancel:"Button---cancel",buttonContainer:"Button---buttonContainer"}},841:function(e,t,n){e.exports={"green-tint":"#88af8e","blue-tint":"#024279","active-button":"#00746b","header-height":"40px",mainTint:"#024279",activeButton:"#00746b",headerHeight:"40px",header:"Header---header",logo:"Header---logo",navigationButton:"Header---navigationButton",loginButton:"Header---loginButton",ButtonText:"Header---ButtonText",buttonLink:"Header---buttonLink",controls:"Header---controls"}},843:function(e,t,n){e.exports={"green-tint":"#88af8e","blue-tint":"#024279","active-button":"#00746b",mainTint:"#024279",activeButton:"#00746b"}},847:function(e,t,n){"use strict";t.a=n.p+"ea9a1cd4d17aad5a9c5bdfde6acaad2e.png"},852:function(e,t,n){e.exports={"green-tint":"#88af8e","blue-tint":"#024279","active-button":"#00746b","ThirdWindow-Height":"300px","header-Height":"35px",mainTint:"#024279",activeButton:"#00746b",ThirdWindowHeight:"250px",ThirdWindow:"Image---ThirdWindow",ThirdWindowPortrait:"Image---ThirdWindowPortrait",header:"Image---header",listOfImages:"Image---listOfImages",ImageStyle:"Image---ImageStyle",imageSection:"Image---imageSection"}},864:function(e,t,n){e.exports={"green-tint":"#88af8e","blue-tint":"#024279","active-button":"#00746b",mainTint:"#024279",activeButton:"#00746b",textList:"TextList---textList",textListRow:"TextList---textListRow",selectedRow:"TextList---selectedRow",textNameRow:"TextList---textNameRow",textName:"TextList---textName",highlight:"TextList---highlight",searchResults:"TextList---searchResults",searchResult:"TextList---searchResult",selectedSearchResult:"TextList---selectedSearchResult",searchTotal:"TextList---searchTotal",textListLoader:"TextList---textListLoader",searching:"TextList---searching",loadMore:"TextList---loadMore"}},893:function(e,t,n){e.exports={"green-tint":"#88af8e","blue-tint":"#024279","active-button":"#00746b",mainTint:"#024279",activeButton:"#00746b",annotationDetail:"AnnotationDetail---annotationDetail",active:"AnnotationDetail---active",annotationHeader:"AnnotationDetail---annotationHeader",activeIcon:"AnnotationDetail---activeIcon",editing:"AnnotationDetail---editing",actionButtons:"AnnotationDetail---actionButtons",edit:"AnnotationDetail---edit",editImage:"AnnotationDetail---editImage",save:"AnnotationDetail---save",cancel:"AnnotationDetail---cancel"}},919:function(e,t,n){e.exports={textsSearchContainer:"TextsSearch---textsSearchContainer",textsSearch:"TextsSearch---textsSearch",minify:"TextsSearch---minify"}},920:function(e,t,n){e.exports={button:"Button---button",buttonNoBezel:"Button---buttonNoBezel",active:"Button---active",leftAlign:"Button---leftAlign",title:"Button---title",icon:"Button---icon"}},921:function(e,t,n){e.exports={"green-tint":"#88af8e","blue-tint":"#024279","active-button":"#00746b",mainTint:"#024279",activeButton:"#00746b",accessory:"Accessory---accessory"}},936:function(e,t,n){e.exports={container:"LoadMore---container"}},937:function(e,t,n){e.exports={tab:"TextListTab---tab",showTab:"TextListTab---showTab",hideTab:"TextListTab---hideTab"}},938:function(e,t,n){e.exports={"green-tint":"#88af8e","blue-tint":"#024279","active-button":"#00746b",mainTint:"#024279",activeButton:"#00746b",Resources:"Sidebar---Resources",ResourceDetail:"Sidebar---ResourceDetail",optionlist:"Sidebar---optionlist","css-heg063-MuiTabs-flexContainer":"Sidebar---css-heg063-MuiTabs-flexContainer"}},939:function(e,t,n){},941:function(e,t,n){},945:function(e,t,n){e.exports={Dictionary:"ResourceOption---Dictionary"}},952:function(e,t,n){e.exports={container:"EditorContainer---container",interface:"EditorContainer---interface",listContainer:"EditorContainer---listContainer",showListContainer:"EditorContainer---showListContainer",hideListContainer:"EditorContainer---hideListContainer"}},977:function(e,t,n){e.exports={"green-tint":"#88af8e","blue-tint":"#024279","active-button":"#00746b",mainTint:"#024279",activeButton:"#00746b",MediaOption:"MediaOptions---MediaOption",header:"MediaOptions---header",closeBtn:"MediaOptions---closeBtn"}},984:function(e,t,n){e.exports={Resizer:"resizerStyle---Resizer",horizontal:"resizerStyle---horizontal",vertical:"resizerStyle---vertical",disabled:"resizerStyle---disabled"}},999:function(e,t,n){e.exports={button_group_menu:"textDetailHeading---button_group_menu"}}}]);